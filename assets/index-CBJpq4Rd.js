var Kk=Object.defineProperty;var zx=s=>{throw TypeError(s)};var Xk=(s,e,t)=>e in s?Kk(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var kt=(s,e,t)=>Xk(s,typeof e!="symbol"?e+"":e,t),g5=(s,e,t)=>e.has(s)||zx("Cannot "+t);var f=(s,e,t)=>(g5(s,e,"read from private field"),t?t.call(s):e.get(s)),B=(s,e,t)=>e.has(s)?zx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),R=(s,e,t,n)=>(g5(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),U=(s,e,t)=>(g5(s,e,"access private method"),t);var hs=(s,e,t,n)=>({set _(r){R(s,e,r,t)},get _(){return f(s,e,n)}});function Jk(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var v8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Qk(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var r=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return s[n]}})}),t}var m5={exports:{}},Im={},v5={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function Zk(){if(Ux)return Yt;Ux=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function y(G){return G===null||typeof G!="object"?null:(G=m&&G[m]||G["@@iterator"],typeof G=="function"?G:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function C(G,N,j){this.props=G,this.context=N,this.refs=S,this.updater=j||v}C.prototype.isReactComponent={},C.prototype.setState=function(G,N){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,N,"setState")},C.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function k(){}k.prototype=C.prototype;function T(G,N,j){this.props=G,this.context=N,this.refs=S,this.updater=j||v}var M=T.prototype=new k;M.constructor=T,x(M,C.prototype),M.isPureReactComponent=!0;var H=Array.isArray,X=Object.prototype.hasOwnProperty,he={current:null},ne={key:!0,ref:!0,__self:!0,__source:!0};function Z(G,N,j){var Y,se={},oe=null,de=null;if(N!=null)for(Y in N.ref!==void 0&&(de=N.ref),N.key!==void 0&&(oe=""+N.key),N)X.call(N,Y)&&!ne.hasOwnProperty(Y)&&(se[Y]=N[Y]);var be=arguments.length-2;if(be===1)se.children=j;else if(1<be){for(var Ae=Array(be),qe=0;qe<be;qe++)Ae[qe]=arguments[qe+2];se.children=Ae}if(G&&G.defaultProps)for(Y in be=G.defaultProps,be)se[Y]===void 0&&(se[Y]=be[Y]);return{$$typeof:s,type:G,key:oe,ref:de,props:se,_owner:he.current}}function fe(G,N){return{$$typeof:s,type:G.type,key:N,ref:G.ref,props:G.props,_owner:G._owner}}function Se(G){return typeof G=="object"&&G!==null&&G.$$typeof===s}function q(G){var N={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(j){return N[j]})}var V=/\/+/g;function ue(G,N){return typeof G=="object"&&G!==null&&G.key!=null?q(""+G.key):N.toString(36)}function re(G,N,j,Y,se){var oe=typeof G;(oe==="undefined"||oe==="boolean")&&(G=null);var de=!1;if(G===null)de=!0;else switch(oe){case"string":case"number":de=!0;break;case"object":switch(G.$$typeof){case s:case e:de=!0}}if(de)return de=G,se=se(de),G=Y===""?"."+ue(de,0):Y,H(se)?(j="",G!=null&&(j=G.replace(V,"$&/")+"/"),re(se,N,j,"",function(qe){return qe})):se!=null&&(Se(se)&&(se=fe(se,j+(!se.key||de&&de.key===se.key?"":(""+se.key).replace(V,"$&/")+"/")+G)),N.push(se)),1;if(de=0,Y=Y===""?".":Y+":",H(G))for(var be=0;be<G.length;be++){oe=G[be];var Ae=Y+ue(oe,be);de+=re(oe,N,j,Ae,se)}else if(Ae=y(G),typeof Ae=="function")for(G=Ae.call(G),be=0;!(oe=G.next()).done;)oe=oe.value,Ae=Y+ue(oe,be++),de+=re(oe,N,j,Ae,se);else if(oe==="object")throw N=String(G),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return de}function Ee(G,N,j){if(G==null)return G;var Y=[],se=0;return re(G,Y,"","",function(oe){return N.call(j,oe,se++)}),Y}function ce(G){if(G._status===-1){var N=G._result;N=N(),N.then(function(j){(G._status===0||G._status===-1)&&(G._status=1,G._result=j)},function(j){(G._status===0||G._status===-1)&&(G._status=2,G._result=j)}),G._status===-1&&(G._status=0,G._result=N)}if(G._status===1)return G._result.default;throw G._result}var me={current:null},ae={transition:null},te={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:ae,ReactCurrentOwner:he};function J(){throw Error("act(...) is not supported in production builds of React.")}return Yt.Children={map:Ee,forEach:function(G,N,j){Ee(G,function(){N.apply(this,arguments)},j)},count:function(G){var N=0;return Ee(G,function(){N++}),N},toArray:function(G){return Ee(G,function(N){return N})||[]},only:function(G){if(!Se(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Yt.Component=C,Yt.Fragment=t,Yt.Profiler=r,Yt.PureComponent=T,Yt.StrictMode=n,Yt.Suspense=c,Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Yt.act=J,Yt.cloneElement=function(G,N,j){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var Y=x({},G.props),se=G.key,oe=G.ref,de=G._owner;if(N!=null){if(N.ref!==void 0&&(oe=N.ref,de=he.current),N.key!==void 0&&(se=""+N.key),G.type&&G.type.defaultProps)var be=G.type.defaultProps;for(Ae in N)X.call(N,Ae)&&!ne.hasOwnProperty(Ae)&&(Y[Ae]=N[Ae]===void 0&&be!==void 0?be[Ae]:N[Ae])}var Ae=arguments.length-2;if(Ae===1)Y.children=j;else if(1<Ae){be=Array(Ae);for(var qe=0;qe<Ae;qe++)be[qe]=arguments[qe+2];Y.children=be}return{$$typeof:s,type:G.type,key:se,ref:oe,props:Y,_owner:de}},Yt.createContext=function(G){return G={$$typeof:a,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:i,_context:G},G.Consumer=G},Yt.createElement=Z,Yt.createFactory=function(G){var N=Z.bind(null,G);return N.type=G,N},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(G){return{$$typeof:l,render:G}},Yt.isValidElement=Se,Yt.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:ce}},Yt.memo=function(G,N){return{$$typeof:h,type:G,compare:N===void 0?null:N}},Yt.startTransition=function(G){var N=ae.transition;ae.transition={};try{G()}finally{ae.transition=N}},Yt.unstable_act=J,Yt.useCallback=function(G,N){return me.current.useCallback(G,N)},Yt.useContext=function(G){return me.current.useContext(G)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(G){return me.current.useDeferredValue(G)},Yt.useEffect=function(G,N){return me.current.useEffect(G,N)},Yt.useId=function(){return me.current.useId()},Yt.useImperativeHandle=function(G,N,j){return me.current.useImperativeHandle(G,N,j)},Yt.useInsertionEffect=function(G,N){return me.current.useInsertionEffect(G,N)},Yt.useLayoutEffect=function(G,N){return me.current.useLayoutEffect(G,N)},Yt.useMemo=function(G,N){return me.current.useMemo(G,N)},Yt.useReducer=function(G,N,j){return me.current.useReducer(G,N,j)},Yt.useRef=function(G){return me.current.useRef(G)},Yt.useState=function(G){return me.current.useState(G)},Yt.useSyncExternalStore=function(G,N,j){return me.current.useSyncExternalStore(G,N,j)},Yt.useTransition=function(){return me.current.useTransition()},Yt.version="18.3.1",Yt}var qx;function a_(){return qx||(qx=1,v5.exports=Zk()),v5.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx;function eC(){if(Hx)return Im;Hx=1;var s=a_(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,h){var d,m={},y=null,v=null;h!==void 0&&(y=""+h),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(v=c.ref);for(d in c)n.call(c,d)&&!i.hasOwnProperty(d)&&(m[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)m[d]===void 0&&(m[d]=c[d]);return{$$typeof:e,type:l,key:y,ref:v,props:m,_owner:r.current}}return Im.Fragment=t,Im.jsx=a,Im.jsxs=a,Im}var $x;function tC(){return $x||($x=1,m5.exports=eC()),m5.exports}var Q=tC(),He=a_();const t3=s_(He),nC=Jk({__proto__:null,default:t3},[He]);var Bv={},y5={exports:{}},Fs={},w5={exports:{}},b5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function rC(){return Wx||(Wx=1,function(s){function e(ae,te){var J=ae.length;ae.push(te);e:for(;0<J;){var G=J-1>>>1,N=ae[G];if(0<r(N,te))ae[G]=te,ae[J]=N,J=G;else break e}}function t(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var te=ae[0],J=ae.pop();if(J!==te){ae[0]=J;e:for(var G=0,N=ae.length,j=N>>>1;G<j;){var Y=2*(G+1)-1,se=ae[Y],oe=Y+1,de=ae[oe];if(0>r(se,J))oe<N&&0>r(de,se)?(ae[G]=de,ae[oe]=J,G=oe):(ae[G]=se,ae[Y]=J,G=Y);else if(oe<N&&0>r(de,J))ae[G]=de,ae[oe]=J,G=oe;else break e}}return te}function r(ae,te){var J=ae.sortIndex-te.sortIndex;return J!==0?J:ae.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();s.unstable_now=function(){return a.now()-l}}var c=[],h=[],d=1,m=null,y=3,v=!1,x=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ae){for(var te=t(h);te!==null;){if(te.callback===null)n(h);else if(te.startTime<=ae)n(h),te.sortIndex=te.expirationTime,e(c,te);else break;te=t(h)}}function H(ae){if(S=!1,M(ae),!x)if(t(c)!==null)x=!0,ce(X);else{var te=t(h);te!==null&&me(H,te.startTime-ae)}}function X(ae,te){x=!1,S&&(S=!1,k(Z),Z=-1),v=!0;var J=y;try{for(M(te),m=t(c);m!==null&&(!(m.expirationTime>te)||ae&&!q());){var G=m.callback;if(typeof G=="function"){m.callback=null,y=m.priorityLevel;var N=G(m.expirationTime<=te);te=s.unstable_now(),typeof N=="function"?m.callback=N:m===t(c)&&n(c),M(te)}else n(c);m=t(c)}if(m!==null)var j=!0;else{var Y=t(h);Y!==null&&me(H,Y.startTime-te),j=!1}return j}finally{m=null,y=J,v=!1}}var he=!1,ne=null,Z=-1,fe=5,Se=-1;function q(){return!(s.unstable_now()-Se<fe)}function V(){if(ne!==null){var ae=s.unstable_now();Se=ae;var te=!0;try{te=ne(!0,ae)}finally{te?ue():(he=!1,ne=null)}}else he=!1}var ue;if(typeof T=="function")ue=function(){T(V)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Ee=re.port2;re.port1.onmessage=V,ue=function(){Ee.postMessage(null)}}else ue=function(){C(V,0)};function ce(ae){ne=ae,he||(he=!0,ue())}function me(ae,te){Z=C(function(){ae(s.unstable_now())},te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ae){ae.callback=null},s.unstable_continueExecution=function(){x||v||(x=!0,ce(X))},s.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<ae?Math.floor(1e3/ae):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return t(c)},s.unstable_next=function(ae){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var J=y;y=te;try{return ae()}finally{y=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ae,te){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var J=y;y=ae;try{return te()}finally{y=J}},s.unstable_scheduleCallback=function(ae,te,J){var G=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?G+J:G):J=G,ae){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=J+N,ae={id:d++,callback:te,priorityLevel:ae,startTime:J,expirationTime:N,sortIndex:-1},J>G?(ae.sortIndex=J,e(h,ae),t(c)===null&&ae===t(h)&&(S?(k(Z),Z=-1):S=!0,me(H,J-G))):(ae.sortIndex=N,e(c,ae),x||v||(x=!0,ce(X))),ae},s.unstable_shouldYield=q,s.unstable_wrapCallback=function(ae){var te=y;return function(){var J=y;y=te;try{return ae.apply(this,arguments)}finally{y=J}}}}(b5)),b5}var Gx;function iC(){return Gx||(Gx=1,w5.exports=rC()),w5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function sC(){if(Vx)return Fs;Vx=1;var s=a_(),e=iC();function t(o){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function i(o,u){a(o,u),a(o+"Capture",u)}function a(o,u){for(r[o]=u,o=0;o<u.length;o++)n.add(u[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function y(o){return c.call(m,o)?!0:c.call(d,o)?!1:h.test(o)?m[o]=!0:(d[o]=!0,!1)}function v(o,u,p,w){if(p!==null&&p.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return w?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function x(o,u,p,w){if(u===null||typeof u>"u"||v(o,u,p,w))return!0;if(w)return!1;if(p!==null)switch(p.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function S(o,u,p,w,A,L,D){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=w,this.attributeNamespace=A,this.mustUseProperty=p,this.propertyName=o,this.type=u,this.sanitizeURL=L,this.removeEmptyString=D}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new S(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var u=o[0];C[u]=new S(u,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new S(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new S(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new S(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new S(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new S(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new S(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new S(o,5,!1,o.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function T(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var u=o.replace(k,T);C[u]=new S(u,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var u=o.replace(k,T);C[u]=new S(u,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var u=o.replace(k,T);C[u]=new S(u,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new S(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new S(o,1,!1,o.toLowerCase(),null,!0,!0)});function M(o,u,p,w){var A=C.hasOwnProperty(u)?C[u]:null;(A!==null?A.type!==0:w||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(x(u,p,A,w)&&(p=null),w||A===null?y(u)&&(p===null?o.removeAttribute(u):o.setAttribute(u,""+p)):A.mustUseProperty?o[A.propertyName]=p===null?A.type===3?!1:"":p:(u=A.attributeName,w=A.attributeNamespace,p===null?o.removeAttribute(u):(A=A.type,p=A===3||A===4&&p===!0?"":""+p,w?o.setAttributeNS(w,u,p):o.setAttribute(u,p))))}var H=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),he=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),q=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),ae=Symbol.iterator;function te(o){return o===null||typeof o!="object"?null:(o=ae&&o[ae]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,G;function N(o){if(G===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);G=u&&u[1]||""}return`
`+G+o}var j=!1;function Y(o,u){if(!o||j)return"";j=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Re){var w=Re}Reflect.construct(o,[],u)}else{try{u.call()}catch(Re){w=Re}o.call(u.prototype)}else{try{throw Error()}catch(Re){w=Re}o()}}catch(Re){if(Re&&w&&typeof Re.stack=="string"){for(var A=Re.stack.split(`
`),L=w.stack.split(`
`),D=A.length-1,le=L.length-1;1<=D&&0<=le&&A[D]!==L[le];)le--;for(;1<=D&&0<=le;D--,le--)if(A[D]!==L[le]){if(D!==1||le!==1)do if(D--,le--,0>le||A[D]!==L[le]){var ve=`
`+A[D].replace(" at new "," at ");return o.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",o.displayName)),ve}while(1<=D&&0<=le);break}}}finally{j=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?N(o):""}function se(o){switch(o.tag){case 5:return N(o.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return o=Y(o.type,!1),o;case 11:return o=Y(o.type.render,!1),o;case 1:return o=Y(o.type,!0),o;default:return""}}function oe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ne:return"Fragment";case he:return"Portal";case fe:return"Profiler";case Z:return"StrictMode";case ue:return"Suspense";case re:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case q:return(o.displayName||"Context")+".Consumer";case Se:return(o._context.displayName||"Context")+".Provider";case V:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ee:return u=o.displayName||null,u!==null?u:oe(o.type)||"Memo";case ce:u=o._payload,o=o._init;try{return oe(o(u))}catch{}}return null}function de(o){var u=o.type;switch(o.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=u.render,o=o.displayName||o.name||"",u.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(u);case 8:return u===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function be(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ae(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function qe(o){var u=Ae(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),w=""+o[u];if(!o.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,L=p.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return A.call(this)},set:function(D){w=""+D,L.call(this,D)}}),Object.defineProperty(o,u,{enumerable:p.enumerable}),{getValue:function(){return w},setValue:function(D){w=""+D},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function $e(o){o._valueTracker||(o._valueTracker=qe(o))}function De(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var p=u.getValue(),w="";return o&&(w=Ae(o)?o.checked?"true":"false":o.value),o=w,o!==p?(u.setValue(o),!0):!1}function Be(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function rt(o,u){var p=u.checked;return J({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function Te(o,u){var p=u.defaultValue==null?"":u.defaultValue,w=u.checked!=null?u.checked:u.defaultChecked;p=be(u.value!=null?u.value:p),o._wrapperState={initialChecked:w,initialValue:p,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function ee(o,u){u=u.checked,u!=null&&M(o,"checked",u,!1)}function Ke(o,u){ee(o,u);var p=be(u.value),w=u.type;if(p!=null)w==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(w==="submit"||w==="reset"){o.removeAttribute("value");return}u.hasOwnProperty("value")?ze(o,u.type,p):u.hasOwnProperty("defaultValue")&&ze(o,u.type,be(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(o.defaultChecked=!!u.defaultChecked)}function Ze(o,u,p){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var w=u.type;if(!(w!=="submit"&&w!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+o._wrapperState.initialValue,p||u===o.value||(o.value=u),o.defaultValue=u}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function ze(o,u,p){(u!=="number"||Be(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var We=Array.isArray;function Je(o,u,p,w){if(o=o.options,u){u={};for(var A=0;A<p.length;A++)u["$"+p[A]]=!0;for(p=0;p<o.length;p++)A=u.hasOwnProperty("$"+o[p].value),o[p].selected!==A&&(o[p].selected=A),A&&w&&(o[p].defaultSelected=!0)}else{for(p=""+be(p),u=null,A=0;A<o.length;A++){if(o[A].value===p){o[A].selected=!0,w&&(o[A].defaultSelected=!0);return}u!==null||o[A].disabled||(u=o[A])}u!==null&&(u.selected=!0)}}function et(o,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},u,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function gt(o,u){var p=u.value;if(p==null){if(p=u.children,u=u.defaultValue,p!=null){if(u!=null)throw Error(t(92));if(We(p)){if(1<p.length)throw Error(t(93));p=p[0]}u=p}u==null&&(u=""),p=u}o._wrapperState={initialValue:be(p)}}function Nt(o,u){var p=be(u.value),w=be(u.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),u.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),w!=null&&(o.defaultValue=""+w)}function jt(o){var u=o.textContent;u===o._wrapperState.initialValue&&u!==""&&u!==null&&(o.value=u)}function Ht(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jt(o,u){return o==null||o==="http://www.w3.org/1999/xhtml"?Ht(u):o==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var on,Lt=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,p,w,A){MSApp.execUnsafeLocalFunction(function(){return o(u,p,w,A)})}:o}(function(o,u){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=u;else{for(on=on||document.createElement("div"),on.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=on.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}});function zt(o,u){if(u){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=u;return}}o.textContent=u}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$r=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(o){$r.forEach(function(u){u=u+o.charAt(0).toUpperCase()+o.substring(1),it[u]=it[o]})});function en(o,u,p){return u==null||typeof u=="boolean"||u===""?"":p||typeof u!="number"||u===0||it.hasOwnProperty(o)&&it[o]?(""+u).trim():u+"px"}function bs(o,u){o=o.style;for(var p in u)if(u.hasOwnProperty(p)){var w=p.indexOf("--")===0,A=en(p,u[p],w);p==="float"&&(p="cssFloat"),w?o.setProperty(p,A):o[p]=A}}var An=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pn(o,u){if(u){if(An[o]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function _s(o,u){if(o.indexOf("-")===-1)return typeof u.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rn=null;function Qa(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Mn=null,Wr=null,Si=null;function zn(o){if(o=Fc(o)){if(typeof Mn!="function")throw Error(t(280));var u=o.stateNode;u&&(u=pd(u),Mn(o.stateNode,o.type,u))}}function It(o){Wr?Si?Si.push(o):Si=[o]:Wr=o}function ln(){if(Wr){var o=Wr,u=Si;if(Si=Wr=null,zn(o),u)for(o=0;o<u.length;o++)zn(u[o])}}function Wo(o,u){return o(u)}function Lr(){}var xs=!1;function Gs(o,u,p){if(xs)return o(u,p);xs=!0;try{return Wo(o,u,p)}finally{xs=!1,(Wr!==null||Si!==null)&&(Lr(),ln())}}function _t(o,u){var p=o.stateNode;if(p===null)return null;var w=pd(p);if(w===null)return null;p=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(o=o.type,w=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!w;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(t(231,u,typeof p));return p}var Qi=!1;if(l)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{Qi=!1}function ki(o,u,p,w,A,L,D,le,ve){var Re=Array.prototype.slice.call(arguments,3);try{u.apply(p,Re)}catch(Ye){this.onError(Ye)}}var Un=!1,qn=null,Gr=!1,Go=null,Za={onError:function(o){Un=!0,qn=o}};function Vs(o,u,p,w,A,L,D,le,ve){Un=!1,qn=null,ki.apply(Za,arguments)}function Ys(o,u,p,w,A,L,D,le,ve){if(Vs.apply(this,arguments),Un){if(Un){var Re=qn;Un=!1,qn=null}else throw Error(t(198));Gr||(Gr=!0,Go=Re)}}function Or(o){var u=o,p=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(p=u.return),o=u.return;while(o)}return u.tag===3?p:null}function Ks(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function Zi(o){if(Or(o)!==o)throw Error(t(188))}function Sa(o){var u=o.alternate;if(!u){if(u=Or(o),u===null)throw Error(t(188));return u!==o?null:o}for(var p=o,w=u;;){var A=p.return;if(A===null)break;var L=A.alternate;if(L===null){if(w=A.return,w!==null){p=w;continue}break}if(A.child===L.child){for(L=A.child;L;){if(L===p)return Zi(A),o;if(L===w)return Zi(A),u;L=L.sibling}throw Error(t(188))}if(p.return!==w.return)p=A,w=L;else{for(var D=!1,le=A.child;le;){if(le===p){D=!0,p=A,w=L;break}if(le===w){D=!0,w=A,p=L;break}le=le.sibling}if(!D){for(le=L.child;le;){if(le===p){D=!0,p=L,w=A;break}if(le===w){D=!0,w=L,p=A;break}le=le.sibling}if(!D)throw Error(t(189))}}if(p.alternate!==w)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?o:u}function Vo(o){return o=Sa(o),o!==null?Ul(o):null}function Ul(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var u=Ul(o);if(u!==null)return u;o=o.sibling}return null}var ql=e.unstable_scheduleCallback,Hl=e.unstable_cancelCallback,ac=e.unstable_shouldYield,Kf=e.unstable_requestPaint,Hn=e.unstable_now,dm=e.unstable_getCurrentPriorityLevel,Yo=e.unstable_ImmediatePriority,Vh=e.unstable_UserBlockingPriority,oc=e.unstable_NormalPriority,Yh=e.unstable_LowPriority,Xf=e.unstable_IdlePriority,$l=null,As=null;function lc(o){if(As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot($l,o,void 0,(o.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:Qf,rr=Math.log,Jf=Math.LN2;function Qf(o){return o>>>=0,o===0?32:31-(rr(o)/Jf|0)|0}var Wl=64,Ko=4194304;function Gl(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ci(o,u){var p=o.pendingLanes;if(p===0)return 0;var w=0,A=o.suspendedLanes,L=o.pingedLanes,D=p&268435455;if(D!==0){var le=D&~A;le!==0?w=Gl(le):(L&=D,L!==0&&(w=Gl(L)))}else D=p&~A,D!==0?w=Gl(D):L!==0&&(w=Gl(L));if(w===0)return 0;if(u!==0&&u!==w&&(u&A)===0&&(A=w&-w,L=u&-u,A>=L||A===16&&(L&4194240)!==0))return u;if((w&4)!==0&&(w|=p&16),u=o.entangledLanes,u!==0)for(o=o.entanglements,u&=w;0<u;)p=31-es(u),A=1<<p,w|=o[p],u&=~A;return w}function uc(o,u){switch(o){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Li(o,u){for(var p=o.suspendedLanes,w=o.pingedLanes,A=o.expirationTimes,L=o.pendingLanes;0<L;){var D=31-es(L),le=1<<D,ve=A[D];ve===-1?((le&p)===0||(le&w)!==0)&&(A[D]=uc(le,u)):ve<=u&&(o.expiredLanes|=le),L&=~le}}function Vl(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Kh(){var o=Wl;return Wl<<=1,(Wl&4194240)===0&&(Wl=64),o}function Xh(o){for(var u=[],p=0;31>p;p++)u.push(o);return u}function Xo(o,u,p){o.pendingLanes|=u,u!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,u=31-es(u),o[u]=p}function fm(o,u){var p=o.pendingLanes&~u;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=u,o.mutableReadLanes&=u,o.entangledLanes&=u,u=o.entanglements;var w=o.eventTimes;for(o=o.expirationTimes;0<p;){var A=31-es(p),L=1<<A;u[A]=0,w[A]=-1,o[A]=-1,p&=~L}}function cc(o,u){var p=o.entangledLanes|=u;for(o=o.entanglements;p;){var w=31-es(p),A=1<<w;A&u|o[w]&u&&(o[w]|=u),p&=~A}}var un=0;function hc(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Zf,Jh,ep,Ea,Yl,Jo=!1,Kl=[],$n=null,ka=null,Xs=null,Et=new Map,Xl=new Map,Ca=[],La="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qh(o,u){switch(o){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":Et.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(u.pointerId)}}function Qo(o,u,p,w,A,L){return o===null||o.nativeEvent!==L?(o={blockedOn:u,domEventName:p,eventSystemFlags:w,nativeEvent:L,targetContainers:[A]},u!==null&&(u=Fc(u),u!==null&&Jh(u)),o):(o.eventSystemFlags|=w,u=o.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),o)}function dc(o,u,p,w,A){switch(u){case"focusin":return $n=Qo($n,o,u,p,w,A),!0;case"dragenter":return ka=Qo(ka,o,u,p,w,A),!0;case"mouseover":return Xs=Qo(Xs,o,u,p,w,A),!0;case"pointerover":var L=A.pointerId;return Et.set(L,Qo(Et.get(L)||null,o,u,p,w,A)),!0;case"gotpointercapture":return L=A.pointerId,Xl.set(L,Qo(Xl.get(L)||null,o,u,p,w,A)),!0}return!1}function fc(o){var u=ul(o.target);if(u!==null){var p=Or(u);if(p!==null){if(u=p.tag,u===13){if(u=Ks(p),u!==null){o.blockedOn=u,Yl(o.priority,function(){ep(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function pc(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var p=mc(o.domEventName,o.eventSystemFlags,u[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var w=new p.constructor(p.type,p);rn=w,p.target.dispatchEvent(w),rn=null}else return u=Fc(p),u!==null&&Jh(u),o.blockedOn=p,!1;u.shift()}return!0}function tp(o,u,p){pc(o)&&p.delete(u)}function pm(){Jo=!1,$n!==null&&pc($n)&&($n=null),ka!==null&&pc(ka)&&(ka=null),Xs!==null&&pc(Xs)&&(Xs=null),Et.forEach(tp),Xl.forEach(tp)}function eo(o,u){o.blockedOn===u&&(o.blockedOn=null,Jo||(Jo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pm)))}function Js(o){function u(A){return eo(A,o)}if(0<Kl.length){eo(Kl[0],o);for(var p=1;p<Kl.length;p++){var w=Kl[p];w.blockedOn===o&&(w.blockedOn=null)}}for($n!==null&&eo($n,o),ka!==null&&eo(ka,o),Xs!==null&&eo(Xs,o),Et.forEach(u),Xl.forEach(u),p=0;p<Ca.length;p++)w=Ca[p],w.blockedOn===o&&(w.blockedOn=null);for(;0<Ca.length&&(p=Ca[0],p.blockedOn===null);)fc(p),p.blockedOn===null&&Ca.shift()}var ts=H.ReactCurrentBatchConfig,gc=!0;function Jl(o,u,p,w){var A=un,L=ts.transition;ts.transition=null;try{un=1,Zo(o,u,p,w)}finally{un=A,ts.transition=L}}function Zh(o,u,p,w){var A=un,L=ts.transition;ts.transition=null;try{un=4,Zo(o,u,p,w)}finally{un=A,ts.transition=L}}function Zo(o,u,p,w){if(gc){var A=mc(o,u,p,w);if(A===null)hd(o,u,w,Ql,p),Qh(o,w);else if(dc(A,o,u,p,w))w.stopPropagation();else if(Qh(o,w),u&4&&-1<La.indexOf(o)){for(;A!==null;){var L=Fc(A);if(L!==null&&Zf(L),L=mc(o,u,p,w),L===null&&hd(o,u,w,Ql,p),L===A)break;A=L}A!==null&&w.stopPropagation()}else hd(o,u,w,null,p)}}var Ql=null;function mc(o,u,p,w){if(Ql=null,o=Qa(w),o=ul(o),o!==null)if(u=Or(o),u===null)o=null;else if(p=u.tag,p===13){if(o=Ks(u),o!==null)return o;o=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null);return Ql=o,null}function ed(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dm()){case Yo:return 1;case Vh:return 4;case oc:case Yh:return 16;case Xf:return 536870912;default:return 16}default:return 16}}var Qs=null,Ss=null,Es=null;function np(){if(Es)return Es;var o,u=Ss,p=u.length,w,A="value"in Qs?Qs.value:Qs.textContent,L=A.length;for(o=0;o<p&&u[o]===A[o];o++);var D=p-o;for(w=1;w<=D&&u[p-w]===A[L-w];w++);return Es=A.slice(o,1<w?1-w:void 0)}function Zs(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Pi(){return!0}function vc(){return!1}function mr(o){function u(p,w,A,L,D){this._reactName=p,this._targetInst=A,this.type=w,this.nativeEvent=L,this.target=D,this.currentTarget=null;for(var le in o)o.hasOwnProperty(le)&&(p=o[le],this[le]=p?p(L):L[le]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Pi:vc,this.isPropagationStopped=vc,this}return J(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),u}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=mr(el),Zl=J({},el,{view:0,detail:0}),td=mr(Zl),eu,yc,Pa,nl=J({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:at,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Pa&&(Pa&&o.type==="mousemove"?(eu=o.screenX-Pa.screenX,yc=o.screenY-Pa.screenY):yc=eu=0,Pa=o),eu)},movementY:function(o){return"movementY"in o?o.movementY:yc}}),wc=mr(nl),rp=J({},nl,{dataTransfer:0}),gm=mr(rp),bc=J({},Zl,{relatedTarget:0}),to=mr(bc),nd=J({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),rl=mr(nd),rd=J({},el,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),_=mr(rd),O=J({},el,{data:0}),ie=mr(O),pe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ge(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Oe[o])?!!u[o]:!1}function at(){return Ge}var bt=J({},Zl,{key:function(o){if(o.key){var u=pe[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Zs(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?ke[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:at,charCode:function(o){return o.type==="keypress"?Zs(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Zs(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Dt=mr(bt),Mt=J({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qt=mr(Mt),Wn=J({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:at}),Jn=mr(Wn),ur=J({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vr=mr(ur),Pr=J({},nl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ea=mr(Pr),ns=[9,13,27,32],ks=l&&"CompositionEvent"in window,il=null;l&&"documentMode"in document&&(il=document.documentMode);var id=l&&"TextEvent"in window&&!il,_c=l&&(!ks||il&&8<il&&11>=il),tu=" ",xc=!1;function Ac(o,u){switch(o){case"keyup":return ns.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nu(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Qn=!1;function Sc(o,u){switch(o){case"compositionend":return nu(u);case"keypress":return u.which!==32?null:(xc=!0,tu);case"textInput":return o=u.data,o===tu&&xc?null:o;default:return null}}function Ec(o,u){if(Qn)return o==="compositionend"||!ks&&Ac(o,u)?(o=np(),Es=Ss=Qs=null,Qn=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return _c&&u.locale!=="ko"?null:u.data;default:return null}}var kc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cc(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!kc[o.type]:u==="textarea"}function ci(o,u,p,w){It(w),u=op(u,"onChange"),0<u.length&&(p=new tl("onChange","change",null,p,w),o.push({event:p,listeners:u}))}var ru=null,no=null;function ip(o){ud(o,0)}function hi(o){var u=du(o);if(De(u))return o}function Lc(o,u){if(o==="change")return u}var sd=!1;if(l){var Pc;if(l){var Na="oninput"in document;if(!Na){var sl=document.createElement("div");sl.setAttribute("oninput","return;"),Na=typeof sl.oninput=="function"}Pc=Na}else Pc=!1;sd=Pc&&(!document.documentMode||9<document.documentMode)}function di(){ru&&(ru.detachEvent("onpropertychange",Yr),no=ru=null)}function Yr(o){if(o.propertyName==="value"&&hi(no)){var u=[];ci(u,no,o,Qa(o)),Gs(ip,u)}}function al(o,u,p){o==="focusin"?(di(),ru=u,no=p,ru.attachEvent("onpropertychange",Yr)):o==="focusout"&&di()}function ro(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return hi(no)}function io(o,u){if(o==="click")return hi(u)}function Nc(o,u){if(o==="input"||o==="change")return hi(u)}function so(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var cn=typeof Object.is=="function"?Object.is:so;function ao(o,u){if(cn(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var p=Object.keys(o),w=Object.keys(u);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var A=p[w];if(!c.call(u,A)||!cn(o[A],u[A]))return!1}return!0}function Kr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function rs(o,u){var p=Kr(o);o=0;for(var w;p;){if(p.nodeType===3){if(w=o+p.textContent.length,o<=u&&w>=u)return{node:p,offset:u-o};o=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Kr(p)}}function iu(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?iu(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function ad(){for(var o=window,u=Be();u instanceof o.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)o=u.contentWindow;else break;u=Be(o.document)}return u}function su(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}function au(o){var u=ad(),p=o.focusedElem,w=o.selectionRange;if(u!==p&&p&&p.ownerDocument&&iu(p.ownerDocument.documentElement,p)){if(w!==null&&su(p)){if(u=w.start,o=w.end,o===void 0&&(o=u),"selectionStart"in p)p.selectionStart=u,p.selectionEnd=Math.min(o,p.value.length);else if(o=(u=p.ownerDocument||document)&&u.defaultView||window,o.getSelection){o=o.getSelection();var A=p.textContent.length,L=Math.min(w.start,A);w=w.end===void 0?L:Math.min(w.end,A),!o.extend&&L>w&&(A=w,w=L,L=A),A=rs(p,L);var D=rs(p,w);A&&D&&(o.rangeCount!==1||o.anchorNode!==A.node||o.anchorOffset!==A.offset||o.focusNode!==D.node||o.focusOffset!==D.offset)&&(u=u.createRange(),u.setStart(A.node,A.offset),o.removeAllRanges(),L>w?(o.addRange(u),o.extend(D.node,D.offset)):(u.setEnd(D.node,D.offset),o.addRange(u)))}}for(u=[],o=p;o=o.parentNode;)o.nodeType===1&&u.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<u.length;p++)o=u[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ou=l&&"documentMode"in document&&11>=document.documentMode,is=null,oo=null,Ta=null,lo=!1;function uo(o,u,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;lo||is==null||is!==Be(w)||(w=is,"selectionStart"in w&&su(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ta&&ao(Ta,w)||(Ta=w,w=op(oo,"onSelect"),0<w.length&&(u=new tl("onSelect","select",null,u,p),o.push({event:u,listeners:w}),u.target=is)))}function ol(o,u){var p={};return p[o.toLowerCase()]=u.toLowerCase(),p["Webkit"+o]="webkit"+u,p["Moz"+o]="moz"+u,p}var Mr={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionend:ol("Transition","TransitionEnd")},Ni={},Sn={};l&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function vn(o){if(Ni[o])return Ni[o];if(!Mr[o])return o;var u=Mr[o],p;for(p in u)if(u.hasOwnProperty(p)&&p in Sn)return Ni[o]=u[p];return o}var Zn=vn("animationend"),cr=vn("animationiteration"),Ra=vn("animationstart"),Tc=vn("transitionend"),lu=new Map,od="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ia(o,u){lu.set(o,u),i(u,[o])}for(var Rc=0;Rc<od.length;Rc++){var fi=od[Rc],Cs=fi.toLowerCase(),sp=fi[0].toUpperCase()+fi.slice(1);Ia(Cs,"on"+sp)}Ia(Zn,"onAnimationEnd"),Ia(cr,"onAnimationIteration"),Ia(Ra,"onAnimationStart"),Ia("dblclick","onDoubleClick"),Ia("focusin","onFocus"),Ia("focusout","onBlur"),Ia(Tc,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ll));function ld(o,u,p){var w=o.type||"unknown-event";o.currentTarget=p,Ys(w,u,void 0,o),o.currentTarget=null}function ud(o,u){u=(u&4)!==0;for(var p=0;p<o.length;p++){var w=o[p],A=w.event;w=w.listeners;e:{var L=void 0;if(u)for(var D=w.length-1;0<=D;D--){var le=w[D],ve=le.instance,Re=le.currentTarget;if(le=le.listener,ve!==L&&A.isPropagationStopped())break e;ld(A,le,Re),L=ve}else for(D=0;D<w.length;D++){if(le=w[D],ve=le.instance,Re=le.currentTarget,le=le.listener,ve!==L&&A.isPropagationStopped())break e;ld(A,le,Re),L=ve}}}if(Gr)throw o=Go,Gr=!1,Go=null,o}function En(o,u){var p=u[Ri];p===void 0&&(p=u[Ri]=new Set);var w=o+"__bubble";p.has(w)||(cd(u,o,2,!1),p.add(w))}function ap(o,u,p){var w=0;u&&(w|=4),cd(p,o,w,u)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function uu(o){if(!o[Ic]){o[Ic]=!0,n.forEach(function(p){p!=="selectionchange"&&(sv.has(p)||ap(p,!1,o),ap(p,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Ic]||(u[Ic]=!0,ap("selectionchange",!1,u))}}function cd(o,u,p,w){switch(ed(u)){case 1:var A=Jl;break;case 4:A=Zh;break;default:A=Zo}p=A.bind(null,u,p,o),A=void 0,!Qi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),w?A!==void 0?o.addEventListener(u,p,{capture:!0,passive:A}):o.addEventListener(u,p,!0):A!==void 0?o.addEventListener(u,p,{passive:A}):o.addEventListener(u,p,!1)}function hd(o,u,p,w,A){var L=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var D=w.tag;if(D===3||D===4){var le=w.stateNode.containerInfo;if(le===A||le.nodeType===8&&le.parentNode===A)break;if(D===4)for(D=w.return;D!==null;){var ve=D.tag;if((ve===3||ve===4)&&(ve=D.stateNode.containerInfo,ve===A||ve.nodeType===8&&ve.parentNode===A))return;D=D.return}for(;le!==null;){if(D=ul(le),D===null)return;if(ve=D.tag,ve===5||ve===6){w=L=D;continue e}le=le.parentNode}}w=w.return}Gs(function(){var Re=L,Ye=Qa(p),Xe=[];e:{var Ve=lu.get(o);if(Ve!==void 0){var lt=tl,ft=o;switch(o){case"keypress":if(Zs(p)===0)break e;case"keydown":case"keyup":lt=Dt;break;case"focusin":ft="focus",lt=to;break;case"focusout":ft="blur",lt=to;break;case"beforeblur":case"afterblur":lt=to;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=gm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Jn;break;case Zn:case cr:case Ra:lt=rl;break;case Tc:lt=Vr;break;case"scroll":lt=td;break;case"wheel":lt=ea;break;case"copy":case"cut":case"paste":lt=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Qt}var mt=(u&4)!==0,br=!mt&&o==="scroll",Pe=mt?Ve!==null?Ve+"Capture":null:Ve;mt=[];for(var _e=Re,Ne;_e!==null;){Ne=_e;var Qe=Ne.stateNode;if(Ne.tag===5&&Qe!==null&&(Ne=Qe,Pe!==null&&(Qe=_t(_e,Pe),Qe!=null&&mt.push(dd(_e,Qe,Ne)))),br)break;_e=_e.return}0<mt.length&&(Ve=new lt(Ve,ft,null,p,Ye),Xe.push({event:Ve,listeners:mt}))}}if((u&7)===0){e:{if(Ve=o==="mouseover"||o==="pointerover",lt=o==="mouseout"||o==="pointerout",Ve&&p!==rn&&(ft=p.relatedTarget||p.fromElement)&&(ul(ft)||ft[Xr]))break e;if((lt||Ve)&&(Ve=Ye.window===Ye?Ye:(Ve=Ye.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,lt?(ft=p.relatedTarget||p.toElement,lt=Re,ft=ft?ul(ft):null,ft!==null&&(br=Or(ft),ft!==br||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(lt=null,ft=Re),lt!==ft)){if(mt=wc,Qe="onMouseLeave",Pe="onMouseEnter",_e="mouse",(o==="pointerout"||o==="pointerover")&&(mt=Qt,Qe="onPointerLeave",Pe="onPointerEnter",_e="pointer"),br=lt==null?Ve:du(lt),Ne=ft==null?Ve:du(ft),Ve=new mt(Qe,_e+"leave",lt,p,Ye),Ve.target=br,Ve.relatedTarget=Ne,Qe=null,ul(Ye)===Re&&(mt=new mt(Pe,_e+"enter",ft,p,Ye),mt.target=Ne,mt.relatedTarget=br,Qe=mt),br=Qe,lt&&ft)t:{for(mt=lt,Pe=ft,_e=0,Ne=mt;Ne;Ne=cu(Ne))_e++;for(Ne=0,Qe=Pe;Qe;Qe=cu(Qe))Ne++;for(;0<_e-Ne;)mt=cu(mt),_e--;for(;0<Ne-_e;)Pe=cu(Pe),Ne--;for(;_e--;){if(mt===Pe||Pe!==null&&mt===Pe.alternate)break t;mt=cu(mt),Pe=cu(Pe)}mt=null}else mt=null;lt!==null&&av(Xe,Ve,lt,mt,!1),ft!==null&&br!==null&&av(Xe,br,ft,mt,!0)}}e:{if(Ve=Re?du(Re):window,lt=Ve.nodeName&&Ve.nodeName.toLowerCase(),lt==="select"||lt==="input"&&Ve.type==="file")var vt=Lc;else if(Cc(Ve))if(sd)vt=Nc;else{vt=ro;var At=al}else(lt=Ve.nodeName)&&lt.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(vt=io);if(vt&&(vt=vt(o,Re))){ci(Xe,vt,p,Ye);break e}At&&At(o,Ve,Re),o==="focusout"&&(At=Ve._wrapperState)&&At.controlled&&Ve.type==="number"&&ze(Ve,"number",Ve.value)}switch(At=Re?du(Re):window,o){case"focusin":(Cc(At)||At.contentEditable==="true")&&(is=At,oo=Re,Ta=null);break;case"focusout":Ta=oo=is=null;break;case"mousedown":lo=!0;break;case"contextmenu":case"mouseup":case"dragend":lo=!1,uo(Xe,p,Ye);break;case"selectionchange":if(ou)break;case"keydown":case"keyup":uo(Xe,p,Ye)}var St;if(ks)e:{switch(o){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else Qn?Ac(o,p)&&(Ot="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ot="onCompositionStart");Ot&&(_c&&p.locale!=="ko"&&(Qn||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Qn&&(St=np()):(Qs=Ye,Ss="value"in Qs?Qs.value:Qs.textContent,Qn=!0)),At=op(Re,Ot),0<At.length&&(Ot=new ie(Ot,o,null,p,Ye),Xe.push({event:Ot,listeners:At}),St?Ot.data=St:(St=nu(p),St!==null&&(Ot.data=St)))),(St=id?Sc(o,p):Ec(o,p))&&(Re=op(Re,"onBeforeInput"),0<Re.length&&(Ye=new ie("onBeforeInput","beforeinput",null,p,Ye),Xe.push({event:Ye,listeners:Re}),Ye.data=St))}ud(Xe,u)})}function dd(o,u,p){return{instance:o,listener:u,currentTarget:p}}function op(o,u){for(var p=u+"Capture",w=[];o!==null;){var A=o,L=A.stateNode;A.tag===5&&L!==null&&(A=L,L=_t(o,p),L!=null&&w.unshift(dd(o,L,A)),L=_t(o,u),L!=null&&w.push(dd(o,L,A))),o=o.return}return w}function cu(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function av(o,u,p,w,A){for(var L=u._reactName,D=[];p!==null&&p!==w;){var le=p,ve=le.alternate,Re=le.stateNode;if(ve!==null&&ve===w)break;le.tag===5&&Re!==null&&(le=Re,A?(ve=_t(p,L),ve!=null&&D.unshift(dd(p,ve,le))):A||(ve=_t(p,L),ve!=null&&D.push(dd(p,ve,le)))),p=p.return}D.length!==0&&o.push({event:u,listeners:D})}var Py=/\r\n?/g,Ny=/\u0000|\uFFFD/g;function ov(o){return(typeof o=="string"?o:""+o).replace(Py,`
`).replace(Ny,"")}function lp(o,u,p){if(u=ov(u),ov(o)!==u&&p)throw Error(t(425))}function Oc(){}var fd=null,hu=null;function mm(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var vm=typeof setTimeout=="function"?setTimeout:void 0,lv=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,Ty=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(o){return uv.resolve(null).then(o).catch(Ry)}:vm;function Ry(o){setTimeout(function(){throw o})}function ym(o,u){var p=u,w=0;do{var A=p.nextSibling;if(o.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(w===0){o.removeChild(A),Js(u);return}w--}else p!=="$"&&p!=="$?"&&p!=="$!"||w++;p=A}while(p);Js(u)}function pi(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return o}function Ls(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return o;u--}else p==="/$"&&u++}o=o.previousSibling}return null}var Ti=Math.random().toString(36).slice(2),Oa="__reactFiber$"+Ti,Mc="__reactProps$"+Ti,Xr="__reactContainer$"+Ti,Ri="__reactEvents$"+Ti,Iy="__reactListeners$"+Ti,Oy="__reactHandles$"+Ti;function ul(o){var u=o[Oa];if(u)return u;for(var p=o.parentNode;p;){if(u=p[Xr]||p[Oa]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(o=Ls(o);o!==null;){if(p=o[Oa])return p;o=Ls(o)}return u}o=p,p=o.parentNode}return null}function Fc(o){return o=o[Oa]||o[Xr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function du(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function pd(o){return o[Mc]||null}var wm=[],co=-1;function ta(o){return{current:o}}function yn(o){0>co||(o.current=wm[co],wm[co]=null,co--)}function _n(o,u){co++,wm[co]=o.current,o.current=u}var cl={},Fr=ta(cl),Ii=ta(!1),fu=cl;function Dc(o,u){var p=o.type.contextTypes;if(!p)return cl;var w=o.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===u)return w.__reactInternalMemoizedMaskedChildContext;var A={},L;for(L in p)A[L]=u[L];return w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=u,o.__reactInternalMemoizedMaskedChildContext=A),A}function Oi(o){return o=o.childContextTypes,o!=null}function up(){yn(Ii),yn(Fr)}function cv(o,u,p){if(Fr.current!==cl)throw Error(t(168));_n(Fr,u),_n(Ii,p)}function bm(o,u,p){var w=o.stateNode;if(u=u.childContextTypes,typeof w.getChildContext!="function")return p;w=w.getChildContext();for(var A in w)if(!(A in u))throw Error(t(108,de(o)||"Unknown",A));return J({},p,w)}function pu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||cl,fu=Fr.current,_n(Fr,o),_n(Ii,Ii.current),!0}function hv(o,u,p){var w=o.stateNode;if(!w)throw Error(t(169));p?(o=bm(o,u,fu),w.__reactInternalMemoizedMergedChildContext=o,yn(Ii),yn(Fr),_n(Fr,o)):yn(Ii),_n(Ii,p)}var ho=null,gd=!1,g=!1;function b(o){ho===null?ho=[o]:ho.push(o)}function E(o){gd=!0,b(o)}function P(){if(!g&&ho!==null){g=!0;var o=0,u=un;try{var p=ho;for(un=1;o<p.length;o++){var w=p[o];do w=w(!0);while(w!==null)}ho=null,gd=!1}catch(A){throw ho!==null&&(ho=ho.slice(o+1)),ql(Yo,P),A}finally{un=u,g=!1}}return null}var I=[],F=0,z=null,$=0,W=[],K=0,ge=null,Ce=1,Le="";function xe(o,u){I[F++]=$,I[F++]=z,z=o,$=u}function Ue(o,u,p){W[K++]=Ce,W[K++]=Le,W[K++]=ge,ge=o;var w=Ce;o=Le;var A=32-es(w)-1;w&=~(1<<A),p+=1;var L=32-es(u)+A;if(30<L){var D=A-A%5;L=(w&(1<<D)-1).toString(32),w>>=D,A-=D,Ce=1<<32-es(u)+A|p<<A|w,Le=L+o}else Ce=1<<L|p<<A|w,Le=o}function Ie(o){o.return!==null&&(xe(o,1),Ue(o,1,0))}function ye(o){for(;o===z;)z=I[--F],I[F]=null,$=I[--F],I[F]=null;for(;o===ge;)ge=W[--K],W[K]=null,Le=W[--K],W[K]=null,Ce=W[--K],W[K]=null}var we=null,Fe=null,Me=!1,je=null;function ot(o,u){var p=za(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=o,u=o.deletions,u===null?(o.deletions=[p],o.flags|=16):u.push(p)}function tt(o,u){switch(o.tag){case 5:var p=o.type;return u=u.nodeType!==1||p.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(o.stateNode=u,we=o,Fe=pi(u.firstChild),!0):!1;case 6:return u=o.pendingProps===""||u.nodeType!==3?null:u,u!==null?(o.stateNode=u,we=o,Fe=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(p=ge!==null?{id:Ce,overflow:Le}:null,o.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},p=za(18,null,null,0),p.stateNode=u,p.return=o,o.child=p,we=o,Fe=null,!0):!1;default:return!1}}function xt(o){return(o.mode&1)!==0&&(o.flags&128)===0}function nt(o){if(Me){var u=Fe;if(u){var p=u;if(!tt(o,u)){if(xt(o))throw Error(t(418));u=pi(p.nextSibling);var w=we;u&&tt(o,u)?ot(w,p):(o.flags=o.flags&-4097|2,Me=!1,we=o)}}else{if(xt(o))throw Error(t(418));o.flags=o.flags&-4097|2,Me=!1,we=o}}}function sn(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;we=o}function an(o){if(o!==we)return!1;if(!Me)return sn(o),Me=!0,!1;var u;if((u=o.tag!==3)&&!(u=o.tag!==5)&&(u=o.type,u=u!=="head"&&u!=="body"&&!mm(o.type,o.memoizedProps)),u&&(u=Fe)){if(xt(o))throw Zt(),Error(t(418));for(;u;)ot(o,u),u=pi(u.nextSibling)}if(sn(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(u===0){Fe=pi(o.nextSibling);break e}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++}o=o.nextSibling}Fe=null}}else Fe=we?pi(o.stateNode.nextSibling):null;return!0}function Zt(){for(var o=Fe;o;)o=pi(o.nextSibling)}function Ut(){Fe=we=null,Me=!1}function wn(o){je===null?je=[o]:je.push(o)}var xn=H.ReactCurrentBatchConfig;function Rt(o,u,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var w=p.stateNode}if(!w)throw Error(t(147,o));var A=w,L=""+o;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===L?u.ref:(u=function(D){var le=A.refs;D===null?delete le[L]:le[L]=D},u._stringRef=L,u)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function Gn(o,u){throw o=Object.prototype.toString.call(u),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o))}function gi(o){var u=o._init;return u(o._payload)}function ir(o){function u(Pe,_e){if(o){var Ne=Pe.deletions;Ne===null?(Pe.deletions=[_e],Pe.flags|=16):Ne.push(_e)}}function p(Pe,_e){if(!o)return null;for(;_e!==null;)u(Pe,_e),_e=_e.sibling;return null}function w(Pe,_e){for(Pe=new Map;_e!==null;)_e.key!==null?Pe.set(_e.key,_e):Pe.set(_e.index,_e),_e=_e.sibling;return Pe}function A(Pe,_e){return Pe=Kc(Pe,_e),Pe.index=0,Pe.sibling=null,Pe}function L(Pe,_e,Ne){return Pe.index=Ne,o?(Ne=Pe.alternate,Ne!==null?(Ne=Ne.index,Ne<_e?(Pe.flags|=2,_e):Ne):(Pe.flags|=2,_e)):(Pe.flags|=1048576,_e)}function D(Pe){return o&&Pe.alternate===null&&(Pe.flags|=2),Pe}function le(Pe,_e,Ne,Qe){return _e===null||_e.tag!==6?(_e=u5(Ne,Pe.mode,Qe),_e.return=Pe,_e):(_e=A(_e,Ne),_e.return=Pe,_e)}function ve(Pe,_e,Ne,Qe){var vt=Ne.type;return vt===ne?Ye(Pe,_e,Ne.props.children,Qe,Ne.key):_e!==null&&(_e.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===ce&&gi(vt)===_e.type)?(Qe=A(_e,Ne.props),Qe.ref=Rt(Pe,_e,Ne),Qe.return=Pe,Qe):(Qe=Tv(Ne.type,Ne.key,Ne.props,null,Pe.mode,Qe),Qe.ref=Rt(Pe,_e,Ne),Qe.return=Pe,Qe)}function Re(Pe,_e,Ne,Qe){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Ne.containerInfo||_e.stateNode.implementation!==Ne.implementation?(_e=c5(Ne,Pe.mode,Qe),_e.return=Pe,_e):(_e=A(_e,Ne.children||[]),_e.return=Pe,_e)}function Ye(Pe,_e,Ne,Qe,vt){return _e===null||_e.tag!==7?(_e=Ad(Ne,Pe.mode,Qe,vt),_e.return=Pe,_e):(_e=A(_e,Ne),_e.return=Pe,_e)}function Xe(Pe,_e,Ne){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=u5(""+_e,Pe.mode,Ne),_e.return=Pe,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case X:return Ne=Tv(_e.type,_e.key,_e.props,null,Pe.mode,Ne),Ne.ref=Rt(Pe,null,_e),Ne.return=Pe,Ne;case he:return _e=c5(_e,Pe.mode,Ne),_e.return=Pe,_e;case ce:var Qe=_e._init;return Xe(Pe,Qe(_e._payload),Ne)}if(We(_e)||te(_e))return _e=Ad(_e,Pe.mode,Ne,null),_e.return=Pe,_e;Gn(Pe,_e)}return null}function Ve(Pe,_e,Ne,Qe){var vt=_e!==null?_e.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return vt!==null?null:le(Pe,_e,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case X:return Ne.key===vt?ve(Pe,_e,Ne,Qe):null;case he:return Ne.key===vt?Re(Pe,_e,Ne,Qe):null;case ce:return vt=Ne._init,Ve(Pe,_e,vt(Ne._payload),Qe)}if(We(Ne)||te(Ne))return vt!==null?null:Ye(Pe,_e,Ne,Qe,null);Gn(Pe,Ne)}return null}function lt(Pe,_e,Ne,Qe,vt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Pe=Pe.get(Ne)||null,le(_e,Pe,""+Qe,vt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case X:return Pe=Pe.get(Qe.key===null?Ne:Qe.key)||null,ve(_e,Pe,Qe,vt);case he:return Pe=Pe.get(Qe.key===null?Ne:Qe.key)||null,Re(_e,Pe,Qe,vt);case ce:var At=Qe._init;return lt(Pe,_e,Ne,At(Qe._payload),vt)}if(We(Qe)||te(Qe))return Pe=Pe.get(Ne)||null,Ye(_e,Pe,Qe,vt,null);Gn(_e,Qe)}return null}function ft(Pe,_e,Ne,Qe){for(var vt=null,At=null,St=_e,Ot=_e=0,ei=null;St!==null&&Ot<Ne.length;Ot++){St.index>Ot?(ei=St,St=null):ei=St.sibling;var gn=Ve(Pe,St,Ne[Ot],Qe);if(gn===null){St===null&&(St=ei);break}o&&St&&gn.alternate===null&&u(Pe,St),_e=L(gn,_e,Ot),At===null?vt=gn:At.sibling=gn,At=gn,St=ei}if(Ot===Ne.length)return p(Pe,St),Me&&xe(Pe,Ot),vt;if(St===null){for(;Ot<Ne.length;Ot++)St=Xe(Pe,Ne[Ot],Qe),St!==null&&(_e=L(St,_e,Ot),At===null?vt=St:At.sibling=St,At=St);return Me&&xe(Pe,Ot),vt}for(St=w(Pe,St);Ot<Ne.length;Ot++)ei=lt(St,Pe,Ot,Ne[Ot],Qe),ei!==null&&(o&&ei.alternate!==null&&St.delete(ei.key===null?Ot:ei.key),_e=L(ei,_e,Ot),At===null?vt=ei:At.sibling=ei,At=ei);return o&&St.forEach(function(Xc){return u(Pe,Xc)}),Me&&xe(Pe,Ot),vt}function mt(Pe,_e,Ne,Qe){var vt=te(Ne);if(typeof vt!="function")throw Error(t(150));if(Ne=vt.call(Ne),Ne==null)throw Error(t(151));for(var At=vt=null,St=_e,Ot=_e=0,ei=null,gn=Ne.next();St!==null&&!gn.done;Ot++,gn=Ne.next()){St.index>Ot?(ei=St,St=null):ei=St.sibling;var Xc=Ve(Pe,St,gn.value,Qe);if(Xc===null){St===null&&(St=ei);break}o&&St&&Xc.alternate===null&&u(Pe,St),_e=L(Xc,_e,Ot),At===null?vt=Xc:At.sibling=Xc,At=Xc,St=ei}if(gn.done)return p(Pe,St),Me&&xe(Pe,Ot),vt;if(St===null){for(;!gn.done;Ot++,gn=Ne.next())gn=Xe(Pe,gn.value,Qe),gn!==null&&(_e=L(gn,_e,Ot),At===null?vt=gn:At.sibling=gn,At=gn);return Me&&xe(Pe,Ot),vt}for(St=w(Pe,St);!gn.done;Ot++,gn=Ne.next())gn=lt(St,Pe,Ot,gn.value,Qe),gn!==null&&(o&&gn.alternate!==null&&St.delete(gn.key===null?Ot:gn.key),_e=L(gn,_e,Ot),At===null?vt=gn:At.sibling=gn,At=gn);return o&&St.forEach(function(Yk){return u(Pe,Yk)}),Me&&xe(Pe,Ot),vt}function br(Pe,_e,Ne,Qe){if(typeof Ne=="object"&&Ne!==null&&Ne.type===ne&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case X:e:{for(var vt=Ne.key,At=_e;At!==null;){if(At.key===vt){if(vt=Ne.type,vt===ne){if(At.tag===7){p(Pe,At.sibling),_e=A(At,Ne.props.children),_e.return=Pe,Pe=_e;break e}}else if(At.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===ce&&gi(vt)===At.type){p(Pe,At.sibling),_e=A(At,Ne.props),_e.ref=Rt(Pe,At,Ne),_e.return=Pe,Pe=_e;break e}p(Pe,At);break}else u(Pe,At);At=At.sibling}Ne.type===ne?(_e=Ad(Ne.props.children,Pe.mode,Qe,Ne.key),_e.return=Pe,Pe=_e):(Qe=Tv(Ne.type,Ne.key,Ne.props,null,Pe.mode,Qe),Qe.ref=Rt(Pe,_e,Ne),Qe.return=Pe,Pe=Qe)}return D(Pe);case he:e:{for(At=Ne.key;_e!==null;){if(_e.key===At)if(_e.tag===4&&_e.stateNode.containerInfo===Ne.containerInfo&&_e.stateNode.implementation===Ne.implementation){p(Pe,_e.sibling),_e=A(_e,Ne.children||[]),_e.return=Pe,Pe=_e;break e}else{p(Pe,_e);break}else u(Pe,_e);_e=_e.sibling}_e=c5(Ne,Pe.mode,Qe),_e.return=Pe,Pe=_e}return D(Pe);case ce:return At=Ne._init,br(Pe,_e,At(Ne._payload),Qe)}if(We(Ne))return ft(Pe,_e,Ne,Qe);if(te(Ne))return mt(Pe,_e,Ne,Qe);Gn(Pe,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,_e!==null&&_e.tag===6?(p(Pe,_e.sibling),_e=A(_e,Ne),_e.return=Pe,Pe=_e):(p(Pe,_e),_e=u5(Ne,Pe.mode,Qe),_e.return=Pe,Pe=_e),D(Pe)):p(Pe,_e)}return br}var vr=ir(!0),fn=ir(!1),Jr=ta(null),Qr=null,Vn=null,yr=null;function Dr(){yr=Vn=Qr=null}function Mi(o){var u=Jr.current;yn(Jr),o._currentValue=u}function Ps(o,u,p){for(;o!==null;){var w=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),o===p)break;o=o.return}}function Yn(o,u){Qr=o,yr=Vn=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&u)!==0&&(Is=!0),o.firstContext=null)}function hr(o){var u=o._currentValue;if(yr!==o)if(o={context:o,memoizedValue:u,next:null},Vn===null){if(Qr===null)throw Error(t(308));Vn=o,Qr.dependencies={lanes:0,firstContext:o}}else Vn=Vn.next=o;return u}var ss=null;function hl(o){ss===null?ss=[o]:ss.push(o)}function fo(o,u,p,w){var A=u.interleaved;return A===null?(p.next=p,hl(u)):(p.next=A.next,A.next=p),u.interleaved=p,pn(o,w)}function pn(o,u){o.lanes|=u;var p=o.alternate;for(p!==null&&(p.lanes|=u),p=o,o=o.return;o!==null;)o.childLanes|=u,p=o.alternate,p!==null&&(p.childLanes|=u),p=o,o=o.return;return p.tag===3?p.stateNode:null}var Ma=!1;function cp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _m(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ns(o,u){return{eventTime:o,lane:u,tag:0,payload:null,callback:null,next:null}}function Ts(o,u,p){var w=o.updateQueue;if(w===null)return null;if(w=w.shared,(hn&2)!==0){var A=w.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),w.pending=u,pn(o,p)}return A=w.interleaved,A===null?(u.next=u,hl(w)):(u.next=A.next,A.next=u),w.interleaved=u,pn(o,p)}function gu(o,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194240)!==0)){var w=u.lanes;w&=o.pendingLanes,p|=w,u.lanes=p,cc(o,p)}}function Rs(o,u){var p=o.updateQueue,w=o.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var A=null,L=null;if(p=p.firstBaseUpdate,p!==null){do{var D={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};L===null?A=L=D:L=L.next=D,p=p.next}while(p!==null);L===null?A=L=u:L=L.next=u}else A=L=u;p={baseState:w.baseState,firstBaseUpdate:A,lastBaseUpdate:L,shared:w.shared,effects:w.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=u}function po(o,u,p,w){var A=o.updateQueue;Ma=!1;var L=A.firstBaseUpdate,D=A.lastBaseUpdate,le=A.shared.pending;if(le!==null){A.shared.pending=null;var ve=le,Re=ve.next;ve.next=null,D===null?L=Re:D.next=Re,D=ve;var Ye=o.alternate;Ye!==null&&(Ye=Ye.updateQueue,le=Ye.lastBaseUpdate,le!==D&&(le===null?Ye.firstBaseUpdate=Re:le.next=Re,Ye.lastBaseUpdate=ve))}if(L!==null){var Xe=A.baseState;D=0,Ye=Re=ve=null,le=L;do{var Ve=le.lane,lt=le.eventTime;if((w&Ve)===Ve){Ye!==null&&(Ye=Ye.next={eventTime:lt,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var ft=o,mt=le;switch(Ve=u,lt=p,mt.tag){case 1:if(ft=mt.payload,typeof ft=="function"){Xe=ft.call(lt,Xe,Ve);break e}Xe=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=mt.payload,Ve=typeof ft=="function"?ft.call(lt,Xe,Ve):ft,Ve==null)break e;Xe=J({},Xe,Ve);break e;case 2:Ma=!0}}le.callback!==null&&le.lane!==0&&(o.flags|=64,Ve=A.effects,Ve===null?A.effects=[le]:Ve.push(le))}else lt={eventTime:lt,lane:Ve,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ye===null?(Re=Ye=lt,ve=Xe):Ye=Ye.next=lt,D|=Ve;if(le=le.next,le===null){if(le=A.shared.pending,le===null)break;Ve=le,le=Ve.next,Ve.next=null,A.lastBaseUpdate=Ve,A.shared.pending=null}}while(!0);if(Ye===null&&(ve=Xe),A.baseState=ve,A.firstBaseUpdate=Re,A.lastBaseUpdate=Ye,u=A.shared.interleaved,u!==null){A=u;do D|=A.lane,A=A.next;while(A!==u)}else L===null&&(A.shared.lanes=0);wd|=D,o.lanes=D,o.memoizedState=Xe}}function mu(o,u,p){if(o=u.effects,u.effects=null,o!==null)for(u=0;u<o.length;u++){var w=o[u],A=w.callback;if(A!==null){if(w.callback=null,w=p,typeof A!="function")throw Error(t(191,A));A.call(w)}}}var jc={},as=ta(jc),Bc=ta(jc),dl=ta(jc);function go(o){if(o===jc)throw Error(t(174));return o}function zc(o,u){switch(_n(dl,u),_n(Bc,o),_n(as,jc),o=u.nodeType,o){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Jt(null,"");break;default:o=o===8?u.parentNode:u,u=o.namespaceURI||null,o=o.tagName,u=Jt(u,o)}yn(as),_n(as,u)}function Fa(){yn(as),yn(Bc),yn(dl)}function dv(o){go(dl.current);var u=go(as.current),p=Jt(u,o.type);u!==p&&(_n(Bc,o),_n(as,p))}function xm(o){Bc.current===o&&(yn(as),yn(Bc))}var Rn=ta(0);function na(o){for(var u=o;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Am=[];function Sm(){for(var o=0;o<Am.length;o++)Am[o]._workInProgressVersionPrimary=null;Am.length=0}var hp=H.ReactCurrentDispatcher,dp=H.ReactCurrentBatchConfig,Da=0,Fn=null,dr=null,sr=null,Uc=!1,mo=!1,qc=0,My=0;function wr(){throw Error(t(321))}function fp(o,u){if(u===null)return!1;for(var p=0;p<u.length&&p<o.length;p++)if(!cn(o[p],u[p]))return!1;return!0}function md(o,u,p,w,A,L){if(Da=L,Fn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,hp.current=o===null||o.memoizedState===null?bk:_k,o=p(w,A),mo){L=0;do{if(mo=!1,qc=0,25<=L)throw Error(t(301));L+=1,sr=dr=null,u.updateQueue=null,hp.current=xk,o=p(w,A)}while(mo)}if(hp.current=vv,u=dr!==null&&dr.next!==null,Da=0,sr=dr=Fn=null,Uc=!1,u)throw Error(t(300));return o}function ja(){var o=qc!==0;return qc=0,o}function ra(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?Fn.memoizedState=sr=o:sr=sr.next=o,sr}function os(){if(dr===null){var o=Fn.alternate;o=o!==null?o.memoizedState:null}else o=dr.next;var u=sr===null?Fn.memoizedState:sr.next;if(u!==null)sr=u,dr=o;else{if(o===null)throw Error(t(310));dr=o,o={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},sr===null?Fn.memoizedState=sr=o:sr=sr.next=o}return sr}function vd(o,u){return typeof u=="function"?u(o):u}function pp(o){var u=os(),p=u.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var w=dr,A=w.baseQueue,L=p.pending;if(L!==null){if(A!==null){var D=A.next;A.next=L.next,L.next=D}w.baseQueue=A=L,p.pending=null}if(A!==null){L=A.next,w=w.baseState;var le=D=null,ve=null,Re=L;do{var Ye=Re.lane;if((Da&Ye)===Ye)ve!==null&&(ve=ve.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),w=Re.hasEagerState?Re.eagerState:o(w,Re.action);else{var Xe={lane:Ye,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ve===null?(le=ve=Xe,D=w):ve=ve.next=Xe,Fn.lanes|=Ye,wd|=Ye}Re=Re.next}while(Re!==null&&Re!==L);ve===null?D=w:ve.next=le,cn(w,u.memoizedState)||(Is=!0),u.memoizedState=w,u.baseState=D,u.baseQueue=ve,p.lastRenderedState=w}if(o=p.interleaved,o!==null){A=o;do L=A.lane,Fn.lanes|=L,wd|=L,A=A.next;while(A!==o)}else A===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function fl(o){var u=os(),p=u.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var w=p.dispatch,A=p.pending,L=u.memoizedState;if(A!==null){p.pending=null;var D=A=A.next;do L=o(L,D.action),D=D.next;while(D!==A);cn(L,u.memoizedState)||(Is=!0),u.memoizedState=L,u.baseQueue===null&&(u.baseState=L),p.lastRenderedState=L}return[L,w]}function fv(){}function Em(o,u){var p=Fn,w=os(),A=u(),L=!cn(w.memoizedState,A);if(L&&(w.memoizedState=A,Is=!0),w=w.queue,vp(gv.bind(null,p,w,o),[o]),w.getSnapshot!==u||L||sr!==null&&sr.memoizedState.tag&1){if(p.flags|=2048,ls(9,km.bind(null,p,w,A,u),void 0,null),Zr===null)throw Error(t(349));(Da&30)!==0||pv(p,u,A)}return A}function pv(o,u,p){o.flags|=16384,o={getSnapshot:u,value:p},u=Fn.updateQueue,u===null?(u={lastEffect:null,stores:null},Fn.updateQueue=u,u.stores=[o]):(p=u.stores,p===null?u.stores=[o]:p.push(o))}function km(o,u,p,w){u.value=p,u.getSnapshot=w,Hc(u)&&gp(o)}function gv(o,u,p){return p(function(){Hc(u)&&gp(o)})}function Hc(o){var u=o.getSnapshot;o=o.value;try{var p=u();return!cn(o,p)}catch{return!0}}function gp(o){var u=pn(o,1);u!==null&&_o(u,o,1,-1)}function yd(o){var u=ra();return typeof o=="function"&&(o=o()),u.memoizedState=u.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:o},u.queue=o,o=o.dispatch=wk.bind(null,Fn,o),[u.memoizedState,o]}function ls(o,u,p,w){return o={tag:o,create:u,destroy:p,deps:w,next:null},u=Fn.updateQueue,u===null?(u={lastEffect:null,stores:null},Fn.updateQueue=u,u.lastEffect=o.next=o):(p=u.lastEffect,p===null?u.lastEffect=o.next=o:(w=p.next,p.next=o,o.next=w,u.lastEffect=o)),o}function vo(){return os().memoizedState}function ia(o,u,p,w){var A=ra();Fn.flags|=o,A.memoizedState=ls(1|u,p,void 0,w===void 0?null:w)}function vu(o,u,p,w){var A=os();w=w===void 0?null:w;var L=void 0;if(dr!==null){var D=dr.memoizedState;if(L=D.destroy,w!==null&&fp(w,D.deps)){A.memoizedState=ls(u,p,L,w);return}}Fn.flags|=o,A.memoizedState=ls(1|u,p,L,w)}function mp(o,u){return ia(8390656,8,o,u)}function vp(o,u){return vu(2048,8,o,u)}function mv(o,u){return vu(4,2,o,u)}function yp(o,u){return vu(4,4,o,u)}function wp(o,u){if(typeof u=="function")return o=o(),u(o),function(){u(null)};if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function j_(o,u,p){return p=p!=null?p.concat([o]):null,vu(4,4,wp.bind(null,u,o),p)}function Fy(){}function B_(o,u){var p=os();u=u===void 0?null:u;var w=p.memoizedState;return w!==null&&u!==null&&fp(u,w[1])?w[0]:(p.memoizedState=[o,u],o)}function z_(o,u){var p=os();u=u===void 0?null:u;var w=p.memoizedState;return w!==null&&u!==null&&fp(u,w[1])?w[0]:(o=o(),p.memoizedState=[o,u],o)}function U_(o,u,p){return(Da&21)===0?(o.baseState&&(o.baseState=!1,Is=!0),o.memoizedState=p):(cn(p,u)||(p=Kh(),Fn.lanes|=p,wd|=p,o.baseState=!0),u)}function vk(o,u){var p=un;un=p!==0&&4>p?p:4,o(!0);var w=dp.transition;dp.transition={};try{o(!1),u()}finally{un=p,dp.transition=w}}function q_(){return os().memoizedState}function yk(o,u,p){var w=Vc(o);if(p={lane:w,action:p,hasEagerState:!1,eagerState:null,next:null},H_(o))$_(u,p);else if(p=fo(o,u,p,w),p!==null){var A=cs();_o(p,o,w,A),W_(p,u,w)}}function wk(o,u,p){var w=Vc(o),A={lane:w,action:p,hasEagerState:!1,eagerState:null,next:null};if(H_(o))$_(u,A);else{var L=o.alternate;if(o.lanes===0&&(L===null||L.lanes===0)&&(L=u.lastRenderedReducer,L!==null))try{var D=u.lastRenderedState,le=L(D,p);if(A.hasEagerState=!0,A.eagerState=le,cn(le,D)){var ve=u.interleaved;ve===null?(A.next=A,hl(u)):(A.next=ve.next,ve.next=A),u.interleaved=A;return}}catch{}finally{}p=fo(o,u,A,w),p!==null&&(A=cs(),_o(p,o,w,A),W_(p,u,w))}}function H_(o){var u=o.alternate;return o===Fn||u!==null&&u===Fn}function $_(o,u){mo=Uc=!0;var p=o.pending;p===null?u.next=u:(u.next=p.next,p.next=u),o.pending=u}function W_(o,u,p){if((p&4194240)!==0){var w=u.lanes;w&=o.pendingLanes,p|=w,u.lanes=p,cc(o,p)}}var vv={readContext:hr,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},bk={readContext:hr,useCallback:function(o,u){return ra().memoizedState=[o,u===void 0?null:u],o},useContext:hr,useEffect:mp,useImperativeHandle:function(o,u,p){return p=p!=null?p.concat([o]):null,ia(4194308,4,wp.bind(null,u,o),p)},useLayoutEffect:function(o,u){return ia(4194308,4,o,u)},useInsertionEffect:function(o,u){return ia(4,2,o,u)},useMemo:function(o,u){var p=ra();return u=u===void 0?null:u,o=o(),p.memoizedState=[o,u],o},useReducer:function(o,u,p){var w=ra();return u=p!==void 0?p(u):u,w.memoizedState=w.baseState=u,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:u},w.queue=o,o=o.dispatch=yk.bind(null,Fn,o),[w.memoizedState,o]},useRef:function(o){var u=ra();return o={current:o},u.memoizedState=o},useState:yd,useDebugValue:Fy,useDeferredValue:function(o){return ra().memoizedState=o},useTransition:function(){var o=yd(!1),u=o[0];return o=vk.bind(null,o[1]),ra().memoizedState=o,[u,o]},useMutableSource:function(){},useSyncExternalStore:function(o,u,p){var w=Fn,A=ra();if(Me){if(p===void 0)throw Error(t(407));p=p()}else{if(p=u(),Zr===null)throw Error(t(349));(Da&30)!==0||pv(w,u,p)}A.memoizedState=p;var L={value:p,getSnapshot:u};return A.queue=L,mp(gv.bind(null,w,L,o),[o]),w.flags|=2048,ls(9,km.bind(null,w,L,p,u),void 0,null),p},useId:function(){var o=ra(),u=Zr.identifierPrefix;if(Me){var p=Le,w=Ce;p=(w&~(1<<32-es(w)-1)).toString(32)+p,u=":"+u+"R"+p,p=qc++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=My++,u=":"+u+"r"+p.toString(32)+":";return o.memoizedState=u},unstable_isNewReconciler:!1},_k={readContext:hr,useCallback:B_,useContext:hr,useEffect:vp,useImperativeHandle:j_,useInsertionEffect:mv,useLayoutEffect:yp,useMemo:z_,useReducer:pp,useRef:vo,useState:function(){return pp(vd)},useDebugValue:Fy,useDeferredValue:function(o){var u=os();return U_(u,dr.memoizedState,o)},useTransition:function(){var o=pp(vd)[0],u=os().memoizedState;return[o,u]},useMutableSource:fv,useSyncExternalStore:Em,useId:q_,unstable_isNewReconciler:!1},xk={readContext:hr,useCallback:B_,useContext:hr,useEffect:vp,useImperativeHandle:j_,useInsertionEffect:mv,useLayoutEffect:yp,useMemo:z_,useReducer:fl,useRef:vo,useState:function(){return fl(vd)},useDebugValue:Fy,useDeferredValue:function(o){var u=os();return dr===null?u.memoizedState=o:U_(u,dr.memoizedState,o)},useTransition:function(){var o=fl(vd)[0],u=os().memoizedState;return[o,u]},useMutableSource:fv,useSyncExternalStore:Em,useId:q_,unstable_isNewReconciler:!1};function yo(o,u){if(o&&o.defaultProps){u=J({},u),o=o.defaultProps;for(var p in o)u[p]===void 0&&(u[p]=o[p]);return u}return u}function Dy(o,u,p,w){u=o.memoizedState,p=p(w,u),p=p==null?u:J({},u,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var yv={isMounted:function(o){return(o=o._reactInternals)?Or(o)===o:!1},enqueueSetState:function(o,u,p){o=o._reactInternals;var w=cs(),A=Vc(o),L=Ns(w,A);L.payload=u,p!=null&&(L.callback=p),u=Ts(o,L,A),u!==null&&(_o(u,o,A,w),gu(u,o,A))},enqueueReplaceState:function(o,u,p){o=o._reactInternals;var w=cs(),A=Vc(o),L=Ns(w,A);L.tag=1,L.payload=u,p!=null&&(L.callback=p),u=Ts(o,L,A),u!==null&&(_o(u,o,A,w),gu(u,o,A))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var p=cs(),w=Vc(o),A=Ns(p,w);A.tag=2,u!=null&&(A.callback=u),u=Ts(o,A,w),u!==null&&(_o(u,o,w,p),gu(u,o,w))}};function G_(o,u,p,w,A,L,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(w,L,D):u.prototype&&u.prototype.isPureReactComponent?!ao(p,w)||!ao(A,L):!0}function V_(o,u,p){var w=!1,A=cl,L=u.contextType;return typeof L=="object"&&L!==null?L=hr(L):(A=Oi(u)?fu:Fr.current,w=u.contextTypes,L=(w=w!=null)?Dc(o,A):cl),u=new u(p,L),o.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=yv,o.stateNode=u,u._reactInternals=o,w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=A,o.__reactInternalMemoizedMaskedChildContext=L),u}function Y_(o,u,p,w){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,w),u.state!==o&&yv.enqueueReplaceState(u,u.state,null)}function jy(o,u,p,w){var A=o.stateNode;A.props=p,A.state=o.memoizedState,A.refs={},cp(o);var L=u.contextType;typeof L=="object"&&L!==null?A.context=hr(L):(L=Oi(u)?fu:Fr.current,A.context=Dc(o,L)),A.state=o.memoizedState,L=u.getDerivedStateFromProps,typeof L=="function"&&(Dy(o,u,L,p),A.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(u=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),u!==A.state&&yv.enqueueReplaceState(A,A.state,null),po(o,p,A,w),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308)}function bp(o,u){try{var p="",w=u;do p+=se(w),w=w.return;while(w);var A=p}catch(L){A=`
Error generating stack: `+L.message+`
`+L.stack}return{value:o,source:u,stack:A,digest:null}}function By(o,u,p){return{value:o,source:null,stack:p??null,digest:u??null}}function zy(o,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var Ak=typeof WeakMap=="function"?WeakMap:Map;function K_(o,u,p){p=Ns(-1,p),p.tag=3,p.payload={element:null};var w=u.value;return p.callback=function(){Ev||(Ev=!0,t5=w),zy(o,u)},p}function X_(o,u,p){p=Ns(-1,p),p.tag=3;var w=o.type.getDerivedStateFromError;if(typeof w=="function"){var A=u.value;p.payload=function(){return w(A)},p.callback=function(){zy(o,u)}}var L=o.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(p.callback=function(){zy(o,u),typeof w!="function"&&(Wc===null?Wc=new Set([this]):Wc.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})}),p}function J_(o,u,p){var w=o.pingCache;if(w===null){w=o.pingCache=new Ak;var A=new Set;w.set(u,A)}else A=w.get(u),A===void 0&&(A=new Set,w.set(u,A));A.has(p)||(A.add(p),o=Dk.bind(null,o,u,p),u.then(o,o))}function Q_(o){do{var u;if((u=o.tag===13)&&(u=o.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return o;o=o.return}while(o!==null);return null}function Z_(o,u,p,w,A){return(o.mode&1)===0?(o===u?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(u=Ns(-1,1),u.tag=2,Ts(p,u,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=A,o)}var Sk=H.ReactCurrentOwner,Is=!1;function us(o,u,p,w){u.child=o===null?fn(u,null,p,w):vr(u,o.child,p,w)}function ex(o,u,p,w,A){p=p.render;var L=u.ref;return Yn(u,A),w=md(o,u,p,w,L,A),p=ja(),o!==null&&!Is?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~A,yu(o,u,A)):(Me&&p&&Ie(u),u.flags|=1,us(o,u,w,A),u.child)}function tx(o,u,p,w,A){if(o===null){var L=p.type;return typeof L=="function"&&!l5(L)&&L.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(u.tag=15,u.type=L,nx(o,u,L,w,A)):(o=Tv(p.type,null,w,u,u.mode,A),o.ref=u.ref,o.return=u,u.child=o)}if(L=o.child,(o.lanes&A)===0){var D=L.memoizedProps;if(p=p.compare,p=p!==null?p:ao,p(D,w)&&o.ref===u.ref)return yu(o,u,A)}return u.flags|=1,o=Kc(L,w),o.ref=u.ref,o.return=u,u.child=o}function nx(o,u,p,w,A){if(o!==null){var L=o.memoizedProps;if(ao(L,w)&&o.ref===u.ref)if(Is=!1,u.pendingProps=w=L,(o.lanes&A)!==0)(o.flags&131072)!==0&&(Is=!0);else return u.lanes=o.lanes,yu(o,u,A)}return Uy(o,u,p,w,A)}function rx(o,u,p){var w=u.pendingProps,A=w.children,L=o!==null?o.memoizedState:null;if(w.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(xp,sa),sa|=p;else{if((p&1073741824)===0)return o=L!==null?L.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:o,cachePool:null,transitions:null},u.updateQueue=null,_n(xp,sa),sa|=o,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=L!==null?L.baseLanes:p,_n(xp,sa),sa|=w}else L!==null?(w=L.baseLanes|p,u.memoizedState=null):w=p,_n(xp,sa),sa|=w;return us(o,u,A,p),u.child}function ix(o,u){var p=u.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function Uy(o,u,p,w,A){var L=Oi(p)?fu:Fr.current;return L=Dc(u,L),Yn(u,A),p=md(o,u,p,w,L,A),w=ja(),o!==null&&!Is?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~A,yu(o,u,A)):(Me&&w&&Ie(u),u.flags|=1,us(o,u,p,A),u.child)}function sx(o,u,p,w,A){if(Oi(p)){var L=!0;pu(u)}else L=!1;if(Yn(u,A),u.stateNode===null)bv(o,u),V_(u,p,w),jy(u,p,w,A),w=!0;else if(o===null){var D=u.stateNode,le=u.memoizedProps;D.props=le;var ve=D.context,Re=p.contextType;typeof Re=="object"&&Re!==null?Re=hr(Re):(Re=Oi(p)?fu:Fr.current,Re=Dc(u,Re));var Ye=p.getDerivedStateFromProps,Xe=typeof Ye=="function"||typeof D.getSnapshotBeforeUpdate=="function";Xe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(le!==w||ve!==Re)&&Y_(u,D,w,Re),Ma=!1;var Ve=u.memoizedState;D.state=Ve,po(u,w,D,A),ve=u.memoizedState,le!==w||Ve!==ve||Ii.current||Ma?(typeof Ye=="function"&&(Dy(u,p,Ye,w),ve=u.memoizedState),(le=Ma||G_(u,p,le,w,Ve,ve,Re))?(Xe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(u.flags|=4194308)):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=ve),D.props=w,D.state=ve,D.context=Re,w=le):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{D=u.stateNode,_m(o,u),le=u.memoizedProps,Re=u.type===u.elementType?le:yo(u.type,le),D.props=Re,Xe=u.pendingProps,Ve=D.context,ve=p.contextType,typeof ve=="object"&&ve!==null?ve=hr(ve):(ve=Oi(p)?fu:Fr.current,ve=Dc(u,ve));var lt=p.getDerivedStateFromProps;(Ye=typeof lt=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(le!==Xe||Ve!==ve)&&Y_(u,D,w,ve),Ma=!1,Ve=u.memoizedState,D.state=Ve,po(u,w,D,A);var ft=u.memoizedState;le!==Xe||Ve!==ft||Ii.current||Ma?(typeof lt=="function"&&(Dy(u,p,lt,w),ft=u.memoizedState),(Re=Ma||G_(u,p,Re,w,Ve,ft,ve)||!1)?(Ye||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(w,ft,ve),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(w,ft,ve)),typeof D.componentDidUpdate=="function"&&(u.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof D.componentDidUpdate!="function"||le===o.memoizedProps&&Ve===o.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||le===o.memoizedProps&&Ve===o.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=ft),D.props=w,D.state=ft,D.context=ve,w=Re):(typeof D.componentDidUpdate!="function"||le===o.memoizedProps&&Ve===o.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||le===o.memoizedProps&&Ve===o.memoizedState||(u.flags|=1024),w=!1)}return qy(o,u,p,w,L,A)}function qy(o,u,p,w,A,L){ix(o,u);var D=(u.flags&128)!==0;if(!w&&!D)return A&&hv(u,p,!1),yu(o,u,L);w=u.stateNode,Sk.current=u;var le=D&&typeof p.getDerivedStateFromError!="function"?null:w.render();return u.flags|=1,o!==null&&D?(u.child=vr(u,o.child,null,L),u.child=vr(u,null,le,L)):us(o,u,le,L),u.memoizedState=w.state,A&&hv(u,p,!0),u.child}function ax(o){var u=o.stateNode;u.pendingContext?cv(o,u.pendingContext,u.pendingContext!==u.context):u.context&&cv(o,u.context,!1),zc(o,u.containerInfo)}function ox(o,u,p,w,A){return Ut(),wn(A),u.flags|=256,us(o,u,p,w),u.child}var Hy={dehydrated:null,treeContext:null,retryLane:0};function $y(o){return{baseLanes:o,cachePool:null,transitions:null}}function lx(o,u,p){var w=u.pendingProps,A=Rn.current,L=!1,D=(u.flags&128)!==0,le;if((le=D)||(le=o!==null&&o.memoizedState===null?!1:(A&2)!==0),le?(L=!0,u.flags&=-129):(o===null||o.memoizedState!==null)&&(A|=1),_n(Rn,A&1),o===null)return nt(u),o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((u.mode&1)===0?u.lanes=1:o.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(D=w.children,o=w.fallback,L?(w=u.mode,L=u.child,D={mode:"hidden",children:D},(w&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=D):L=Rv(D,w,0,null),o=Ad(o,w,p,null),L.return=u,o.return=u,L.sibling=o,u.child=L,u.child.memoizedState=$y(p),u.memoizedState=Hy,o):Wy(u,D));if(A=o.memoizedState,A!==null&&(le=A.dehydrated,le!==null))return Ek(o,u,D,w,le,A,p);if(L){L=w.fallback,D=u.mode,A=o.child,le=A.sibling;var ve={mode:"hidden",children:w.children};return(D&1)===0&&u.child!==A?(w=u.child,w.childLanes=0,w.pendingProps=ve,u.deletions=null):(w=Kc(A,ve),w.subtreeFlags=A.subtreeFlags&14680064),le!==null?L=Kc(le,L):(L=Ad(L,D,p,null),L.flags|=2),L.return=u,w.return=u,w.sibling=L,u.child=w,w=L,L=u.child,D=o.child.memoizedState,D=D===null?$y(p):{baseLanes:D.baseLanes|p,cachePool:null,transitions:D.transitions},L.memoizedState=D,L.childLanes=o.childLanes&~p,u.memoizedState=Hy,w}return L=o.child,o=L.sibling,w=Kc(L,{mode:"visible",children:w.children}),(u.mode&1)===0&&(w.lanes=p),w.return=u,w.sibling=null,o!==null&&(p=u.deletions,p===null?(u.deletions=[o],u.flags|=16):p.push(o)),u.child=w,u.memoizedState=null,w}function Wy(o,u){return u=Rv({mode:"visible",children:u},o.mode,0,null),u.return=o,o.child=u}function wv(o,u,p,w){return w!==null&&wn(w),vr(u,o.child,null,p),o=Wy(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Ek(o,u,p,w,A,L,D){if(p)return u.flags&256?(u.flags&=-257,w=By(Error(t(422))),wv(o,u,D,w)):u.memoizedState!==null?(u.child=o.child,u.flags|=128,null):(L=w.fallback,A=u.mode,w=Rv({mode:"visible",children:w.children},A,0,null),L=Ad(L,A,D,null),L.flags|=2,w.return=u,L.return=u,w.sibling=L,u.child=w,(u.mode&1)!==0&&vr(u,o.child,null,D),u.child.memoizedState=$y(D),u.memoizedState=Hy,L);if((u.mode&1)===0)return wv(o,u,D,null);if(A.data==="$!"){if(w=A.nextSibling&&A.nextSibling.dataset,w)var le=w.dgst;return w=le,L=Error(t(419)),w=By(L,w,void 0),wv(o,u,D,w)}if(le=(D&o.childLanes)!==0,Is||le){if(w=Zr,w!==null){switch(D&-D){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(w.suspendedLanes|D))!==0?0:A,A!==0&&A!==L.retryLane&&(L.retryLane=A,pn(o,A),_o(w,o,A,-1))}return o5(),w=By(Error(t(421))),wv(o,u,D,w)}return A.data==="$?"?(u.flags|=128,u.child=o.child,u=jk.bind(null,o),A._reactRetry=u,null):(o=L.treeContext,Fe=pi(A.nextSibling),we=u,Me=!0,je=null,o!==null&&(W[K++]=Ce,W[K++]=Le,W[K++]=ge,Ce=o.id,Le=o.overflow,ge=u),u=Wy(u,w.children),u.flags|=4096,u)}function ux(o,u,p){o.lanes|=u;var w=o.alternate;w!==null&&(w.lanes|=u),Ps(o.return,u,p)}function Gy(o,u,p,w,A){var L=o.memoizedState;L===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:A}:(L.isBackwards=u,L.rendering=null,L.renderingStartTime=0,L.last=w,L.tail=p,L.tailMode=A)}function cx(o,u,p){var w=u.pendingProps,A=w.revealOrder,L=w.tail;if(us(o,u,w.children,p),w=Rn.current,(w&2)!==0)w=w&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ux(o,p,u);else if(o.tag===19)ux(o,p,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}w&=1}if(_n(Rn,w),(u.mode&1)===0)u.memoizedState=null;else switch(A){case"forwards":for(p=u.child,A=null;p!==null;)o=p.alternate,o!==null&&na(o)===null&&(A=p),p=p.sibling;p=A,p===null?(A=u.child,u.child=null):(A=p.sibling,p.sibling=null),Gy(u,!1,A,p,L);break;case"backwards":for(p=null,A=u.child,u.child=null;A!==null;){if(o=A.alternate,o!==null&&na(o)===null){u.child=A;break}o=A.sibling,A.sibling=p,p=A,A=o}Gy(u,!0,p,null,L);break;case"together":Gy(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function bv(o,u){(u.mode&1)===0&&o!==null&&(o.alternate=null,u.alternate=null,u.flags|=2)}function yu(o,u,p){if(o!==null&&(u.dependencies=o.dependencies),wd|=u.lanes,(p&u.childLanes)===0)return null;if(o!==null&&u.child!==o.child)throw Error(t(153));if(u.child!==null){for(o=u.child,p=Kc(o,o.pendingProps),u.child=p,p.return=u;o.sibling!==null;)o=o.sibling,p=p.sibling=Kc(o,o.pendingProps),p.return=u;p.sibling=null}return u.child}function kk(o,u,p){switch(u.tag){case 3:ax(u),Ut();break;case 5:dv(u);break;case 1:Oi(u.type)&&pu(u);break;case 4:zc(u,u.stateNode.containerInfo);break;case 10:var w=u.type._context,A=u.memoizedProps.value;_n(Jr,w._currentValue),w._currentValue=A;break;case 13:if(w=u.memoizedState,w!==null)return w.dehydrated!==null?(_n(Rn,Rn.current&1),u.flags|=128,null):(p&u.child.childLanes)!==0?lx(o,u,p):(_n(Rn,Rn.current&1),o=yu(o,u,p),o!==null?o.sibling:null);_n(Rn,Rn.current&1);break;case 19:if(w=(p&u.childLanes)!==0,(o.flags&128)!==0){if(w)return cx(o,u,p);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),_n(Rn,Rn.current),w)break;return null;case 22:case 23:return u.lanes=0,rx(o,u,p)}return yu(o,u,p)}var hx,Vy,dx,fx;hx=function(o,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Vy=function(){},dx=function(o,u,p,w){var A=o.memoizedProps;if(A!==w){o=u.stateNode,go(as.current);var L=null;switch(p){case"input":A=rt(o,A),w=rt(o,w),L=[];break;case"select":A=J({},A,{value:void 0}),w=J({},w,{value:void 0}),L=[];break;case"textarea":A=et(o,A),w=et(o,w),L=[];break;default:typeof A.onClick!="function"&&typeof w.onClick=="function"&&(o.onclick=Oc)}Pn(p,w);var D;p=null;for(Re in A)if(!w.hasOwnProperty(Re)&&A.hasOwnProperty(Re)&&A[Re]!=null)if(Re==="style"){var le=A[Re];for(D in le)le.hasOwnProperty(D)&&(p||(p={}),p[D]="")}else Re!=="dangerouslySetInnerHTML"&&Re!=="children"&&Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&Re!=="autoFocus"&&(r.hasOwnProperty(Re)?L||(L=[]):(L=L||[]).push(Re,null));for(Re in w){var ve=w[Re];if(le=A!=null?A[Re]:void 0,w.hasOwnProperty(Re)&&ve!==le&&(ve!=null||le!=null))if(Re==="style")if(le){for(D in le)!le.hasOwnProperty(D)||ve&&ve.hasOwnProperty(D)||(p||(p={}),p[D]="");for(D in ve)ve.hasOwnProperty(D)&&le[D]!==ve[D]&&(p||(p={}),p[D]=ve[D])}else p||(L||(L=[]),L.push(Re,p)),p=ve;else Re==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,le=le?le.__html:void 0,ve!=null&&le!==ve&&(L=L||[]).push(Re,ve)):Re==="children"?typeof ve!="string"&&typeof ve!="number"||(L=L||[]).push(Re,""+ve):Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&(r.hasOwnProperty(Re)?(ve!=null&&Re==="onScroll"&&En("scroll",o),L||le===ve||(L=[])):(L=L||[]).push(Re,ve))}p&&(L=L||[]).push("style",p);var Re=L;(u.updateQueue=Re)&&(u.flags|=4)}},fx=function(o,u,p,w){p!==w&&(u.flags|=4)};function Cm(o,u){if(!Me)switch(o.tailMode){case"hidden":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:w.sibling=null}}function Fi(o){var u=o.alternate!==null&&o.alternate.child===o.child,p=0,w=0;if(u)for(var A=o.child;A!==null;)p|=A.lanes|A.childLanes,w|=A.subtreeFlags&14680064,w|=A.flags&14680064,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)p|=A.lanes|A.childLanes,w|=A.subtreeFlags,w|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=w,o.childLanes=p,u}function Ck(o,u,p){var w=u.pendingProps;switch(ye(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fi(u),null;case 1:return Oi(u.type)&&up(),Fi(u),null;case 3:return w=u.stateNode,Fa(),yn(Ii),yn(Fr),Sm(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(o===null||o.child===null)&&(an(u)?u.flags|=4:o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,je!==null&&(i5(je),je=null))),Vy(o,u),Fi(u),null;case 5:xm(u);var A=go(dl.current);if(p=u.type,o!==null&&u.stateNode!=null)dx(o,u,p,w,A),o.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!w){if(u.stateNode===null)throw Error(t(166));return Fi(u),null}if(o=go(as.current),an(u)){w=u.stateNode,p=u.type;var L=u.memoizedProps;switch(w[Oa]=u,w[Mc]=L,o=(u.mode&1)!==0,p){case"dialog":En("cancel",w),En("close",w);break;case"iframe":case"object":case"embed":En("load",w);break;case"video":case"audio":for(A=0;A<ll.length;A++)En(ll[A],w);break;case"source":En("error",w);break;case"img":case"image":case"link":En("error",w),En("load",w);break;case"details":En("toggle",w);break;case"input":Te(w,L),En("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!L.multiple},En("invalid",w);break;case"textarea":gt(w,L),En("invalid",w)}Pn(p,L),A=null;for(var D in L)if(L.hasOwnProperty(D)){var le=L[D];D==="children"?typeof le=="string"?w.textContent!==le&&(L.suppressHydrationWarning!==!0&&lp(w.textContent,le,o),A=["children",le]):typeof le=="number"&&w.textContent!==""+le&&(L.suppressHydrationWarning!==!0&&lp(w.textContent,le,o),A=["children",""+le]):r.hasOwnProperty(D)&&le!=null&&D==="onScroll"&&En("scroll",w)}switch(p){case"input":$e(w),Ze(w,L,!0);break;case"textarea":$e(w),jt(w);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(w.onclick=Oc)}w=A,u.updateQueue=w,w!==null&&(u.flags|=4)}else{D=A.nodeType===9?A:A.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ht(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=D.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof w.is=="string"?o=D.createElement(p,{is:w.is}):(o=D.createElement(p),p==="select"&&(D=o,w.multiple?D.multiple=!0:w.size&&(D.size=w.size))):o=D.createElementNS(o,p),o[Oa]=u,o[Mc]=w,hx(o,u,!1,!1),u.stateNode=o;e:{switch(D=_s(p,w),p){case"dialog":En("cancel",o),En("close",o),A=w;break;case"iframe":case"object":case"embed":En("load",o),A=w;break;case"video":case"audio":for(A=0;A<ll.length;A++)En(ll[A],o);A=w;break;case"source":En("error",o),A=w;break;case"img":case"image":case"link":En("error",o),En("load",o),A=w;break;case"details":En("toggle",o),A=w;break;case"input":Te(o,w),A=rt(o,w),En("invalid",o);break;case"option":A=w;break;case"select":o._wrapperState={wasMultiple:!!w.multiple},A=J({},w,{value:void 0}),En("invalid",o);break;case"textarea":gt(o,w),A=et(o,w),En("invalid",o);break;default:A=w}Pn(p,A),le=A;for(L in le)if(le.hasOwnProperty(L)){var ve=le[L];L==="style"?bs(o,ve):L==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&Lt(o,ve)):L==="children"?typeof ve=="string"?(p!=="textarea"||ve!=="")&&zt(o,ve):typeof ve=="number"&&zt(o,""+ve):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(r.hasOwnProperty(L)?ve!=null&&L==="onScroll"&&En("scroll",o):ve!=null&&M(o,L,ve,D))}switch(p){case"input":$e(o),Ze(o,w,!1);break;case"textarea":$e(o),jt(o);break;case"option":w.value!=null&&o.setAttribute("value",""+be(w.value));break;case"select":o.multiple=!!w.multiple,L=w.value,L!=null?Je(o,!!w.multiple,L,!1):w.defaultValue!=null&&Je(o,!!w.multiple,w.defaultValue,!0);break;default:typeof A.onClick=="function"&&(o.onclick=Oc)}switch(p){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Fi(u),null;case 6:if(o&&u.stateNode!=null)fx(o,u,o.memoizedProps,w);else{if(typeof w!="string"&&u.stateNode===null)throw Error(t(166));if(p=go(dl.current),go(as.current),an(u)){if(w=u.stateNode,p=u.memoizedProps,w[Oa]=u,(L=w.nodeValue!==p)&&(o=we,o!==null))switch(o.tag){case 3:lp(w.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&lp(w.nodeValue,p,(o.mode&1)!==0)}L&&(u.flags|=4)}else w=(p.nodeType===9?p:p.ownerDocument).createTextNode(w),w[Oa]=u,u.stateNode=w}return Fi(u),null;case 13:if(yn(Rn),w=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Me&&Fe!==null&&(u.mode&1)!==0&&(u.flags&128)===0)Zt(),Ut(),u.flags|=98560,L=!1;else if(L=an(u),w!==null&&w.dehydrated!==null){if(o===null){if(!L)throw Error(t(318));if(L=u.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(t(317));L[Oa]=u}else Ut(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Fi(u),L=!1}else je!==null&&(i5(je),je=null),L=!0;if(!L)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=p,u):(w=w!==null,w!==(o!==null&&o.memoizedState!==null)&&w&&(u.child.flags|=8192,(u.mode&1)!==0&&(o===null||(Rn.current&1)!==0?jr===0&&(jr=3):o5())),u.updateQueue!==null&&(u.flags|=4),Fi(u),null);case 4:return Fa(),Vy(o,u),o===null&&uu(u.stateNode.containerInfo),Fi(u),null;case 10:return Mi(u.type._context),Fi(u),null;case 17:return Oi(u.type)&&up(),Fi(u),null;case 19:if(yn(Rn),L=u.memoizedState,L===null)return Fi(u),null;if(w=(u.flags&128)!==0,D=L.rendering,D===null)if(w)Cm(L,!1);else{if(jr!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(D=na(o),D!==null){for(u.flags|=128,Cm(L,!1),w=D.updateQueue,w!==null&&(u.updateQueue=w,u.flags|=4),u.subtreeFlags=0,w=p,p=u.child;p!==null;)L=p,o=w,L.flags&=14680066,D=L.alternate,D===null?(L.childLanes=0,L.lanes=o,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=D.childLanes,L.lanes=D.lanes,L.child=D.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=D.memoizedProps,L.memoizedState=D.memoizedState,L.updateQueue=D.updateQueue,L.type=D.type,o=D.dependencies,L.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return _n(Rn,Rn.current&1|2),u.child}o=o.sibling}L.tail!==null&&Hn()>Ap&&(u.flags|=128,w=!0,Cm(L,!1),u.lanes=4194304)}else{if(!w)if(o=na(D),o!==null){if(u.flags|=128,w=!0,p=o.updateQueue,p!==null&&(u.updateQueue=p,u.flags|=4),Cm(L,!0),L.tail===null&&L.tailMode==="hidden"&&!D.alternate&&!Me)return Fi(u),null}else 2*Hn()-L.renderingStartTime>Ap&&p!==1073741824&&(u.flags|=128,w=!0,Cm(L,!1),u.lanes=4194304);L.isBackwards?(D.sibling=u.child,u.child=D):(p=L.last,p!==null?p.sibling=D:u.child=D,L.last=D)}return L.tail!==null?(u=L.tail,L.rendering=u,L.tail=u.sibling,L.renderingStartTime=Hn(),u.sibling=null,p=Rn.current,_n(Rn,w?p&1|2:p&1),u):(Fi(u),null);case 22:case 23:return a5(),w=u.memoizedState!==null,o!==null&&o.memoizedState!==null!==w&&(u.flags|=8192),w&&(u.mode&1)!==0?(sa&1073741824)!==0&&(Fi(u),u.subtreeFlags&6&&(u.flags|=8192)):Fi(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function Lk(o,u){switch(ye(u),u.tag){case 1:return Oi(u.type)&&up(),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Fa(),yn(Ii),yn(Fr),Sm(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 5:return xm(u),null;case 13:if(yn(Rn),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Ut()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return yn(Rn),null;case 4:return Fa(),null;case 10:return Mi(u.type._context),null;case 22:case 23:return a5(),null;case 24:return null;default:return null}}var _v=!1,Di=!1,Pk=typeof WeakSet=="function"?WeakSet:Set,ct=null;function _p(o,u){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(w){fr(o,u,w)}else p.current=null}function Yy(o,u,p){try{p()}catch(w){fr(o,u,w)}}var px=!1;function Nk(o,u){if(fd=gc,o=ad(),su(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var A=w.anchorOffset,L=w.focusNode;w=w.focusOffset;try{p.nodeType,L.nodeType}catch{p=null;break e}var D=0,le=-1,ve=-1,Re=0,Ye=0,Xe=o,Ve=null;t:for(;;){for(var lt;Xe!==p||A!==0&&Xe.nodeType!==3||(le=D+A),Xe!==L||w!==0&&Xe.nodeType!==3||(ve=D+w),Xe.nodeType===3&&(D+=Xe.nodeValue.length),(lt=Xe.firstChild)!==null;)Ve=Xe,Xe=lt;for(;;){if(Xe===o)break t;if(Ve===p&&++Re===A&&(le=D),Ve===L&&++Ye===w&&(ve=D),(lt=Xe.nextSibling)!==null)break;Xe=Ve,Ve=Xe.parentNode}Xe=lt}p=le===-1||ve===-1?null:{start:le,end:ve}}else p=null}p=p||{start:0,end:0}}else p=null;for(hu={focusedElem:o,selectionRange:p},gc=!1,ct=u;ct!==null;)if(u=ct,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,ct=o;else for(;ct!==null;){u=ct;try{var ft=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var mt=ft.memoizedProps,br=ft.memoizedState,Pe=u.stateNode,_e=Pe.getSnapshotBeforeUpdate(u.elementType===u.type?mt:yo(u.type,mt),br);Pe.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var Ne=u.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Qe){fr(u,u.return,Qe)}if(o=u.sibling,o!==null){o.return=u.return,ct=o;break}ct=u.return}return ft=px,px=!1,ft}function Lm(o,u,p){var w=u.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var A=w=w.next;do{if((A.tag&o)===o){var L=A.destroy;A.destroy=void 0,L!==void 0&&Yy(u,p,L)}A=A.next}while(A!==w)}}function xv(o,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&o)===o){var w=p.create;p.destroy=w()}p=p.next}while(p!==u)}}function Ky(o){var u=o.ref;if(u!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof u=="function"?u(o):u.current=o}}function gx(o){var u=o.alternate;u!==null&&(o.alternate=null,gx(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&(delete u[Oa],delete u[Mc],delete u[Ri],delete u[Iy],delete u[Oy])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function mx(o){return o.tag===5||o.tag===3||o.tag===4}function vx(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||mx(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Xy(o,u,p){var w=o.tag;if(w===5||w===6)o=o.stateNode,u?p.nodeType===8?p.parentNode.insertBefore(o,u):p.insertBefore(o,u):(p.nodeType===8?(u=p.parentNode,u.insertBefore(o,p)):(u=p,u.appendChild(o)),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=Oc));else if(w!==4&&(o=o.child,o!==null))for(Xy(o,u,p),o=o.sibling;o!==null;)Xy(o,u,p),o=o.sibling}function Jy(o,u,p){var w=o.tag;if(w===5||w===6)o=o.stateNode,u?p.insertBefore(o,u):p.appendChild(o);else if(w!==4&&(o=o.child,o!==null))for(Jy(o,u,p),o=o.sibling;o!==null;)Jy(o,u,p),o=o.sibling}var mi=null,wo=!1;function $c(o,u,p){for(p=p.child;p!==null;)yx(o,u,p),p=p.sibling}function yx(o,u,p){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount($l,p)}catch{}switch(p.tag){case 5:Di||_p(p,u);case 6:var w=mi,A=wo;mi=null,$c(o,u,p),mi=w,wo=A,mi!==null&&(wo?(o=mi,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):mi.removeChild(p.stateNode));break;case 18:mi!==null&&(wo?(o=mi,p=p.stateNode,o.nodeType===8?ym(o.parentNode,p):o.nodeType===1&&ym(o,p),Js(o)):ym(mi,p.stateNode));break;case 4:w=mi,A=wo,mi=p.stateNode.containerInfo,wo=!0,$c(o,u,p),mi=w,wo=A;break;case 0:case 11:case 14:case 15:if(!Di&&(w=p.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){A=w=w.next;do{var L=A,D=L.destroy;L=L.tag,D!==void 0&&((L&2)!==0||(L&4)!==0)&&Yy(p,u,D),A=A.next}while(A!==w)}$c(o,u,p);break;case 1:if(!Di&&(_p(p,u),w=p.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=p.memoizedProps,w.state=p.memoizedState,w.componentWillUnmount()}catch(le){fr(p,u,le)}$c(o,u,p);break;case 21:$c(o,u,p);break;case 22:p.mode&1?(Di=(w=Di)||p.memoizedState!==null,$c(o,u,p),Di=w):$c(o,u,p);break;default:$c(o,u,p)}}function wx(o){var u=o.updateQueue;if(u!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new Pk),u.forEach(function(w){var A=Bk.bind(null,o,w);p.has(w)||(p.add(w),w.then(A,A))})}}function bo(o,u){var p=u.deletions;if(p!==null)for(var w=0;w<p.length;w++){var A=p[w];try{var L=o,D=u,le=D;e:for(;le!==null;){switch(le.tag){case 5:mi=le.stateNode,wo=!1;break e;case 3:mi=le.stateNode.containerInfo,wo=!0;break e;case 4:mi=le.stateNode.containerInfo,wo=!0;break e}le=le.return}if(mi===null)throw Error(t(160));yx(L,D,A),mi=null,wo=!1;var ve=A.alternate;ve!==null&&(ve.return=null),A.return=null}catch(Re){fr(A,u,Re)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)bx(u,o),u=u.sibling}function bx(o,u){var p=o.alternate,w=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(bo(u,o),pl(o),w&4){try{Lm(3,o,o.return),xv(3,o)}catch(mt){fr(o,o.return,mt)}try{Lm(5,o,o.return)}catch(mt){fr(o,o.return,mt)}}break;case 1:bo(u,o),pl(o),w&512&&p!==null&&_p(p,p.return);break;case 5:if(bo(u,o),pl(o),w&512&&p!==null&&_p(p,p.return),o.flags&32){var A=o.stateNode;try{zt(A,"")}catch(mt){fr(o,o.return,mt)}}if(w&4&&(A=o.stateNode,A!=null)){var L=o.memoizedProps,D=p!==null?p.memoizedProps:L,le=o.type,ve=o.updateQueue;if(o.updateQueue=null,ve!==null)try{le==="input"&&L.type==="radio"&&L.name!=null&&ee(A,L),_s(le,D);var Re=_s(le,L);for(D=0;D<ve.length;D+=2){var Ye=ve[D],Xe=ve[D+1];Ye==="style"?bs(A,Xe):Ye==="dangerouslySetInnerHTML"?Lt(A,Xe):Ye==="children"?zt(A,Xe):M(A,Ye,Xe,Re)}switch(le){case"input":Ke(A,L);break;case"textarea":Nt(A,L);break;case"select":var Ve=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!L.multiple;var lt=L.value;lt!=null?Je(A,!!L.multiple,lt,!1):Ve!==!!L.multiple&&(L.defaultValue!=null?Je(A,!!L.multiple,L.defaultValue,!0):Je(A,!!L.multiple,L.multiple?[]:"",!1))}A[Mc]=L}catch(mt){fr(o,o.return,mt)}}break;case 6:if(bo(u,o),pl(o),w&4){if(o.stateNode===null)throw Error(t(162));A=o.stateNode,L=o.memoizedProps;try{A.nodeValue=L}catch(mt){fr(o,o.return,mt)}}break;case 3:if(bo(u,o),pl(o),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Js(u.containerInfo)}catch(mt){fr(o,o.return,mt)}break;case 4:bo(u,o),pl(o);break;case 13:bo(u,o),pl(o),A=o.child,A.flags&8192&&(L=A.memoizedState!==null,A.stateNode.isHidden=L,!L||A.alternate!==null&&A.alternate.memoizedState!==null||(e5=Hn())),w&4&&wx(o);break;case 22:if(Ye=p!==null&&p.memoizedState!==null,o.mode&1?(Di=(Re=Di)||Ye,bo(u,o),Di=Re):bo(u,o),pl(o),w&8192){if(Re=o.memoizedState!==null,(o.stateNode.isHidden=Re)&&!Ye&&(o.mode&1)!==0)for(ct=o,Ye=o.child;Ye!==null;){for(Xe=ct=Ye;ct!==null;){switch(Ve=ct,lt=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:Lm(4,Ve,Ve.return);break;case 1:_p(Ve,Ve.return);var ft=Ve.stateNode;if(typeof ft.componentWillUnmount=="function"){w=Ve,p=Ve.return;try{u=w,ft.props=u.memoizedProps,ft.state=u.memoizedState,ft.componentWillUnmount()}catch(mt){fr(w,p,mt)}}break;case 5:_p(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){Ax(Xe);continue}}lt!==null?(lt.return=Ve,ct=lt):Ax(Xe)}Ye=Ye.sibling}e:for(Ye=null,Xe=o;;){if(Xe.tag===5){if(Ye===null){Ye=Xe;try{A=Xe.stateNode,Re?(L=A.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(le=Xe.stateNode,ve=Xe.memoizedProps.style,D=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,le.style.display=en("display",D))}catch(mt){fr(o,o.return,mt)}}}else if(Xe.tag===6){if(Ye===null)try{Xe.stateNode.nodeValue=Re?"":Xe.memoizedProps}catch(mt){fr(o,o.return,mt)}}else if((Xe.tag!==22&&Xe.tag!==23||Xe.memoizedState===null||Xe===o)&&Xe.child!==null){Xe.child.return=Xe,Xe=Xe.child;continue}if(Xe===o)break e;for(;Xe.sibling===null;){if(Xe.return===null||Xe.return===o)break e;Ye===Xe&&(Ye=null),Xe=Xe.return}Ye===Xe&&(Ye=null),Xe.sibling.return=Xe.return,Xe=Xe.sibling}}break;case 19:bo(u,o),pl(o),w&4&&wx(o);break;case 21:break;default:bo(u,o),pl(o)}}function pl(o){var u=o.flags;if(u&2){try{e:{for(var p=o.return;p!==null;){if(mx(p)){var w=p;break e}p=p.return}throw Error(t(160))}switch(w.tag){case 5:var A=w.stateNode;w.flags&32&&(zt(A,""),w.flags&=-33);var L=vx(o);Jy(o,L,A);break;case 3:case 4:var D=w.stateNode.containerInfo,le=vx(o);Xy(o,le,D);break;default:throw Error(t(161))}}catch(ve){fr(o,o.return,ve)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Tk(o,u,p){ct=o,_x(o)}function _x(o,u,p){for(var w=(o.mode&1)!==0;ct!==null;){var A=ct,L=A.child;if(A.tag===22&&w){var D=A.memoizedState!==null||_v;if(!D){var le=A.alternate,ve=le!==null&&le.memoizedState!==null||Di;le=_v;var Re=Di;if(_v=D,(Di=ve)&&!Re)for(ct=A;ct!==null;)D=ct,ve=D.child,D.tag===22&&D.memoizedState!==null?Sx(A):ve!==null?(ve.return=D,ct=ve):Sx(A);for(;L!==null;)ct=L,_x(L),L=L.sibling;ct=A,_v=le,Di=Re}xx(o)}else(A.subtreeFlags&8772)!==0&&L!==null?(L.return=A,ct=L):xx(o)}}function xx(o){for(;ct!==null;){var u=ct;if((u.flags&8772)!==0){var p=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Di||xv(5,u);break;case 1:var w=u.stateNode;if(u.flags&4&&!Di)if(p===null)w.componentDidMount();else{var A=u.elementType===u.type?p.memoizedProps:yo(u.type,p.memoizedProps);w.componentDidUpdate(A,p.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var L=u.updateQueue;L!==null&&mu(u,L,w);break;case 3:var D=u.updateQueue;if(D!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=u.child.stateNode;break;case 1:p=u.child.stateNode}mu(u,D,p)}break;case 5:var le=u.stateNode;if(p===null&&u.flags&4){p=le;var ve=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&p.focus();break;case"img":ve.src&&(p.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Re=u.alternate;if(Re!==null){var Ye=Re.memoizedState;if(Ye!==null){var Xe=Ye.dehydrated;Xe!==null&&Js(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Di||u.flags&512&&Ky(u)}catch(Ve){fr(u,u.return,Ve)}}if(u===o){ct=null;break}if(p=u.sibling,p!==null){p.return=u.return,ct=p;break}ct=u.return}}function Ax(o){for(;ct!==null;){var u=ct;if(u===o){ct=null;break}var p=u.sibling;if(p!==null){p.return=u.return,ct=p;break}ct=u.return}}function Sx(o){for(;ct!==null;){var u=ct;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{xv(4,u)}catch(ve){fr(u,p,ve)}break;case 1:var w=u.stateNode;if(typeof w.componentDidMount=="function"){var A=u.return;try{w.componentDidMount()}catch(ve){fr(u,A,ve)}}var L=u.return;try{Ky(u)}catch(ve){fr(u,L,ve)}break;case 5:var D=u.return;try{Ky(u)}catch(ve){fr(u,D,ve)}}}catch(ve){fr(u,u.return,ve)}if(u===o){ct=null;break}var le=u.sibling;if(le!==null){le.return=u.return,ct=le;break}ct=u.return}}var Rk=Math.ceil,Av=H.ReactCurrentDispatcher,Qy=H.ReactCurrentOwner,Ba=H.ReactCurrentBatchConfig,hn=0,Zr=null,Nr=null,vi=0,sa=0,xp=ta(0),jr=0,Pm=null,wd=0,Sv=0,Zy=0,Nm=null,Os=null,e5=0,Ap=1/0,wu=null,Ev=!1,t5=null,Wc=null,kv=!1,Gc=null,Cv=0,Tm=0,n5=null,Lv=-1,Pv=0;function cs(){return(hn&6)!==0?Hn():Lv!==-1?Lv:Lv=Hn()}function Vc(o){return(o.mode&1)===0?1:(hn&2)!==0&&vi!==0?vi&-vi:xn.transition!==null?(Pv===0&&(Pv=Kh()),Pv):(o=un,o!==0||(o=window.event,o=o===void 0?16:ed(o.type)),o)}function _o(o,u,p,w){if(50<Tm)throw Tm=0,n5=null,Error(t(185));Xo(o,p,w),((hn&2)===0||o!==Zr)&&(o===Zr&&((hn&2)===0&&(Sv|=p),jr===4&&Yc(o,vi)),Ms(o,w),p===1&&hn===0&&(u.mode&1)===0&&(Ap=Hn()+500,gd&&P()))}function Ms(o,u){var p=o.callbackNode;Li(o,u);var w=Ci(o,o===Zr?vi:0);if(w===0)p!==null&&Hl(p),o.callbackNode=null,o.callbackPriority=0;else if(u=w&-w,o.callbackPriority!==u){if(p!=null&&Hl(p),u===1)o.tag===0?E(kx.bind(null,o)):b(kx.bind(null,o)),Ty(function(){(hn&6)===0&&P()}),p=null;else{switch(hc(w)){case 1:p=Yo;break;case 4:p=Vh;break;case 16:p=oc;break;case 536870912:p=Xf;break;default:p=oc}p=Ox(p,Ex.bind(null,o))}o.callbackPriority=u,o.callbackNode=p}}function Ex(o,u){if(Lv=-1,Pv=0,(hn&6)!==0)throw Error(t(327));var p=o.callbackNode;if(Sp()&&o.callbackNode!==p)return null;var w=Ci(o,o===Zr?vi:0);if(w===0)return null;if((w&30)!==0||(w&o.expiredLanes)!==0||u)u=Nv(o,w);else{u=w;var A=hn;hn|=2;var L=Lx();(Zr!==o||vi!==u)&&(wu=null,Ap=Hn()+500,_d(o,u));do try{Mk();break}catch(le){Cx(o,le)}while(!0);Dr(),Av.current=L,hn=A,Nr!==null?u=0:(Zr=null,vi=0,u=jr)}if(u!==0){if(u===2&&(A=Vl(o),A!==0&&(w=A,u=r5(o,A))),u===1)throw p=Pm,_d(o,0),Yc(o,w),Ms(o,Hn()),p;if(u===6)Yc(o,w);else{if(A=o.current.alternate,(w&30)===0&&!Ik(A)&&(u=Nv(o,w),u===2&&(L=Vl(o),L!==0&&(w=L,u=r5(o,L))),u===1))throw p=Pm,_d(o,0),Yc(o,w),Ms(o,Hn()),p;switch(o.finishedWork=A,o.finishedLanes=w,u){case 0:case 1:throw Error(t(345));case 2:xd(o,Os,wu);break;case 3:if(Yc(o,w),(w&130023424)===w&&(u=e5+500-Hn(),10<u)){if(Ci(o,0)!==0)break;if(A=o.suspendedLanes,(A&w)!==w){cs(),o.pingedLanes|=o.suspendedLanes&A;break}o.timeoutHandle=vm(xd.bind(null,o,Os,wu),u);break}xd(o,Os,wu);break;case 4:if(Yc(o,w),(w&4194240)===w)break;for(u=o.eventTimes,A=-1;0<w;){var D=31-es(w);L=1<<D,D=u[D],D>A&&(A=D),w&=~L}if(w=A,w=Hn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*Rk(w/1960))-w,10<w){o.timeoutHandle=vm(xd.bind(null,o,Os,wu),w);break}xd(o,Os,wu);break;case 5:xd(o,Os,wu);break;default:throw Error(t(329))}}}return Ms(o,Hn()),o.callbackNode===p?Ex.bind(null,o):null}function r5(o,u){var p=Nm;return o.current.memoizedState.isDehydrated&&(_d(o,u).flags|=256),o=Nv(o,u),o!==2&&(u=Os,Os=p,u!==null&&i5(u)),o}function i5(o){Os===null?Os=o:Os.push.apply(Os,o)}function Ik(o){for(var u=o;;){if(u.flags&16384){var p=u.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var w=0;w<p.length;w++){var A=p[w],L=A.getSnapshot;A=A.value;try{if(!cn(L(),A))return!1}catch{return!1}}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Yc(o,u){for(u&=~Zy,u&=~Sv,o.suspendedLanes|=u,o.pingedLanes&=~u,o=o.expirationTimes;0<u;){var p=31-es(u),w=1<<p;o[p]=-1,u&=~w}}function kx(o){if((hn&6)!==0)throw Error(t(327));Sp();var u=Ci(o,0);if((u&1)===0)return Ms(o,Hn()),null;var p=Nv(o,u);if(o.tag!==0&&p===2){var w=Vl(o);w!==0&&(u=w,p=r5(o,w))}if(p===1)throw p=Pm,_d(o,0),Yc(o,u),Ms(o,Hn()),p;if(p===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=u,xd(o,Os,wu),Ms(o,Hn()),null}function s5(o,u){var p=hn;hn|=1;try{return o(u)}finally{hn=p,hn===0&&(Ap=Hn()+500,gd&&P())}}function bd(o){Gc!==null&&Gc.tag===0&&(hn&6)===0&&Sp();var u=hn;hn|=1;var p=Ba.transition,w=un;try{if(Ba.transition=null,un=1,o)return o()}finally{un=w,Ba.transition=p,hn=u,(hn&6)===0&&P()}}function a5(){sa=xp.current,yn(xp)}function _d(o,u){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,lv(p)),Nr!==null)for(p=Nr.return;p!==null;){var w=p;switch(ye(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&up();break;case 3:Fa(),yn(Ii),yn(Fr),Sm();break;case 5:xm(w);break;case 4:Fa();break;case 13:yn(Rn);break;case 19:yn(Rn);break;case 10:Mi(w.type._context);break;case 22:case 23:a5()}p=p.return}if(Zr=o,Nr=o=Kc(o.current,null),vi=sa=u,jr=0,Pm=null,Zy=Sv=wd=0,Os=Nm=null,ss!==null){for(u=0;u<ss.length;u++)if(p=ss[u],w=p.interleaved,w!==null){p.interleaved=null;var A=w.next,L=p.pending;if(L!==null){var D=L.next;L.next=A,w.next=D}p.pending=w}ss=null}return o}function Cx(o,u){do{var p=Nr;try{if(Dr(),hp.current=vv,Uc){for(var w=Fn.memoizedState;w!==null;){var A=w.queue;A!==null&&(A.pending=null),w=w.next}Uc=!1}if(Da=0,sr=dr=Fn=null,mo=!1,qc=0,Qy.current=null,p===null||p.return===null){jr=1,Pm=u,Nr=null;break}e:{var L=o,D=p.return,le=p,ve=u;if(u=vi,le.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Re=ve,Ye=le,Xe=Ye.tag;if((Ye.mode&1)===0&&(Xe===0||Xe===11||Xe===15)){var Ve=Ye.alternate;Ve?(Ye.updateQueue=Ve.updateQueue,Ye.memoizedState=Ve.memoizedState,Ye.lanes=Ve.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var lt=Q_(D);if(lt!==null){lt.flags&=-257,Z_(lt,D,le,L,u),lt.mode&1&&J_(L,Re,u),u=lt,ve=Re;var ft=u.updateQueue;if(ft===null){var mt=new Set;mt.add(ve),u.updateQueue=mt}else ft.add(ve);break e}else{if((u&1)===0){J_(L,Re,u),o5();break e}ve=Error(t(426))}}else if(Me&&le.mode&1){var br=Q_(D);if(br!==null){(br.flags&65536)===0&&(br.flags|=256),Z_(br,D,le,L,u),wn(bp(ve,le));break e}}L=ve=bp(ve,le),jr!==4&&(jr=2),Nm===null?Nm=[L]:Nm.push(L),L=D;do{switch(L.tag){case 3:L.flags|=65536,u&=-u,L.lanes|=u;var Pe=K_(L,ve,u);Rs(L,Pe);break e;case 1:le=ve;var _e=L.type,Ne=L.stateNode;if((L.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(Wc===null||!Wc.has(Ne)))){L.flags|=65536,u&=-u,L.lanes|=u;var Qe=X_(L,le,u);Rs(L,Qe);break e}}L=L.return}while(L!==null)}Nx(p)}catch(vt){u=vt,Nr===p&&p!==null&&(Nr=p=p.return);continue}break}while(!0)}function Lx(){var o=Av.current;return Av.current=vv,o===null?vv:o}function o5(){(jr===0||jr===3||jr===2)&&(jr=4),Zr===null||(wd&268435455)===0&&(Sv&268435455)===0||Yc(Zr,vi)}function Nv(o,u){var p=hn;hn|=2;var w=Lx();(Zr!==o||vi!==u)&&(wu=null,_d(o,u));do try{Ok();break}catch(A){Cx(o,A)}while(!0);if(Dr(),hn=p,Av.current=w,Nr!==null)throw Error(t(261));return Zr=null,vi=0,jr}function Ok(){for(;Nr!==null;)Px(Nr)}function Mk(){for(;Nr!==null&&!ac();)Px(Nr)}function Px(o){var u=Ix(o.alternate,o,sa);o.memoizedProps=o.pendingProps,u===null?Nx(o):Nr=u,Qy.current=null}function Nx(o){var u=o;do{var p=u.alternate;if(o=u.return,(u.flags&32768)===0){if(p=Ck(p,u,sa),p!==null){Nr=p;return}}else{if(p=Lk(p,u),p!==null){p.flags&=32767,Nr=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{jr=6,Nr=null;return}}if(u=u.sibling,u!==null){Nr=u;return}Nr=u=o}while(u!==null);jr===0&&(jr=5)}function xd(o,u,p){var w=un,A=Ba.transition;try{Ba.transition=null,un=1,Fk(o,u,p,w)}finally{Ba.transition=A,un=w}return null}function Fk(o,u,p,w){do Sp();while(Gc!==null);if((hn&6)!==0)throw Error(t(327));p=o.finishedWork;var A=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var L=p.lanes|p.childLanes;if(fm(o,L),o===Zr&&(Nr=Zr=null,vi=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||kv||(kv=!0,Ox(oc,function(){return Sp(),null})),L=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||L){L=Ba.transition,Ba.transition=null;var D=un;un=1;var le=hn;hn|=4,Qy.current=null,Nk(o,p),bx(p,o),au(hu),gc=!!fd,hu=fd=null,o.current=p,Tk(p),Kf(),hn=le,un=D,Ba.transition=L}else o.current=p;if(kv&&(kv=!1,Gc=o,Cv=A),L=o.pendingLanes,L===0&&(Wc=null),lc(p.stateNode),Ms(o,Hn()),u!==null)for(w=o.onRecoverableError,p=0;p<u.length;p++)A=u[p],w(A.value,{componentStack:A.stack,digest:A.digest});if(Ev)throw Ev=!1,o=t5,t5=null,o;return(Cv&1)!==0&&o.tag!==0&&Sp(),L=o.pendingLanes,(L&1)!==0?o===n5?Tm++:(Tm=0,n5=o):Tm=0,P(),null}function Sp(){if(Gc!==null){var o=hc(Cv),u=Ba.transition,p=un;try{if(Ba.transition=null,un=16>o?16:o,Gc===null)var w=!1;else{if(o=Gc,Gc=null,Cv=0,(hn&6)!==0)throw Error(t(331));var A=hn;for(hn|=4,ct=o.current;ct!==null;){var L=ct,D=L.child;if((ct.flags&16)!==0){var le=L.deletions;if(le!==null){for(var ve=0;ve<le.length;ve++){var Re=le[ve];for(ct=Re;ct!==null;){var Ye=ct;switch(Ye.tag){case 0:case 11:case 15:Lm(8,Ye,L)}var Xe=Ye.child;if(Xe!==null)Xe.return=Ye,ct=Xe;else for(;ct!==null;){Ye=ct;var Ve=Ye.sibling,lt=Ye.return;if(gx(Ye),Ye===Re){ct=null;break}if(Ve!==null){Ve.return=lt,ct=Ve;break}ct=lt}}}var ft=L.alternate;if(ft!==null){var mt=ft.child;if(mt!==null){ft.child=null;do{var br=mt.sibling;mt.sibling=null,mt=br}while(mt!==null)}}ct=L}}if((L.subtreeFlags&2064)!==0&&D!==null)D.return=L,ct=D;else e:for(;ct!==null;){if(L=ct,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:Lm(9,L,L.return)}var Pe=L.sibling;if(Pe!==null){Pe.return=L.return,ct=Pe;break e}ct=L.return}}var _e=o.current;for(ct=_e;ct!==null;){D=ct;var Ne=D.child;if((D.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=D,ct=Ne;else e:for(D=_e;ct!==null;){if(le=ct,(le.flags&2048)!==0)try{switch(le.tag){case 0:case 11:case 15:xv(9,le)}}catch(vt){fr(le,le.return,vt)}if(le===D){ct=null;break e}var Qe=le.sibling;if(Qe!==null){Qe.return=le.return,ct=Qe;break e}ct=le.return}}if(hn=A,P(),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot($l,o)}catch{}w=!0}return w}finally{un=p,Ba.transition=u}}return!1}function Tx(o,u,p){u=bp(p,u),u=K_(o,u,1),o=Ts(o,u,1),u=cs(),o!==null&&(Xo(o,1,u),Ms(o,u))}function fr(o,u,p){if(o.tag===3)Tx(o,o,p);else for(;u!==null;){if(u.tag===3){Tx(u,o,p);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Wc===null||!Wc.has(w))){o=bp(p,o),o=X_(u,o,1),u=Ts(u,o,1),o=cs(),u!==null&&(Xo(u,1,o),Ms(u,o));break}}u=u.return}}function Dk(o,u,p){var w=o.pingCache;w!==null&&w.delete(u),u=cs(),o.pingedLanes|=o.suspendedLanes&p,Zr===o&&(vi&p)===p&&(jr===4||jr===3&&(vi&130023424)===vi&&500>Hn()-e5?_d(o,0):Zy|=p),Ms(o,u)}function Rx(o,u){u===0&&((o.mode&1)===0?u=1:(u=Ko,Ko<<=1,(Ko&130023424)===0&&(Ko=4194304)));var p=cs();o=pn(o,u),o!==null&&(Xo(o,u,p),Ms(o,p))}function jk(o){var u=o.memoizedState,p=0;u!==null&&(p=u.retryLane),Rx(o,p)}function Bk(o,u){var p=0;switch(o.tag){case 13:var w=o.stateNode,A=o.memoizedState;A!==null&&(p=A.retryLane);break;case 19:w=o.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(u),Rx(o,p)}var Ix;Ix=function(o,u,p){if(o!==null)if(o.memoizedProps!==u.pendingProps||Ii.current)Is=!0;else{if((o.lanes&p)===0&&(u.flags&128)===0)return Is=!1,kk(o,u,p);Is=(o.flags&131072)!==0}else Is=!1,Me&&(u.flags&1048576)!==0&&Ue(u,$,u.index);switch(u.lanes=0,u.tag){case 2:var w=u.type;bv(o,u),o=u.pendingProps;var A=Dc(u,Fr.current);Yn(u,p),A=md(null,u,w,o,A,p);var L=ja();return u.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Oi(w)?(L=!0,pu(u)):L=!1,u.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,cp(u),A.updater=yv,u.stateNode=A,A._reactInternals=u,jy(u,w,o,p),u=qy(null,u,w,!0,L,p)):(u.tag=0,Me&&L&&Ie(u),us(null,u,A,p),u=u.child),u;case 16:w=u.elementType;e:{switch(bv(o,u),o=u.pendingProps,A=w._init,w=A(w._payload),u.type=w,A=u.tag=Uk(w),o=yo(w,o),A){case 0:u=Uy(null,u,w,o,p);break e;case 1:u=sx(null,u,w,o,p);break e;case 11:u=ex(null,u,w,o,p);break e;case 14:u=tx(null,u,w,yo(w.type,o),p);break e}throw Error(t(306,w,""))}return u;case 0:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:yo(w,A),Uy(o,u,w,A,p);case 1:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:yo(w,A),sx(o,u,w,A,p);case 3:e:{if(ax(u),o===null)throw Error(t(387));w=u.pendingProps,L=u.memoizedState,A=L.element,_m(o,u),po(u,w,null,p);var D=u.memoizedState;if(w=D.element,L.isDehydrated)if(L={element:w,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},u.updateQueue.baseState=L,u.memoizedState=L,u.flags&256){A=bp(Error(t(423)),u),u=ox(o,u,w,p,A);break e}else if(w!==A){A=bp(Error(t(424)),u),u=ox(o,u,w,p,A);break e}else for(Fe=pi(u.stateNode.containerInfo.firstChild),we=u,Me=!0,je=null,p=fn(u,null,w,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ut(),w===A){u=yu(o,u,p);break e}us(o,u,w,p)}u=u.child}return u;case 5:return dv(u),o===null&&nt(u),w=u.type,A=u.pendingProps,L=o!==null?o.memoizedProps:null,D=A.children,mm(w,A)?D=null:L!==null&&mm(w,L)&&(u.flags|=32),ix(o,u),us(o,u,D,p),u.child;case 6:return o===null&&nt(u),null;case 13:return lx(o,u,p);case 4:return zc(u,u.stateNode.containerInfo),w=u.pendingProps,o===null?u.child=vr(u,null,w,p):us(o,u,w,p),u.child;case 11:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:yo(w,A),ex(o,u,w,A,p);case 7:return us(o,u,u.pendingProps,p),u.child;case 8:return us(o,u,u.pendingProps.children,p),u.child;case 12:return us(o,u,u.pendingProps.children,p),u.child;case 10:e:{if(w=u.type._context,A=u.pendingProps,L=u.memoizedProps,D=A.value,_n(Jr,w._currentValue),w._currentValue=D,L!==null)if(cn(L.value,D)){if(L.children===A.children&&!Ii.current){u=yu(o,u,p);break e}}else for(L=u.child,L!==null&&(L.return=u);L!==null;){var le=L.dependencies;if(le!==null){D=L.child;for(var ve=le.firstContext;ve!==null;){if(ve.context===w){if(L.tag===1){ve=Ns(-1,p&-p),ve.tag=2;var Re=L.updateQueue;if(Re!==null){Re=Re.shared;var Ye=Re.pending;Ye===null?ve.next=ve:(ve.next=Ye.next,Ye.next=ve),Re.pending=ve}}L.lanes|=p,ve=L.alternate,ve!==null&&(ve.lanes|=p),Ps(L.return,p,u),le.lanes|=p;break}ve=ve.next}}else if(L.tag===10)D=L.type===u.type?null:L.child;else if(L.tag===18){if(D=L.return,D===null)throw Error(t(341));D.lanes|=p,le=D.alternate,le!==null&&(le.lanes|=p),Ps(D,p,u),D=L.sibling}else D=L.child;if(D!==null)D.return=L;else for(D=L;D!==null;){if(D===u){D=null;break}if(L=D.sibling,L!==null){L.return=D.return,D=L;break}D=D.return}L=D}us(o,u,A.children,p),u=u.child}return u;case 9:return A=u.type,w=u.pendingProps.children,Yn(u,p),A=hr(A),w=w(A),u.flags|=1,us(o,u,w,p),u.child;case 14:return w=u.type,A=yo(w,u.pendingProps),A=yo(w.type,A),tx(o,u,w,A,p);case 15:return nx(o,u,u.type,u.pendingProps,p);case 17:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:yo(w,A),bv(o,u),u.tag=1,Oi(w)?(o=!0,pu(u)):o=!1,Yn(u,p),V_(u,w,A),jy(u,w,A,p),qy(null,u,w,!0,o,p);case 19:return cx(o,u,p);case 22:return rx(o,u,p)}throw Error(t(156,u.tag))};function Ox(o,u){return ql(o,u)}function zk(o,u,p,w){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(o,u,p,w){return new zk(o,u,p,w)}function l5(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Uk(o){if(typeof o=="function")return l5(o)?1:0;if(o!=null){if(o=o.$$typeof,o===V)return 11;if(o===Ee)return 14}return 2}function Kc(o,u){var p=o.alternate;return p===null?(p=za(o.tag,u,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=u,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,u=o.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function Tv(o,u,p,w,A,L){var D=2;if(w=o,typeof o=="function")l5(o)&&(D=1);else if(typeof o=="string")D=5;else e:switch(o){case ne:return Ad(p.children,A,L,u);case Z:D=8,A|=8;break;case fe:return o=za(12,p,u,A|2),o.elementType=fe,o.lanes=L,o;case ue:return o=za(13,p,u,A),o.elementType=ue,o.lanes=L,o;case re:return o=za(19,p,u,A),o.elementType=re,o.lanes=L,o;case me:return Rv(p,A,L,u);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Se:D=10;break e;case q:D=9;break e;case V:D=11;break e;case Ee:D=14;break e;case ce:D=16,w=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return u=za(D,p,u,A),u.elementType=o,u.type=w,u.lanes=L,u}function Ad(o,u,p,w){return o=za(7,o,w,u),o.lanes=p,o}function Rv(o,u,p,w){return o=za(22,o,w,u),o.elementType=me,o.lanes=p,o.stateNode={isHidden:!1},o}function u5(o,u,p){return o=za(6,o,null,u),o.lanes=p,o}function c5(o,u,p){return u=za(4,o.children!==null?o.children:[],o.key,u),u.lanes=p,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function qk(o,u,p,w,A){this.tag=u,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xh(0),this.expirationTimes=Xh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xh(0),this.identifierPrefix=w,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function h5(o,u,p,w,A,L,D,le,ve){return o=new qk(o,u,p,le,ve),u===1?(u=1,L===!0&&(u|=8)):u=0,L=za(3,null,null,u),o.current=L,L.stateNode=o,L.memoizedState={element:w,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},cp(L),o}function Hk(o,u,p){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:w==null?null:""+w,children:o,containerInfo:u,implementation:p}}function Mx(o){if(!o)return cl;o=o._reactInternals;e:{if(Or(o)!==o||o.tag!==1)throw Error(t(170));var u=o;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Oi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(o.tag===1){var p=o.type;if(Oi(p))return bm(o,p,u)}return u}function Fx(o,u,p,w,A,L,D,le,ve){return o=h5(p,w,!0,o,A,L,D,le,ve),o.context=Mx(null),p=o.current,w=cs(),A=Vc(p),L=Ns(w,A),L.callback=u??null,Ts(p,L,A),o.current.lanes=A,Xo(o,A,w),Ms(o,w),o}function Iv(o,u,p,w){var A=u.current,L=cs(),D=Vc(A);return p=Mx(p),u.context===null?u.context=p:u.pendingContext=p,u=Ns(L,D),u.payload={element:o},w=w===void 0?null:w,w!==null&&(u.callback=w),o=Ts(A,u,D),o!==null&&(_o(o,A,D,L),gu(o,A,D)),D}function Ov(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Dx(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<u?p:u}}function d5(o,u){Dx(o,u),(o=o.alternate)&&Dx(o,u)}function $k(){return null}var jx=typeof reportError=="function"?reportError:function(o){console.error(o)};function f5(o){this._internalRoot=o}Mv.prototype.render=f5.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(t(409));Iv(o,u,null,null)},Mv.prototype.unmount=f5.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;bd(function(){Iv(null,o,null,null)}),u[Xr]=null}};function Mv(o){this._internalRoot=o}Mv.prototype.unstable_scheduleHydration=function(o){if(o){var u=Ea();o={blockedOn:null,target:o,priority:u};for(var p=0;p<Ca.length&&u!==0&&u<Ca[p].priority;p++);Ca.splice(p,0,o),p===0&&fc(o)}};function p5(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Fv(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Bx(){}function Wk(o,u,p,w,A){if(A){if(typeof w=="function"){var L=w;w=function(){var Re=Ov(D);L.call(Re)}}var D=Fx(u,w,o,0,null,!1,!1,"",Bx);return o._reactRootContainer=D,o[Xr]=D.current,uu(o.nodeType===8?o.parentNode:o),bd(),D}for(;A=o.lastChild;)o.removeChild(A);if(typeof w=="function"){var le=w;w=function(){var Re=Ov(ve);le.call(Re)}}var ve=h5(o,0,!1,null,null,!1,!1,"",Bx);return o._reactRootContainer=ve,o[Xr]=ve.current,uu(o.nodeType===8?o.parentNode:o),bd(function(){Iv(u,ve,p,w)}),ve}function Dv(o,u,p,w,A){var L=p._reactRootContainer;if(L){var D=L;if(typeof A=="function"){var le=A;A=function(){var ve=Ov(D);le.call(ve)}}Iv(u,D,o,A)}else D=Wk(p,u,o,A,w);return Ov(D)}Zf=function(o){switch(o.tag){case 3:var u=o.stateNode;if(u.current.memoizedState.isDehydrated){var p=Gl(u.pendingLanes);p!==0&&(cc(u,p|1),Ms(u,Hn()),(hn&6)===0&&(Ap=Hn()+500,P()))}break;case 13:bd(function(){var w=pn(o,1);if(w!==null){var A=cs();_o(w,o,1,A)}}),d5(o,1)}},Jh=function(o){if(o.tag===13){var u=pn(o,134217728);if(u!==null){var p=cs();_o(u,o,134217728,p)}d5(o,134217728)}},ep=function(o){if(o.tag===13){var u=Vc(o),p=pn(o,u);if(p!==null){var w=cs();_o(p,o,u,w)}d5(o,u)}},Ea=function(){return un},Yl=function(o,u){var p=un;try{return un=o,u()}finally{un=p}},Mn=function(o,u,p){switch(u){case"input":if(Ke(o,p),u=p.name,p.type==="radio"&&u!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<p.length;u++){var w=p[u];if(w!==o&&w.form===o.form){var A=pd(w);if(!A)throw Error(t(90));De(w),Ke(w,A)}}}break;case"textarea":Nt(o,p);break;case"select":u=p.value,u!=null&&Je(o,!!p.multiple,u,!1)}},Wo=s5,Lr=bd;var Gk={usingClientEntryPoint:!1,Events:[Fc,du,pd,It,ln,s5]},Rm={findFiberByHostInstance:ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vk={bundleType:Rm.bundleType,version:Rm.version,rendererPackageName:Rm.rendererPackageName,rendererConfig:Rm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Vo(o),o===null?null:o.stateNode},findFiberByHostInstance:Rm.findFiberByHostInstance||$k,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jv.isDisabled&&jv.supportsFiber)try{$l=jv.inject(Vk),As=jv}catch{}}return Fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gk,Fs.createPortal=function(o,u){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p5(u))throw Error(t(200));return Hk(o,u,null,p)},Fs.createRoot=function(o,u){if(!p5(o))throw Error(t(299));var p=!1,w="",A=jx;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(A=u.onRecoverableError)),u=h5(o,1,!1,null,null,p,!1,w,A),o[Xr]=u.current,uu(o.nodeType===8?o.parentNode:o),new f5(u)},Fs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Vo(u),o=o===null?null:o.stateNode,o},Fs.flushSync=function(o){return bd(o)},Fs.hydrate=function(o,u,p){if(!Fv(u))throw Error(t(200));return Dv(null,o,u,!0,p)},Fs.hydrateRoot=function(o,u,p){if(!p5(o))throw Error(t(405));var w=p!=null&&p.hydratedSources||null,A=!1,L="",D=jx;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(L=p.identifierPrefix),p.onRecoverableError!==void 0&&(D=p.onRecoverableError)),u=Fx(u,null,o,1,p??null,A,!1,L,D),o[Xr]=u.current,uu(o),w)for(o=0;o<w.length;o++)p=w[o],A=p._getVersion,A=A(p._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[p,A]:u.mutableSourceEagerHydrationData.push(p,A);return new Mv(u)},Fs.render=function(o,u,p){if(!Fv(u))throw Error(t(200));return Dv(null,o,u,!1,p)},Fs.unmountComponentAtNode=function(o){if(!Fv(o))throw Error(t(40));return o._reactRootContainer?(bd(function(){Dv(null,null,o,!1,function(){o._reactRootContainer=null,o[Xr]=null})}),!0):!1},Fs.unstable_batchedUpdates=s5,Fs.unstable_renderSubtreeIntoContainer=function(o,u,p,w){if(!Fv(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Dv(o,u,p,!1,w)},Fs.version="18.3.1-next-f1338f8080-20240426",Fs}var Yx;function n3(){if(Yx)return y5.exports;Yx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),y5.exports=sC(),y5.exports}var Kx;function aC(){if(Kx)return Bv;Kx=1;var s=n3();return Bv.createRoot=s.createRoot,Bv.hydrateRoot=s.hydrateRoot,Bv}var oC=aC();const lC=s_(oC);n3();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function g0(){return g0=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},g0.apply(this,arguments)}var Mh;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Mh||(Mh={}));const Xx="popstate";function uC(s){s===void 0&&(s={});function e(n,r){let{pathname:i,search:a,hash:l}=n.location;return yw("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:I2(r)}return hC(e,t,null,s)}function kr(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function r3(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cC(){return Math.random().toString(36).substr(2,8)}function Jx(s,e){return{usr:s.state,key:s.key,idx:e}}function yw(s,e,t,n){return t===void 0&&(t=null),g0({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?um(e):e,{state:t,key:e&&e.key||n||cC()})}function I2(s){let{pathname:e="/",search:t="",hash:n=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function um(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substr(n),s=s.substr(0,n)),s&&(e.pathname=s)}return e}function hC(s,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:i=!1}=n,a=r.history,l=Mh.Pop,c=null,h=d();h==null&&(h=0,a.replaceState(g0({},a.state,{idx:h}),""));function d(){return(a.state||{idx:null}).idx}function m(){l=Mh.Pop;let C=d(),k=C==null?null:C-h;h=C,c&&c({action:l,location:S.location,delta:k})}function y(C,k){l=Mh.Push;let T=yw(S.location,C,k);h=d()+1;let M=Jx(T,h),H=S.createHref(T);try{a.pushState(M,"",H)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;r.location.assign(H)}i&&c&&c({action:l,location:S.location,delta:1})}function v(C,k){l=Mh.Replace;let T=yw(S.location,C,k);h=d();let M=Jx(T,h),H=S.createHref(T);a.replaceState(M,"",H),i&&c&&c({action:l,location:S.location,delta:0})}function x(C){let k=r.location.origin!=="null"?r.location.origin:r.location.href,T=typeof C=="string"?C:I2(C);return T=T.replace(/ $/,"%20"),kr(k,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,k)}let S={get action(){return l},get location(){return s(r,a)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Xx,m),c=C,()=>{r.removeEventListener(Xx,m),c=null}},createHref(C){return e(r,C)},createURL:x,encodeLocation(C){let k=x(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:v,go(C){return a.go(C)}};return S}var Qx;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Qx||(Qx={}));function dC(s,e,t){return t===void 0&&(t="/"),fC(s,e,t)}function fC(s,e,t,n){let r=typeof e=="string"?um(e):e,i=o_(r.pathname||"/",t);if(i==null)return null;let a=i3(s);pC(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let h=kC(i);l=AC(a[c],h)}return l}function i3(s,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(kr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=Dh([n,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(kr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),i3(i.children,e,d,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:_C(h,i.index),routesMeta:d})};return s.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of s3(i.path))r(i,a,c)}),e}function s3(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let a=s3(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function pC(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:xC(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const gC=/^:[\w-]+$/,mC=3,vC=2,yC=1,wC=10,bC=-2,Zx=s=>s==="*";function _C(s,e){let t=s.split("/"),n=t.length;return t.some(Zx)&&(n+=bC),e&&(n+=vC),t.filter(r=>!Zx(r)).reduce((r,i)=>r+(gC.test(i)?mC:i===""?yC:wC),n)}function xC(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function AC(s,e,t){let{routesMeta:n}=s,r={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],h=l===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=SC({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),y=c.route;if(!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:Dh([i,m.pathname]),pathnameBase:NC(Dh([i,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(i=Dh([i,m.pathnameBase]))}return a}function SC(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=EC(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((h,d,m)=>{let{paramName:y,isOptional:v}=d;if(y==="*"){let S=l[m]||"";a=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[m];return v&&!x?h[y]=void 0:h[y]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:s}}function EC(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),r3(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function kC(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return r3(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function o_(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}function CC(s,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?um(s):s;return{pathname:t?t.startsWith("/")?t:LC(t,e):e,search:TC(n),hash:RC(r)}}function LC(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function _5(s,e,t,n){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PC(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function l_(s,e){let t=PC(s);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function u_(s,e,t,n){n===void 0&&(n=!1);let r;typeof s=="string"?r=um(s):(r=g0({},s),kr(!r.pathname||!r.pathname.includes("?"),_5("?","pathname","search",r)),kr(!r.pathname||!r.pathname.includes("#"),_5("#","pathname","hash",r)),kr(!r.search||!r.search.includes("#"),_5("#","search","hash",r)));let i=s===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=t;else{let m=e.length-1;if(!n&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;r.pathname=y.join("/")}l=m>=0?e[m]:"/"}let c=CC(r,l),h=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}const Dh=s=>s.join("/").replace(/\/\/+/g,"/"),NC=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),TC=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,RC=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function IC(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const a3=["post","put","patch","delete"];new Set(a3);const OC=["get",...a3];new Set(OC);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m0(){return m0=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},m0.apply(this,arguments)}const c_=He.createContext(null),MC=He.createContext(null),$h=He.createContext(null),py=He.createContext(null),Wh=He.createContext({outlet:null,matches:[],isDataRoute:!1}),o3=He.createContext(null);function FC(s,e){let{relative:t}=e===void 0?{}:e;cm()||kr(!1);let{basename:n,navigator:r}=He.useContext($h),{hash:i,pathname:a,search:l}=u3(s,{relative:t}),c=a;return n!=="/"&&(c=a==="/"?n:Dh([n,a])),r.createHref({pathname:c,search:l,hash:i})}function cm(){return He.useContext(py)!=null}function X1(){return cm()||kr(!1),He.useContext(py).location}function l3(s){He.useContext($h).static||He.useLayoutEffect(s)}function J1(){let{isDataRoute:s}=He.useContext(Wh);return s?KC():DC()}function DC(){cm()||kr(!1);let s=He.useContext(c_),{basename:e,future:t,navigator:n}=He.useContext($h),{matches:r}=He.useContext(Wh),{pathname:i}=X1(),a=JSON.stringify(l_(r,t.v7_relativeSplatPath)),l=He.useRef(!1);return l3(()=>{l.current=!0}),He.useCallback(function(h,d){if(d===void 0&&(d={}),!l.current)return;if(typeof h=="number"){n.go(h);return}let m=u_(h,JSON.parse(a),i,d.relative==="path");s==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Dh([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,a,i,s])}function u3(s,e){let{relative:t}=e===void 0?{}:e,{future:n}=He.useContext($h),{matches:r}=He.useContext(Wh),{pathname:i}=X1(),a=JSON.stringify(l_(r,n.v7_relativeSplatPath));return He.useMemo(()=>u_(s,JSON.parse(a),i,t==="path"),[s,a,i,t])}function jC(s,e){return BC(s,e)}function BC(s,e,t,n){cm()||kr(!1);let{navigator:r,static:i}=He.useContext($h),{matches:a}=He.useContext(Wh),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let d=X1(),m;if(e){var y;let k=typeof e=="string"?um(e):e;h==="/"||(y=k.pathname)!=null&&y.startsWith(h)||kr(!1),m=k}else m=d;let v=m.pathname||"/",x=v;if(h!=="/"){let k=h.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=dC(s,{pathname:x}),C=$C(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Dh([h,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:Dh([h,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,n);return e&&C?He.createElement(py.Provider,{value:{location:m0({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Mh.Pop}},C):C}function zC(){let s=YC(),e=IC(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return He.createElement(He.Fragment,null,He.createElement("h2",null,"Unexpected Application Error!"),He.createElement("h3",{style:{fontStyle:"italic"}},e),t?He.createElement("pre",{style:r},t):null,null)}const UC=He.createElement(zC,null);class qC extends He.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?He.createElement(Wh.Provider,{value:this.props.routeContext},He.createElement(o3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HC(s){let{routeContext:e,match:t,children:n}=s,r=He.useContext(c_);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),He.createElement(Wh.Provider,{value:e},n)}function $C(s,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),s==null){var i;if(!t)return null;if(t.errors)s=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,l=(r=t)==null?void 0:r.errors;if(l!=null){let d=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);d>=0||kr(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,h=-1;if(t&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let m=a[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=d),m.route.id){let{loaderData:y,errors:v}=t,x=m.route.loader&&y[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||x){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((d,m,y)=>{let v,x=!1,S=null,C=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||UC,c&&(h<0&&y===0?(XC("route-fallback"),x=!0,C=null):h===y&&(x=!0,C=m.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,y+1)),T=()=>{let M;return v?M=S:x?M=C:m.route.Component?M=He.createElement(m.route.Component,null):m.route.element?M=m.route.element:M=d,He.createElement(HC,{match:m,routeContext:{outlet:d,matches:k,isDataRoute:t!=null},children:M})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?He.createElement(qC,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:T(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):T()},null)}var c3=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(c3||{}),h3=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(h3||{});function WC(s){let e=He.useContext(c_);return e||kr(!1),e}function GC(s){let e=He.useContext(MC);return e||kr(!1),e}function VC(s){let e=He.useContext(Wh);return e||kr(!1),e}function d3(s){let e=VC(),t=e.matches[e.matches.length-1];return t.route.id||kr(!1),t.route.id}function YC(){var s;let e=He.useContext(o3),t=GC(),n=d3();return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function KC(){let{router:s}=WC(c3.UseNavigateStable),e=d3(h3.UseNavigateStable),t=He.useRef(!1);return l3(()=>{t.current=!0}),He.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?s.navigate(r):s.navigate(r,m0({fromRouteId:e},i)))},[s,e])}const eA={};function XC(s,e,t){eA[s]||(eA[s]=!0)}function JC(s,e){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function f3(s){let{to:e,replace:t,state:n,relative:r}=s;cm()||kr(!1);let{future:i,static:a}=He.useContext($h),{matches:l}=He.useContext(Wh),{pathname:c}=X1(),h=J1(),d=u_(e,l_(l,i.v7_relativeSplatPath),c,r==="path"),m=JSON.stringify(d);return He.useEffect(()=>h(JSON.parse(m),{replace:t,state:n,relative:r}),[h,m,r,t,n]),null}function $m(s){kr(!1)}function QC(s){let{basename:e="/",children:t=null,location:n,navigationType:r=Mh.Pop,navigator:i,static:a=!1,future:l}=s;cm()&&kr(!1);let c=e.replace(/^\/*/,"/"),h=He.useMemo(()=>({basename:c,navigator:i,static:a,future:m0({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=um(n));let{pathname:d="/",search:m="",hash:y="",state:v=null,key:x="default"}=n,S=He.useMemo(()=>{let C=o_(d,c);return C==null?null:{location:{pathname:C,search:m,hash:y,state:v,key:x},navigationType:r}},[c,d,m,y,v,x,r]);return S==null?null:He.createElement($h.Provider,{value:h},He.createElement(py.Provider,{children:t,value:S}))}function ZC(s){let{children:e,location:t}=s;return jC(ww(e),t)}new Promise(()=>{});function ww(s,e){e===void 0&&(e=[]);let t=[];return He.Children.forEach(s,(n,r)=>{if(!He.isValidElement(n))return;let i=[...e,r];if(n.type===He.Fragment){t.push.apply(t,ww(n.props.children,i));return}n.type!==$m&&kr(!1),!n.props.index||!n.props.children||kr(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=ww(n.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bw(){return bw=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},bw.apply(this,arguments)}function eL(s,e){if(s==null)return{};var t={},n=Object.keys(s),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(t[r]=s[r]);return t}function tL(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function nL(s,e){return s.button===0&&(!e||e==="_self")&&!tL(s)}const rL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iL="6";try{window.__reactRouterVersion=iL}catch{}const sL="startTransition",tA=nC[sL];function aL(s){let{basename:e,children:t,future:n,window:r}=s,i=He.useRef();i.current==null&&(i.current=uC({window:r,v5Compat:!0}));let a=i.current,[l,c]=He.useState({action:a.action,location:a.location}),{v7_startTransition:h}=n||{},d=He.useCallback(m=>{h&&tA?tA(()=>c(m)):c(m)},[c,h]);return He.useLayoutEffect(()=>a.listen(d),[a,d]),He.useEffect(()=>JC(n),[n]),He.createElement(QC,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:n})}const oL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ep=He.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:h,preventScrollReset:d,viewTransition:m}=e,y=eL(e,rL),{basename:v}=He.useContext($h),x,S=!1;if(typeof h=="string"&&lL.test(h)&&(x=h,oL))try{let M=new URL(window.location.href),H=h.startsWith("//")?new URL(M.protocol+h):new URL(h),X=o_(H.pathname,v);H.origin===M.origin&&X!=null?h=X+H.search+H.hash:S=!0}catch{}let C=FC(h,{relative:r}),k=uL(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:m});function T(M){n&&n(M),M.defaultPrevented||k(M)}return He.createElement("a",bw({},y,{href:x||C,onClick:S||i?n:T,ref:t,target:c}))});var nA;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(nA||(nA={}));var rA;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(rA||(rA={}));function uL(s,e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=J1(),h=X1(),d=u3(s,{relative:a});return He.useCallback(m=>{if(nL(m,t)){m.preventDefault();let y=n!==void 0?n:I2(h)===I2(d);c(s,{replace:y,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[h,c,d,n,r,t,s,i,a,l])}const cL="modulepreload",hL=function(s){return"/prepai/"+s},iA={},nc=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=hL(c),c in iA)return;iA[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":cL,h||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},dL=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>nc(async()=>{const{default:n}=await Promise.resolve().then(()=>hm);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class h_ extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class fL extends h_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pL extends h_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gL extends h_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _w;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(_w||(_w={}));var mL=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?i(d.value):r(d.value).then(l,c)}h((n=n.apply(s,e||[])).next())})};class vL{constructor(e,{headers:t={},customFetch:n,region:r=_w.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=dL(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return mL(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let h;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:h}).catch(x=>{throw new fL(x)}),m=d.headers.get("x-relay-error");if(m&&m==="true")throw new pL(d);if(!d.ok)throw new gL(d);let y=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield d.json():y==="application/octet-stream"?v=yield d.blob():y==="text/event-stream"?v=d:y==="multipart/form-data"?v=yield d.formData():v=yield d.text(),{data:v,error:null}}catch(r){return{data:null,error:r}}})}}var ti={},kp={},Cp={},Lp={},Pp={},Np={},yL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},lm=yL();const wL=lm.fetch,p3=lm.fetch.bind(lm),g3=lm.Headers,bL=lm.Request,_L=lm.Response,hm=Object.freeze(Object.defineProperty({__proto__:null,Headers:g3,Request:bL,Response:_L,default:p3,fetch:wL},Symbol.toStringTag,{value:"Module"})),xL=Qk(hm);var zv={},sA;function m3(){if(sA)return zv;sA=1,Object.defineProperty(zv,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return zv.default=s,zv}var aA;function v3(){if(aA)return Np;aA=1;var s=Np&&Np.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Np,"__esModule",{value:!0});const e=s(xL),t=s(m3());class n{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var d,m,y;let v=null,x=null,S=null,C=h.status,k=h.statusText;if(h.ok){if(this.method!=="HEAD"){const X=await h.text();X===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=X:x=JSON.parse(X))}const M=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),H=(m=h.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");M&&H&&H.length>1&&(S=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(v={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,S=null,C=406,k="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const M=await h.text();try{v=JSON.parse(M),Array.isArray(v)&&h.status===404&&(x=[],v=null,C=200,k="OK")}catch{h.status===404&&M===""?(C=204,k="No Content"):v={message:M}}if(v&&this.isMaybeSingle&&(!((y=v==null?void 0:v.details)===null||y===void 0)&&y.includes("0 rows"))&&(v=null,C=200,k="OK"),v&&this.shouldThrowOnError)throw new t.default(v)}return{error:v,data:x,count:S,status:C,statusText:k}});return this.shouldThrowOnError||(c=c.catch(h=>{var d,m,y;return{error:{message:`${(d=h==null?void 0:h.name)!==null&&d!==void 0?d:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(m=h==null?void 0:h.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(y=h==null?void 0:h.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,a)}returns(){return this}overrideTypes(){return this}}return Np.default=n,Np}var oA;function y3(){if(oA)return Pp;oA=1;var s=Pp&&Pp.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pp,"__esModule",{value:!0});const e=s(v3());class t extends e.default{select(r){let i=!1;const a=(r??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:i=!0,nullsFirst:a,foreignTable:l,referencedTable:c=l}={}){const h=c?`${c}.order`:"order",d=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${d?`${d},`:""}${r}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${r}`),this}range(r,i,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${r}`),this.url.searchParams.set(h,`${i-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:i=!1,settings:a=!1,buffers:l=!1,wal:c=!1,format:h="text"}={}){var d;const m=[r?"analyze":null,i?"verbose":null,a?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),y=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${y}"; options=${m};`,h==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Pp.default=t,Pp}var lA;function d_(){if(lA)return Lp;lA=1;var s=Lp&&Lp.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Lp,"__esModule",{value:!0});const e=s(y3());class t extends e.default{eq(r,i){return this.url.searchParams.append(r,`eq.${i}`),this}neq(r,i){return this.url.searchParams.append(r,`neq.${i}`),this}gt(r,i){return this.url.searchParams.append(r,`gt.${i}`),this}gte(r,i){return this.url.searchParams.append(r,`gte.${i}`),this}lt(r,i){return this.url.searchParams.append(r,`lt.${i}`),this}lte(r,i){return this.url.searchParams.append(r,`lte.${i}`),this}like(r,i){return this.url.searchParams.append(r,`like.${i}`),this}likeAllOf(r,i){return this.url.searchParams.append(r,`like(all).{${i.join(",")}}`),this}likeAnyOf(r,i){return this.url.searchParams.append(r,`like(any).{${i.join(",")}}`),this}ilike(r,i){return this.url.searchParams.append(r,`ilike.${i}`),this}ilikeAllOf(r,i){return this.url.searchParams.append(r,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(r,i){return this.url.searchParams.append(r,`ilike(any).{${i.join(",")}}`),this}is(r,i){return this.url.searchParams.append(r,`is.${i}`),this}in(r,i){const a=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}contains(r,i){return typeof i=="string"?this.url.searchParams.append(r,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(r,`cs.{${i.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(i)}`),this}containedBy(r,i){return typeof i=="string"?this.url.searchParams.append(r,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(r,`cd.{${i.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(i)}`),this}rangeGt(r,i){return this.url.searchParams.append(r,`sr.${i}`),this}rangeGte(r,i){return this.url.searchParams.append(r,`nxl.${i}`),this}rangeLt(r,i){return this.url.searchParams.append(r,`sl.${i}`),this}rangeLte(r,i){return this.url.searchParams.append(r,`nxr.${i}`),this}rangeAdjacent(r,i){return this.url.searchParams.append(r,`adj.${i}`),this}overlaps(r,i){return typeof i=="string"?this.url.searchParams.append(r,`ov.${i}`):this.url.searchParams.append(r,`ov.{${i.join(",")}}`),this}textSearch(r,i,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${c}fts${h}.${i}`),this}match(r){return Object.entries(r).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(r,i,a){return this.url.searchParams.append(r,`not.${i}.${a}`),this}or(r,{foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${r})`),this}filter(r,i,a){return this.url.searchParams.append(r,`${i}.${a}`),this}}return Lp.default=t,Lp}var uA;function w3(){if(uA)return Cp;uA=1;var s=Cp&&Cp.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Cp,"__esModule",{value:!0});const e=s(d_());class t{constructor(r,{headers:i={},schema:a,fetch:l}){this.url=r,this.headers=i,this.schema=a,this.fetch=l}select(r,{head:i=!1,count:a}={}){const l=i?"HEAD":"GET";let c=!1;const h=(r??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",h),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:i,defaultToNull:a=!0}={}){const l="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(r)){const h=r.reduce((d,m)=>d.concat(Object.keys(m)),[]);if(h.length>0){const d=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:i,ignoreDuplicates:a=!1,count:l,defaultToNull:c=!0}={}){const h="POST",d=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&d.push(this.headers.Prefer),l&&d.push(`count=${l}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(r)){const m=r.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(m.length>0){const y=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:i}={}){const a="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const i="DELETE",a=[];return r&&a.push(`count=${r}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Cp.default=t,Cp}var Om={},Mm={},cA;function AL(){return cA||(cA=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.version=void 0,Mm.version="0.0.0-automated"),Mm}var hA;function SL(){if(hA)return Om;hA=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.DEFAULT_HEADERS=void 0;const s=AL();return Om.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${s.version}`},Om}var dA;function EL(){if(dA)return kp;dA=1;var s=kp&&kp.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(kp,"__esModule",{value:!0});const e=s(w3()),t=s(d_()),n=SL();class r{constructor(a,{headers:l={},schema:c,fetch:h}={}){this.url=a,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),l),this.schemaName=c,this.fetch=h}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:c=!1,get:h=!1,count:d}={}){let m;const y=new URL(`${this.url}/rpc/${a}`);let v;c||h?(m=c?"HEAD":"GET",Object.entries(l).filter(([S,C])=>C!==void 0).map(([S,C])=>[S,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([S,C])=>{y.searchParams.append(S,C)})):(m="POST",v=l);const x=Object.assign({},this.headers);return d&&(x.Prefer=`count=${d}`),new t.default({method:m,url:y,headers:x,schema:this.schemaName,body:v,fetch:this.fetch,allowEmpty:!1})}}return kp.default=r,kp}var fA;function kL(){if(fA)return ti;fA=1;var s=ti&&ti.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ti,"__esModule",{value:!0}),ti.PostgrestError=ti.PostgrestBuilder=ti.PostgrestTransformBuilder=ti.PostgrestFilterBuilder=ti.PostgrestQueryBuilder=ti.PostgrestClient=void 0;const e=s(EL());ti.PostgrestClient=e.default;const t=s(w3());ti.PostgrestQueryBuilder=t.default;const n=s(d_());ti.PostgrestFilterBuilder=n.default;const r=s(y3());ti.PostgrestTransformBuilder=r.default;const i=s(v3());ti.PostgrestBuilder=i.default;const a=s(m3());return ti.PostgrestError=a.default,ti.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:i.default,PostgrestError:a.default},ti}var CL=kL();const LL=s_(CL),{PostgrestClient:PL,PostgrestQueryBuilder:y8,PostgrestFilterBuilder:w8,PostgrestTransformBuilder:b8,PostgrestBuilder:_8,PostgrestError:x8}=LL,NL="2.11.2",TL={"X-Client-Info":`realtime-js/${NL}`},RL="1.0.0",b3=1e4,IL=1e3;var Kp;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Kp||(Kp={}));var aa;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(aa||(aa={}));var Bo;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Bo||(Bo={}));var xw;(function(s){s.websocket="websocket"})(xw||(xw={}));var Nd;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Nd||(Nd={}));class OL{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+r));a=a+r;const c=n.decode(e.slice(a,a+i));a=a+i;const h=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:h}}}let _3=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Dn;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Dn||(Dn={}));const pA=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=ML(a,s,e,r),i),{})},ML=(s,e,t,n)=>{const r=e.find(l=>l.name===s),i=r==null?void 0:r.type,a=t[s];return i&&!n.includes(i)?x3(i,a):Aw(a)},x3=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return BL(e,t)}switch(s){case Dn.bool:return FL(e);case Dn.float4:case Dn.float8:case Dn.int2:case Dn.int4:case Dn.int8:case Dn.numeric:case Dn.oid:return DL(e);case Dn.json:case Dn.jsonb:return jL(e);case Dn.timestamp:return zL(e);case Dn.abstime:case Dn.date:case Dn.daterange:case Dn.int4range:case Dn.int8range:case Dn.money:case Dn.reltime:case Dn.text:case Dn.time:case Dn.timestamptz:case Dn.timetz:case Dn.tsrange:case Dn.tstzrange:return Aw(e);default:return Aw(e)}},Aw=s=>s,FL=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},DL=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},jL=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},BL=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const a=s.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>x3(e,l))}return s},zL=s=>typeof s=="string"?s.replace(" ","T"):s,A3=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class x5{constructor(e,t,n={},r=b3){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gA;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(gA||(gA={}));class l0{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=l0.syncState(this.state,r,i,a),this.pendingDiffs.forEach(c=>{this.state=l0.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=l0.syncDiff(this.state,r,i,a),l())}),this.onJoin((r,i,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:a})}),this.onLeave((r,i,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),a=this.transformState(t),l={},c={};return this.map(i,(h,d)=>{a[h]||(c[h]=d)}),this.map(a,(h,d)=>{const m=i[h];if(m){const y=d.map(C=>C.presence_ref),v=m.map(C=>C.presence_ref),x=d.filter(C=>v.indexOf(C.presence_ref)<0),S=m.filter(C=>y.indexOf(C.presence_ref)<0);x.length>0&&(l[h]=x),S.length>0&&(c[h]=S)}else l[h]=d}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var h;const d=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(c),d.length>0){const m=e[l].map(v=>v.presence_ref),y=d.filter(v=>m.indexOf(v.presence_ref)<0);e[l].unshift(...y)}n(l,d,c)}),this.map(a,(l,c)=>{let h=e[l];if(!h)return;const d=c.map(m=>m.presence_ref);h=h.filter(m=>d.indexOf(m.presence_ref)<0),e[l]=h,r(l,h,c),h.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mA;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(mA||(mA={}));var vA;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(vA||(vA={}));var Su;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Su||(Su={}));class f_{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=aa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new x5(this,Bo.join,this.params,this.timeout),this.rejoinTimer=new _3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=aa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=aa.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=aa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=aa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bo.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new l0(this),this.broadcastEndpointURL=A3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(d=>e==null?void 0:e(Su.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Su.CLOSED));const c={},h={broadcast:i,presence:a,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var m;if(this.socket.setAuth(),d===void 0){e==null||e(Su.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,x=[];for(let S=0;S<v;S++){const C=y[S],{filter:{event:k,schema:T,table:M,filter:H}}=C,X=d&&d[S];if(X&&X.event===k&&X.schema===T&&X.table===M&&X.filter===H)x.push(Object.assign(Object.assign({},C),{id:X.id}));else{this.unsubscribe(),e==null||e(Su.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Su.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(Su.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Su.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=h.body)===null||r===void 0?void 0:r.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=aa.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bo.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new x5(this,Bo.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new x5(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:h,join:d}=Bo;if(n&&[l,c,h,d].indexOf(a)>=0&&n!==this._joinRef())return;let y=this._onMessage(a,t,n);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(v=>{var x,S,C;return((x=v.filter)===null||x===void 0?void 0:x.event)==="*"||((C=(S=v.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(v=>v.callback(y,n)):(i=this.bindings[a])===null||i===void 0||i.filter(v=>{var x,S,C,k,T,M;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const H=v.id,X=(x=v.filter)===null||x===void 0?void 0:x.event;return H&&((S=t.ids)===null||S===void 0?void 0:S.includes(H))&&(X==="*"||(X==null?void 0:X.toLocaleLowerCase())===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const H=(T=(k=v==null?void 0:v.filter)===null||k===void 0?void 0:k.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return H==="*"||H===((M=t==null?void 0:t.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof y=="object"&&"ids"in y){const x=y.data,{schema:S,table:C,commit_timestamp:k,type:T,errors:M}=x;y=Object.assign(Object.assign({},{schema:S,table:C,commit_timestamp:k,eventType:T,new:{},old:{},errors:M}),this._getPayloadRecords(x))}v.callback(y,n)})}_isClosed(){return this.state===aa.closed}_isJoined(){return this.state===aa.joined}_isJoining(){return this.state===aa.joining}_isLeaving(){return this.state===aa.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&f_.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bo.close,{},e)}_onError(e){this._on(Bo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=aa.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=pA(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=pA(e.columns,e.old_record)),t}}const UL=()=>{},qL=typeof WebSocket<"u",HL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $L{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=TL,this.params={},this.timeout=b3,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=UL,this.conn=null,this.sendBuffer=[],this.serializer=new OL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>nc(async()=>{const{default:c}=await Promise.resolve().then(()=>hm);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${xw.websocket}`,this.httpEndpoint=A3(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(qL){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new WL(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),nc(async()=>{const{default:e}=await import("./browser-CRd9B1Q2.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:RL}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Kp.connecting:return Nd.Connecting;case Kp.open:return Nd.Open;case Kp.closing:return Nd.Closing;default:return Nd.Closed}}isConnected(){return this.connectionState()===Nd.Open}channel(e,t={config:{}}){const n=new f_(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(Bo.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(IL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${a&&"("+a+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bo.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([HL],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class WL{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Kp.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class p_ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function li(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class GL extends p_{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Sw extends p_{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var VL=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?i(d.value):r(d.value).then(l,c)}h((n=n.apply(s,e||[])).next())})};const S3=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>nc(async()=>{const{default:n}=await Promise.resolve().then(()=>hm);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},YL=()=>VL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield nc(()=>Promise.resolve().then(()=>hm),void 0)).Response:Response}),Ew=s=>{if(Array.isArray(s))return s.map(t=>Ew(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Ew(n)}),e};var Wf=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?i(d.value):r(d.value).then(l,c)}h((n=n.apply(s,e||[])).next())})};const A5=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),KL=(s,e,t)=>Wf(void 0,void 0,void 0,function*(){const n=yield YL();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{e(new GL(A5(r),s.status||500))}).catch(r=>{e(new Sw(A5(r),r))}):e(new Sw(A5(s),s))}),XL=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),t))};function Q1(s,e,t,n,r,i){return Wf(this,void 0,void 0,function*(){return new Promise((a,l)=>{s(t,XL(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>KL(c,l,n))})})}function O2(s,e,t,n){return Wf(this,void 0,void 0,function*(){return Q1(s,"GET",e,t,n)})}function nh(s,e,t,n,r){return Wf(this,void 0,void 0,function*(){return Q1(s,"POST",e,n,r,t)})}function JL(s,e,t,n,r){return Wf(this,void 0,void 0,function*(){return Q1(s,"PUT",e,n,r,t)})}function QL(s,e,t,n){return Wf(this,void 0,void 0,function*(){return Q1(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function E3(s,e,t,n,r){return Wf(this,void 0,void 0,function*(){return Q1(s,"DELETE",e,n,r,t)})}var Ds=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?i(d.value):r(d.value).then(l,c)}h((n=n.apply(s,e||[])).next())})};const ZL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eP{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=S3(r)}uploadOrUpdate(e,t,n,r){return Ds(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},yA),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const h=this._removeEmptyFolders(t),d=this._getFinalPath(h),m=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),y=yield m.json();return m.ok?{data:{path:h,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(i){if(li(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Ds(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Ds(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const h=Object.assign({upsert:yA.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",h.cacheControl)):(c=n,d["cache-control"]=`max-age=${h.cacheControl}`,d["content-type"]=h.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),y=yield m.json();return m.ok?{data:{path:i,fullPath:y.Key},error:null}:{data:null,error:y}}catch(c){if(li(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Ds(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield nh(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new p_("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(li(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ds(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ds(this,void 0,void 0,function*(){try{return{data:yield nh(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(li(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Ds(this,void 0,void 0,function*(){try{return{data:{path:(yield nh(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(li(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Ds(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield nh(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(li(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Ds(this,void 0,void 0,function*(){try{const r=yield nh(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(r){if(li(r))return{data:null,error:r};throw r}})}download(e,t){return Ds(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield O2(this.fetch,`${this.url}/${r}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(li(l))return{data:null,error:l};throw l}})}info(e){return Ds(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield O2(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ew(n),error:null}}catch(n){if(li(n))return{data:null,error:n};throw n}})}exists(e){return Ds(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield QL(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(li(n)&&n instanceof Sw){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let h=r.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${h}`)}}}remove(e){return Ds(this,void 0,void 0,function*(){try{return{data:yield E3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(li(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ds(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},ZL),t),{prefix:e||""});return{data:yield nh(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(li(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const tP="2.7.1",nP={"X-Client-Info":`storage-js/${tP}`};var Tp=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?i(d.value):r(d.value).then(l,c)}h((n=n.apply(s,e||[])).next())})};class rP{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},nP),t),this.fetch=S3(n)}listBuckets(){return Tp(this,void 0,void 0,function*(){try{return{data:yield O2(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(li(e))return{data:null,error:e};throw e}})}getBucket(e){return Tp(this,void 0,void 0,function*(){try{return{data:yield O2(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(li(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Tp(this,void 0,void 0,function*(){try{return{data:yield nh(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(li(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Tp(this,void 0,void 0,function*(){try{return{data:yield JL(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(li(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Tp(this,void 0,void 0,function*(){try{return{data:yield nh(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(li(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Tp(this,void 0,void 0,function*(){try{return{data:yield E3(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(li(t))return{data:null,error:t};throw t}})}}class iP extends rP{constructor(e,t={},n){super(e,t,n)}from(e){return new eP(this.url,this.headers,e,this.fetch)}}const sP="2.49.1";let Wm="";typeof Deno<"u"?Wm="deno":typeof document<"u"?Wm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wm="react-native":Wm="node";const aP={"X-Client-Info":`supabase-js-${Wm}/${sP}`},oP={headers:aP},lP={schema:"public"},uP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cP={};var hP=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?i(d.value):r(d.value).then(l,c)}h((n=n.apply(s,e||[])).next())})};const dP=s=>{let e;return s?e=s:typeof fetch>"u"?e=p3:e=fetch,(...t)=>e(...t)},fP=()=>typeof Headers>"u"?g3:Headers,pP=(s,e,t)=>{const n=dP(t),r=fP();return(i,a)=>hP(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:s;let h=new r(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",s),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:h}))})};var gP=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?i(d.value):r(d.value).then(l,c)}h((n=n.apply(s,e||[])).next())})};function mP(s){return s.replace(/\/$/,"")}function vP(s,e){const{db:t,auth:n,realtime:r,global:i}=s,{db:a,auth:l,realtime:c,global:h}=e,d={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},h),i),accessToken:()=>gP(this,void 0,void 0,function*(){return""})};return s.accessToken?d.accessToken=s.accessToken:delete d.accessToken,d}const k3="2.68.0",Fp=30*1e3,kw=3,S5=kw*Fp,yP="http://localhost:9999",wP="supabase.auth.token",bP={"X-Client-Info":`gotrue-js/${k3}`},Cw="X-Supabase-Api-Version",C3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function _P(s){return Math.round(Date.now()/1e3)+s}function xP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const vl=()=>typeof window<"u"&&typeof document<"u",Sd={tested:!1,writable:!1},u0=()=>{if(!vl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sd.tested)return Sd.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Sd.tested=!0,Sd.writable=!0}catch{Sd.tested=!0,Sd.writable=!1}return Sd.writable};function AP(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const L3=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>nc(async()=>{const{default:n}=await Promise.resolve().then(()=>hm);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},SP=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",P3=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Uv=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},qv=async(s,e)=>{await s.removeItem(e)};function EP(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,r,i,a,l,c,h,d=0;for(s=s.replace("-","+").replace("_","/");d<s.length;)a=e.indexOf(s.charAt(d++)),l=e.indexOf(s.charAt(d++)),c=e.indexOf(s.charAt(d++)),h=e.indexOf(s.charAt(d++)),n=a<<2|l>>4,r=(l&15)<<4|c>>2,i=(c&3)<<6|h,t=t+String.fromCharCode(n),c!=64&&r!=0&&(t=t+String.fromCharCode(r)),h!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class gy{constructor(){this.promise=new gy.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}gy.promiseConstructor=Promise;function wA(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(EP(n))}async function kP(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function CP(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await s(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){r(a);return}}})()})}function LP(s){return("0"+s.toString(16)).substr(-2)}function PP(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,LP).join("")}async function NP(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function TP(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function RP(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await NP(s);return TP(t)}async function Rp(s,e,t=!1){const n=PP();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await P3(s,`${e}-code-verifier`,r);const i=await RP(n);return[i,n===i?"plain":"s256"]}const IP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OP(s){const e=s.headers.get(Cw);if(!e||!e.match(IP))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class g_ extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Vt(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class MP extends g_{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function FP(s){return Vt(s)&&s.name==="AuthApiError"}class N3 extends g_{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Gf extends g_{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Zc extends Gf{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function DP(s){return Vt(s)&&s.name==="AuthSessionMissingError"}class E5 extends Gf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hv extends Gf{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $v extends Gf{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jP(s){return Vt(s)&&s.name==="AuthImplicitGrantRedirectError"}class bA extends Gf{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lw extends Gf{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function k5(s){return Vt(s)&&s.name==="AuthRetryableFetchError"}class _A extends Gf{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var BP=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const Ed=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),zP=[502,503,504];async function xA(s){var e;if(!SP(s))throw new Lw(Ed(s),0);if(zP.includes(s.status))throw new Lw(Ed(s),s.status);let t;try{t=await s.json()}catch(i){throw new N3(Ed(i),i)}let n;const r=OP(s);if(r&&r.getTime()>=C3["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new _A(Ed(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Zc}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new _A(Ed(t),s.status,t.weak_password.reasons);throw new MP(Ed(t),s.status||500,n)}const UP=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function tn(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[Cw]||(i[Cw]=C3["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await qP(s,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function qP(s,e,t,n,r,i){const a=UP(e,n,r,i);let l;try{l=await s(t,Object.assign({},a))}catch(c){throw console.error(c),new Lw(Ed(c),0)}if(l.ok||await xA(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await xA(c)}}function eh(s){var e;let t=null;GP(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=_P(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function AA(s){const e=eh(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function rh(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function HP(s){return{data:s,error:null}}function $P(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,a=BP(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function WP(s){return s}function GP(s){return s.access_token&&s.refresh_token&&s.expires_in}var VP=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class YP{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=L3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await tn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await tn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rh})}catch(n){if(Vt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=VP(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await tn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:$P,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Vt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await tn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rh})}catch(t){if(Vt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,a,l,c;try{const h={nextPage:null,lastPage:0,total:0},d=await tn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:WP});if(d.error)throw d.error;const m=await d.json(),y=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(x=>{const S=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(x.split(";")[1].split("=")[1]);h[`${C}Page`]=S}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(Vt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await tn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rh})}catch(t){if(Vt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await tn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rh})}catch(n){if(Vt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await tn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rh})}catch(n){if(Vt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await tn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(Vt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await tn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Vt(t))return{data:null,error:t};throw t}}}const KP={getItem:s=>u0()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{u0()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{u0()&&globalThis.localStorage.removeItem(s)}};function SA(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function XP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ip={debug:!!(globalThis&&u0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class T3 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class JP extends T3{}async function QP(s,e,t){Ip.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ip.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Ip.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{Ip.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw Ip.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new JP(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Ip.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}XP();const ZP={url:yP,storageKey:wP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function EA(s,e,t){return await t()}class v0{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=v0.nextInstanceID,v0.nextInstanceID+=1,this.instanceID>0&&vl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},ZP),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new YP({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=L3(r.fetch),this.lock=r.lock||EA,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:vl()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=QP:this.lock=EA,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:u0()?this.storage=KP:(this.memoryStorage={},this.storage=SA(this.memoryStorage)):(this.memoryStorage={},this.storage=SA(this.memoryStorage)),vl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${k3}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=AP(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),vl()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),jP(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Vt(t)?{error:t}:{error:new N3("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:eh}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(Vt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:d,password:m,options:y}=e;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Rp(this.storage,this.storageKey)),i=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:d,password:m,data:(t=y==null?void 0:y.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:x},xform:eh})}else if("phone"in e){const{phone:d,password:m,options:y}=e;i=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(r=y==null?void 0:y.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:eh})}else throw new Hv("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(Vt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:l}=e;t=await tn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:AA})}else if("phone"in e){const{phone:i,password:a,options:l}=e;t=await tn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:AA})}else throw new Hv("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new E5}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(Vt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Uv(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:a}=await tn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:eh});if(await qv(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new E5}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:a})}catch(i){if(Vt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:a}=e,l=await tn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:eh}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new E5}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(t){if(Vt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,a;try{if("email"in e){const{email:l,options:c}=e;let h=null,d=null;this.flowType==="pkce"&&([h,d]=await Rp(this.storage,this.storageKey));const{error:m}=await tn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:c}=e,{data:h,error:d}=await tn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:d}}throw new Hv("You must provide either an email or phone number.")}catch(l){if(Vt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await tn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:eh});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,h=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(r){if(Vt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Rp(this.storage,this.storageKey)),await tn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:HP})}catch(i){if(Vt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Zc;const{error:r}=await tn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Vt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:a}=await tn(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:a,error:l}=await tn(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Hv("You must provide either an email or phone number and a type")}catch(t){if(Vt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Uv(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<S5:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,d)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,d))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await tn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rh}):await this._useSession(async t=>{var n,r,i;const{data:a,error:l}=t;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zc}:await tn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:rh})})}catch(t){if(Vt(t))return DP(t)&&(await this._removeSession(),await qv(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Zc;const a=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Rp(this.storage,this.storageKey));const{data:h,error:d}=await tn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:rh});if(d)throw d;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Vt(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return wA(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Zc;const t=Date.now()/1e3;let n=t,r=!0,i=null;const a=wA(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Vt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Zc;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Vt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!vl())throw new $v("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $v(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new bA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $v("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bA("No code detected.");const{data:T,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:h}=e;if(!i||!l||!a||!h)throw new $v("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(l);let y=d+m;c&&(y=parseInt(c));const v=y-d;v*1e3<=Fp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const x=y-m;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,y,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,y,d);const{data:S,error:C}=await this._getUser(i);if(C)throw C;const k={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:m,expires_at:y,refresh_token:a,token_type:h,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(n){if(Vt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Uv(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(FP(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await qv(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=xP(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Rp(this.storage,this.storageKey,!0));try{return await tn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Vt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Vt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var a,l,c,h,d;const{data:m,error:y}=i;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await tn(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return vl()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Vt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)throw a;return await tn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Vt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await CP(async r=>(r>0&&await kP(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await tn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:eh})),(r,i)=>{const a=200*Math.pow(2,r);return i&&k5(i)&&Date.now()+a-n<Fp})}catch(n){if(this._debug(t,"error",n),Vt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),vl()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Uv(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<S5;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${S5}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),k5(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Zc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new gy;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Zc;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),Vt(i)){const a={session:null,error:i};return k5(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await P3(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await qv(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Fp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Fp}ms, refresh threshold is ${kw} ticks`),r<=kw&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof T3)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Rp(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await tn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Vt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await tn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(Vt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:l}=await tn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(Vt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await tn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Vt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(r.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}}v0.nextInstanceID=0;const eN=v0;class tN extends eN{constructor(e){super(e)}}var nN=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?i(d.value):r(d.value).then(l,c)}h((n=n.apply(s,e||[])).next())})};class rN{constructor(e,t,n){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=mP(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:lP,realtime:cP,auth:Object.assign(Object.assign({},uP),{storageKey:c}),global:oP},d=vP(n??{},h);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=pP(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new PL(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new vL(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new iP(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return nN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:a,lock:l,debug:c},h,d){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tN({url:this.authUrl,headers:Object.assign(Object.assign({},m),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $L(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iN=(s,e,t)=>new rN(s,e,t),sN="https://snwhlbvdgvgmedfgxhla.supabase.co",aN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNud2hsYnZkZ3ZnbWVkZmd4aGxhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1OTE0NDIsImV4cCI6MjA1NjE2NzQ0Mn0.5kymebrzYnfagTnyQkbZYR9IMo7F67mI2SoJrjORjlI",Fm=iN(sN,aN),R3=He.createContext(void 0),oN=({children:s})=>{const[e,t]=He.useState(null),[n,r]=He.useState(null),[i,a]=He.useState(!0);He.useEffect(()=>{Fm.auth.getSession().then(({data:{session:y}})=>{t(y),r((y==null?void 0:y.user)??null),a(!1)});const{data:{subscription:m}}=Fm.auth.onAuthStateChange((y,v)=>{t(v),r((v==null?void 0:v.user)??null),a(!1)});return()=>{m.unsubscribe()}},[]);const d={session:e,user:n,loading:i,signIn:async(m,y)=>{const{data:v,error:x}=await Fm.auth.signInWithPassword({email:m,password:y});return{data:v.session,error:x}},signUp:async(m,y)=>{const{data:v,error:x}=await Fm.auth.signUp({email:m,password:y});return{data:v,error:x}},signOut:async()=>{await Fm.auth.signOut()}};return Q.jsx(R3.Provider,{value:d,children:s})},Z1=()=>{const s=He.useContext(R3);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Bn=(s,e)=>{const t=He.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...h},d)=>He.createElement("svg",{ref:d,...lN,width:r,height:r,stroke:n,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${uN(s)}`,l].join(" "),...h},[...e.map(([m,y])=>He.createElement(m,y)),...Array.isArray(c)?c:[c]]));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=Bn("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=Bn("BrainCog",[["path",{d:"M12 5a3 3 0 1 0-5.997.142 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588 4 4 0 0 0 7.636 2.106 3.2 3.2 0 0 0 .164-.546c.028-.13.306-.13.335 0a3.2 3.2 0 0 0 .163.546 4 4 0 0 0 7.636-2.106 4 4 0 0 0 .556-6.588 4 4 0 0 0-2.526-5.77A3 3 0 1 0 12 5",key:"1kgmhc"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m15.7 10.4-.9.4",key:"ayzo6p"}],["path",{d:"m9.2 13.2-.9.4",key:"1uzb3g"}],["path",{d:"m13.6 15.7-.4-.9",key:"11ifqf"}],["path",{d:"m10.8 9.2-.4-.9",key:"1pmk2v"}],["path",{d:"m15.7 13.5-.9-.4",key:"7ng02m"}],["path",{d:"m9.2 10.9-.9-.4",key:"1x66zd"}],["path",{d:"m10.5 15.7.4-.9",key:"3js94g"}],["path",{d:"m13.1 9.2.4-.9",key:"18n7mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=Bn("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=Bn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=Bn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=Bn("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=Bn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=Bn("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=Bn("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=Bn("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Bn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=Bn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=Bn("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=Bn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=Bn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=Bn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Bn("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Bn("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Bn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Bn("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Bn("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Bn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Bn("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=Bn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Bn("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Bn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kN=({children:s})=>{const{user:e,loading:t}=Z1();return t?Q.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 flex items-center justify-center",children:Q.jsxs("div",{className:"flex flex-col items-center gap-4",children:[Q.jsx(y0,{className:"h-12 w-12 text-blue-400 animate-spin"}),Q.jsx("p",{className:"text-gray-300",children:"Loading..."})]})}):e?Q.jsx(Q.Fragment,{children:s}):Q.jsx(f3,{to:"/auth",replace:!0})},CN=()=>{const[s,e]=He.useState(!1),{user:t,signOut:n}=Z1(),r=J1(),i=async()=>{await n(),r("/"),r("#features"),r("#demo")};return Q.jsxs("nav",{className:"bg-gray-800/80 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-700/50",children:[Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Q.jsxs("div",{className:"flex items-center justify-between h-16",children:[Q.jsx("div",{className:"flex items-center",children:Q.jsx(Ep,{to:"/",className:"flex items-center",children:Q.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PrepAI"})})}),Q.jsx("div",{className:"hidden md:block",children:Q.jsxs("div",{className:"flex items-center space-x-4",children:[t&&Q.jsx(Ep,{to:"/tool",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md",children:"AI Tool"}),t?Q.jsxs("div",{className:"flex items-center gap-4",children:[Q.jsx("span",{className:"text-gray-400 text-sm",children:t.email}),Q.jsxs("button",{onClick:i,className:"flex items-center gap-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 px-3 py-2 rounded-md transition-colors",children:[Q.jsx(LA,{className:"h-4 w-4"}),"Sign Out"]})]}):Q.jsxs(Ep,{to:"/auth",className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-md transition-colors",children:[Q.jsx(Pw,{className:"h-4 w-4"}),"Sign In"]})]})}),Q.jsx("div",{className:"md:hidden",children:Q.jsx("button",{onClick:()=>e(!s),className:"text-gray-400 hover:text-white",children:s?Q.jsx(I3,{className:"h-6 w-6"}):Q.jsx(vN,{className:"h-6 w-6"})})})]})}),s&&Q.jsx("div",{className:"md:hidden bg-gray-800 border-t border-gray-700",children:Q.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[Q.jsx(Ep,{to:"/",className:"text-gray-300 hover:text-white block px-3 py-2 rounded-md",onClick:()=>e(!1),children:"Home"}),t&&Q.jsx(Ep,{to:"/tool",className:"text-gray-300 hover:text-white block px-3 py-2 rounded-md",onClick:()=>e(!1),children:"AI Tool"}),t?Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:t.email}),Q.jsxs("button",{onClick:()=>{i(),e(!1)},className:"flex items-center gap-1 w-full text-left text-red-400 px-3 py-2 rounded-md",children:[Q.jsx(LA,{className:"h-4 w-4"}),"Sign Out"]})]}):Q.jsxs(Ep,{to:"/auth",className:"flex items-center gap-1 text-blue-400 px-3 py-2 rounded-md",onClick:()=>e(!1),children:[Q.jsx(Pw,{className:"h-4 w-4"}),"Sign In"]})]})})]})},LN=({isOpen:s,onClose:e})=>{if(!s)return null;const t=()=>{window.open("https://chat.whatsapp.com/H2EeBvKtjjI7Y6BzubcHTP"),e()};return Q.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:Q.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[Q.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),Q.jsxs("div",{className:"relative bg-gray-800 rounded-2xl p-8 max-w-md w-full",children:[Q.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:Q.jsx(I3,{className:"h-6 w-6"})}),Q.jsxs("div",{className:"text-center mb-8",children:[Q.jsx(Nw,{className:"h-12 w-12 mx-auto mb-4 text-blue-400"}),Q.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Join Our Study Group"}),Q.jsx("p",{className:"text-gray-400",children:"Get access to Free Demo Class and Premium Study Materials"})]}),Q.jsxs("div",{className:"space-y-4",children:[Q.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[Q.jsx("h3",{className:"font-semibold mb-2",children:"Benefits of Joining:"}),Q.jsxs("ul",{className:"text-gray-300 text-sm space-y-2",children:[Q.jsx("li",{children:" Free Demo Class"}),Q.jsx("li",{children:" Access to Premium Study Materials (Only 50)"}),Q.jsx("li",{children:" Latest Update of AI Tools for Exam Preparation"})]})]}),Q.jsxs("button",{onClick:t,className:"w-full bg-green-500 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-3 hover:bg-green-600 transition-all",children:["Join WhatsApp Group",Q.jsx(Nw,{className:"h-5 w-5"})]})]}),Q.jsx("div",{className:"mt-6 text-center text-sm text-gray-400",children:"By joining, you agree to our community guidelines and terms of service"})]})]})})},PN=()=>{const[s,e]=He.useState(()=>{const i=localStorage.getItem("timerEndTime");if(i){const a=parseInt(i),l=new Date().getTime(),c=a-l;if(c>0)return{hours:Math.floor(c/36e5),minutes:Math.floor(c%36e5/6e4),seconds:Math.floor(c%6e4/1e3)}}return{hours:0,minutes:30,seconds:0}}),[t,n]=He.useState("");He.useEffect(()=>{const i=()=>{const m=new Date().getTime()+30*60*1e3;return localStorage.setItem("timerEndTime",m.toString()),m};localStorage.getItem("timerEndTime")||i();const a=d=>{const m=new Date(d),y=m.getHours(),v=m.getMinutes(),x=y>=12?"PM":"AM",S=y%12||12,C=v.toString().padStart(2,"0");return`${S}:${C} ${x}`},l=()=>{const d=new Date().getTime(),y=parseInt(localStorage.getItem("timerEndTime")||"0")-d;if(y<=0){const v=i();n(a(v));return}e({hours:Math.floor(y/(1e3*60*60)),minutes:Math.floor(y%(1e3*60*60)/(1e3*60)),seconds:Math.floor(y%(1e3*60)/1e3)})},c=parseInt(localStorage.getItem("timerEndTime")||"0");n(a(c)),l();const h=setInterval(l,1e3);return()=>clearInterval(h)},[]);const r=({value:i,label:a})=>Q.jsxs("div",{className:"flex flex-col items-center bg-gray-700/50 px-3 py-1 rounded",children:[Q.jsx("span",{className:"font-mono text-xl font-bold text-purple-400",children:i.toString().padStart(2,"0")}),Q.jsx("span",{className:"text-xs text-gray-400",children:a})]});return Q.jsxs("div",{className:"flex flex-col items-center gap-2 bg-gray-800/50 px-6 py-3 rounded-lg",children:[Q.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[Q.jsx(fN,{className:"h-5 w-5 text-purple-400"}),Q.jsx("span",{children:"Offer ends in"})]}),Q.jsxs("div",{className:"flex items-center gap-3",children:[Q.jsx(r,{value:s.hours,label:"HRS"}),Q.jsx("span",{className:"text-purple-400 font-bold",children:":"}),Q.jsx(r,{value:s.minutes,label:"MIN"}),Q.jsx("span",{className:"text-purple-400 font-bold",children:":"}),Q.jsx(r,{value:s.seconds,label:"SEC"})]}),Q.jsxs("div",{className:"text-sm text-gray-400",children:["Ends at ",t]})]})},NA=()=>Q.jsx("a",{href:"https://chat.whatsapp.com/H2EeBvKtjjI7Y6BzubcHTP",target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg transition-all hover:scale-110 z-50 flex items-center justify-center","aria-label":"Join WhatsApp Group",children:Q.jsx(yN,{className:"h-6 w-6"})});function NN(){const[s,e]=He.useState(!1),t=J1(),{user:n}=Z1(),r=()=>{t(n?"/tool":"/auth")};return Q.jsxs("div",{children:[Q.jsx(NA,{}),Q.jsxs("section",{className:"relative overflow-hidden",children:[Q.jsx(NA,{}),Q.jsx("div",{}),Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16",children:Q.jsxs("div",{className:"text-center",children:[Q.jsx(my,{className:"h-16 w-16 mx-auto mb-6 text-blue-400"}),Q.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400 mb-6",children:"AI-Powered Exam Preparation"}),Q.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-8",children:"Revolutionize your government exam preparation with cutting-edge AI tools and expert guidance"}),Q.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[Q.jsxs("button",{onClick:()=>e(!0),className:"bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2 mx-auto sm:mx-0",children:["Join Study Group",Q.jsx(Nw,{className:"h-5 w-5"})]}),Q.jsxs("button",{onClick:r,className:"bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2 mx-auto sm:mx-0",children:[n?"Access AI Tool":"Sign In to Use AI Tool",Q.jsx(C5,{className:"h-5 w-5"})]})]})]})})]}),Q.jsx("section",{className:"py-16 bg-gray-800/50",id:"features",children:Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Q.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[Q.jsx(L5,{icon:Q.jsx(wN,{className:"h-8 w-8 text-blue-400"}),title:"Free Demo Content",description:"Get a free demo on using AI tools for exam prep"}),Q.jsx(L5,{icon:Q.jsx(mN,{className:"h-8 w-8 text-purple-400"}),title:"Premium Access",description:"Unlock comprehensive study materials and AI tools for 50"}),Q.jsx(L5,{icon:Q.jsx(cN,{className:"h-8 w-8 text-green-400"}),title:"Smart MCQ Practice",description:"Generate unlimited questions from your content with AI."})]})})}),Q.jsx("section",{className:"py-16",id:"demo",children:Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Q.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8",children:[Q.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",children:"Join Our Free Demo"}),Q.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-xl overflow-hidden",children:Q.jsx("iframe",{className:"w-full h-[400px]",src:"https://www.youtube.com/embed/oEC7gEIeUa8",title:"Introduction to AI-Powered Exam Preparation",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Q.jsxs("button",{onClick:r,className:"bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2 mx-auto sm:mx-0 my-5",children:[n?"Access AI Tool":"Sign In to Use AI Tool",Q.jsx(C5,{className:"h-5 w-5"})]})]})})}),Q.jsx("section",{className:"py-16 bg-gradient-to-b from-gray-800/50 to-gray-900",id:"pricing",children:Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Q.jsxs("div",{className:"text-center mb-12",children:[Q.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Premium Content Preview"}),Q.jsx("p",{className:"text-gray-400 mb-4",children:"Get a glimpse of what awaits in our premium section"}),Q.jsxs("div",{className:"flex flex-col items-center gap-4",children:[Q.jsxs("div",{className:"flex items-center justify-center gap-3 text-2xl",children:[Q.jsx("span",{className:"text-gray-400 line-through",children:"1,500"}),Q.jsx("span",{className:"text-green-400 font-bold",children:"50 only"})]}),Q.jsx(PN,{})]})]}),Q.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[Q.jsx("img",{src:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?auto=format&fit=crop&q=80",alt:"Premium Content",className:"w-full h-[300px] object-cover"}),Q.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:Q.jsxs("button",{onClick:()=>e(!0),className:"bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2",children:["Join Group to Access ",Q.jsx(C5,{className:"h-5 w-5"})]})})]})]})}),Q.jsx(LN,{isOpen:s,onClose:()=>e(!1)})]})}function L5({icon:s,title:e,description:t}){return Q.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl hover:bg-gray-700 transition-all",children:[Q.jsx("div",{className:"mb-4",children:s}),Q.jsx("h3",{className:"text-xl font-semibold mb-2",children:e}),Q.jsx("p",{className:"text-gray-400",children:t})]})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TA;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(TA||(TA={}));var RA;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(RA||(RA={}));var IA;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(IA||(IA={}));var OA;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER"})(OA||(OA={}));var M2;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.OTHER="OTHER"})(M2||(M2={}));var MA;(function(s){s.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",s.RETRIEVAL_QUERY="RETRIEVAL_QUERY",s.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",s.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",s.CLASSIFICATION="CLASSIFICATION",s.CLUSTERING="CLUSTERING"})(MA||(MA={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class FA extends w0{constructor(e,t){super(e),this.response=t}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="https://generativelanguage.googleapis.com",RN="v1",IN="0.2.1",ON="genai-js";var zf;(function(s){s.GENERATE_CONTENT="generateContent",s.STREAM_GENERATE_CONTENT="streamGenerateContent",s.COUNT_TOKENS="countTokens",s.EMBED_CONTENT="embedContent",s.BATCH_EMBED_CONTENTS="batchEmbedContents"})(zf||(zf={}));class ev{constructor(e,t,n,r){this.model=e,this.task=t,this.apiKey=n,this.stream=r}toString(){let e=`${TN}/${RN}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}function MN(){return`${ON}/${IN}`}async function tv(s,e,t){let n;try{if(n=await fetch(s.toString(),Object.assign(Object.assign({},FN(t)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":MN(),"x-goog-api-key":s.apiKey},body:e})),!n.ok){let r="";try{const i=await n.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`)}catch{}throw new Error(`[${n.status} ${n.statusText}] ${r}`)}}catch(r){const i=new w0(`Error fetching from ${s.toString()}: ${r.message}`);throw i.stack=r.stack,i}return n}function FN(s){const e={};if((s==null?void 0:s.timeout)>=0){const t=new AbortController,n=t.signal;setTimeout(()=>t.abort(),s.timeout),e.signal=n}return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(s){return s.text=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),O3(s.candidates[0]))throw new FA(`${F2(s)}`,s);return DN(s)}else if(s.promptFeedback)throw new FA(`Text not available. ${F2(s)}`,s);return""},s}function DN(s){var e,t,n,r;return!((r=(n=(t=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0?void 0:t.parts)===null||n===void 0?void 0:n[0])===null||r===void 0)&&r.text?s.candidates[0].content.parts[0].text:""}const jN=[M2.RECITATION,M2.SAFETY];function O3(s){return!!s.finishReason&&jN.includes(s.finishReason)}function F2(s){var e,t,n;let r="";if((!s.candidates||s.candidates.length===0)&&s.promptFeedback)r+="Response was blocked",!((e=s.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${s.promptFeedback.blockReason}`),!((t=s.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${s.promptFeedback.blockReasonMessage}`);else if(!((n=s.candidates)===null||n===void 0)&&n[0]){const i=s.candidates[0];O3(i)&&(r+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(r+=`: ${i.finishMessage}`))}return r}function b0(s){return this instanceof b0?(this.v=s,this):new b0(s)}function BN(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(s,e||[]),r,i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(y){n[y]&&(r[y]=function(v){return new Promise(function(x,S){i.push([y,v,x,S])>1||l(y,v)})})}function l(y,v){try{c(n[y](v))}catch(x){m(i[0][3],x)}}function c(y){y.value instanceof b0?Promise.resolve(y.value.v).then(h,d):m(i[0][2],y)}function h(y){l("next",y)}function d(y){l("throw",y)}function m(y,v){y(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function zN(s){const e=s.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=HN(e),[n,r]=t.tee();return{stream:qN(n),response:UN(r)}}async function UN(s){const e=[],t=s.getReader();for(;;){const{done:n,value:r}=await t.read();if(n)return m_($N(e));e.push(r)}}function qN(s){return BN(this,arguments,function*(){const t=s.getReader();for(;;){const{value:n,done:r}=yield b0(t.read());if(r)break;yield yield b0(m_(n))}})}function HN(s){const e=s.getReader();return new ReadableStream({start(n){let r="";return i();function i(){return e.read().then(({value:a,done:l})=>{if(l){if(r.trim()){n.error(new w0("Failed to parse stream"));return}n.close();return}r+=a;let c=r.match(DA),h;for(;c;){try{h=JSON.parse(c[1])}catch{n.error(new w0(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(h),r=r.substring(c[0].length),c=r.match(DA)}return i()})}}})}function $N(s){const e=s[s.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of s)if(n.candidates)for(const r of n.candidates){const i=r.index;if(t.candidates||(t.candidates=[]),t.candidates[i]||(t.candidates[i]={index:r.index}),t.candidates[i].citationMetadata=r.citationMetadata,t.candidates[i].finishReason=r.finishReason,t.candidates[i].finishMessage=r.finishMessage,t.candidates[i].safetyRatings=r.safetyRatings,r.content&&r.content.parts){t.candidates[i].content||(t.candidates[i].content={role:r.content.role||"user",parts:[{text:""}]});for(const a of r.content.parts)a.text&&(t.candidates[i].content.parts[0].text+=a.text)}}return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(s,e,t,n){const r=new ev(e,zf.STREAM_GENERATE_CONTENT,s,!0),i=await tv(r,JSON.stringify(t),n);return zN(i)}async function F3(s,e,t,n){const r=new ev(e,zf.GENERATE_CONTENT,s,!1),a=await(await tv(r,JSON.stringify(t),n)).json();return{response:m_(a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(s,e){let t=[];if(typeof s=="string")t=[{text:s}];else for(const n of s)typeof n=="string"?t.push({text:n}):t.push(n);return{role:e,parts:t}}function P5(s){return s.contents?s:{contents:[c0(s,"user")]}}function WN(s){return typeof s=="string"||Array.isArray(s)?{content:c0(s,"user")}:s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="SILENT_ERROR";class GN{constructor(e,t,n,r){this.model=t,this.params=n,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(this._history=n.history.map(i=>{if(!i.role)throw new Error("Missing role for history item: "+JSON.stringify(i));return c0(i.parts,i.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var t,n;await this._sendPromise;const r=c0(e,"user"),i={safetySettings:(t=this.params)===null||t===void 0?void 0:t.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,contents:[...this._history,r]};let a;return this._sendPromise=this._sendPromise.then(()=>F3(this._apiKey,this.model,i,this.requestOptions)).then(l=>{var c;if(l.response.candidates&&l.response.candidates.length>0){this._history.push(r);const h=Object.assign({parts:[],role:"model"},(c=l.response.candidates)===null||c===void 0?void 0:c[0].content);this._history.push(h)}else{const h=F2(l.response);h&&console.warn(`sendMessage() was unsuccessful. ${h}. Inspect response object for details.`)}a=l}),await this._sendPromise,a}async sendMessageStream(e){var t,n;await this._sendPromise;const r=c0(e,"user"),i={safetySettings:(t=this.params)===null||t===void 0?void 0:t.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,contents:[...this._history,r]},a=M3(this._apiKey,this.model,i,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>a).catch(l=>{throw new Error(jA)}).then(l=>l.response).then(l=>{if(l.candidates&&l.candidates.length>0){this._history.push(r);const c=Object.assign({},l.candidates[0].content);c.role||(c.role="model"),this._history.push(c)}else{const c=F2(l);c&&console.warn(`sendMessageStream() was unsuccessful. ${c}. Inspect response object for details.`)}}).catch(l=>{l.message!==jA&&console.error(l)}),a}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(s,e,t,n){const r=new ev(e,zf.COUNT_TOKENS,s,!1);return(await tv(r,JSON.stringify(Object.assign(Object.assign({},t),{model:e})),n)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(s,e,t,n){const r=new ev(e,zf.EMBED_CONTENT,s,!1);return(await tv(r,JSON.stringify(t),n)).json()}async function KN(s,e,t,n){const r=new ev(e,zf.BATCH_EMBED_CONTENTS,s,!1),i=t.requests.map(l=>Object.assign(Object.assign({},l),{model:e}));return(await tv(r,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t,n){this.apiKey=e,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.requestOptions=n||{}}async generateContent(e){const t=P5(e);return F3(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)}async generateContentStream(e){const t=P5(e);return M3(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)}startChat(e){return new GN(this.apiKey,this.model,e,this.requestOptions)}async countTokens(e){const t=P5(e);return VN(this.apiKey,this.model,t)}async embedContent(e){const t=WN(e);return YN(this.apiKey,this.model,t)}async batchEmbedContents(e){return KN(this.apiKey,this.model,e,this.requestOptions)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new w0("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new XN(this.apiKey,e,t)}}var N5={exports:{}},BA;function QN(){return BA||(BA=1,function(s){var e=function(t){var n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(te,J,G){te[J]=G.value},a,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function m(te,J,G){return Object.defineProperty(te,J,{value:G,enumerable:!0,configurable:!0,writable:!0}),te[J]}try{m({},"")}catch{m=function(J,G,N){return J[G]=N}}function y(te,J,G,N){var j=J&&J.prototype instanceof M?J:M,Y=Object.create(j.prototype),se=new ce(N||[]);return i(Y,"_invoke",{value:V(te,G,se)}),Y}t.wrap=y;function v(te,J,G){try{return{type:"normal",arg:te.call(J,G)}}catch(N){return{type:"throw",arg:N}}}var x="suspendedStart",S="suspendedYield",C="executing",k="completed",T={};function M(){}function H(){}function X(){}var he={};m(he,c,function(){return this});var ne=Object.getPrototypeOf,Z=ne&&ne(ne(me([])));Z&&Z!==n&&r.call(Z,c)&&(he=Z);var fe=X.prototype=M.prototype=Object.create(he);H.prototype=X,i(fe,"constructor",{value:X,configurable:!0}),i(X,"constructor",{value:H,configurable:!0}),H.displayName=m(X,d,"GeneratorFunction");function Se(te){["next","throw","return"].forEach(function(J){m(te,J,function(G){return this._invoke(J,G)})})}t.isGeneratorFunction=function(te){var J=typeof te=="function"&&te.constructor;return J?J===H||(J.displayName||J.name)==="GeneratorFunction":!1},t.mark=function(te){return Object.setPrototypeOf?Object.setPrototypeOf(te,X):(te.__proto__=X,m(te,d,"GeneratorFunction")),te.prototype=Object.create(fe),te},t.awrap=function(te){return{__await:te}};function q(te,J){function G(Y,se,oe,de){var be=v(te[Y],te,se);if(be.type==="throw")de(be.arg);else{var Ae=be.arg,qe=Ae.value;return qe&&typeof qe=="object"&&r.call(qe,"__await")?J.resolve(qe.__await).then(function($e){G("next",$e,oe,de)},function($e){G("throw",$e,oe,de)}):J.resolve(qe).then(function($e){Ae.value=$e,oe(Ae)},function($e){return G("throw",$e,oe,de)})}}var N;function j(Y,se){function oe(){return new J(function(de,be){G(Y,se,de,be)})}return N=N?N.then(oe,oe):oe()}i(this,"_invoke",{value:j})}Se(q.prototype),m(q.prototype,h,function(){return this}),t.AsyncIterator=q,t.async=function(te,J,G,N,j){j===void 0&&(j=Promise);var Y=new q(y(te,J,G,N),j);return t.isGeneratorFunction(J)?Y:Y.next().then(function(se){return se.done?se.value:Y.next()})};function V(te,J,G){var N=x;return function(Y,se){if(N===C)throw new Error("Generator is already running");if(N===k){if(Y==="throw")throw se;return ae()}for(G.method=Y,G.arg=se;;){var oe=G.delegate;if(oe){var de=ue(oe,G);if(de){if(de===T)continue;return de}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(N===x)throw N=k,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);N=C;var be=v(te,J,G);if(be.type==="normal"){if(N=G.done?k:S,be.arg===T)continue;return{value:be.arg,done:G.done}}else be.type==="throw"&&(N=k,G.method="throw",G.arg=be.arg)}}}function ue(te,J){var G=J.method,N=te.iterator[G];if(N===a)return J.delegate=null,G==="throw"&&te.iterator.return&&(J.method="return",J.arg=a,ue(te,J),J.method==="throw")||G!=="return"&&(J.method="throw",J.arg=new TypeError("The iterator does not provide a '"+G+"' method")),T;var j=v(N,te.iterator,J.arg);if(j.type==="throw")return J.method="throw",J.arg=j.arg,J.delegate=null,T;var Y=j.arg;if(!Y)return J.method="throw",J.arg=new TypeError("iterator result is not an object"),J.delegate=null,T;if(Y.done)J[te.resultName]=Y.value,J.next=te.nextLoc,J.method!=="return"&&(J.method="next",J.arg=a);else return Y;return J.delegate=null,T}Se(fe),m(fe,d,"Generator"),m(fe,c,function(){return this}),m(fe,"toString",function(){return"[object Generator]"});function re(te){var J={tryLoc:te[0]};1 in te&&(J.catchLoc=te[1]),2 in te&&(J.finallyLoc=te[2],J.afterLoc=te[3]),this.tryEntries.push(J)}function Ee(te){var J=te.completion||{};J.type="normal",delete J.arg,te.completion=J}function ce(te){this.tryEntries=[{tryLoc:"root"}],te.forEach(re,this),this.reset(!0)}t.keys=function(te){var J=Object(te),G=[];for(var N in J)G.push(N);return G.reverse(),function j(){for(;G.length;){var Y=G.pop();if(Y in J)return j.value=Y,j.done=!1,j}return j.done=!0,j}};function me(te){if(te){var J=te[c];if(J)return J.call(te);if(typeof te.next=="function")return te;if(!isNaN(te.length)){var G=-1,N=function j(){for(;++G<te.length;)if(r.call(te,G))return j.value=te[G],j.done=!1,j;return j.value=a,j.done=!0,j};return N.next=N}}return{next:ae}}t.values=me;function ae(){return{value:a,done:!0}}return ce.prototype={constructor:ce,reset:function(te){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(Ee),!te)for(var J in this)J.charAt(0)==="t"&&r.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=a)},stop:function(){this.done=!0;var te=this.tryEntries[0],J=te.completion;if(J.type==="throw")throw J.arg;return this.rval},dispatchException:function(te){if(this.done)throw te;var J=this;function G(de,be){return Y.type="throw",Y.arg=te,J.next=de,be&&(J.method="next",J.arg=a),!!be}for(var N=this.tryEntries.length-1;N>=0;--N){var j=this.tryEntries[N],Y=j.completion;if(j.tryLoc==="root")return G("end");if(j.tryLoc<=this.prev){var se=r.call(j,"catchLoc"),oe=r.call(j,"finallyLoc");if(se&&oe){if(this.prev<j.catchLoc)return G(j.catchLoc,!0);if(this.prev<j.finallyLoc)return G(j.finallyLoc)}else if(se){if(this.prev<j.catchLoc)return G(j.catchLoc,!0)}else if(oe){if(this.prev<j.finallyLoc)return G(j.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(te,J){for(var G=this.tryEntries.length-1;G>=0;--G){var N=this.tryEntries[G];if(N.tryLoc<=this.prev&&r.call(N,"finallyLoc")&&this.prev<N.finallyLoc){var j=N;break}}j&&(te==="break"||te==="continue")&&j.tryLoc<=J&&J<=j.finallyLoc&&(j=null);var Y=j?j.completion:{};return Y.type=te,Y.arg=J,j?(this.method="next",this.next=j.finallyLoc,T):this.complete(Y)},complete:function(te,J){if(te.type==="throw")throw te.arg;return te.type==="break"||te.type==="continue"?this.next=te.arg:te.type==="return"?(this.rval=this.arg=te.arg,this.method="return",this.next="end"):te.type==="normal"&&J&&(this.next=J),T},finish:function(te){for(var J=this.tryEntries.length-1;J>=0;--J){var G=this.tryEntries[J];if(G.finallyLoc===te)return this.complete(G.completion,G.afterLoc),Ee(G),T}},catch:function(te){for(var J=this.tryEntries.length-1;J>=0;--J){var G=this.tryEntries[J];if(G.tryLoc===te){var N=G.completion;if(N.type==="throw"){var j=N.arg;Ee(G)}return j}}throw new Error("illegal catch attempt")},delegateYield:function(te,J,G){return this.delegate={iterator:me(te),resultName:J,nextLoc:G},this.method==="next"&&(this.arg=a),T}},t}(s.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(N5)),N5.exports}var T5,zA;function v_(){return zA||(zA=1,T5=(s,e)=>`${s}-${e}-${Math.random().toString(16).slice(3,8)}`),T5}var R5,UA;function D3(){if(UA)return R5;UA=1;const s=v_();let e=0;return R5=({id:t,action:n,payload:r={}})=>{let i=t;return typeof i>"u"&&(i=s("Job",e),e+=1),{id:i,action:n,payload:r}},R5}var Dm={},qA;function y_(){if(qA)return Dm;qA=1;let s=!1;return Dm.logging=s,Dm.setLogging=e=>{s=e},Dm.log=(...e)=>s?console.log.apply(this,e):null,Dm}var I5,HA;function ZN(){if(HA)return I5;HA=1;const s=D3(),{log:e}=y_(),t=v_();let n=0;return I5=()=>{const r=t("Scheduler",n),i={},a={};let l=[];n+=1;const c=()=>l.length,h=()=>Object.keys(i).length,d=()=>{if(l.length!==0){const S=Object.keys(i);for(let C=0;C<S.length;C+=1)if(typeof a[S[C]]>"u"){l[0](i[S[C]]);break}}},m=(S,C)=>new Promise((k,T)=>{const M=s({action:S,payload:C});l.push(async H=>{l.shift(),a[H.id]=M;try{k(await H[S].apply(this,[...C,M.id]))}catch(X){T(X)}finally{delete a[H.id],d()}}),e(`[${r}]: Add ${M.id} to JobQueue`),e(`[${r}]: JobQueue length=${l.length}`),d()});return{addWorker:S=>(i[S.id]=S,e(`[${r}]: Add ${S.id}`),e(`[${r}]: Number of workers=${h()}`),d(),S.id),addJob:async(S,...C)=>{if(h()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return m(S,C)},terminate:async()=>{Object.keys(i).forEach(async S=>{await i[S].terminate()}),l=[]},getQueueLen:c,getNumWorkers:h}},I5}function e6(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var O5,$A;function t6(){if($A)return O5;$A=1;function s(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return O5=s,O5}var M5,WA;function n6(){if(WA)return M5;WA=1;const s=t6();return M5=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":s()?t.type="electron":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof e6=="function"&&(t.type="node"),typeof e>"u"?t:t[e]},M5}var F5,GA;function r6(){if(GA)return F5;GA=1;const e=n6()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return F5=t=>{const n={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(n[r]=e(n[r]))}),n},F5}var D5,VA;function i6(){return VA||(VA=1,D5=s=>{const e=[],t=[],n=[],r=[],i=[];return s.blocks&&s.blocks.forEach(a=>{a.paragraphs.forEach(l=>{l.lines.forEach(c=>{c.words.forEach(h=>{h.symbols.forEach(d=>{i.push({...d,page:s,block:a,paragraph:l,line:c,word:h})}),r.push({...h,page:s,block:a,paragraph:l,line:c})}),n.push({...c,page:s,block:a,paragraph:l})}),t.push({...l,page:s,block:a})}),e.push({...a,page:s})}),{...s,blocks:e,paragraphs:t,lines:n,words:r,symbols:i}}),D5}var j5,YA;function j3(){return YA||(YA=1,j5={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),j5}const s6="5.1.1",a6={version:s6};var B5,KA;function o6(){return KA||(KA=1,B5={workerBlobURL:!0,logger:()=>{}}),B5}var z5,XA;function l6(){if(XA)return z5;XA=1;const s=a6.version;return z5={...o6(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${s}/dist/worker.min.js`},z5}var U5,JA;function u6(){return JA||(JA=1,U5=({workerPath:s,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const n=new Blob([`importScripts("${s}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(s);return t}),U5}var q5,QA;function c6(){return QA||(QA=1,q5=s=>{s.terminate()}),q5}var H5,ZA;function h6(){return ZA||(ZA=1,H5=(s,e)=>{s.onmessage=({data:t})=>{e(t)}}),H5}var $5,eS;function d6(){return eS||(eS=1,$5=async(s,e)=>{s.postMessage(e)}),$5}var W5,tS;function f6(){if(tS)return W5;tS=1;const s=t=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=({target:{error:{code:a}}})=>{r(Error(`File could not be read! Code=${a}`))},i.readAsArrayBuffer(t)}),e=async t=>{let n=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?n=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):n=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(n=await e(t.src)),t.tagName==="VIDEO"&&(n=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async i=>{n=await s(i),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();n=await s(r)}else(t instanceof File||t instanceof Blob)&&(n=await s(t));return new Uint8Array(n)};return W5=e,W5}var G5,nS;function p6(){if(nS)return G5;nS=1;const s=l6(),e=u6(),t=c6(),n=h6(),r=d6(),i=f6();return G5={defaultOptions:s,spawnWorker:e,terminateWorker:t,onMessage:n,send:r,loadImage:i},G5}var V5,rS;function B3(){if(rS)return V5;rS=1;const s=r6(),e=i6(),t=D3(),{log:n}=y_(),r=v_(),i=j3(),{defaultOptions:a,spawnWorker:l,terminateWorker:c,onMessage:h,loadImage:d,send:m}=p6();let y=0;return V5=async(v="eng",x=i.LSTM_ONLY,S={},C={})=>{const k=r("Worker",y),{logger:T,errorHandler:M,...H}=s({...a,...S}),X={},he={},ne=typeof v=="string"?v.split("+"):v;let Z=x,fe=C;const Se=[i.DEFAULT,i.LSTM_ONLY].includes(x)&&!H.legacyCore;let q,V;const ue=new Promise((ee,Ke)=>{V=ee,q=Ke}),re=ee=>{q(ee.message)};let Ee=l(H);Ee.onerror=re,y+=1;const ce=(ee,Ke)=>{X[ee]=Ke},me=(ee,Ke)=>{he[ee]=Ke},ae=({id:ee,action:Ke,payload:Ze})=>new Promise((ze,We)=>{n(`[${k}]: Start ${ee}, action=${Ke}`);const Je=`${Ke}-${ee}`;ce(Je,ze),me(Je,We),m(Ee,{workerId:k,jobId:ee,action:Ke,payload:Ze})}),te=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),J=ee=>ae(t({id:ee,action:"load",payload:{options:{lstmOnly:Se,corePath:H.corePath,logging:H.logging}}})),G=(ee,Ke,Ze)=>ae(t({id:Ze,action:"FS",payload:{method:"writeFile",args:[ee,Ke]}})),N=(ee,Ke)=>ae(t({id:Ke,action:"FS",payload:{method:"readFile",args:[ee,{encoding:"utf8"}]}})),j=(ee,Ke)=>ae(t({id:Ke,action:"FS",payload:{method:"unlink",args:[ee]}})),Y=(ee,Ke,Ze)=>ae(t({id:Ze,action:"FS",payload:{method:ee,args:Ke}})),se=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),oe=(ee,Ke)=>ae(t({id:Ke,action:"loadLanguage",payload:{langs:ee,options:{langPath:H.langPath,dataPath:H.dataPath,cachePath:H.cachePath,cacheMethod:H.cacheMethod,gzip:H.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(Z)&&!H.legacyLang}}})),de=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),be=(ee,Ke,Ze,ze)=>ae(t({id:ze,action:"initialize",payload:{langs:ee,oem:Ke,config:Ze}})),Ae=(ee="eng",Ke,Ze,ze)=>{if(Se&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(Ke))throw Error("Legacy model requested but code missing.");const We=Ke||Z;Z=We;const Je=Ze||fe;fe=Je;const gt=(typeof ee=="string"?ee.split("+"):ee).filter(Nt=>!ne.includes(Nt));return ne.push(...gt),gt.length>0?oe(gt,ze).then(()=>be(ee,We,Je,ze)):be(ee,We,Je,ze)},qe=(ee={},Ke)=>ae(t({id:Ke,action:"setParameters",payload:{params:ee}})),$e=async(ee,Ke={},Ze={blocks:!0,text:!0,hocr:!0,tsv:!0},ze)=>ae(t({id:ze,action:"recognize",payload:{image:await d(ee),options:Ke,output:Ze}})),De=(ee="Tesseract OCR Result",Ke=!1,Ze)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),ae(t({id:Ze,action:"getPDF",payload:{title:ee,textonly:Ke}}))),Be=async(ee,Ke)=>{if(Se)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return ae(t({id:Ke,action:"detect",payload:{image:await d(ee)}}))},rt=async()=>(Ee!==null&&(c(Ee),Ee=null),Promise.resolve());h(Ee,({workerId:ee,jobId:Ke,status:Ze,action:ze,data:We})=>{const Je=`${ze}-${Ke}`;if(Ze==="resolve"){n(`[${ee}]: Complete ${Ke}`);let et=We;ze==="recognize"?et=e(We):ze==="getPDF"&&(et=Array.from({...We,length:Object.keys(We).length})),X[Je]({jobId:Ke,data:et})}else if(Ze==="reject")if(he[Je](We),ze==="load"&&q(We),M)M(We);else throw Error(We);else Ze==="progress"&&T({...We,userJobId:Ke})});const Te={id:k,worker:Ee,setResolve:ce,setReject:me,load:te,writeText:G,readText:N,removeFile:j,FS:Y,loadLanguage:se,initialize:de,reinitialize:Ae,setParameters:qe,recognize:$e,getPDF:De,detect:Be,terminate:rt};return J().then(()=>oe(v)).then(()=>be(v,x,C)).then(()=>V(Te)).catch(()=>{}),ue},V5}var Y5,iS;function g6(){if(iS)return Y5;iS=1;const s=B3();return Y5={recognize:async(n,r,i)=>{const a=await s(r,1,i);return a.recognize(n).finally(async()=>{await a.terminate()})},detect:async(n,r)=>{const i=await s("osd",0,r);return i.detect(n).finally(async()=>{await i.terminate()})}},Y5}var K5,sS;function m6(){return sS||(sS=1,K5={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),K5}var X5,aS;function v6(){return aS||(aS=1,X5={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),X5}var J5,oS;function y6(){if(oS)return J5;oS=1,QN();const s=ZN(),e=B3(),t=g6(),n=m6(),r=j3(),i=v6(),{setLogging:a}=y_();return J5={languages:n,OEM:r,PSM:i,createScheduler:s,createWorker:e,setLogging:a,...t},J5}var w6=y6(),h0={};h0.d=(s,e)=>{for(var t in e)h0.o(e,t)&&!h0.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:e[t]})};h0.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e);var Ft=globalThis.pdfjsLib={};h0.d(Ft,{AbortException:()=>Bh,AnnotationEditorLayer:()=>Bb,AnnotationEditorParamsType:()=>nn,AnnotationEditorType:()=>$t,AnnotationEditorUIManager:()=>qf,AnnotationLayer:()=>pR,AnnotationMode:()=>ih,ColorPicker:()=>q2,DOMSVGFactory:()=>C_,DrawLayer:()=>qb,FeatureTest:()=>vs,GlobalWorkerOptions:()=>Qu,ImageKind:()=>Zv,InvalidPDFException:()=>Rw,MissingPDFException:()=>_0,OPS:()=>Eo,OutputScale:()=>Ow,PDFDataRangeTransport:()=>U4,PDFDateString:()=>A_,PDFWorker:()=>Jp,PasswordResponses:()=>A6,PermissionFlag:()=>x6,PixelsPerInch:()=>zh,RenderingCancelledException:()=>__,TextLayer:()=>x0,TouchManager:()=>z2,UnexpectedResponseException:()=>D2,Util:()=>wt,VerbosityLevel:()=>vy,XfaLayer:()=>H4,build:()=>YT,createValidAbsoluteUrl:()=>C6,fetchData:()=>_y,getDocument:()=>BT,getFilenameFromUrl:()=>F6,getPdfFilenameFromUrl:()=>D6,getXfaPageViewport:()=>j6,isDataScheme:()=>xy,isPdfFile:()=>x_,noContextMenu:()=>Uo,normalizeUnicode:()=>I6,setLayerDimensions:()=>Uf,shadow:()=>Xt,stopEvent:()=>_a,version:()=>VT});const Xi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),z3=[1,0,0,1,0,0],Tw=[.001,0,0,.001,0,0],b6=1e7,Q5=1.35,wa={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ih={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_6="pdfjs_internal_editor_",$t={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},nn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},x6={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},qi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Zv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Br={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},jm={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},vy={ERRORS:0,WARNINGS:1,INFOS:5},Eo={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},A6={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let yy=vy.WARNINGS;function S6(s){Number.isInteger(s)&&(yy=s)}function E6(){return yy}function wy(s){yy>=vy.INFOS&&console.log(`Info: ${s}`)}function Wt(s){yy>=vy.WARNINGS&&console.log(`Warning: ${s}`)}function On(s){throw new Error(s)}function Rr(s,e){s||On(e)}function k6(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function C6(s,e=null,t=null){if(!s)return null;try{if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=R6(s)}catch{}}const n=e?new URL(s,e):new URL(s);if(k6(n))return n}catch{}return null}function Xt(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Gh=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class lS extends Gh{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Z5 extends Gh{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Rw extends Gh{constructor(e){super(e,"InvalidPDFException")}}class _0 extends Gh{constructor(e){super(e,"MissingPDFException")}}class D2 extends Gh{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class L6 extends Gh{constructor(e){super(e,"FormatError")}}class Bh extends Gh{constructor(e){super(e,"AbortException")}}function U3(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&On("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),a=s.subarray(r,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function by(s){typeof s!="string"&&On("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function P6(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function w_(s){const e=Object.create(null);for(const[t,n]of s)e[t]=n;return e}function N6(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function T6(){try{return new Function(""),!0}catch{return!1}}class vs{static get isLittleEndian(){return Xt(this,"isLittleEndian",N6())}static get isEvalSupported(){return Xt(this,"isEvalSupported",T6())}static get isOffscreenCanvasSupported(){return Xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Xt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Xt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Xt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Xt(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ew=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var ec,e2,Iw;class wt{static makeHexColor(e,t,n){return`#${ew[e]}${ew[t]}${ew[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,i]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],l=(n+a)/2,c=Math.sqrt((n+a)**2-4*(n*a-i*r))/2,h=l+c||1,d=l-c||1;return[Math.sqrt(h),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static bezierBoundingBox(e,t,n,r,i,a,l,c,h){return h?(h[0]=Math.min(h[0],e,l),h[1]=Math.min(h[1],t,c),h[2]=Math.max(h[2],e,l),h[3]=Math.max(h[3],t,c)):h=[Math.min(e,l),Math.min(t,c),Math.max(e,l),Math.max(t,c)],U(this,ec,Iw).call(this,e,n,i,l,t,r,a,c,3*(-e+3*(n-i)+l),6*(e-2*n+i),3*(n-e),h),U(this,ec,Iw).call(this,e,n,i,l,t,r,a,c,3*(-t+3*(r-a)+c),6*(t-2*r+a),3*(r-t),h),h}}ec=new WeakSet,e2=function(e,t,n,r,i,a,l,c,h,d){if(h<=0||h>=1)return;const m=1-h,y=h*h,v=y*h,x=m*(m*(m*e+3*h*t)+3*y*n)+v*r,S=m*(m*(m*i+3*h*a)+3*y*l)+v*c;d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],S),d[2]=Math.max(d[2],x),d[3]=Math.max(d[3],S)},Iw=function(e,t,n,r,i,a,l,c,h,d,m,y){if(Math.abs(h)<1e-12){Math.abs(d)>=1e-12&&U(this,ec,e2).call(this,e,t,n,r,i,a,l,c,-m/d,y);return}const v=d**2-4*m*h;if(v<0)return;const x=Math.sqrt(v),S=2*h;U(this,ec,e2).call(this,e,t,n,r,i,a,l,c,(-d+x)/S,y),U(this,ec,e2).call(this,e,t,n,r,i,a,l,c,(-d-x)/S,y)},B(wt,ec);function R6(s){return decodeURIComponent(escape(s))}let tw=null,uS=null;function I6(s){return tw||(tw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,uS=new Map([["","t"]])),s.replaceAll(tw,(e,t,n)=>t?t.normalize("NFKC"):uS.get(n))}function O6(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),U3(s)}const b_="pdfjs_internal_id_";function M6(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(U3(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});const _u="http://www.w3.org/2000/svg",Rd=class Rd{};kt(Rd,"CSS",96),kt(Rd,"PDF",72),kt(Rd,"PDF_TO_CSS_UNITS",Rd.CSS/Rd.PDF);let zh=Rd;async function _y(s,e="text"){if(Gm(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class nv{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=a,n*=t;const c=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let d,m,y,v;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,m=0,y=0,v=1;break;case 90:d=0,m=1,y=1,v=0;break;case 270:d=0,m=-1,y=-1,v=0;break;case 0:d=1,m=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(y=-y,v=-v);let x,S,C,k;d===0?(x=Math.abs(h-e[1])*n+i,S=Math.abs(c-e[0])*n+a,C=(e[3]-e[1])*n,k=(e[2]-e[0])*n):(x=Math.abs(c-e[0])*n+i,S=Math.abs(h-e[1])*n+a,C=(e[2]-e[0])*n,k=(e[3]-e[1])*n),this.transform=[d*n,m*n,y*n,v*n,x-d*n*c-y*n*h,S-m*n*c-v*n*h],this.width=C,this.height=k}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(r=>r*e);return Xt(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new nv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){return wt.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=wt.applyTransform([e[0],e[1]],this.transform),n=wt.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return wt.applyInverseTransform([e,t],this.transform)}}class __ extends Gh{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function xy(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function x_(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function F6(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function D6(s,e="document.pdf"){if(typeof s!="string")return e;if(xy(s))return Wt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(s);let i=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch{}return i||e}class cS{constructor(){kt(this,"started",Object.create(null));kt(this,"times",[])}time(e){e in this.started&&Wt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Wt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Gm(s,e){try{const{protocol:t}=e?new URL(s,e):new URL(s);return t==="http:"||t==="https:"}catch{return!1}}function Uo(s){s.preventDefault()}function _a(s){s.preventDefault(),s.stopPropagation()}var E0;class A_{static toDateObject(e){if(!e||typeof e!="string")return null;f(this,E0)||R(this,E0,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=f(this,E0).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const h=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(a+=d,l+=m):h==="+"&&(a-=d,l-=m),new Date(Date.UTC(n,r,i,a,l,c))}}E0=new WeakMap,B(A_,E0);function j6(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new nv({viewBox:i,userUnit:1,scale:e,rotation:t})}function S_(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Wt(`Not a valid color format: "${s}"`),[0,0,0])}function B6(s){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,S_(n))}e.remove()}function tr(s){const{a:e,b:t,c:n,d:r,e:i,f:a}=s.getTransform();return[e,t,n,r,i,a]}function gl(s){const{a:e,b:t,c:n,d:r,e:i,f:a}=s.getTransform().invertSelf();return[e,t,n,r,i,a]}function Uf(s,e,t=!1,n=!0){if(e instanceof nv){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:a}=s,l=vs.isCSSRoundSupported,c=`var(--scale-factor) * ${r}px`,h=`var(--scale-factor) * ${i}px`,d=l?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,m=l?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=d,a.height=m):(a.width=m,a.height=d)}n&&s.setAttribute("data-main-rotation",e.rotation)}class Ow{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var sh,Od,Co,Md,k0,C0,K2,q3,ys,H3,$3,t2,W3,Fw;const Eu=class Eu{constructor(e){B(this,ys);B(this,sh,null);B(this,Od,null);B(this,Co);B(this,Md,null);B(this,k0,null);R(this,Co,e),f(Eu,C0)||R(Eu,C0,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=R(this,sh,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=f(this,Co)._uiManager._signal;e.addEventListener("contextmenu",Uo,{signal:t}),e.addEventListener("pointerdown",U(Eu,K2,q3),{signal:t});const n=R(this,Md,document.createElement("div"));n.className="buttons",e.append(n);const r=f(this,Co).toolbarPosition;if(r){const{style:i}=e,a=f(this,Co)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return U(this,ys,W3).call(this),e}get div(){return f(this,sh)}hide(){var e;f(this,sh).classList.add("hidden"),(e=f(this,Od))==null||e.hideDropdown()}show(){var e;f(this,sh).classList.remove("hidden"),(e=f(this,k0))==null||e.shown()}async addAltText(e){const t=await e.render();U(this,ys,t2).call(this,t),f(this,Md).prepend(t,f(this,ys,Fw)),R(this,k0,e)}addColorPicker(e){R(this,Od,e);const t=e.renderButton();U(this,ys,t2).call(this,t),f(this,Md).prepend(t,f(this,ys,Fw))}remove(){var e;f(this,sh).remove(),(e=f(this,Od))==null||e.destroy(),R(this,Od,null)}};sh=new WeakMap,Od=new WeakMap,Co=new WeakMap,Md=new WeakMap,k0=new WeakMap,C0=new WeakMap,K2=new WeakSet,q3=function(e){e.stopPropagation()},ys=new WeakSet,H3=function(e){f(this,Co)._focusEventsAllowed=!1,_a(e)},$3=function(e){f(this,Co)._focusEventsAllowed=!0,_a(e)},t2=function(e){const t=f(this,Co)._uiManager._signal;e.addEventListener("focusin",U(this,ys,H3).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",U(this,ys,$3).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Uo,{signal:t})},W3=function(){const{editorType:e,_uiManager:t}=f(this,Co),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",f(Eu,C0)[e]),U(this,ys,t2).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),f(this,Md).append(n)},Fw=function(){const e=document.createElement("div");return e.className="divider",e},B(Eu,K2),B(Eu,C0,null);let Mw=Eu;var L0,Fd,Dd,Hh,G3,V3,Y3;class z6{constructor(e){B(this,Hh);B(this,L0,null);B(this,Fd,null);B(this,Dd);R(this,Dd,e)}show(e,t,n){const[r,i]=U(this,Hh,V3).call(this,t,n),{style:a}=f(this,Fd)||R(this,Fd,U(this,Hh,G3).call(this));e.append(f(this,Fd)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,Fd).remove()}}L0=new WeakMap,Fd=new WeakMap,Dd=new WeakMap,Hh=new WeakSet,G3=function(){const e=R(this,Fd,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Uo,{signal:f(this,Dd)._signal});const t=R(this,L0,document.createElement("div"));return t.className="buttons",e.append(t),U(this,Hh,Y3).call(this),e},V3=function(e,t){let n=0,r=0;for(const i of e){const a=i.y+i.height;if(a<n)continue;const l=i.x+(t?i.width:0);if(a>n){r=l,n=a;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,n]},Y3=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=f(this,Dd)._signal;e.addEventListener("contextmenu",Uo,{signal:n}),e.addEventListener("click",()=>{f(this,Dd).highlightSelection("floating_button")},{signal:n}),f(this,L0).append(e)};function j2(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var X2;class U6{constructor(){B(this,X2,0)}get id(){return`${_6}${hs(this,X2)._++}`}}X2=new WeakMap;var rg,P0,Wi,ig,n2;const R_=class R_{constructor(){B(this,ig);B(this,rg,O6());B(this,P0,0);B(this,Wi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Xt(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return U(this,ig,n2).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return U(this,ig,n2).call(this,e,e)}async getFromBlob(e,t){const n=await t;return U(this,ig,n2).call(this,e,n)}async getFromId(e){f(this,Wi)||R(this,Wi,new Map);const t=f(this,Wi).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){f(this,Wi)||R(this,Wi,new Map);let n=f(this,Wi).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${f(this,rg)}_${hs(this,P0)._++}`,refCounter:1,isSvg:!1},f(this,Wi).set(e,n),f(this,Wi).set(n.id,n),n}getSvgUrl(e){const t=f(this,Wi).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;f(this,Wi)||R(this,Wi,new Map);const t=f(this,Wi).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${f(this,rg)}_`)}};rg=new WeakMap,P0=new WeakMap,Wi=new WeakMap,ig=new WeakSet,n2=async function(e,t){f(this,Wi)||R(this,Wi,new Map);let n=f(this,Wi).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${f(this,rg)}_${hs(this,P0)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await _y(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=R_._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((h,d)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,h()},a.onload=async()=>{const m=n.svgUrl=a.result;l.src=await i?`${m}#svgView(preserveAspectRatio(none))`:m},l.onerror=a.onerror=d});a.readAsDataURL(r),await c}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Wt(r),n=null}return f(this,Wi).set(e,n),n&&f(this,Wi).set(n.id,n),n};let Dw=R_;var _r,ah,N0,ar;class q6{constructor(e=128){B(this,_r,[]);B(this,ah,!1);B(this,N0);B(this,ar,-1);R(this,N0,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(r&&e(),f(this,ah))return;const c={cmd:e,undo:t,post:n,type:i};if(f(this,ar)===-1){f(this,_r).length>0&&(f(this,_r).length=0),R(this,ar,0),f(this,_r).push(c);return}if(a&&f(this,_r)[f(this,ar)].type===i){l&&(c.undo=f(this,_r)[f(this,ar)].undo),f(this,_r)[f(this,ar)]=c;return}const h=f(this,ar)+1;h===f(this,N0)?f(this,_r).splice(0,1):(R(this,ar,h),h<f(this,_r).length&&f(this,_r).splice(h)),f(this,_r).push(c)}undo(){if(f(this,ar)===-1)return;R(this,ah,!0);const{undo:e,post:t}=f(this,_r)[f(this,ar)];e(),t==null||t(),R(this,ah,!1),R(this,ar,f(this,ar)-1)}redo(){if(f(this,ar)<f(this,_r).length-1){R(this,ar,f(this,ar)+1),R(this,ah,!0);const{cmd:e,post:t}=f(this,_r)[f(this,ar)];e(),t==null||t(),R(this,ah,!1)}}hasSomethingToUndo(){return f(this,ar)!==-1}hasSomethingToRedo(){return f(this,ar)<f(this,_r).length-1}cleanType(e){if(f(this,ar)!==-1){for(let t=f(this,ar);t>=0;t--)if(f(this,_r)[t].type!==e){f(this,_r).splice(t+1,f(this,ar)-t),R(this,ar,t);return}f(this,_r).length=0,R(this,ar,-1)}}destroy(){R(this,_r,null)}}_r=new WeakMap,ah=new WeakMap,N0=new WeakMap,ar=new WeakMap;var J2,K3;class rv{constructor(e){B(this,J2);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=vs.platform;for(const[n,r,i={}]of e)for(const a of n){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(U(this,J2,K3).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:l=null}}=n;l&&!l(e,t)||(r.bind(e,...a,t)(),i||_a(t))}}J2=new WeakSet,K3=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Q2=class Q2{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return B6(e),Xt(this,"_colors",e)}convert(e){const t=S_(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,a)=>i===t[a]))return Q2._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?wt.makeHexColor(...t):e}};kt(Q2,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let jw=Q2;var sg,oa,Ur,yi,ag,Cu,og,qa,oh,jd,lg,Bd,bl,Lo,zd,T0,R0,ug,I0,_l,lh,cg,uh,xl,Z2,ch,O0,hh,Ud,M0,F0,ni,kn,Lu,qd,D0,j0,dh,Al,Pu,B0,Ha,st,r2,Bw,X3,J3,i2,Q3,Z3,e4,zw,t4,Uw,qw,n4,ds,xu,r4,i4,Hw,s4,Vm,$w;const Vp=class Vp{constructor(e,t,n,r,i,a,l,c,h,d,m,y,v){B(this,st);B(this,sg,new AbortController);B(this,oa,null);B(this,Ur,new Map);B(this,yi,new Map);B(this,ag,null);B(this,Cu,null);B(this,og,null);B(this,qa,new q6);B(this,oh,null);B(this,jd,null);B(this,lg,0);B(this,Bd,new Set);B(this,bl,null);B(this,Lo,null);B(this,zd,new Set);kt(this,"_editorUndoBar",null);B(this,T0,!1);B(this,R0,!1);B(this,ug,!1);B(this,I0,null);B(this,_l,null);B(this,lh,null);B(this,cg,null);B(this,uh,!1);B(this,xl,null);B(this,Z2,new U6);B(this,ch,!1);B(this,O0,!1);B(this,hh,null);B(this,Ud,null);B(this,M0,null);B(this,F0,null);B(this,ni,$t.NONE);B(this,kn,new Set);B(this,Lu,null);B(this,qd,null);B(this,D0,null);B(this,j0,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});B(this,dh,[0,0]);B(this,Al,null);B(this,Pu,null);B(this,B0,null);B(this,Ha,null);const x=this._signal=f(this,sg).signal;R(this,Pu,e),R(this,B0,t),R(this,ag,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:x}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),r._on("setpreference",this.onSetPreference.bind(this),{signal:x}),r._on("switchannotationeditorparams",S=>this.updateParams(S.type,S.value),{signal:x}),U(this,st,Q3).call(this),U(this,st,n4).call(this),U(this,st,zw).call(this),R(this,Cu,i.annotationStorage),R(this,I0,i.filterFactory),R(this,qd,a),R(this,cg,l||null),R(this,T0,c),R(this,R0,h),R(this,ug,d),R(this,F0,m||null),this.viewParameters={realScale:zh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=v!==!1}static get _keyboardManager(){const e=Vp.prototype,t=a=>f(a,Pu).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Xt(this,"_keyboardManager",new rv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&f(a,Pu).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&f(a,Pu).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i;(e=f(this,Ha))==null||e.resolve(),R(this,Ha,null),(t=f(this,sg))==null||t.abort(),R(this,sg,null),this._signal=null;for(const a of f(this,yi).values())a.destroy();f(this,yi).clear(),f(this,Ur).clear(),f(this,zd).clear(),R(this,oa,null),f(this,kn).clear(),f(this,qa).destroy(),(n=f(this,ag))==null||n.destroy(),(r=f(this,xl))==null||r.hide(),R(this,xl,null),f(this,_l)&&(clearTimeout(f(this,_l)),R(this,_l,null)),f(this,Al)&&(clearTimeout(f(this,Al)),R(this,Al,null)),(i=this._editorUndoBar)==null||i.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return f(this,F0)}get useNewAltTextFlow(){return f(this,R0)}get useNewAltTextWhenAddingImage(){return f(this,ug)}get hcmFilter(){return Xt(this,"hcmFilter",f(this,qd)?f(this,I0).addHCMFilter(f(this,qd).foreground,f(this,qd).background):"none")}get direction(){return Xt(this,"direction",getComputedStyle(f(this,Pu)).direction)}get highlightColors(){return Xt(this,"highlightColors",f(this,cg)?new Map(f(this,cg).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),R(this,jd,e)}setMainHighlightColorPicker(e){R(this,M0,e)}editAltText(e,t=!1){var n;(n=f(this,ag))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":R(this,ug,t);break}}onPageChanging({pageNumber:e}){R(this,lg,e-1)}focusMainContainer(){f(this,Pu).focus()}findParent(e,t){for(const n of f(this,yi).values()){const{x:r,y:i,width:a,height:l}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+l)return n}return null}disableUserSelect(e=!1){f(this,B0).classList.toggle("noUserSelect",e)}addShouldRescale(e){f(this,zd).add(e)}removeShouldRescale(e){f(this,zd).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*zh.PDF_TO_CSS_UNITS;for(const n of f(this,zd))n.onScaleChanging();(t=f(this,jd))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}=t,l=t.toString(),h=U(this,st,r2).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;t.empty();const m=U(this,st,Bw).call(this,h),y=f(this,ni)===$t.NONE,v=()=>{m==null||m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a,text:l}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode($t.HIGHLIGHT,v);return}v()}addToAnnotationStorage(e){!e.isEmpty()&&f(this,Cu)&&!f(this,Cu).has(e.id)&&f(this,Cu).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,f(this,uh)&&(R(this,uh,!1),U(this,st,i2).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of f(this,kn))if(t.div.contains(e)){R(this,Ud,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!f(this,Ud))return;const[e,t]=f(this,Ud);R(this,Ud,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){U(this,st,zw).call(this),U(this,st,Uw).call(this)}removeEditListeners(){U(this,st,t4).call(this),U(this,st,qw).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of f(this,Lo))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of f(this,Lo))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=f(this,oa))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of f(this,kn)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of f(this,Lo))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){Wt(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of n){const h=await r.deserialize(c);if(!h)return;i.push(h)}const a=()=>{for(const c of i)U(this,st,Hw).call(this,c);U(this,st,$w).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(i){Wt(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,ni)!==$t.NONE&&!this.isEditorHandlingKeyboard&&Vp._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,uh)&&(R(this,uh,!1),U(this,st,i2).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(U(this,st,Z3).call(this),U(this,st,Uw).call(this),U(this,st,ds).call(this,{isEditing:f(this,ni)!==$t.NONE,isEmpty:U(this,st,Vm).call(this),hasSomethingToUndo:f(this,qa).hasSomethingToUndo(),hasSomethingToRedo:f(this,qa).hasSomethingToRedo(),hasSelectedEditor:!1})):(U(this,st,e4).call(this),U(this,st,qw).call(this),U(this,st,ds).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!f(this,Lo)){R(this,Lo,e);for(const t of f(this,Lo))U(this,st,xu).call(this,t.defaultPropertiesToUpdate)}}getId(){return f(this,Z2).id}get currentLayer(){return f(this,yi).get(f(this,lg))}getLayer(e){return f(this,yi).get(e)}get currentPageIndex(){return f(this,lg)}addLayer(e){f(this,yi).set(e.pageIndex,e),f(this,ch)?e.enable():e.disable()}removeLayer(e){f(this,yi).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var r;if(f(this,ni)!==e&&!(f(this,Ha)&&(await f(this,Ha).promise,!f(this,Ha)))){if(R(this,Ha,Promise.withResolvers()),R(this,ni,e),e===$t.NONE){this.setEditingState(!1),U(this,st,i4).call(this),(r=this._editorUndoBar)==null||r.hide(),f(this,Ha).resolve();return}this.setEditingState(!0),await U(this,st,r4).call(this),this.unselectAll();for(const i of f(this,yi).values())i.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),f(this,Ha).resolve();return}for(const i of f(this,Ur).values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();f(this,Ha).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==f(this,ni)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(f(this,Lo)){switch(e){case nn.CREATE:this.currentLayer.addNewEditor();return;case nn.HIGHLIGHT_DEFAULT_COLOR:(n=f(this,M0))==null||n.updateColor(t);break;case nn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,D0)||R(this,D0,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of f(this,kn))r.updateParams(e,t);for(const r of f(this,Lo))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const a of f(this,Ur).values())a.editorType===e&&a.show(t);(((i=f(this,D0))==null?void 0:i.get(nn.HIGHLIGHT_SHOW_ALL))??!0)!==t&&U(this,st,xu).call(this,[[nn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(f(this,O0)!==e){R(this,O0,e);for(const t of f(this,yi).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of f(this,Ur).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return f(this,Ur).get(e)}addEditor(e){f(this,Ur).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(f(this,_l)&&clearTimeout(f(this,_l)),R(this,_l,setTimeout(()=>{this.focusMainContainer(),R(this,_l,null)},0))),f(this,Ur).delete(e.id),this.unselect(e),(!e.annotationElementId||!f(this,Bd).has(e.annotationElementId))&&((t=f(this,Cu))==null||t.remove(e.id))}addDeletedAnnotationElement(e){f(this,Bd).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return f(this,Bd).has(e)}removeDeletedAnnotationElement(e){f(this,Bd).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){f(this,oa)!==e&&(R(this,oa,e),e&&U(this,st,xu).call(this,e.propertiesToUpdate))}updateUI(e){f(this,st,s4)===e&&U(this,st,xu).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){U(this,st,xu).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(f(this,kn).has(e)){f(this,kn).delete(e),e.unselect(),U(this,st,ds).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,kn).add(e),e.select(),U(this,st,xu).call(this,e.propertiesToUpdate),U(this,st,ds).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=f(this,jd))==null||t.commitOrRemove();for(const n of f(this,kn))n!==e&&n.unselect();f(this,kn).clear(),f(this,kn).add(e),e.select(),U(this,st,xu).call(this,e.propertiesToUpdate),U(this,st,ds).call(this,{hasSelectedEditor:!0})}isSelected(e){return f(this,kn).has(e)}get firstSelectedEditor(){return f(this,kn).values().next().value}unselect(e){e.unselect(),f(this,kn).delete(e),U(this,st,ds).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,kn).size!==0}get isEnterHandled(){return f(this,kn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;f(this,qa).undo(),U(this,st,ds).call(this,{hasSomethingToUndo:f(this,qa).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:U(this,st,Vm).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){f(this,qa).redo(),U(this,st,ds).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,qa).hasSomethingToRedo(),isEmpty:U(this,st,Vm).call(this)})}addCommands(e){f(this,qa).add(e),U(this,st,ds).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:U(this,st,Vm).call(this)})}cleanUndoStack(e){f(this,qa).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...f(this,kn)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const a of t)U(this,st,Hw).call(this,a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=f(this,oa))==null||e.commitOrRemove()}hasSomethingToControl(){return f(this,oa)||this.hasSelection}selectAll(){for(const e of f(this,kn))e.commit();U(this,st,$w).call(this,f(this,Ur).values())}unselectAll(){var e;if(!(f(this,oa)&&(f(this,oa).commitOrRemove(),f(this,ni)!==$t.NONE))&&!((e=f(this,jd))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of f(this,kn))t.unselect();f(this,kn).clear(),U(this,st,ds).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;f(this,dh)[0]+=e,f(this,dh)[1]+=t;const[r,i]=f(this,dh),a=[...f(this,kn)],l=1e3;f(this,Al)&&clearTimeout(f(this,Al)),R(this,Al,setTimeout(()=>{R(this,Al,null),f(this,dh)[0]=f(this,dh)[1]=0,this.addCommands({cmd:()=>{for(const c of a)f(this,Ur).has(c.id)&&c.translateInPage(r,i)},undo:()=>{for(const c of a)f(this,Ur).has(c.id)&&c.translateInPage(-r,-i)},mustExec:!1})},l));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),R(this,bl,new Map);for(const e of f(this,kn))f(this,bl).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,bl))return!1;this.disableUserSelect(!1);const e=f(this,bl);R(this,bl,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},l]of e)l.newX=r,l.newY=i,l.newPageIndex=a,t||(t=r!==l.savedX||i!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const n=(r,i,a,l)=>{if(f(this,Ur).has(r.id)){const c=f(this,yi).get(l);c?r._setParentAndPosition(c,i,a):(r.pageIndex=l,r.x=i,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:a,newPageIndex:l}]of e)n(r,i,a,l)},undo:()=>{for(const[r,{savedX:i,savedY:a,savedPageIndex:l}]of e)n(r,i,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(f(this,bl))for(const n of f(this,bl).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||f(this,kn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return f(this,oa)===e}getActive(){return f(this,oa)}getMode(){return f(this,ni)}get imageManager(){return Xt(this,"imageManager",new Dw)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,d=t.rangeCount;h<d;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(h,d,m,y)=>({x:(d-r)/a,y:1-(h+m-n)/i,width:y/a,height:m/i});break;case"180":l=(h,d,m,y)=>({x:1-(h+m-n)/i,y:1-(d+y-r)/a,width:m/i,height:y/a});break;case"270":l=(h,d,m,y)=>({x:1-(d+y-r)/a,y:(h-n)/i,width:y/a,height:m/i});break;default:l=(h,d,m,y)=>({x:(h-n)/i,y:(d-r)/a,width:m/i,height:y/a});break}const c=[];for(let h=0,d=t.rangeCount;h<d;h++){const m=t.getRangeAt(h);if(!m.collapsed)for(const{x:y,y:v,width:x,height:S}of m.getClientRects())x===0||S===0||c.push(l(y,v,x,S))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(f(this,og)||R(this,og,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=f(this,og))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=f(this,og))==null?void 0:r.get(e.data.id);if(!t)return;const n=f(this,Cu).getRawValue(t);n&&(f(this,ni)===$t.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};sg=new WeakMap,oa=new WeakMap,Ur=new WeakMap,yi=new WeakMap,ag=new WeakMap,Cu=new WeakMap,og=new WeakMap,qa=new WeakMap,oh=new WeakMap,jd=new WeakMap,lg=new WeakMap,Bd=new WeakMap,bl=new WeakMap,Lo=new WeakMap,zd=new WeakMap,T0=new WeakMap,R0=new WeakMap,ug=new WeakMap,I0=new WeakMap,_l=new WeakMap,lh=new WeakMap,cg=new WeakMap,uh=new WeakMap,xl=new WeakMap,Z2=new WeakMap,ch=new WeakMap,O0=new WeakMap,hh=new WeakMap,Ud=new WeakMap,M0=new WeakMap,F0=new WeakMap,ni=new WeakMap,kn=new WeakMap,Lu=new WeakMap,qd=new WeakMap,D0=new WeakMap,j0=new WeakMap,dh=new WeakMap,Al=new WeakMap,Pu=new WeakMap,B0=new WeakMap,Ha=new WeakMap,st=new WeakSet,r2=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Bw=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of f(this,yi).values())if(n.hasTextLayer(e))return n;return null},X3=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=U(this,st,r2).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(f(this,xl)||R(this,xl,new z6(this)),f(this,xl).show(n,r,this.direction==="ltr"))},J3=function(){var i,a,l;const e=document.getSelection();if(!e||e.isCollapsed){f(this,Lu)&&((i=f(this,xl))==null||i.hide(),R(this,Lu,null),U(this,st,ds).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===f(this,Lu))return;const r=U(this,st,r2).call(this,e).closest(".textLayer");if(!r){f(this,Lu)&&((a=f(this,xl))==null||a.hide(),R(this,Lu,null),U(this,st,ds).call(this,{hasSelectedText:!1}));return}if((l=f(this,xl))==null||l.hide(),R(this,Lu,t),U(this,st,ds).call(this,{hasSelectedText:!0}),!(f(this,ni)!==$t.HIGHLIGHT&&f(this,ni)!==$t.NONE)&&(f(this,ni)===$t.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),R(this,uh,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=f(this,ni)===$t.HIGHLIGHT?U(this,st,Bw).call(this,r):null;c==null||c.toggleDrawing();const h=new AbortController,d=this.combinedSignal(h),m=y=>{y.type==="pointerup"&&y.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),y.type==="pointerup"&&U(this,st,i2).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:d}),window.addEventListener("blur",m,{signal:d})}},i2=function(e=""){f(this,ni)===$t.HIGHLIGHT?this.highlightSelection(e):f(this,T0)&&U(this,st,X3).call(this)},Q3=function(){document.addEventListener("selectionchange",U(this,st,J3).bind(this),{signal:this._signal})},Z3=function(){if(f(this,lh))return;R(this,lh,new AbortController);const e=this.combinedSignal(f(this,lh));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},e4=function(){var e;(e=f(this,lh))==null||e.abort(),R(this,lh,null)},zw=function(){if(f(this,hh))return;R(this,hh,new AbortController);const e=this.combinedSignal(f(this,hh));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},t4=function(){var e;(e=f(this,hh))==null||e.abort(),R(this,hh,null)},Uw=function(){if(f(this,oh))return;R(this,oh,new AbortController);const e=this.combinedSignal(f(this,oh));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},qw=function(){var e;(e=f(this,oh))==null||e.abort(),R(this,oh,null)},n4=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ds=function(e){Object.entries(e).some(([n,r])=>f(this,j0)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,j0),e)}),f(this,ni)===$t.HIGHLIGHT&&e.hasSelectedEditor===!1&&U(this,st,xu).call(this,[[nn.HIGHLIGHT_FREE,!0]]))},xu=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},r4=async function(){if(!f(this,ch)){R(this,ch,!0);const e=[];for(const t of f(this,yi).values())e.push(t.enable());await Promise.all(e);for(const t of f(this,Ur).values())t.enable()}},i4=function(){if(this.unselectAll(),f(this,ch)){R(this,ch,!1);for(const e of f(this,yi).values())e.disable();for(const e of f(this,Ur).values())e.disable()}},Hw=function(e){const t=f(this,yi).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},s4=function(){let e=null;for(e of f(this,kn));return e},Vm=function(){if(f(this,Ur).size===0)return!0;if(f(this,Ur).size===1)for(const e of f(this,Ur).values())return e.isEmpty();return!1},$w=function(e){for(const t of f(this,kn))t.unselect();f(this,kn).clear();for(const t of e)t.isEmpty()||(f(this,kn).add(t),t.select());U(this,st,ds).call(this,{hasSelectedEditor:this.hasSelection})},kt(Vp,"TRANSLATE_SMALL",1),kt(Vp,"TRANSLATE_BIG",10);let qf=Vp;var ri,Sl,Po,hg,El,la,dg,kl,Us,Nu,Hd,Cl,fh,zo,Ym,s2;const fs=class fs{constructor(e){B(this,zo);B(this,ri,null);B(this,Sl,!1);B(this,Po,null);B(this,hg,null);B(this,El,null);B(this,la,null);B(this,dg,!1);B(this,kl,null);B(this,Us,null);B(this,Nu,null);B(this,Hd,null);B(this,Cl,!1);R(this,Us,e),R(this,Cl,e._uiManager.useNewAltTextFlow),f(fs,fh)||R(fs,fh,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){fs._l10n??(fs._l10n=e)}async render(){const e=R(this,Po,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=R(this,hg,document.createElement("span"));e.append(t),f(this,Cl)?(e.classList.add("new"),e.setAttribute("data-l10n-id",f(fs,fh).missing),t.setAttribute("data-l10n-id",f(fs,fh)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=f(this,Us)._uiManager._signal;e.addEventListener("contextmenu",Uo,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),f(this,Us)._uiManager.editAltText(f(this,Us)),f(this,Cl)&&f(this,Us)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:f(this,zo,Ym)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(R(this,dg,!0),r(i))},{signal:n}),await U(this,zo,s2).call(this),e}finish(){f(this,Po)&&(f(this,Po).focus({focusVisible:f(this,dg)}),R(this,dg,!1))}isEmpty(){return f(this,Cl)?f(this,ri)===null:!f(this,ri)&&!f(this,Sl)}hasData(){return f(this,Cl)?f(this,ri)!==null||!!f(this,Nu):this.isEmpty()}get guessedText(){return f(this,Nu)}async setGuessedText(e){f(this,ri)===null&&(R(this,Nu,e),R(this,Hd,await fs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),U(this,zo,s2).call(this))}toggleAltTextBadge(e=!1){var t;if(!f(this,Cl)||f(this,ri)){(t=f(this,kl))==null||t.remove(),R(this,kl,null);return}if(!f(this,kl)){const n=R(this,kl,document.createElement("div"));n.className="noAltTextBadge",f(this,Us).div.append(n)}f(this,kl).classList.toggle("hidden",!e)}serialize(e){let t=f(this,ri);return!e&&f(this,Nu)===t&&(t=f(this,Hd)),{altText:t,decorative:f(this,Sl),guessedText:f(this,Nu),textWithDisclaimer:f(this,Hd)}}get data(){return{altText:f(this,ri),decorative:f(this,Sl)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(R(this,Nu,n),R(this,Hd,r)),!(f(this,ri)===e&&f(this,Sl)===t)&&(i||(R(this,ri,e),R(this,Sl,t)),U(this,zo,s2).call(this))}toggle(e=!1){f(this,Po)&&(!e&&f(this,la)&&(clearTimeout(f(this,la)),R(this,la,null)),f(this,Po).disabled=!e)}shown(){f(this,Us)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:f(this,zo,Ym)}})}destroy(){var e,t;(e=f(this,Po))==null||e.remove(),R(this,Po,null),R(this,hg,null),R(this,El,null),(t=f(this,kl))==null||t.remove(),R(this,kl,null)}};ri=new WeakMap,Sl=new WeakMap,Po=new WeakMap,hg=new WeakMap,El=new WeakMap,la=new WeakMap,dg=new WeakMap,kl=new WeakMap,Us=new WeakMap,Nu=new WeakMap,Hd=new WeakMap,Cl=new WeakMap,fh=new WeakMap,zo=new WeakSet,Ym=function(){return f(this,ri)&&"added"||f(this,ri)===null&&this.guessedText&&"review"||"missing"},s2=async function(){var r,i,a;const e=f(this,Po);if(!e)return;if(f(this,Cl)){if(e.classList.toggle("done",!!f(this,ri)),e.setAttribute("data-l10n-id",f(fs,fh)[f(this,zo,Ym)]),(r=f(this,hg))==null||r.setAttribute("data-l10n-id",f(fs,fh)[`${f(this,zo,Ym)}-label`]),!f(this,ri)){(i=f(this,El))==null||i.remove();return}}else{if(!f(this,ri)&&!f(this,Sl)){e.classList.remove("done"),(a=f(this,El))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=f(this,El);if(!t){R(this,El,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${f(this,Us).id}`;const l=100,c=f(this,Us)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(f(this,la)),R(this,la,null)},{once:!0}),e.addEventListener("mouseenter",()=>{R(this,la,setTimeout(()=>{R(this,la,null),f(this,El).classList.add("show"),f(this,Us)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var h;f(this,la)&&(clearTimeout(f(this,la)),R(this,la,null)),(h=f(this,El))==null||h.classList.remove("show")},{signal:c})}f(this,Sl)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=f(this,ri)),t.parentNode||e.append(t);const n=f(this,Us).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},B(fs,fh,null),kt(fs,"_l10n",null);let B2=fs;var z0,$d,U0,q0,H0,$0,W0,fg,Tu,Wd,ph,ic,a4,o4,Ww;const I_=class I_{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:l}){B(this,ic);B(this,z0);B(this,$d,!1);B(this,U0,null);B(this,q0);B(this,H0);B(this,$0);B(this,W0);B(this,fg);B(this,Tu,null);B(this,Wd);B(this,ph,null);R(this,z0,e),R(this,U0,n),R(this,q0,t),R(this,H0,r),R(this,$0,i),R(this,W0,a),R(this,Wd,new AbortController),R(this,fg,AbortSignal.any([l,f(this,Wd).signal])),e.addEventListener("touchstart",U(this,ic,a4).bind(this),{passive:!1,signal:f(this,fg)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Xt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=f(this,Wd))==null||e.abort(),R(this,Wd,null)}};z0=new WeakMap,$d=new WeakMap,U0=new WeakMap,q0=new WeakMap,H0=new WeakMap,$0=new WeakMap,W0=new WeakMap,fg=new WeakMap,Tu=new WeakMap,Wd=new WeakMap,ph=new WeakMap,ic=new WeakSet,a4=function(e){var r,i,a;if((r=f(this,q0))!=null&&r.call(this)||e.touches.length<2)return;if(!f(this,ph)){R(this,ph,new AbortController);const l=AbortSignal.any([f(this,fg),f(this,ph).signal]),c=f(this,z0),h={signal:l,passive:!1};c.addEventListener("touchmove",U(this,ic,o4).bind(this),h),c.addEventListener("touchend",U(this,ic,Ww).bind(this),h),c.addEventListener("touchcancel",U(this,ic,Ww).bind(this),h),(i=f(this,H0))==null||i.call(this)}if(_a(e),e.touches.length!==2||(a=f(this,U0))!=null&&a.call(this)){R(this,Tu,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),R(this,Tu,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},o4=function(e){var H;if(!f(this,Tu)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:a,screenY:l}=n,c=f(this,Tu),{touch0X:h,touch0Y:d,touch1X:m,touch1Y:y}=c,v=m-h,x=y-d,S=a-r,C=l-i,k=Math.hypot(S,C)||1,T=Math.hypot(v,x)||1;if(!f(this,$d)&&Math.abs(T-k)<=I_.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=a,c.touch1Y=l,e.preventDefault(),!f(this,$d)){R(this,$d,!0);return}const M=[(r+a)/2,(i+l)/2];(H=f(this,$0))==null||H.call(this,M,T,k)},Ww=function(e){var t;f(this,ph).abort(),R(this,ph,null),(t=f(this,W0))==null||t.call(this),f(this,Tu)&&(e.preventDefault(),R(this,Tu,null),R(this,$d,!1))};let z2=I_;var Gd,No,Kn,pg,gh,G0,Vd,wi,Yd,Ru,mh,V0,Kd,ua,Y0,Xd,Iu,Ll,gg,mg,$a,Jd,K0,ey,Ct,Gw,X0,Vw,a2,l4,u4,Yw,o2,Kw,c4,h4,d4,Xw,f4,Jw,p4,g4,m4,Qw,Km;const Gt=class Gt{constructor(e){B(this,Ct);B(this,Gd,null);B(this,No,null);B(this,Kn,null);B(this,pg,!1);B(this,gh,null);B(this,G0,"");B(this,Vd,!1);B(this,wi,null);B(this,Yd,null);B(this,Ru,null);B(this,mh,null);B(this,V0,"");B(this,Kd,!1);B(this,ua,null);B(this,Y0,!1);B(this,Xd,!1);B(this,Iu,!1);B(this,Ll,null);B(this,gg,0);B(this,mg,0);B(this,$a,null);B(this,Jd,null);kt(this,"_editToolbar",null);kt(this,"_initialOptions",Object.create(null));kt(this,"_initialData",null);kt(this,"_isVisible",!0);kt(this,"_uiManager",null);kt(this,"_focusEventsAllowed",!0);B(this,K0,!1);B(this,ey,Gt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Gt.prototype._resizeWithKeyboard,t=qf.TRANSLATE_SMALL,n=qf.TRANSLATE_BIG;return Xt(this,"_resizerKeyboardManager",new rv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Gt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new H6({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Gt._l10n??(Gt._l10n=e),Gt._l10nResizer||(Gt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Gt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Gt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){On("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,K0)}set _isDraggable(e){var t;R(this,K0,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,ey)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):U(this,Ct,Km).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(f(this,Kd)?R(this,Kd,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){U(this,Ct,Gw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){f(this,ua)||R(this,ua,[this.x,this.y,this.width,this.height]),U(this,Ct,Gw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){f(this,ua)||R(this,ua,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,h]=this.getBaseTranslation();a+=c,l+=h;const{style:d}=n;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!f(this,ua)&&(f(this,ua)[0]!==this.x||f(this,ua)[1]!==this.y)}get _hasBeenResized(){return!!f(this,ua)&&(f(this,ua)[2]!==this.width||f(this,ua)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Gt,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:a,width:l,height:c}=this;if(l*=n,c*=r,i*=n,a*=r,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(n-l,i)),a=Math.max(0,Math.min(r-c,a));break;case 90:i=Math.max(0,Math.min(n-c,i)),a=Math.min(r,Math.max(l,a));break;case 180:i=Math.min(n,Math.max(l,i)),a=Math.min(r,Math.max(c,a));break;case 270:i=Math.min(n,Math.max(c,i)),a=Math.max(0,Math.min(r-l,a));break}this.x=i/=n,this.y=a/=r;const[h,d]=this.getBaseTranslation();i+=h,a+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return U(n=Gt,X0,Vw).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return U(n=Gt,X0,Vw).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/n).toFixed(2)}%`,f(this,Vd)||(i.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),i=!f(this,Vd)&&t.endsWith("%");if(r&&i)return;const[a,l]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!f(this,Vd)&&!i&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=f(this,Kn))==null||e.finish()}async addEditToolbar(){return this._editToolbar||f(this,Xd)?this._editToolbar:(this._editToolbar=new Mw(this),this.div.append(this._editToolbar.render()),f(this,Kn)&&await this._editToolbar.addAltText(f(this,Kn)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=f(this,Kn))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){f(this,Kn)||(B2.initialize(Gt._l10n),R(this,Kn,new B2(this)),f(this,Gd)&&(f(this,Kn).data=f(this,Gd),R(this,Gd,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=f(this,Kn))==null?void 0:e.data}set altTextData(e){f(this,Kn)&&(f(this,Kn).data=e)}get guessedAltText(){var e;return(e=f(this,Kn))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=f(this,Kn))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=f(this,Kn))==null?void 0:t.serialize(e)}hasAltText(){return!!f(this,Kn)&&!f(this,Kn).isEmpty()}hasAltTextData(){var e;return((e=f(this,Kn))==null?void 0:e.hasData())??!1}render(){var i;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=f(this,pg)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),U(this,Ct,Jw).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),j2(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(f(this,Jd)||R(this,Jd,new z2({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:U(this,Ct,c4).bind(this),onPinching:U(this,Ct,h4).bind(this),onPinchEnd:U(this,Ct,d4).bind(this),signal:this._uiManager._signal}))),(i=this._uiManager._editorUndoBar)==null||i.hide(),this.div}pointerdown(e){const{isMac:t}=vs.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(R(this,Kd,!0),this._isDraggable){U(this,Ct,f4).call(this,e);return}U(this,Ct,Xw).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){f(this,Ll)&&clearTimeout(f(this,Ll)),R(this,Ll,setTimeout(()=>{var e;R(this,Ll,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,a]=this.pageDimensions,[l,c]=this.pageTranslation,h=e/r,d=t/r,m=this.x*i,y=this.y*a,v=this.width*i,x=this.height*a;switch(n){case 0:return[m+h+l,a-y-d-x+c,m+h+v+l,a-y-d+c];case 90:return[m+d+l,a-y+h+c,m+d+x+l,a-y+h+v+c];case 180:return[m-h-v+l,a-y+d+c,m-h+l,a-y+d+x+c];case 270:return[m-d-x+l,a-y-h-v+c,m-d+l,a-y-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,a]=e,l=i-n,c=a-r;switch(this.rotation){case 0:return[n,t-a,l,c];case 90:return[n,t-r,c,l];case 180:return[i,t-r,l,c];case 270:return[i,t-a,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){R(this,Xd,!0)}disableEditMode(){R(this,Xd,!1)}isInEditMode(){return f(this,Xd)}shouldGetKeyboardEvents(){return f(this,Iu)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&n>0}rebuild(){U(this,Ct,Jw).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){On("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,R(r,Gd,e.accessibilityData);const[i,a]=r.pageDimensions,[l,c,h,d]=r.getRectInCurrentCoords(e.rect,a);return r.x=l/i,r.y=c/a,r.width=h/i,r.height=d/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=f(this,mh))==null||e.abort(),R(this,mh,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,Ll)&&(clearTimeout(f(this,Ll)),R(this,Ll,null)),U(this,Ct,Km).call(this),this.removeEditToolbar(),f(this,$a)){for(const n of f(this,$a).values())clearTimeout(n);R(this,$a,null)}this.parent=null,(t=f(this,Jd))==null||t.destroy(),R(this,Jd,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(U(this,Ct,l4).call(this),f(this,wi).classList.remove("hidden"),j2(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),R(this,Ru,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=f(this,wi).children;if(!f(this,No)){R(this,No,Array.from(t));const a=U(this,Ct,p4).bind(this),l=U(this,Ct,g4).bind(this),c=this._uiManager._signal;for(const h of f(this,No)){const d=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:c}),h.addEventListener("blur",l,{signal:c}),h.addEventListener("focus",U(this,Ct,m4).bind(this,d),{signal:c}),h.setAttribute("data-l10n-id",Gt._l10nResizer[d])}}const n=f(this,No)[0];let r=0;for(const a of t){if(a===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(f(this,No).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)f(this,wi).append(f(this,wi).firstChild);else if(i>r)for(let l=0;l<i-r;l++)f(this,wi).firstChild.before(f(this,wi).lastChild);let a=0;for(const l of t){const h=f(this,No)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Gt._l10nResizer[h])}}U(this,Ct,Qw).call(this,0),R(this,Iu,!0),f(this,wi).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){f(this,Iu)&&U(this,Ct,Kw).call(this,f(this,V0),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){U(this,Ct,Km).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=f(this,Kn))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,r,i;(e=f(this,wi))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=f(this,Kn))==null||i.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return f(this,Y0)}set isEditing(e){R(this,Y0,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){R(this,Vd,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){f(this,$a)||R(this,$a,new Map);const{action:n}=e;let r=f(this,$a).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),f(this,$a).delete(n),f(this,$a).size===0&&R(this,$a,null)},Gt._telemetryTimeout),f(this,$a).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),R(this,pg,!1)}disable(){this.div&&(this.div.tabIndex=-1),R(this,pg,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Gd=new WeakMap,No=new WeakMap,Kn=new WeakMap,pg=new WeakMap,gh=new WeakMap,G0=new WeakMap,Vd=new WeakMap,wi=new WeakMap,Yd=new WeakMap,Ru=new WeakMap,mh=new WeakMap,V0=new WeakMap,Kd=new WeakMap,ua=new WeakMap,Y0=new WeakMap,Xd=new WeakMap,Iu=new WeakMap,Ll=new WeakMap,gg=new WeakMap,mg=new WeakMap,$a=new WeakMap,Jd=new WeakMap,K0=new WeakMap,ey=new WeakMap,Ct=new WeakSet,Gw=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},X0=new WeakSet,Vw=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},a2=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},l4=function(){if(f(this,wi))return;R(this,wi,document.createElement("div")),f(this,wi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");f(this,wi).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",U(this,Ct,u4).bind(this,n),{signal:t}),r.addEventListener("contextmenu",Uo,{signal:t}),r.tabIndex=-1}this.div.prepend(f(this,wi))},u4=function(e,t){var d;t.preventDefault();const{isMac:n}=vs.platform;if(t.button!==0||t.ctrlKey&&n)return;(d=f(this,Kn))==null||d.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,R(this,Yd,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",U(this,Ct,Kw).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",_a,{passive:!1,signal:a}),window.addEventListener("contextmenu",Uo,{signal:a}),R(this,Ru,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{var m;i.abort(),this.parent.togglePointerEvents(!0),(m=f(this,Kn))==null||m.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,U(this,Ct,o2).call(this)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})},Yw=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*n,a*r),this.fixAndSetPosition(),this._onResized()},o2=function(){if(!f(this,Ru))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=f(this,Ru);R(this,Ru,null);const i=this.x,a=this.y,l=this.width,c=this.height;i===e&&a===t&&l===n&&c===r||this.addCommands({cmd:U(this,Ct,Yw).bind(this,i,a,l,c),undo:U(this,Ct,Yw).bind(this,e,t,n,r),mustExec:!0})},Kw=function(e,t){const[n,r]=this.parentDimensions,i=this.x,a=this.y,l=this.width,c=this.height,h=Gt.MIN_SIZE/n,d=Gt.MIN_SIZE/r,m=U(this,Ct,a2).call(this,this.rotation),y=(ce,me)=>[m[0]*ce+m[2]*me,m[1]*ce+m[3]*me],v=U(this,Ct,a2).call(this,360-this.rotation),x=(ce,me)=>[v[0]*ce+v[2]*me,v[1]*ce+v[3]*me];let S,C,k=!1,T=!1;switch(e){case"topLeft":k=!0,S=(ce,me)=>[0,0],C=(ce,me)=>[ce,me];break;case"topMiddle":S=(ce,me)=>[ce/2,0],C=(ce,me)=>[ce/2,me];break;case"topRight":k=!0,S=(ce,me)=>[ce,0],C=(ce,me)=>[0,me];break;case"middleRight":T=!0,S=(ce,me)=>[ce,me/2],C=(ce,me)=>[0,me/2];break;case"bottomRight":k=!0,S=(ce,me)=>[ce,me],C=(ce,me)=>[0,0];break;case"bottomMiddle":S=(ce,me)=>[ce/2,me],C=(ce,me)=>[ce/2,0];break;case"bottomLeft":k=!0,S=(ce,me)=>[0,me],C=(ce,me)=>[ce,0];break;case"middleLeft":T=!0,S=(ce,me)=>[0,me/2],C=(ce,me)=>[ce,me/2];break}const M=S(l,c),H=C(l,c);let X=y(...H);const he=Gt._round(i+X[0]),ne=Gt._round(a+X[1]);let Z=1,fe=1,Se,q;if(t.fromKeyboard)({deltaX:Se,deltaY:q}=t);else{const{screenX:ce,screenY:me}=t,[ae,te]=f(this,Yd);[Se,q]=this.screenToPageTranslation(ce-ae,me-te),f(this,Yd)[0]=ce,f(this,Yd)[1]=me}if([Se,q]=x(Se/n,q/r),k){const ce=Math.hypot(l,c);Z=fe=Math.max(Math.min(Math.hypot(H[0]-M[0]-Se,H[1]-M[1]-q)/ce,1/l,1/c),h/l,d/c)}else T?Z=Math.max(h,Math.min(1,Math.abs(H[0]-M[0]-Se)))/l:fe=Math.max(d,Math.min(1,Math.abs(H[1]-M[1]-q)))/c;const V=Gt._round(l*Z),ue=Gt._round(c*fe);X=y(...C(V,ue));const re=he-X[0],Ee=ne-X[1];f(this,ua)||R(this,ua,[this.x,this.y,this.width,this.height]),this.width=V,this.height=ue,this.x=re,this.y=Ee,this.setDims(n*V,r*ue),this.fixAndSetPosition(),this._onResizing()},c4=function(){var e;R(this,Ru,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=f(this,Kn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},h4=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const a=U(this,Ct,a2).call(this,this.rotation),l=(he,ne)=>[a[0]*he+a[2]*ne,a[1]*he+a[3]*ne],[c,h]=this.parentDimensions,d=this.x,m=this.y,y=this.width,v=this.height,x=Gt.MIN_SIZE/c,S=Gt.MIN_SIZE/h;i=Math.max(Math.min(i,1/y,1/v),x/y,S/v);const C=Gt._round(y*i),k=Gt._round(v*i);if(C===y&&k===v)return;f(this,ua)||R(this,ua,[d,m,y,v]);const T=l(y/2,v/2),M=Gt._round(d+T[0]),H=Gt._round(m+T[1]),X=l(C/2,k/2);this.x=M-X[0],this.y=H-X[1],this.width=C,this.height=k,this.setDims(c*C,h*k),this.fixAndSetPosition(),this._onResizing()},d4=function(){var e;(e=f(this,Kn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),U(this,Ct,o2).call(this)},Xw=function(e){const{isMac:t}=vs.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},f4=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:i},l=h=>{r.abort(),R(this,gh,null),R(this,Kd,!1),this._uiManager.endDragSession()||U(this,Ct,Xw).call(this,h),n&&this._onStopDragging()};t&&(R(this,gg,e.clientX),R(this,mg,e.clientY),R(this,gh,e.pointerId),R(this,G0,e.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._onStartDragging());const{clientX:d,clientY:m,pointerId:y}=h;if(y!==f(this,gh)){_a(h);return}const[v,x]=this.screenToPageTranslation(d-f(this,gg),m-f(this,mg));R(this,gg,d),R(this,mg,m),this._uiManager.dragSelectedEditors(v,x)},a),window.addEventListener("touchmove",_a,a),window.addEventListener("pointerdown",h=>{h.pointerType===f(this,G0)&&(f(this,Jd)||h.isPrimary)&&l(h),_a(h)},a));const c=h=>{if(!f(this,gh)||f(this,gh)===h.pointerId){l(h);return}_a(h)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},Jw=function(){if(f(this,mh)||!this.div)return;R(this,mh,new AbortController);const e=this._uiManager.combinedSignal(f(this,mh));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},p4=function(e){Gt._resizerKeyboardManager.exec(this,e)},g4=function(e){var t;f(this,Iu)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==f(this,wi)&&U(this,Ct,Km).call(this)},m4=function(e){R(this,V0,f(this,Iu)?e:"")},Qw=function(e){if(f(this,No))for(const t of f(this,No))t.tabIndex=e},Km=function(){R(this,Iu,!1),U(this,Ct,Qw).call(this,-1),U(this,Ct,o2).call(this)},B(Gt,X0),kt(Gt,"_l10n",null),kt(Gt,"_l10nResizer",null),kt(Gt,"_borderLineWidth",-1),kt(Gt,"_colorManager",new jw),kt(Gt,"_zIndex",1),kt(Gt,"_telemetryTimeout",1e3);let lr=Gt;class H6 extends lr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const hS=3285377520,Ua=4294901760,ml=65535;class v4{constructor(e){this.h1=e?e&4294967295:hS,this.h2=e?e&4294967295:hS}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let S=0,C=e.length;S<C;S++){const k=e.charCodeAt(S);k<=255?t[n++]=k:(t[n++]=k>>>8,t[n++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,a=new Uint32Array(t.buffer,0,r);let l=0,c=0,h=this.h1,d=this.h2;const m=3432918353,y=461845907,v=m&ml,x=y&ml;for(let S=0;S<r;S++)S&1?(l=a[S],l=l*m&Ua|l*v&ml,l=l<<15|l>>>17,l=l*y&Ua|l*x&ml,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(c=a[S],c=c*m&Ua|c*v&ml,c=c<<15|c>>>17,c=c*y&Ua|c*x&ml,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*m&Ua|l*v&ml,l=l<<15|l>>>17,l=l*y&Ua|l*x&ml,r&1?h^=l:d^=l}this.h1=h,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ua|e*36045&ml,t=t*4283543511&Ua|((t<<16|e>>>16)*2950163797&Ua)>>>16,e^=t>>>1,e=e*444984403&Ua|e*60499&ml,t=t*3301882366&Ua|((t<<16|e>>>16)*3120437893&Ua)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Zw=Object.freeze({map:null,hash:"",transfer:void 0});var Qd,Zd,ii,ty,y4;class E_{constructor(){B(this,ty);B(this,Qd,!1);B(this,Zd,null);B(this,ii,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=f(this,ii).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return f(this,ii).get(e)}remove(e){if(f(this,ii).delete(e),f(this,ii).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of f(this,ii).values())if(t instanceof lr)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=f(this,ii).get(e);let r=!1;if(n!==void 0)for(const[i,a]of Object.entries(t))n[i]!==a&&(r=!0,n[i]=a);else r=!0,f(this,ii).set(e,t);r&&U(this,ty,y4).call(this),t instanceof lr&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return f(this,ii).has(e)}getAll(){return f(this,ii).size>0?w_(f(this,ii)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return f(this,ii).size}resetModified(){f(this,Qd)&&(R(this,Qd,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new w4(this)}get serializable(){if(f(this,ii).size===0)return Zw;const e=new Map,t=new v4,n=[],r=Object.create(null);let i=!1;for(const[a,l]of f(this,ii)){const c=l instanceof lr?l.serialize(!1,r):l;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Zw}get editorStats(){let e=null;const t=new Map;for(const n of f(this,ii).values()){if(!(n instanceof lr))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:i}=r;t.has(i)||t.set(i,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[l,c]of Object.entries(r)){if(l==="type")continue;let h=a.get(l);h||(h=new Map,a.set(l,h));const d=h.get(c)??0;h.set(c,d+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){R(this,Zd,null)}get modifiedIds(){if(f(this,Zd))return f(this,Zd);const e=[];for(const t of f(this,ii).values())!(t instanceof lr)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return R(this,Zd,{ids:new Set(e),hash:e.join(",")})}}Qd=new WeakMap,Zd=new WeakMap,ii=new WeakMap,ty=new WeakSet,y4=function(){f(this,Qd)||(R(this,Qd,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var J0;class w4 extends E_{constructor(t){super();B(this,J0);const{map:n,hash:r,transfer:i}=t.serializable,a=structuredClone(n,i?{transfer:i}:null);R(this,J0,{map:a,hash:r,transfer:i})}get print(){On("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,J0)}get modifiedIds(){return Xt(this,"modifiedIds",{ids:new Set,hash:""})}}J0=new WeakMap;var vg;class $6{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){B(this,vg,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),f(this,vg).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||f(this,vg).has(e.loadedName))){if(Rr(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:i}=e,a=new FontFace(n,r,i);this.addNativeFontFace(a);try{await a.load(),f(this,vg).add(n),t==null||t(e)}catch{Wt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}On("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Wt(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Xt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Xi||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Xt(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Rr(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Xt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(H,X){return H.charCodeAt(X)<<24|H.charCodeAt(X+1)<<16|H.charCodeAt(X+2)<<8|H.charCodeAt(X+3)&255}function r(H,X,he,ne){const Z=H.substring(0,X),fe=H.substring(X+he);return Z+ne+fe}let i,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;function d(H,X){if(++h>30){Wt("Load test font never loaded."),X();return}if(c.font="30px "+H,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){X();return}setTimeout(d.bind(null,H,X))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,m.length,m);const x=16,S=1482184792;let C=n(y,x);for(i=0,a=m.length-3;i<a;i+=4)C=C-S+n(m,i)|0;i<m.length&&(C=C-S+n(m+"XXX",i)|0),y=r(y,x,4,P6(C));const k=`url(data:font/opentype;base64,${btoa(y)});`,T=`@font-face {font-family:"${m}";src:${k}}`;this.insertRule(T);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const H of[e.loadedName,m]){const X=this._document.createElement("span");X.textContent="Hi",X.style.fontFamily=H,M.append(X)}this._document.body.append(M),d(m,()=>{M.remove(),t.complete()})}}vg=new WeakMap;class W6{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${M6(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(a){Wt(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}}const Wv={DATA:1,ERROR:2},Tr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function dS(){}function Bs(s){if(s instanceof Bh||s instanceof Rw||s instanceof _0||s instanceof lS||s instanceof D2||s instanceof Z5)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||On('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Bh(s.message);case"InvalidPDFException":return new Rw(s.message);case"MissingPDFException":return new _0(s.message);case"PasswordException":return new lS(s.message,s.code);case"UnexpectedResponseException":return new D2(s.message,s.status);case"UnknownErrorException":return new Z5(s.message,s.details)}return new Z5(s.message,s.toString())}var yg,Ja,b4,_4,x4,l2;class Xm{constructor(e,t,n){B(this,Ja);B(this,yg,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",U(this,Ja,b4).bind(this),{signal:f(this,yg).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:i,data:t,desiredSize:h.desiredSize},r),d.promise},pull:h=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:a,targetName:l,stream:Tr.PULL,streamId:i,desiredSize:h.desiredSize}),d.promise},cancel:h=>{Rr(h instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:Tr.CANCEL,streamId:i,reason:Bs(h)}),d.promise}},n)}destroy(){var e;(e=f(this,yg))==null||e.abort(),R(this,yg,null)}}yg=new WeakMap,Ja=new WeakSet,b4=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){U(this,Ja,x4).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Wv.DATA)r.resolve(e.data);else if(e.callback===Wv.ERROR)r.reject(Bs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:n,targetName:r,callback:Wv.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:n,targetName:r,callback:Wv.ERROR,callbackId:e.callbackId,reason:Bs(a)})});return}if(e.streamId){U(this,Ja,_4).call(this,e);return}t(e.data)},_4=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(h,d=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=d,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:Tr.ENQUEUE,streamId:t,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Tr.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){Rr(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Tr.ERROR,streamId:t,reason:Bs(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Tr.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Tr.START_COMPLETE,streamId:t,reason:Bs(h)})})},x4=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Tr.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Bs(e.reason));break;case Tr.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Bs(e.reason));break;case Tr.PULL:if(!l){i.postMessage({sourceName:n,targetName:r,stream:Tr.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||dS).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Tr.PULL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Tr.PULL_COMPLETE,streamId:t,reason:Bs(h)})});break;case Tr.ENQUEUE:if(Rr(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Tr.CLOSE:if(Rr(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),U(this,Ja,l2).call(this,a,t);break;case Tr.ERROR:Rr(a,"error should have stream controller"),a.controller.error(Bs(e.reason)),U(this,Ja,l2).call(this,a,t);break;case Tr.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Bs(e.reason)),U(this,Ja,l2).call(this,a,t);break;case Tr.CANCEL:if(!l)break;const c=Bs(e.reason);Promise.try(l.onCancel||dS,c).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Tr.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Tr.CANCEL_COMPLETE,streamId:t,reason:Bs(h)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},l2=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Q0;class A4{constructor({enableHWA:e=!1}){B(this,Q0,!1);R(this,Q0,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!f(this,Q0)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){On("Abstract method `_createCanvas` called.")}}Q0=new WeakMap;class G6 extends A4{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class S4{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){On("Abstract method `_fetch` called.")}}class E4 extends S4{async _fetch(e){const t=await _y(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):by(t)}}class k4{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var ef,wg,Ou,Mu,Gi,tf,nf,ut,Hi,Jm,Dp,u2,jp,C4,eb,Bp,Qm,Zm,tb,e0;class V6 extends k4{constructor({docId:t,ownerDocument:n=globalThis.document}){super();B(this,ut);B(this,ef);B(this,wg);B(this,Ou);B(this,Mu);B(this,Gi);B(this,tf);B(this,nf,0);R(this,Mu,t),R(this,Gi,n)}addFilter(t){if(!t)return"none";let n=f(this,ut,Hi).get(t);if(n)return n;const[r,i,a]=U(this,ut,u2).call(this,t),l=t.length===1?r:`${r}${i}${a}`;if(n=f(this,ut,Hi).get(l),n)return f(this,ut,Hi).set(t,n),n;const c=`g_${f(this,Mu)}_transfer_map_${hs(this,nf)._++}`,h=U(this,ut,jp).call(this,c);f(this,ut,Hi).set(t,h),f(this,ut,Hi).set(l,h);const d=U(this,ut,Bp).call(this,c);return U(this,ut,Zm).call(this,r,i,a,d),h}addHCMFilter(t,n){var x;const r=`${t}-${n}`,i="base";let a=f(this,ut,Jm).get(i);if((a==null?void 0:a.key)===r||(a?((x=a.filter)==null||x.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},f(this,ut,Jm).set(i,a)),!t||!n))return a.url;const l=U(this,ut,e0).call(this,t);t=wt.makeHexColor(...l);const c=U(this,ut,e0).call(this,n);if(n=wt.makeHexColor(...c),f(this,ut,Dp).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const h=new Array(256);for(let S=0;S<=255;S++){const C=S/255;h[S]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const d=h.join(","),m=`g_${f(this,Mu)}_hcm_filter`,y=a.filter=U(this,ut,Bp).call(this,m);U(this,ut,Zm).call(this,d,d,d,y),U(this,ut,eb).call(this,y);const v=(S,C)=>{const k=l[S]/255,T=c[S]/255,M=new Array(C+1);for(let H=0;H<=C;H++)M[H]=k+H/C*(T-k);return M.join(",")};return U(this,ut,Zm).call(this,v(0,5),v(1,5),v(2,5),y),a.url=U(this,ut,jp).call(this,m),a.url}addAlphaFilter(t){let n=f(this,ut,Hi).get(t);if(n)return n;const[r]=U(this,ut,u2).call(this,[t]),i=`alpha_${r}`;if(n=f(this,ut,Hi).get(i),n)return f(this,ut,Hi).set(t,n),n;const a=`g_${f(this,Mu)}_alpha_map_${hs(this,nf)._++}`,l=U(this,ut,jp).call(this,a);f(this,ut,Hi).set(t,l),f(this,ut,Hi).set(i,l);const c=U(this,ut,Bp).call(this,a);return U(this,ut,tb).call(this,r,c),l}addLuminosityFilter(t){let n=f(this,ut,Hi).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=U(this,ut,u2).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=f(this,ut,Hi).get(i),n)return f(this,ut,Hi).set(t,n),n;const a=`g_${f(this,Mu)}_luminosity_map_${hs(this,nf)._++}`,l=U(this,ut,jp).call(this,a);f(this,ut,Hi).set(t,l),f(this,ut,Hi).set(i,l);const c=U(this,ut,Bp).call(this,a);return U(this,ut,C4).call(this,c),t&&U(this,ut,tb).call(this,r,c),l}addHighlightHCMFilter(t,n,r,i,a){var T;const l=`${n}-${r}-${i}-${a}`;let c=f(this,ut,Jm).get(t);if((c==null?void 0:c.key)===l||(c?((T=c.filter)==null||T.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},f(this,ut,Jm).set(t,c)),!n||!r))return c.url;const[h,d]=[n,r].map(U(this,ut,e0).bind(this));let m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),y=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[v,x]=[i,a].map(U(this,ut,e0).bind(this));y<m&&([m,y,v,x]=[y,m,x,v]),f(this,ut,Dp).style.color="";const S=(M,H,X)=>{const he=new Array(256),ne=(y-m)/X,Z=M/255,fe=(H-M)/(255*X);let Se=0;for(let q=0;q<=X;q++){const V=Math.round(m+q*ne),ue=Z+q*fe;for(let re=Se;re<=V;re++)he[re]=ue;Se=V+1}for(let q=Se;q<256;q++)he[q]=he[Se-1];return he.join(",")},C=`g_${f(this,Mu)}_hcm_${t}_filter`,k=c.filter=U(this,ut,Bp).call(this,C);return U(this,ut,eb).call(this,k),U(this,ut,Zm).call(this,S(v[0],x[0],5),S(v[1],x[1],5),S(v[2],x[2],5),k),c.url=U(this,ut,jp).call(this,C),c.url}destroy(t=!1){var n,r,i,a;t&&((n=f(this,tf))!=null&&n.size)||((r=f(this,Ou))==null||r.parentNode.parentNode.remove(),R(this,Ou,null),(i=f(this,wg))==null||i.clear(),R(this,wg,null),(a=f(this,tf))==null||a.clear(),R(this,tf,null),R(this,nf,0))}}ef=new WeakMap,wg=new WeakMap,Ou=new WeakMap,Mu=new WeakMap,Gi=new WeakMap,tf=new WeakMap,nf=new WeakMap,ut=new WeakSet,Hi=function(){return f(this,wg)||R(this,wg,new Map)},Jm=function(){return f(this,tf)||R(this,tf,new Map)},Dp=function(){if(!f(this,Ou)){const t=f(this,Gi).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=f(this,Gi).createElementNS(_u,"svg");r.setAttribute("width",0),r.setAttribute("height",0),R(this,Ou,f(this,Gi).createElementNS(_u,"defs")),t.append(r),r.append(f(this,Ou)),f(this,Gi).body.append(t)}return f(this,Ou)},u2=function(t){if(t.length===1){const h=t[0],d=new Array(256);for(let y=0;y<256;y++)d[y]=h[y]/255;const m=d.join(",");return[m,m,m]}const[n,r,i]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,l[h]=r[h]/255,c[h]=i[h]/255;return[a.join(","),l.join(","),c.join(",")]},jp=function(t){if(f(this,ef)===void 0){R(this,ef,"");const n=f(this,Gi).URL;n!==f(this,Gi).baseURI&&(xy(n)?Wt('#createUrl: ignore "data:"-URL for performance reasons.'):R(this,ef,n.split("#",1)[0]))}return`url(${f(this,ef)}#${t})`},C4=function(t){const n=f(this,Gi).createElementNS(_u,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},eb=function(t){const n=f(this,Gi).createElementNS(_u,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Bp=function(t){const n=f(this,Gi).createElementNS(_u,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),f(this,ut,Dp).append(n),n},Qm=function(t,n,r){const i=f(this,Gi).createElementNS(_u,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Zm=function(t,n,r,i){const a=f(this,Gi).createElementNS(_u,"feComponentTransfer");i.append(a),U(this,ut,Qm).call(this,a,"feFuncR",t),U(this,ut,Qm).call(this,a,"feFuncG",n),U(this,ut,Qm).call(this,a,"feFuncB",r)},tb=function(t,n){const r=f(this,Gi).createElementNS(_u,"feComponentTransfer");n.append(r),U(this,ut,Qm).call(this,r,"feFuncA",t)},e0=function(t){return f(this,ut,Dp).style.color=t,S_(getComputedStyle(f(this,ut,Dp)).getPropertyValue("color"))};class L4{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){On("Abstract method `_fetch` called.")}}class P4 extends L4{async _fetch(e){const t=await _y(e,"arraybuffer");return new Uint8Array(t)}}Xi&&Wt("Please use the `legacy` build in Node.js environments.");async function N4(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class Y6 extends k4{}class K6 extends A4{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class X6 extends S4{async _fetch(e){return N4(e)}}class J6 extends L4{async _fetch(e){return N4(e)}}const Ki={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function nb(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class k_{getPattern(){On("Abstract method `getPattern` called.")}}class Q6 extends k_{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let i;if(r===Ki.STROKE||r===Ki.FILL){const a=t.current.getClippedPathBoundingBox(r,tr(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",l,c),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),n=wt.transform(n,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),nb(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(n);i.setTransform(m)}else nb(e,this._bbox),i=this._createGradient(e);return i}}function nw(s,e,t,n,r,i,a,l){const c=e.coords,h=e.colors,d=s.data,m=s.width*4;let y;c[t+1]>c[n+1]&&(y=t,t=n,n=y,y=i,i=a,a=y),c[n+1]>c[r+1]&&(y=n,n=r,r=y,y=a,a=l,l=y),c[t+1]>c[n+1]&&(y=t,t=n,n=y,y=i,i=a,a=y);const v=(c[t]+e.offsetX)*e.scaleX,x=(c[t+1]+e.offsetY)*e.scaleY,S=(c[n]+e.offsetX)*e.scaleX,C=(c[n+1]+e.offsetY)*e.scaleY,k=(c[r]+e.offsetX)*e.scaleX,T=(c[r+1]+e.offsetY)*e.scaleY;if(x>=T)return;const M=h[i],H=h[i+1],X=h[i+2],he=h[a],ne=h[a+1],Z=h[a+2],fe=h[l],Se=h[l+1],q=h[l+2],V=Math.round(x),ue=Math.round(T);let re,Ee,ce,me,ae,te,J,G;for(let N=V;N<=ue;N++){if(N<C){const de=N<x?0:(x-N)/(x-C);re=v-(v-S)*de,Ee=M-(M-he)*de,ce=H-(H-ne)*de,me=X-(X-Z)*de}else{let de;N>T?de=1:C===T?de=0:de=(C-N)/(C-T),re=S-(S-k)*de,Ee=he-(he-fe)*de,ce=ne-(ne-Se)*de,me=Z-(Z-q)*de}let j;N<x?j=0:N>T?j=1:j=(x-N)/(x-T),ae=v-(v-k)*j,te=M-(M-fe)*j,J=H-(H-Se)*j,G=X-(X-q)*j;const Y=Math.round(Math.min(re,ae)),se=Math.round(Math.max(re,ae));let oe=m*N+Y*4;for(let de=Y;de<=se;de++)j=(re-de)/(re-ae),j<0?j=0:j>1&&(j=1),d[oe++]=Ee-(Ee-te)*j|0,d[oe++]=ce-(ce-J)*j|0,d[oe++]=me-(me-G)*j|0,d[oe++]=255}}function Z6(s,e,t){const n=e.coords,r=e.colors;let i,a;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(n.length/l)-1,h=l-1;for(i=0;i<c;i++){let d=i*l;for(let m=0;m<h;m++,d++)nw(s,t,n[d],n[d+1],n[d+l],r[d],r[d+1],r[d+l]),nw(s,t,n[d+l+1],n[d+1],n[d+l],r[d+l+1],r[d+1],r[d+l])}break;case"triangles":for(i=0,a=n.length;i<a;i+=3)nw(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class eT extends k_{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,d=Math.ceil(this._bounds[3])-c,m=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),v=h/m,x=d/y,S={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/v,scaleY:1/x},C=m+2*2,k=y+2*2,T=n.getCanvas("mesh",C,k),M=T.context,H=M.createImageData(m,y);if(t){const he=H.data;for(let ne=0,Z=he.length;ne<Z;ne+=4)he[ne]=t[0],he[ne+1]=t[1],he[ne+2]=t[2],he[ne+3]=255}for(const he of this._figures)Z6(H,he,S);return M.putImageData(H,2,2),{canvas:T.canvas,offsetX:l-2*v,offsetY:c-2*x,scaleX:v,scaleY:x}}getPattern(e,t,n,r){nb(e,this._bbox);let i;if(r===Ki.SHADING)i=wt.singularValueDecompose2dScale(tr(e));else if(i=wt.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=wt.singularValueDecompose2dScale(this.matrix);i=[i[0]*l[0],i[1]*l[1]]}const a=this._createMeshCanvas(i,r===Ki.SHADING?null:this._background,t.cachedCanvases);return r!==Ki.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class tT extends k_{getPattern(){return"hotpink"}}function nT(s){switch(s[0]){case"RadialAxial":return new Q6(s);case"Mesh":return new eT(s);case"Dummy":return new tT}throw new Error(`Unknown IR type: ${s[0]}`)}const fS={COLORED:1,UNCOLORED:2},ny=class ny{constructor(e,t,n,r,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:i,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),wy("TilingType: "+i);const d=t[0],m=t[1],y=t[2],v=t[3],x=y-d,S=v-m,C=wt.singularValueDecompose2dScale(this.matrix),k=wt.singularValueDecompose2dScale(this.baseTransform),T=C[0]*k[0],M=C[1]*k[1];let H=x,X=S,he=!1,ne=!1;const Z=Math.ceil(c*T),fe=Math.ceil(h*M),Se=Math.ceil(x*T),q=Math.ceil(S*M);Z>=Se?H=c:he=!0,fe>=q?X=h:ne=!0;const V=this.getSizeAndScale(H,this.ctx.canvas.width,T),ue=this.getSizeAndScale(X,this.ctx.canvas.height,M),re=e.cachedCanvases.getCanvas("pattern",V.size,ue.size),Ee=re.context,ce=l.createCanvasGraphics(Ee);if(ce.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ce,r,a),Ee.translate(-V.scale*d,-ue.scale*m),ce.transform(V.scale,0,0,ue.scale,0,0),Ee.save(),this.clipBbox(ce,d,m,y,v),ce.baseTransform=tr(ce.ctx),ce.executeOperatorList(n),ce.endDrawing(),Ee.restore(),he||ne){const me=re.canvas;he&&(H=c),ne&&(X=h);const ae=this.getSizeAndScale(H,this.ctx.canvas.width,T),te=this.getSizeAndScale(X,this.ctx.canvas.height,M),J=ae.size,G=te.size,N=e.cachedCanvases.getCanvas("pattern-workaround",J,G),j=N.context,Y=he?Math.floor(x/c):0,se=ne?Math.floor(S/h):0;for(let oe=0;oe<=Y;oe++)for(let de=0;de<=se;de++)j.drawImage(me,J*oe,G*de,J,G,0,0,J,G);return{canvas:N.canvas,scaleX:ae.scale,scaleY:te.scale,offsetX:d,offsetY:m}}return{canvas:re.canvas,scaleX:V.scale,scaleY:ue.scale,offsetX:d,offsetY:m}}getSizeAndScale(e,t,n){const r=Math.max(ny.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const a=r-t,l=i-n;e.ctx.rect(t,n,a,l),e.current.updateRectMinMax(tr(e.ctx),[t,n,r,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case fS.COLORED:const a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case fS.UNCOLORED:const l=wt.makeHexColor(n[0],n[1],n[2]);r.fillStyle=l,r.strokeStyle=l,i.fillColor=l,i.strokeColor=l;break;default:throw new L6(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let i=n;r!==Ki.SHADING&&(i=wt.transform(i,t.baseTransform),this.matrix&&(i=wt.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(i);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};kt(ny,"MAX_PATTERN_SIZE",3e3);let rb=ny;function rT({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const l=vs.isLittleEndian?4278190080:255,[c,h]=a?[i,l]:[l,i],d=n>>3,m=n&7,y=s.length;t=new Uint32Array(t.buffer);let v=0;for(let x=0;x<r;x++){for(const C=e+d;e<C;e++){const k=e<y?s[e]:255;t[v++]=k&128?h:c,t[v++]=k&64?h:c,t[v++]=k&32?h:c,t[v++]=k&16?h:c,t[v++]=k&8?h:c,t[v++]=k&4?h:c,t[v++]=k&2?h:c,t[v++]=k&1?h:c}if(m===0)continue;const S=e<y?s[e++]:255;for(let C=0;C<m;C++)t[v++]=S&1<<7-C?h:c}return{srcPos:e,destPos:v}}const pS=16,gS=100,iT=15,mS=10,vS=1e3,$s=16;function sT(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},s.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},s.transform=function(n,r,i,a,l,c){e.transform(n,r,i,a,l,c),this.__originalTransform(n,r,i,a,l,c)},s.setTransform=function(n,r,i,a,l,c){e.setTransform(n,r,i,a,l,c),this.__originalSetTransform(n,r,i,a,l,c)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){e.rotate(n),this.__originalRotate(n)},s.clip=function(n){e.clip(n),this.__originalClip(n)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,a,l){e.bezierCurveTo(t,n,r,i,a,l),this.__originalBezierCurveTo(t,n,r,i,a,l)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class aT{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Gv(s,e,t,n,r,i,a,l,c,h){const[d,m,y,v,x,S]=tr(s);if(m===0&&y===0){const T=a*d+x,M=Math.round(T),H=l*v+S,X=Math.round(H),he=(a+c)*d+x,ne=Math.abs(Math.round(he)-M)||1,Z=(l+h)*v+S,fe=Math.abs(Math.round(Z)-X)||1;return s.setTransform(Math.sign(d),0,0,Math.sign(v),M,X),s.drawImage(e,t,n,r,i,0,0,ne,fe),s.setTransform(d,m,y,v,x,S),[ne,fe]}if(d===0&&v===0){const T=l*y+x,M=Math.round(T),H=a*m+S,X=Math.round(H),he=(l+h)*y+x,ne=Math.abs(Math.round(he)-M)||1,Z=(a+c)*m+S,fe=Math.abs(Math.round(Z)-X)||1;return s.setTransform(0,Math.sign(m),Math.sign(y),0,M,X),s.drawImage(e,t,n,r,i,0,0,fe,ne),s.setTransform(d,m,y,v,x,S),[fe,ne]}s.drawImage(e,t,n,r,i,a,l,c,h);const C=Math.hypot(d,m),k=Math.hypot(y,v);return[C*c,k*h]}function oT(s){const{width:e,height:t}=s;if(e>vS||t>vS)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let a=new Uint8Array(i*(t+1)),l,c,h;const d=e+7&-8;let m=new Uint8Array(d*t),y=0;for(const k of s.data){let T=128;for(;T>0;)m[y++]=k&T?0:255,T>>=1}let v=0;for(y=0,m[y]!==0&&(a[0]=1,++v),c=1;c<e;c++)m[y]!==m[y+1]&&(a[c]=m[y]?2:1,++v),y++;for(m[y]!==0&&(a[c]=2,++v),l=1;l<t;l++){y=l*d,h=l*i,m[y-d]!==m[y]&&(a[h]=m[y]?1:8,++v);let k=(m[y]?4:0)+(m[y-d]?8:0);for(c=1;c<e;c++)k=(k>>2)+(m[y+1]?4:0)+(m[y-d+1]?8:0),r[k]&&(a[h+c]=r[k],++v),y++;if(m[y-d]!==m[y]&&(a[h+c]=m[y]?2:4,++v),v>n)return null}for(y=d*(t-1),h=l*i,m[y]!==0&&(a[h]=8,++v),c=1;c<e;c++)m[y]!==m[y+1]&&(a[h+c]=m[y]?4:8,++v),y++;if(m[y]!==0&&(a[h+c]=4,++v),v>n)return null;const x=new Int32Array([0,i,-1,0,-i,0,0,0,1]),S=new Path2D;for(l=0;v&&l<=t;l++){let k=l*i;const T=k+e;for(;k<T&&!a[k];)k++;if(k===T)continue;S.moveTo(k%i,l);const M=k;let H=a[k];do{const X=x[H];do k+=X;while(!a[k]);const he=a[k];he!==5&&he!==10?(H=he,a[k]=0):(H=he&51*H>>4,a[k]&=H>>2|H<<2),S.lineTo(k%i,k/i|0),a[k]||--v}while(M!==k);--l}return m=null,a=null,function(k){k.save(),k.scale(1/e,-1/t),k.translate(0,-t),k.fill(S),k.beginPath(),k.restore()}}class yS{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=z3,this.textMatrixScale=1,this.fontMatrix=Tw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=qi.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=wt.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=wt.applyTransform(t,e),r=wt.applyTransform(t.slice(2),e),i=wt.applyTransform([t[0],t[3]],e),a=wt.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],i[0],a[0]),this.minY=Math.min(this.minY,n[1],r[1],i[1],a[1]),this.maxX=Math.max(this.maxX,n[0],r[0],i[0],a[0]),this.maxY=Math.max(this.maxY,n[1],r[1],i[1],a[1])}updateScalingPathMinMax(e,t){wt.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,i,a,l,c,h,d){const m=wt.bezierBoundingBox(t,n,r,i,a,l,c,h,d);d||this.updateRectMinMax(e,m)}getPathBoundingBox(e=Ki.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Ki.STROKE){t||On("Stroke bounding box must include transform.");const r=wt.singularValueDecompose2dScale(t),i=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=wt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Ki.FILL,t=null){return wt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function wS(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%$s,i=(t-r)/$s,a=r===0?i:i+1,l=s.createImageData(n,$s);let c=0,h;const d=e.data,m=l.data;let y,v,x,S;if(e.kind===Zv.GRAYSCALE_1BPP){const C=d.byteLength,k=new Uint32Array(m.buffer,0,m.byteLength>>2),T=k.length,M=n+7>>3,H=4294967295,X=vs.isLittleEndian?4278190080:255;for(y=0;y<a;y++){for(x=y<i?$s:r,h=0,v=0;v<x;v++){const he=C-c;let ne=0;const Z=he>M?n:he*8-7,fe=Z&-8;let Se=0,q=0;for(;ne<fe;ne+=8)q=d[c++],k[h++]=q&128?H:X,k[h++]=q&64?H:X,k[h++]=q&32?H:X,k[h++]=q&16?H:X,k[h++]=q&8?H:X,k[h++]=q&4?H:X,k[h++]=q&2?H:X,k[h++]=q&1?H:X;for(;ne<Z;ne++)Se===0&&(q=d[c++],Se=128),k[h++]=q&Se?H:X,Se>>=1}for(;h<T;)k[h++]=0;s.putImageData(l,0,y*$s)}}else if(e.kind===Zv.RGBA_32BPP){for(v=0,S=n*$s*4,y=0;y<i;y++)m.set(d.subarray(c,c+S)),c+=S,s.putImageData(l,0,v),v+=$s;y<a&&(S=n*r*4,m.set(d.subarray(c,c+S)),s.putImageData(l,0,v))}else if(e.kind===Zv.RGB_24BPP)for(x=$s,S=n*x,y=0;y<a;y++){for(y>=i&&(x=r,S=n*x),h=0,v=S;v--;)m[h++]=d[c++],m[h++]=d[c++],m[h++]=d[c++],m[h++]=255;s.putImageData(l,0,y*$s)}else throw new Error(`bad image kind: ${e.kind}`)}function bS(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%$s,i=(t-r)/$s,a=r===0?i:i+1,l=s.createImageData(n,$s);let c=0;const h=e.data,d=l.data;for(let m=0;m<a;m++){const y=m<i?$s:r;({srcPos:c}=rT({src:h,srcPos:c,dest:d,width:n,height:y,nonBlackColor:0})),s.putImageData(l,0,m*$s)}}function Bm(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Vv(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!Xi){const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}}function _S(s,e){if(e)return!0;const t=wt.singularValueDecompose2dScale(s);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*zh.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const lT=["butt","round","square"],uT=["miter","round","bevel"],cT={},xS={};var qo,ib,sb,ab;const O_=class O_{constructor(e,t,n,r,i,{optionalContentConfig:a,markedContentStack:l=null},c,h){B(this,qo);this.ctx=e,this.current=new yS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new aT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...tr(this.compositeCtx))}this.ctx.save(),Vv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=tr(this.ctx)}executeOperatorList(e,t,n,r){const i=e.argsArray,a=e.fnArray;let l=t||0;const c=i.length;if(c===l)return l;const h=c-l>mS&&typeof n=="function",d=h?Date.now()+iT:0;let m=0;const y=this.commonObjs,v=this.objs;let x;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,n),l;if(x=a[l],x!==Eo.dependency)this[x].apply(this,i[l]);else for(const S of i[l]){const C=S.startsWith("g_")?y:v;if(!C.has(S))return C.get(S,n),l}if(l++,l===c)return l;if(h&&++m>mS){if(Date.now()>d)return n(),l;m=0}}}endDrawing(){U(this,qo,ib).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),U(this,qo,sb).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=r,h="prescale1",d,m;for(;i>2&&l>1||a>2&&c>1;){let y=l,v=c;i>2&&l>1&&(y=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/y),a>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/v),d=this.cachedCanvases.getCanvas(h,y,v),m=d.context,m.clearRect(0,0,y,v),m.drawImage(e,0,0,l,c,0,0,y,v),e=d.canvas,l=y,c=v,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,i=this.current.fillColor,a=this.current.patternFill,l=tr(t);let c,h,d,m;if((e.bitmap||e.data)&&e.count>1){const Z=e.bitmap||e.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),i]),c=this._cachedBitmapsMap.get(Z),c||(c=new Map,this._cachedBitmapsMap.set(Z,c));const fe=c.get(h);if(fe&&!a){const Se=Math.round(Math.min(l[0],l[2])+l[4]),q=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:fe,offsetX:Se,offsetY:q}}d=fe}d||(m=this.cachedCanvases.getCanvas("maskCanvas",n,r),bS(m.context,e));let y=wt.transform(l,[1/n,0,0,-1/r,0,0]);y=wt.transform(y,[1,0,0,1,0,-r]);const[v,x,S,C]=wt.getAxialAlignedBoundingBox([0,0,n,r],y),k=Math.round(S-v)||1,T=Math.round(C-x)||1,M=this.cachedCanvases.getCanvas("fillCanvas",k,T),H=M.context,X=v,he=x;H.translate(-X,-he),H.transform(...y),d||(d=this._scaleImage(m.canvas,gl(H)),d=d.img,c&&a&&c.set(h,d)),H.imageSmoothingEnabled=_S(tr(H),e.interpolate),Gv(H,d,0,0,d.width,d.height,0,0,n,r),H.globalCompositeOperation="source-in";const ne=wt.transform(gl(H),[1,0,0,1,-X,-he]);return H.fillStyle=a?i.getPattern(t,this,ne,Ki.FILL):i,H.fillRect(0,0,n,r),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,M.canvas)),{canvas:M.canvas,offsetX:Math.round(X),offsetY:Math.round(he)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=lT[e]}setLineJoin(e){this.ctx.lineJoin=uT[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const i=this.ctx;i.setTransform(...tr(this.suspendedCtx)),Bm(this.suspendedCtx,i),sT(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Bm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],a=r[1],l=r[2]-i,c=r[3]-a;l===0||c===0||(this.genericComposeSMask(t.context,n,l,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,a,l,c,h,d,m){let y=e.canvas,v=c-d,x=h-m;if(a){const C=wt.makeHexColor(...a);if(v<0||x<0||v+n>y.width||x+r>y.height){const k=this.cachedCanvases.getCanvas("maskExtension",n,r),T=k.context;T.drawImage(y,-v,-x),T.globalCompositeOperation="destination-atop",T.fillStyle=C,T.fillRect(0,0,n,r),T.globalCompositeOperation="source-over",y=k.canvas,v=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(v,x,n,r),e.clip(k),e.globalCompositeOperation="destination-atop",e.fillStyle=C,e.fillRect(v,x,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const S=new Path2D;S.rect(c,h,n,r),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(y,v,x,n,r,c,h,n,r),t.restore()}save(){this.inSMaskMode?(Bm(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Bm(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,i,a){this.ctx.transform(e,t,n,r,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,i=this.current;let a=i.x,l=i.y,c,h;const d=tr(r),m=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,y=m?n.slice(0):null;for(let v=0,x=0,S=e.length;v<S;v++)switch(e[v]|0){case Eo.rectangle:a=t[x++],l=t[x++];const C=t[x++],k=t[x++],T=a+C,M=l+k;r.moveTo(a,l),C===0||k===0?r.lineTo(T,M):(r.lineTo(T,l),r.lineTo(T,M),r.lineTo(a,M)),m||i.updateRectMinMax(d,[a,l,T,M]),r.closePath();break;case Eo.moveTo:a=t[x++],l=t[x++],r.moveTo(a,l),m||i.updatePathMinMax(d,a,l);break;case Eo.lineTo:a=t[x++],l=t[x++],r.lineTo(a,l),m||i.updatePathMinMax(d,a,l);break;case Eo.curveTo:c=a,h=l,a=t[x+4],l=t[x+5],r.bezierCurveTo(t[x],t[x+1],t[x+2],t[x+3],a,l),i.updateCurvePathMinMax(d,c,h,t[x],t[x+1],t[x+2],t[x+3],a,l,y),x+=6;break;case Eo.curveTo2:c=a,h=l,r.bezierCurveTo(a,l,t[x],t[x+1],t[x+2],t[x+3]),i.updateCurvePathMinMax(d,c,h,a,l,t[x],t[x+1],t[x+2],t[x+3],y),a=t[x+2],l=t[x+3],x+=4;break;case Eo.curveTo3:c=a,h=l,a=t[x+2],l=t[x+3],r.bezierCurveTo(t[x],t[x+1],a,l,a,l),i.updateCurvePathMinMax(d,c,h,t[x],t[x+1],a,l,a,l,y),x+=4;break;case Eo.closePath:r.closePath();break}m&&i.updateScalingPathMinMax(d,y),i.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,gl(t),Ki.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let i=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,gl(t),Ki.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=cT}eoClip(){this.pendingClip=xS}beginText(){this.current.textMatrix=z3,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,r=t.getTransform().invertSelf();for(const{transform:i,x:a,y:l,fontSize:c,path:h}of e)n.addPath(h,new DOMMatrix(i).preMultiplySelf(r).translate(a,l).scale(c,-c));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||Tw,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Wt("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const i=n.loadedName||"sans-serif",a=((d=n.systemFontInfo)==null?void 0:d.css)||`"${i}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let h=t;t<pS?h=pS:t>gS&&(h=gS),this.current.fontSizeScale=t/h,this.ctx.font=`${c} ${l} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,i,a){this.current.textMatrix=[e,t,n,r,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,i){const a=this.ctx,l=this.current,c=l.font,h=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,m=h&qi.FILL_STROKE_MASK,y=!!(h&qi.ADD_TO_PATH_FLAG),v=l.patternFill&&!c.missingFile,x=l.patternStroke&&!c.missingFile;let S;if((c.disableFontFace||y||v||x)&&(S=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||v||x){if(a.save(),a.translate(t,n),a.scale(d,-d),m===qi.FILL||m===qi.FILL_STROKE)if(r){const C=a.getTransform();a.setTransform(...r),a.fill(U(this,qo,ab).call(this,S,C,r))}else a.fill(S);if(m===qi.STROKE||m===qi.FILL_STROKE)if(i){const C=a.getTransform();a.setTransform(...i),a.stroke(U(this,qo,ab).call(this,S,C,i))}else a.lineWidth/=d,a.stroke(S);a.restore()}else(m===qi.FILL||m===qi.FILL_STROKE)&&a.fillText(e,t,n),(m===qi.STROKE||m===qi.FILL_STROKE)&&a.strokeText(e,t,n);y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:tr(a),x:t,y:n,fontSize:d,path:S})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Xt(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const i=this.ctx,a=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,h=t.fontDirection,d=t.textHScale*h,m=e.length,y=n.vertical,v=y?1:-1,x=n.defaultVMetrics,S=r*t.fontMatrix[0],C=t.textRenderingMode===qi.FILL&&!n.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),h>0?i.scale(d,-1):i.scale(d,1);let k,T;if(t.patternFill){i.save();const ne=t.fillColor.getPattern(i,this,gl(i),Ki.FILL);k=tr(i),i.restore(),i.fillStyle=ne}if(t.patternStroke){i.save();const ne=t.strokeColor.getPattern(i,this,gl(i),Ki.STROKE);T=tr(i),i.restore(),i.strokeStyle=ne}let M=t.lineWidth;const H=t.textMatrixScale;if(H===0||M===0){const ne=t.textRenderingMode&qi.FILL_STROKE_MASK;(ne===qi.STROKE||ne===qi.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=H;if(a!==1&&(i.scale(a,a),M/=a),i.lineWidth=M,n.isInvalidPDFjsFont){const ne=[];let Z=0;for(const fe of e)ne.push(fe.unicode),Z+=fe.width;i.fillText(ne.join(""),0,0),t.x+=Z*S*d,i.restore(),this.compose();return}let X=0,he;for(he=0;he<m;++he){const ne=e[he];if(typeof ne=="number"){X+=v*ne*r/1e3;continue}let Z=!1;const fe=(ne.isSpace?c:0)+l,Se=ne.fontChar,q=ne.accent;let V,ue,re=ne.width;if(y){const ce=ne.vmetric||x,me=-(ne.vmetric?ce[1]:re*.5)*S,ae=ce[2]*S;re=ce?-ce[0]:re,V=me/a,ue=(X+ae)/a}else V=X/a,ue=0;if(n.remeasure&&re>0){const ce=i.measureText(Se).width*1e3/r*a;if(re<ce&&this.isFontSubpixelAAEnabled){const me=re/ce;Z=!0,i.save(),i.scale(me,1),V/=me}else re!==ce&&(V+=(re-ce)/2e3*r/a)}if(this.contentVisible&&(ne.isInFont||n.missingFile)){if(C&&!q)i.fillText(Se,V,ue);else if(this.paintChar(Se,V,ue,k,T),q){const ce=V+r*q.offset.x/a,me=ue-r*q.offset.y/a;this.paintChar(q.fontChar,ce,me,k,T)}}const Ee=y?re*S-fe*h:re*S+fe*h;X+=Ee,Z&&i.restore()}y?t.y-=X:t.x+=X*d,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,i=n.fontSize,a=n.fontDirection,l=r.vertical?1:-1,c=n.charSpacing,h=n.wordSpacing,d=n.textHScale*a,m=n.fontMatrix||Tw,y=e.length,v=n.textRenderingMode===qi.INVISIBLE;let x,S,C,k;if(!(v||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(d,a),x=0;x<y;++x){if(S=e[x],typeof S=="number"){k=l*S*i/1e3,this.ctx.translate(k,0),n.x+=k*d;continue}const T=(S.isSpace?h:0)+c,M=r.charProcOperatorList[S.operatorListId];if(!M){Wt(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),t.scale(i,i),t.transform(...m),this.executeOperatorList(M),this.restore()),C=wt.applyTransform([S.width,0],m)[0]*i+T,t.translate(C,0),n.x+=C*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,a){this.ctx.rect(n,r,i-n,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||tr(this.ctx),i={createCanvasGraphics:a=>new O_(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new rb(e,n,this.ctx,i,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=wt.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=wt.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=nT(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,gl(t),Ki.SHADING);const r=gl(t);if(r){const{width:i,height:a}=t.canvas,[l,c,h,d]=wt.getAxialAlignedBoundingBox([0,0,i,a],r);this.ctx.fillRect(l,c,h-l,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){On("Should not call beginInlineImage")}beginImageData(){On("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=tr(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(tr(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||wy("TODO: Support non-isolated groups."),e.knockout&&Wt("Knockout groups not supported.");const n=tr(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=wt.getAxialAlignedBoundingBox(e.bbox,tr(t));const i=[0,0,t.canvas.width,t.canvas.height];r=wt.intersect(r,i)||[0,0,0,0];const a=Math.floor(r[0]),l=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-a,1),h=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(d,c,h),y=m.context;y.translate(-a,-l),y.transform(...n),e.smask?this.smaskStack.push({canvas:m.canvas,context:y,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),Bm(t,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=tr(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const i=wt.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,n,r,i){if(U(this,qo,ib).call(this),Vv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(i&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l;const[c,h]=wt.singularValueDecompose2dScale(tr(this.ctx)),{viewportScale:d}=this,m=Math.ceil(a*this.outputScaleX*d),y=Math.ceil(l*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(m,y);const{canvas:v,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(c,0,0,-h,0,l*h),Vv(this.ctx)}else Vv(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new yS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),U(this,qo,sb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=oT(e)),r.compiled)){r.compiled(n);return}const i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=tr(l);l.transform(t,n,r,i,0,0);const h=this._createMaskCanvas(e);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let d=0,m=a.length;d<m;d+=2){const y=wt.transform(c,[t,n,r,i,a[d],a[d+1]]),[v,x]=wt.applyTransform([0,0],y);l.drawImage(h.canvas,v,x)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:a,width:l,height:c,transform:h}=i,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),m=d.context;m.save();const y=this.getObject(a,i);bS(m,y),m.globalCompositeOperation="source-in",m.fillStyle=r?n.getPattern(m,this,gl(t),Ki.FILL):n,m.fillRect(0,0,l,c),m.restore(),t.save(),t.transform(...h),t.scale(1,-1),Gv(t,d.canvas,0,0,l,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Wt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){Wt("Dependent image isn't ready yet");return}const a=i.width,l=i.height,c=[];for(let h=0,d=r.length;h<d;h+=2)c.push({transform:[t,0,0,n,r[h],r[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!Xi){const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none")}r.scale(1/t,-1/n);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;wS(c,e),i=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(i,gl(r));r.imageSmoothingEnabled=_S(tr(r),e.interpolate),Gv(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const i=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,a).context;wS(c,e),r=this.applyTransferMapsToCanvas(c)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),Gv(n,r,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===xS?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=tr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let a,l;if(n===0&&r===0){const c=Math.abs(t),h=Math.abs(i);if(c===h)if(e===0)a=l=1/c;else{const d=c*e;a=l=d<1?1/d:1}else if(e===0)a=1/c,l=1/h;else{const d=c*e,m=h*e;a=d<1?1/d:1,l=m<1?1/m:1}}else{const c=Math.abs(t*i-n*r),h=Math.hypot(t,n),d=Math.hypot(r,i);if(e===0)a=d/c,l=h/c;else{const m=e*c;a=d>m?d/m:1,l=h>m?h/m:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,i]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&i===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(r,i),a.length>0){const l=Math.max(r,i);t.setLineDash(a.map(c=>c/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};qo=new WeakSet,ib=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},sb=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},ab=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let Xp=O_;for(const s in Eo)Xp.prototype[s]!==void 0&&(Xp.prototype[Eo[s]]=Xp.prototype[s]);var Z0,e1;class Qu{static get workerPort(){return f(this,Z0)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");R(this,Z0,e)}static get workerSrc(){return f(this,e1)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");R(this,e1,e)}}Z0=new WeakMap,e1=new WeakMap,B(Qu,Z0,null),B(Qu,e1,"");var rf,t1;class hT{constructor({parsedData:e,rawData:t}){B(this,rf);B(this,t1);R(this,rf,e),R(this,t1,t)}getRaw(){return f(this,t1)}get(e){return f(this,rf).get(e)??null}getAll(){return w_(f(this,rf))}has(e){return f(this,rf).has(e)}}rf=new WeakMap,t1=new WeakMap;const zp=Symbol("INTERNAL");var n1,r1,i1,bg;class dT{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){B(this,n1,!1);B(this,r1,!1);B(this,i1,!1);B(this,bg,!0);R(this,n1,!!(e&wa.DISPLAY)),R(this,r1,!!(e&wa.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(f(this,i1))return f(this,bg);if(!f(this,bg))return!1;const{print:e,view:t}=this.usage;return f(this,n1)?(t==null?void 0:t.viewState)!=="OFF":f(this,r1)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==zp&&On("Internal method `_setVisible` called."),R(this,i1,n),R(this,bg,t)}}n1=new WeakMap,r1=new WeakMap,i1=new WeakMap,bg=new WeakMap;var vh,Cn,_g,xg,s1,ob;class fT{constructor(e,t=wa.DISPLAY){B(this,s1);B(this,vh,null);B(this,Cn,new Map);B(this,_g,null);B(this,xg,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,R(this,xg,e.order);for(const n of e.groups)f(this,Cn).set(n.id,new dT(t,n));if(e.baseState==="OFF")for(const n of f(this,Cn).values())n._setVisible(zp,!1);for(const n of e.on)f(this,Cn).get(n)._setVisible(zp,!0);for(const n of e.off)f(this,Cn).get(n)._setVisible(zp,!1);R(this,_g,this.getHash())}}isVisible(e){if(f(this,Cn).size===0)return!0;if(!e)return wy("Optional content group not defined."),!0;if(e.type==="OCG")return f(this,Cn).has(e.id)?f(this,Cn).get(e.id).visible:(Wt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return U(this,s1,ob).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!f(this,Cn).has(t))return Wt(`Optional content group not found: ${t}`),!0;if(f(this,Cn).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!f(this,Cn).has(t))return Wt(`Optional content group not found: ${t}`),!0;if(!f(this,Cn).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!f(this,Cn).has(t))return Wt(`Optional content group not found: ${t}`),!0;if(!f(this,Cn).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!f(this,Cn).has(t))return Wt(`Optional content group not found: ${t}`),!0;if(f(this,Cn).get(t).visible)return!1}return!0}return Wt(`Unknown optional content policy ${e.policy}.`),!0}return Wt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=f(this,Cn).get(e);if(!r){Wt(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const l of a)l!==e&&((i=f(this,Cn).get(l))==null||i._setVisible(zp,!1,!0));r._setVisible(zp,!!t,!0),R(this,vh,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=f(this,Cn).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}R(this,vh,null)}get hasInitialVisibility(){return f(this,_g)===null||this.getHash()===f(this,_g)}getOrder(){return f(this,Cn).size?f(this,xg)?f(this,xg).slice():[...f(this,Cn).keys()]:null}getGroups(){return f(this,Cn).size>0?w_(f(this,Cn)):null}getGroup(e){return f(this,Cn).get(e)||null}getHash(){if(f(this,vh)!==null)return f(this,vh);const e=new v4;for(const[t,n]of f(this,Cn))e.update(`${t}:${n.visible}`);return R(this,vh,e.hexdigest())}}vh=new WeakMap,Cn=new WeakMap,_g=new WeakMap,xg=new WeakMap,s1=new WeakSet,ob=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let a;if(Array.isArray(i))a=U(this,s1,ob).call(this,i);else if(f(this,Cn).has(i))a=f(this,Cn).get(i).visible;else return Wt(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class pT{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Rr(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),e.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Rr(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Rr(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new gT(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new mT(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class gT{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=x_(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mT{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function vT(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let d=l(t);return d=unescape(d),d=c(d),d=h(d),i(d)}if(t=a(s),t){const d=h(t);return i(d)}if(t=n("filename","i").exec(s),t){t=t[1];let d=l(t);return d=h(d),i(d)}function n(d,m){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(d,m){if(d){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(d,{fatal:!0}),v=by(m);m=y.decode(v),e=!1}catch{}}return m}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function a(d){const m=[];let y;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=v.exec(d))!==null;){let[,S,C,k]=y;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[C,k]}const x=[];for(let S=0;S<m.length&&S in m;++S){let[C,k]=m[S];k=l(k),C&&(k=unescape(k),S===0&&(k=c(k))),x.push(k)}return x.join("")}function l(d){if(d.startsWith('"')){const m=d.slice(1).split('\\"');for(let y=0;y<m.length;++y){const v=m[y].indexOf('"');v!==-1&&(m[y]=m[y].slice(0,v),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}d=m.join('"')}return d}function c(d){const m=d.indexOf("'");if(m===-1)return d;const y=d.slice(0,m),x=d.slice(m+1).replace(/^[^']*'/,"");return r(y,x)}function h(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,v,x){if(v==="q"||v==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),r(y,x);try{x=atob(x)}catch{}return r(y,x)})}return""}function T4(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Ay(s){try{return new URL(s).origin}catch{}return null}function R4({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function I4(s){const e=s.get("Content-Disposition");if(e){let t=vT(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(x_(t))return t}return null}function Sy(s,e){return s===404||s===0&&e.startsWith("file:")?new _0('Missing PDF "'+e+'".'):new D2(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s)}function O4(s){return s===200||s===206}function M4(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function F4(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Wt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class AS{constructor(e){kt(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=T4(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Rr(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new yT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new wT(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class yT{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,M4(n,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Ay(i.url),!O4(i.status))throw Sy(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:l,suggestedLength:c}=R4({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=I4(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Bh("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:F4(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class wT{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${n-1}`);const a=r.url;fetch(a,M4(i,this._withCredentials,this._abortController)).then(l=>{const c=Ay(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!O4(l.status))throw Sy(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:F4(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const rw=200,iw=206;function bT(s){const e=s.response;return typeof e!="string"?e:by(e).buffer}class _T{constructor({url:e,httpHeaders:t,withCredentials:n}){kt(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=T4(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=iw):r.expectedStatus=rw,t.responseType="arraybuffer",Rr(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const i=r.status||rw;if(!(i===rw&&n.expectedStatus===iw)&&i!==n.expectedStatus){n.onError(r.status);return}const l=bT(r);if(i===iw){const c=r.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?n.onDone({begin:parseInt(h[1],10),chunk:l}):(Wt('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class xT{constructor(e){this._source=e,this._manager=new _T(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Rr(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new AT(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new ST(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class AT{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Ay(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...h]=l.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=R4({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=I4(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Sy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ST{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Ay((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Sy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ET=/^[a-z][a-z0-9\-+.]+:/i;function kT(s){if(ET.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class CT{constructor(e){this.source=e,this.url=kT(e.url),Rr(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Rr(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new LT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new PT(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class LT{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new _0(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Bh("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PT{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const NT=1e5,js=30,TT=.8;var e3,yh,qs,a1,o1,sf,Fu,l1,u1,af,Ag,Sg,wh,Eg,c1,kg,of,h1,d1,lf,uf,f1,bh,Cg,sc,D4,j4,lb,Aa,c2,ub,B4,z4;const zr=class zr{constructor({textContentSource:e,container:t,viewport:n}){B(this,sc);B(this,yh,Promise.withResolvers());B(this,qs,null);B(this,a1,!1);B(this,o1,!!((e3=globalThis.FontInspector)!=null&&e3.enabled));B(this,sf,null);B(this,Fu,null);B(this,l1,0);B(this,u1,0);B(this,af,null);B(this,Ag,null);B(this,Sg,0);B(this,wh,0);B(this,Eg,Object.create(null));B(this,c1,[]);B(this,kg,null);B(this,of,[]);B(this,h1,new WeakMap);B(this,d1,null);var c;if(e instanceof ReadableStream)R(this,kg,e);else if(typeof e=="object")R(this,kg,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');R(this,qs,R(this,Ag,t)),R(this,wh,n.scale*(globalThis.devicePixelRatio||1)),R(this,Sg,n.rotation),R(this,Fu,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:a,pageY:l}=n.rawDims;R(this,d1,[1,0,0,-1,-a,l+i]),R(this,u1,r),R(this,l1,i),U(c=zr,Aa,B4).call(c),Uf(t,n),f(this,yh).promise.finally(()=>{f(zr,Cg).delete(this),R(this,Fu,null),R(this,Eg,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=vs.platform;return Xt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{f(this,af).read().then(({value:t,done:n})=>{if(n){f(this,yh).resolve();return}f(this,sf)??R(this,sf,t.lang),Object.assign(f(this,Eg),t.styles),U(this,sc,D4).call(this,t.items),e()},f(this,yh).reject)};return R(this,af,f(this,kg).getReader()),f(zr,Cg).add(this),e(),f(this,yh).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==f(this,Sg)&&(t==null||t(),R(this,Sg,r),Uf(f(this,Ag),{rotation:r})),n!==f(this,wh)){t==null||t(),R(this,wh,n);const a={div:null,properties:null,ctx:U(i=zr,Aa,c2).call(i,f(this,sf))};for(const l of f(this,of))a.properties=f(this,h1).get(l),a.div=l,U(this,sc,lb).call(this,a)}}cancel(){var t;const e=new Bh("TextLayer task cancelled.");(t=f(this,af))==null||t.cancel(e).catch(()=>{}),R(this,af,null),f(this,yh).reject(e)}get textDivs(){return f(this,of)}get textContentItemsStr(){return f(this,c1)}static cleanup(){if(!(f(this,Cg).size>0)){f(this,lf).clear();for(const{canvas:e}of f(this,uf).values())e.remove();f(this,uf).clear()}}};yh=new WeakMap,qs=new WeakMap,a1=new WeakMap,o1=new WeakMap,sf=new WeakMap,Fu=new WeakMap,l1=new WeakMap,u1=new WeakMap,af=new WeakMap,Ag=new WeakMap,Sg=new WeakMap,wh=new WeakMap,Eg=new WeakMap,c1=new WeakMap,kg=new WeakMap,of=new WeakMap,h1=new WeakMap,d1=new WeakMap,lf=new WeakMap,uf=new WeakMap,f1=new WeakMap,bh=new WeakMap,Cg=new WeakMap,sc=new WeakSet,D4=function(e){var r,i;if(f(this,a1))return;(i=f(this,Fu)).ctx??(i.ctx=U(r=zr,Aa,c2).call(r,f(this,sf)));const t=f(this,of),n=f(this,c1);for(const a of e){if(t.length>NT){Wt("Ignoring additional textDivs for performance reasons."),R(this,a1,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=f(this,qs);R(this,qs,document.createElement("span")),f(this,qs).classList.add("markedContent"),a.id!==null&&f(this,qs).setAttribute("id",`${a.id}`),l.append(f(this,qs))}else a.type==="endMarkedContent"&&R(this,qs,f(this,qs).parentNode);continue}n.push(a.str),U(this,sc,j4).call(this,a)}},j4=function(e){var S;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};f(this,of).push(t);const r=wt.transform(f(this,d1),e.transform);let i=Math.atan2(r[1],r[0]);const a=f(this,Eg)[e.fontName];a.vertical&&(i+=Math.PI/2);let l=f(this,o1)&&a.fontSubstitution||a.fontFamily;l=zr.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),h=c*U(S=zr,Aa,z4).call(S,l,f(this,sf));let d,m;i===0?(d=r[4],m=r[5]-h):(d=r[4]+h*Math.sin(i),m=r[5]-h*Math.cos(i));const y="calc(var(--scale-factor)*",v=t.style;f(this,qs)===f(this,Ag)?(v.left=`${(100*d/f(this,u1)).toFixed(2)}%`,v.top=`${(100*m/f(this,l1)).toFixed(2)}%`):(v.left=`${y}${d.toFixed(2)}px)`,v.top=`${y}${m.toFixed(2)}px)`),v.fontSize=`${y}${(f(zr,bh)*c).toFixed(2)}px)`,v.fontFamily=l,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,f(this,o1)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);C!==k&&Math.max(C,k)/Math.min(C,k)>1.5&&(x=!0)}if(x&&(n.canvasWidth=a.vertical?e.height:e.width),f(this,h1).set(t,n),f(this,Fu).div=t,f(this,Fu).properties=n,U(this,sc,lb).call(this,f(this,Fu)),n.hasText&&f(this,qs).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),f(this,qs).append(C)}},lb=function(e){var l;const{div:t,properties:n,ctx:r}=e,{style:i}=t;let a="";if(f(zr,bh)>1&&(a=`scale(${1/f(zr,bh)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=i,{canvasWidth:h,fontSize:d}=n;U(l=zr,Aa,ub).call(l,r,d*f(this,wh),c);const{width:m}=r.measureText(t.textContent);m>0&&(a=`scaleX(${h*f(this,wh)/m}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Aa=new WeakSet,c2=function(e=null){let t=f(this,uf).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,uf).set(e,t),f(this,f1).set(t,{size:0,family:""})}return t},ub=function(e,t,n){const r=f(this,f1).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},B4=function(){if(f(this,bh)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),R(this,bh,e.getBoundingClientRect().height),e.remove()},z4=function(e,t){const n=f(this,lf).get(e);if(n)return n;const r=U(this,Aa,c2).call(this,t);r.canvas.width=r.canvas.height=js,U(this,Aa,ub).call(this,r,js,e);const i=r.measureText("");let a=i.fontBoundingBoxAscent,l=Math.abs(i.fontBoundingBoxDescent);if(a){const d=a/(a+l);return f(this,lf).set(e,d),r.canvas.width=r.canvas.height=0,d}r.strokeStyle="red",r.clearRect(0,0,js,js),r.strokeText("g",0,0);let c=r.getImageData(0,0,js,js).data;l=0;for(let d=c.length-1-3;d>=0;d-=4)if(c[d]>0){l=Math.ceil(d/4/js);break}r.clearRect(0,0,js,js),r.strokeText("A",0,js),c=r.getImageData(0,0,js,js).data,a=0;for(let d=0,m=c.length;d<m;d+=4)if(c[d]>0){a=js-Math.floor(d/4/js);break}r.canvas.width=r.canvas.height=0;const h=a?a/(a+l):TT;return f(this,lf).set(e,h),h},B(zr,Aa),B(zr,lf,new Map),B(zr,uf,new Map),B(zr,f1,new WeakMap),B(zr,bh,null),B(zr,Cg,new Set);let x0=zr;class A0{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let a=null;const l=i.name;if(l==="#text")a=i.value;else if(A0.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const h of i.children)r(h)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const RT=65536,IT=100,OT=5e3,MT=Xi?K6:G6,FT=Xi?X6:E4,DT=Xi?Y6:V6,jT=Xi?J6:P4;function BT(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new cb,{docId:t}=e,n=s.url?zT(s.url):null,r=s.data?UT(s.data):null,i=s.httpHeaders||null,a=s.withCredentials===!0,l=s.password??null,c=s.range instanceof U4?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:RT;let d=s.worker instanceof Jp?s.worker:null;const m=s.verbosity,y=typeof s.docBaseUrl=="string"&&!xy(s.docBaseUrl)?s.docBaseUrl:null,v=typeof s.cMapUrl=="string"?s.cMapUrl:null,x=s.cMapPacked!==!1,S=s.CMapReaderFactory||FT,C=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,k=s.StandardFontDataFactory||jT,T=s.stopAtErrors!==!0,M=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,H=s.isEvalSupported!==!1,X=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Xi,he=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Xi&&(vs.platform.isFirefox||!globalThis.chrome),ne=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,Z=typeof s.disableFontFace=="boolean"?s.disableFontFace:Xi,fe=s.fontExtraProperties===!0,Se=s.enableXfa===!0,q=s.ownerDocument||globalThis.document,V=s.disableRange===!0,ue=s.disableStream===!0,re=s.disableAutoFetch===!0,Ee=s.pdfBug===!0,ce=s.CanvasFactory||MT,me=s.FilterFactory||DT,ae=s.enableHWA===!0,te=c?c.length:s.length??NaN,J=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Xi&&!Z,G=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:S===E4&&k===P4&&v&&C&&Gm(v,document.baseURI)&&Gm(C,document.baseURI),N=null;S6(m);const j={canvasFactory:new ce({ownerDocument:q,enableHWA:ae}),filterFactory:new me({docId:t,ownerDocument:q}),cMapReaderFactory:G?null:new S({baseUrl:v,isCompressed:x}),standardFontDataFactory:G?null:new k({baseUrl:C})};if(!d){const oe={verbosity:m,port:Qu.workerPort};d=oe.port?Jp.fromPort(oe):new Jp(oe),e._worker=d}const Y={docId:t,apiVersion:"4.10.38",data:r,password:l,disableAutoFetch:re,rangeChunkSize:h,length:te,docBaseUrl:y,enableXfa:Se,evaluatorOptions:{maxImageSize:M,disableFontFace:Z,ignoreErrors:T,isEvalSupported:H,isOffscreenCanvasSupported:X,isImageDecoderSupported:he,canvasMaxAreaInBytes:ne,fontExtraProperties:fe,useSystemFonts:J,cMapUrl:G?v:null,standardFontDataUrl:G?C:null}},se={disableFontFace:Z,fontExtraProperties:fe,ownerDocument:q,pdfBug:Ee,styleElement:N,loadingParams:{disableAutoFetch:re,enableXfa:Se}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const oe=d.messageHandler.sendWithPromise("GetDocRequest",Y,r?[r.buffer]:null);let de;if(c)de=new pT(c,{disableRange:V,disableStream:ue});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let be;if(Xi)if(Gm(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");be=AS}else be=CT;else be=Gm(n)?AS:xT;de=new be({url:n,length:te,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:V,disableStream:ue})}return oe.then(be=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Ae=new Xm(t,be,d.port),qe=new WT(Ae,e,de,se,j);e._transport=qe,Ae.send("Ready",null)})}).catch(e._capability.reject),e}function zT(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(Xi&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function UT(s){if(Xi&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return by(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function SS(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var ry;const iy=class iy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${hs(iy,ry)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};ry=new WeakMap,B(iy,ry,0);let cb=iy;class U4{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){On("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class qT{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var _h,Du,Ka,Up,h2;class HT{constructor(e,t,n,r=!1){B(this,Ka);B(this,_h,null);B(this,Du,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new cS:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new q4,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new nv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=ih.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:m=!1}){var H,X;(H=this._stats)==null||H.time("Overall");const y=this._transport.getRenderingIntent(n,r,d,m),{renderingIntent:v,cacheKey:x}=y;R(this,Du,!1),U(this,Ka,h2).call(this),l||(l=this._transport.getOptionalContentConfig(v));let S=this._intentStates.get(x);S||(S=Object.create(null),this._intentStates.set(x,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const C=!!(v&wa.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(X=this._stats)==null||X.time("Page Request"),this._pumpOperatorList(y));const k=he=>{var ne;S.renderTasks.delete(T),(this._maybeCleanupAfterRender||C)&&R(this,Du,!0),U(this,Ka,Up).call(this,!C),he?(T.capability.reject(he),this._abortOperatorList({intentState:S,reason:he instanceof Error?he:new Error(he)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(ne=globalThis.Stats)!=null&&ne.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new db({callback:k,params:{canvasContext:e,viewport:t,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:h});(S.renderTasks||(S.renderTasks=new Set)).add(T);const M=T.task;return Promise.all([S.displayReadyCapability.promise,l]).then(([he,ne])=>{var Z;if(this.destroyed){k();return}if((Z=this._stats)==null||Z.time("Rendering"),!(ne.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:he,optionalContentConfig:ne}),T.operatorListChanged()}).catch(k),M}getOperatorList({intent:e="display",annotationMode:t=ih.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var h;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,n,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>A0.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){a.read().then(function({value:c,done:h}){if(h){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},r)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),R(this,Du,!1),U(this,Ka,h2).call(this),Promise.all(e)}cleanup(e=!1){R(this,Du,!0);const t=U(this,Ka,Up).call(this,!1);return e&&t&&this._stats&&(this._stats=new cS),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&U(this,Ka,Up).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:a}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},a).getReader(),h=this._intentStates.get(t);h.streamReader=c;const d=()=>{c.read().then(({value:m,done:y})=>{if(y){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),d())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const y of h.renderTasks)y.operatorListChanged();U(this,Ka,Up).call(this,!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};d()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof __){let r=IT;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Bh(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}_h=new WeakMap,Du=new WeakMap,Ka=new WeakSet,Up=function(e=!1){if(U(this,Ka,h2).call(this),!f(this,Du)||this.destroyed)return!1;if(e)return R(this,_h,setTimeout(()=>{R(this,_h,null),U(this,Ka,Up).call(this,!1)},OT)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),R(this,Du,!1),!0},h2=function(){f(this,_h)&&(clearTimeout(f(this,_h)),R(this,_h,null))};var ju,sy;class $T{constructor(){B(this,ju,new Map);B(this,sy,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};f(this,sy).then(()=>{for(const[r]of f(this,ju))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){Wt("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}f(this,ju).set(t,r)}removeEventListener(e,t){const n=f(this,ju).get(t);n==null||n(),f(this,ju).delete(t)}terminate(){for(const[,e]of f(this,ju))e==null||e();f(this,ju).clear()}}ju=new WeakMap,sy=new WeakMap;var ay,cf,hf,Lg,d2,Pg,f2;const er=class er{constructor({name:e=null,port:t=null,verbosity:n=E6()}={}){B(this,Lg);var r;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=f(er,hf))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(f(er,hf)||R(er,hf,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Xm("main","worker",e),this._messageHandler.on("ready",function(){}),U(this,Lg,d2).call(this)}_initialize(){if(f(er,cf)||f(er,Pg,f2)){this._setupFakeWorker();return}let{workerSrc:e}=er;try{er._isSameOrigin(window.location.href,e)||(e=er._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Xm("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:i.signal}),n.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,U(this,Lg,d2).call(this)}),n.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{wy("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){f(er,cf)||(Wt("Setting up fake worker."),R(er,cf,!0)),er._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new $T;this._port=t;const n=`fake${hs(er,ay)._++}`,r=new Xm(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new Xm(n,n+"_worker",t),U(this,Lg,d2).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=f(er,hf))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=f(this,hf))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new er(e)}static get workerSrc(){if(Qu.workerSrc)return Qu.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Xt(this,"_setupFakeWorkerGlobal",(async()=>f(this,Pg,f2)?f(this,Pg,f2):(await import(this.workerSrc)).WorkerMessageHandler)())}};ay=new WeakMap,cf=new WeakMap,hf=new WeakMap,Lg=new WeakSet,d2=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Pg=new WeakSet,f2=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},B(er,Pg),B(er,ay,0),B(er,cf,!1),B(er,hf),Xi&&(R(er,cf,!0),Qu.workerSrc||(Qu.workerSrc="./pdf.worker.mjs")),er._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},er._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Jp=er;var Bu,Pl,Ng,Tg,zu,df,t0;class WT{constructor(e,t,n,r,i){B(this,df);B(this,Bu,new Map);B(this,Pl,new Map);B(this,Ng,new Map);B(this,Tg,new Map);B(this,zu,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new q4,this.fontLoader=new $6({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Xt(this,"annotationStorage",new E_)}getRenderingIntent(e,t=ih.ENABLE,n=null,r=!1,i=!1){let a=wa.DISPLAY,l=Zw;switch(e){case"any":a=wa.ANY;break;case"display":break;case"print":a=wa.PRINT;break;default:Wt(`getRenderingIntent - invalid intent: ${e}`)}const c=a&wa.PRINT&&n instanceof w4?n:this.annotationStorage;switch(t){case ih.DISABLE:a+=wa.ANNOTATIONS_DISABLE;break;case ih.ENABLE:break;case ih.ENABLE_FORMS:a+=wa.ANNOTATIONS_FORMS;break;case ih.ENABLE_STORAGE:a+=wa.ANNOTATIONS_STORAGE,l=c.serializable;break;default:Wt(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=wa.IS_EDITING),i&&(a+=wa.OPLIST);const{ids:h,hash:d}=c.modifiedIds,m=[a,l.hash,d];return{renderingIntent:a,cacheKey:m.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=f(this,zu))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of f(this,Pl).values())e.push(r._destroy());f(this,Pl).clear(),f(this,Ng).clear(),f(this,Tg).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),f(this,Bu).clear(),this.filterFactory.destroy(),x0.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Bh("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Rr(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){r.close();return}Rr(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:a}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=t.onProgress)==null||h.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(n,r)=>{Rr(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:a,done:l}){if(l){r.close();return}Rr(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{i.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new qT(n,this))}),e.on("DocException",n=>{t._capability.reject(Bs(n))}),e.on("PasswordRequest",n=>{R(this,zu,Promise.withResolvers());try{if(!t.onPassword)throw Bs(n);const r=i=>{i instanceof Error?f(this,zu).reject(i):f(this,zu).resolve({password:i})};t.onPassword(r,n.code)}catch(r){f(this,zu).reject(r)}return f(this,zu).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;f(this,Pl).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:h}=this._params;if("error"in i){const v=i.error;Wt(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const d=h&&((a=globalThis.FontInspector)!=null&&a.enabled)?(v,x)=>globalThis.FontInspector.fontAdded(v,x):null,m=new W6(i,{disableFontFace:l,fontExtraProperties:c,inspectFont:d});this.fontLoader.bind(m).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&m.data&&(m.data=null),this.commonObjs.resolve(n,m)});break;case"CopyLocalImage":const{imageRef:y}=i;Rr(y,"The imageRef must be defined.");for(const v of f(this,Pl).values())for(const[,x]of v.objs)if((x==null?void 0:x.ref)===y)return x.dataLen?(this.commonObjs.resolve(n,structuredClone(x)),x.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,a])=>{var c;if(this.destroyed)return;const l=f(this,Pl).get(r);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":l.objs.resolve(n,a),(a==null?void 0:a.dataLen)>b6&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Wt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=f(this,Ng).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&f(this,Tg).set(i.refStr,e);const a=new HT(t,i,this,this._params.pdfBug);return f(this,Pl).set(t,a),a});return f(this,Ng).set(t,r),r}getPageIndex(e){return SS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return U(this,df,t0).call(this,"GetFieldObjects")}hasJSActions(){return U(this,df,t0).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return U(this,df,t0).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return U(this,df,t0).call(this,"GetOptionalContentConfig").then(t=>new fT(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=f(this,Bu).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,a;return{info:r[0],metadata:r[1]?new hT(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return f(this,Bu).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of f(this,Pl).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),f(this,Bu).clear(),this.filterFactory.destroy(!0),x0.cleanup()}}cachedPageNumber(e){if(!SS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return f(this,Tg).get(t)??null}}Bu=new WeakMap,Pl=new WeakMap,Ng=new WeakMap,Tg=new WeakMap,zu=new WeakMap,df=new WeakSet,t0=function(e,t=null){const n=f(this,Bu).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return f(this,Bu).set(e,r),r};const zm=Symbol("INITIAL_DATA");var ca,p1,hb;class q4{constructor(){B(this,p1);B(this,ca,Object.create(null))}get(e,t=null){if(t){const r=U(this,p1,hb).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=f(this,ca)[e];if(!n||n.data===zm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=f(this,ca)[e];return!!t&&t.data!==zm}delete(e){const t=f(this,ca)[e];return!t||t.data===zm?!1:(delete f(this,ca)[e],!0)}resolve(e,t=null){const n=U(this,p1,hb).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in f(this,ca)){const{data:n}=f(this,ca)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}R(this,ca,Object.create(null))}*[Symbol.iterator](){for(const e in f(this,ca)){const{data:t}=f(this,ca)[e];t!==zm&&(yield[e,t])}}}ca=new WeakMap,p1=new WeakSet,hb=function(e){var t;return(t=f(this,ca))[e]||(t[e]={...Promise.withResolvers(),data:zm})};var xh;class GT{constructor(e){B(this,xh,null);R(this,xh,e),this.onContinue=null}get promise(){return f(this,xh).capability.promise}cancel(e=0){f(this,xh).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=f(this,xh).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=f(this,xh);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}xh=new WeakMap;var Ah,ff;const Id=class Id{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:m=!1,pageColors:y=null}){B(this,Ah,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new GT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(f(Id,ff).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(Id,ff).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:i,background:a}=this.params;this.gfx=new Xp(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),f(this,Ah)&&(window.cancelAnimationFrame(f(this,Ah)),R(this,Ah,null)),f(Id,ff).delete(this._canvas),this.callback(e||new __(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?R(this,Ah,window.requestAnimationFrame(()=>{R(this,Ah,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(Id,ff).delete(this._canvas),this.callback())))}};Ah=new WeakMap,ff=new WeakMap,B(Id,ff,new WeakSet);let db=Id;const VT="4.10.38",YT="f9bea397f";function ES(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Um(s){return Math.max(0,Math.min(255,255*s))}class kS{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Um(e),[e,e,e]}static G_HTML([e]){const t=ES(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Um)}static RGB_HTML(e){return`#${e.map(ES).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Um(1-Math.min(1,e+r)),Um(1-Math.min(1,n+r)),Um(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,a=1-n,l=Math.min(r,i,a);return["CMYK",r,i,a,l]}}class KT{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){On("Abstract method `_createSVG` called.")}}class C_ extends KT{_createSVG(e){return document.createElementNS(_u,e)}}class H4{static setupStorage(e,t,n,r,i){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,h]of Object.entries(a))if(h!=null)switch(c){case"class":h.length&&e.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,h)}l&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var m,y;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:n});const l=i!=="richText",c=e.div;if(c.append(a),e.viewport){const v=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=v}l&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);a.append(v),l&&A0.shouldBuildText(r.name)&&h.push(v)}return{textDivs:h}}const d=[[r,-1,a]];for(;d.length>0;){const[v,x,S]=d.at(-1);if(x+1===v.children.length){d.pop();continue}const C=v.children[++d.at(-1)[1]];if(C===null)continue;const{name:k}=C;if(k==="#text"){const M=document.createTextNode(C.value);h.push(M),S.append(M);continue}const T=(m=C==null?void 0:C.attributes)!=null&&m.xmlns?document.createElementNS(C.attributes.xmlns,k):document.createElement(k);if(S.append(T),C.attributes&&this.setAttributes({html:T,element:C,storage:t,intent:i,linkService:n}),((y=C.children)==null?void 0:y.length)>0)d.push([C,-1,T]);else if(C.value){const M=document.createTextNode(C.value);l&&A0.shouldBuildText(k)&&h.push(M),T.append(M)}}for(const v of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const iv=1e3,XT=9,Hf=new WeakSet;function jh(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class JT{static create(e){switch(e.data.annotationType){case Br.LINK:return new $4(e);case Br.TEXT:return new QT(e);case Br.WIDGET:switch(e.data.fieldType){case"Tx":return new ZT(e);case"Btn":return e.data.radioButton?new V4(e):e.data.checkBox?new tR(e):new nR(e);case"Ch":return new rR(e);case"Sig":return new eR(e)}return new Vf(e);case Br.POPUP:return new pb(e);case Br.FREETEXT:return new Q4(e);case Br.LINE:return new sR(e);case Br.SQUARE:return new aR(e);case Br.CIRCLE:return new oR(e);case Br.POLYLINE:return new Z4(e);case Br.CARET:return new uR(e);case Br.INK:return new L_(e);case Br.POLYGON:return new lR(e);case Br.HIGHLIGHT:return new eE(e);case Br.UNDERLINE:return new cR(e);case Br.SQUIGGLY:return new hR(e);case Br.STRIKEOUT:return new dR(e);case Br.STAMP:return new tE(e);case Br.FILEATTACHMENT:return new fR(e);default:return new Cr(e)}}}var pf,Rg,Ig,g1,fb;const M_=class M_{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){B(this,g1);B(this,pf,null);B(this,Rg,!1);B(this,Ig,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return M_._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;f(this,pf)||R(this,pf,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&U(this,g1,fb).call(this,t),(n=f(this,Ig))==null||n.popup.updateEdited(e)}resetEdited(){var e;f(this,pf)&&(U(this,g1,fb).call(this,f(this,pf).rect),(e=f(this,Ig))==null||e.popup.resetEdited(),R(this,pf,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof Vf||(i.tabIndex=iv);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof pb){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,i),i}const{width:l,height:c}=jh(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,C=t.borderStyle.verticalCornerRadius;if(S>0||C>0){const T=`calc(${S}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;a.borderRadius=T}else if(this instanceof V4){const T=`calc(${l}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=T}switch(t.borderStyle.style){case jm.SOLID:a.borderStyle="solid";break;case jm.DASHED:a.borderStyle="dashed";break;case jm.BEVELED:Wt("Unimplemented border style: beveled");break;case jm.INSET:Wt("Unimplemented border style: inset");break;case jm.UNDERLINE:a.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(R(this,Rg,!0),a.borderColor=wt.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):a.borderWidth=0}const h=wt.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:m,pageX:y,pageY:v}=r.rawDims;a.left=`${100*(h[0]-y)/d}%`,a.top=`${100*(h[1]-v)/m}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(a.width=`${100*l/d}%`,a.height=`${100*c/m}%`):this.setRotation(x,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:i,height:a}=jh(this.data.rect);let l,c;e%180===0?(l=100*i/n,c=100*a/r):(l=100*a/n,c=100*i/r),t.style.width=`${l}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],a=i[0],l=i.slice(1);r.target.style[n]=kS[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:kS[`${a}_rgb`](l)})};return Xt(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const a=n[r];if(a){const l={detail:{[r]:i},target:e};a(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,C,k,T]=e.subarray(2,6);if(r===S&&i===C&&t===k&&n===T)return}const{style:a}=this.container;let l;if(f(this,Rg)){const{borderColor:S,borderWidth:C}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const c=r-t,h=i-n,{svgFactory:d}=this,m=d.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const y=d.createElement("defs");m.append(y);const v=d.createElement("clipPath"),x=`clippath_${this.data.id}`;v.setAttribute("id",x),v.setAttribute("clipPathUnits","objectBoundingBox"),y.append(v);for(let S=2,C=e.length;S<C;S+=8){const k=e[S],T=e[S+1],M=e[S+2],H=e[S+3],X=d.createElement("rect"),he=(M-t)/c,ne=(i-T)/h,Z=(k-M)/c,fe=(T-H)/h;X.setAttribute("x",he),X.setAttribute("y",ne),X.setAttribute("width",Z),X.setAttribute("height",fe),v.append(X),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${he}" y="${ne}" width="${Z}" height="${fe}"/>`)}f(this,Rg)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(m),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:e}=this,t=R(this,Ig,new pb({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){On("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:a,exportValues:l}of r){if(i===-1||a===t)continue;const c=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Hf.has(h)){Wt(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:h})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,a=r.getAttribute("data-element-id");a!==t&&Hf.has(r)&&n.push({id:a,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};pf=new WeakMap,Rg=new WeakMap,Ig=new WeakMap,g1=new WeakSet,fb=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...e);const{width:h,height:d}=jh(e);t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,r===0?(t.width=`${100*h/i}%`,t.height=`${100*d/a}%`):this.setRotation(r)};let Cr=M_;var ba,kd,W4,G4;class $4 extends Cr{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});B(this,ba);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action),i=!0):t.attachment?(U(this,ba,W4).call(this,r,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(U(this,ba,G4).call(this,r,t.setOCGState),i=!0):t.dest?(this._bindLink(r,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&U(this,ba,kd).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),U(this,ba,kd).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=r.get(i);a&&(t[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),U(this,ba,kd).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),U(this,ba,kd).call(this),!this._fieldObjects){Wt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var m;r==null||r();const{fields:i,refs:a,include:l}=n,c=[];if(i.length!==0||a.length!==0){const y=new Set(a);for(const v of i){const x=this._fieldObjects[v]||[];for(const{id:S}of x)y.add(S)}for(const v of Object.values(this._fieldObjects))for(const x of v)y.has(x.id)===l&&c.push(x)}else for(const y of Object.values(this._fieldObjects))c.push(...y);const h=this.annotationStorage,d=[];for(const y of c){const{id:v}=y;switch(d.push(v),y.type){case"text":{const S=y.defaultValue||"";h.setValue(v,{value:S});break}case"checkbox":case"radiobutton":{const S=y.defaultValue===y.exportValues;h.setValue(v,{value:S});break}case"combobox":case"listbox":{const S=y.defaultValue||"";h.setValue(v,{value:S});break}default:continue}const x=document.querySelector(`[data-element-id="${v}"]`);if(x){if(!Hf.has(x)){Wt(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}ba=new WeakSet,kd=function(){this.container.setAttribute("data-internal-link","")},W4=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(n.content,n.filename,r),!1},U(this,ba,kd).call(this)},G4=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),U(this,ba,kd).call(this)};class QT extends Cr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Vf extends Cr{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return vs.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var l;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a)}}))})}_setEventListeners(e,t,n,r){var i,a,l;for(const[c,h]of n)(h==="Action"||(i=this.data.actions)!=null&&i[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,h,r),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":wt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||XT,i=e.style;let a;const l=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),d=Math.round(h/(Q5*r))||1,m=h/d;a=Math.min(r,c(m/Q5))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(r,c(h/Q5))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=wt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class ZT extends Vf{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",h??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Hf.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=iv,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(n,"value",y.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",y=>{const v=this.data.defaultFieldValue??"";n.value=d.userValue=v,d.formattedValue=null});let m=y=>{const{formattedValue:v}=d;v!=null&&(y.target.value=v),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var S;if(d.focused)return;const{target:x}=v;d.userValue&&(x.value=d.userValue),d.lastCommittedValue=x.value,d.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(S){d.userValue=S.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),S.target.value=d.userValue},formattedValue(S){const{formattedValue:C}=S.detail;d.formattedValue=C,C!=null&&S.target!==document.activeElement&&(S.target.value=C),e.setValue(t,{formattedValue:C})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var M;const{charLimit:C}=S.detail,{target:k}=S;if(C===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",C);let T=d.userValue;!T||T.length<=C||(T=T.slice(0,C),k.value=d.userValue=T,e.setValue(t,{value:T}),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),n.addEventListener("keydown",v=>{var C;d.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:S}=v.target;d.lastCommittedValue!==S&&(d.lastCommittedValue=S,d.userValue=S,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const y=m;m=null,n.addEventListener("blur",v=>{var S,C;if(!d.focused||!v.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(d.focused=!1);const{value:x}=v.target;d.userValue=x,d.lastCommittedValue!==x&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),y(v)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",v=>{var X;d.lastCommittedValue=null;const{data:x,target:S}=v,{value:C,selectionStart:k,selectionEnd:T}=S;let M=k,H=T;switch(v.inputType){case"deleteWordBackward":{const he=C.substring(0,k).match(/\w*[^\w]*$/);he&&(M-=he[0].length);break}case"deleteWordForward":{const he=C.substring(k).match(/^[^\w]*\w*/);he&&(H+=he[0].length);break}case"deleteContentBackward":k===T&&(M-=1);break;case"deleteContentForward":k===T&&(H+=1);break}v.preventDefault(),(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,change:x||"",willCommit:!1,selStart:M,selEnd:H}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class eR extends Vf{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class tR extends Vf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Hf.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=iv,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const h of this._getElementsByName(l,n)){const d=c&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class V4 extends Vf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Hf.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=iv,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const h of this._getElementsByName(l,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:h=>{const d=a===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const y=d&&m.id===n;m.domElement&&(m.domElement.checked=y),e.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class nR extends $4{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class rR extends Vf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Hf.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=iv;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const m=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===m});for(const d of this.data.options){const m=document.createElement("option");m.textContent=d.displayValue,m.value=d.exportValue,n.value.includes(d.exportValue)&&(m.setAttribute("selected",!0),i=!1),r.append(m)}let a=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),a=()=>{d.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const l=d=>{const m=d?"value":"textContent",{options:y,multiple:v}=r;return v?Array.prototype.filter.call(y,x=>x.selected).map(x=>x[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let c=l(!1);const h=d=>{const m=d.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const m={value(y){a==null||a();const v=y.detail.value,x=new Set(Array.isArray(v)?v:[v]);for(const S of r.options)S.selected=x.has(S.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(y){r.multiple=!0},remove(y){const v=r.options,x=y.detail.remove;v[x].selected=!1,r.remove(x),v.length>0&&Array.prototype.findIndex.call(v,C=>C.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:l(!0),items:h(y)}),c=l(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(y){const{index:v,displayValue:x,exportValue:S}=y.detail.insert,C=r.children[v],k=document.createElement("option");k.textContent=x,k.value=S,C?C.before(k):r.append(k),e.setValue(t,{value:l(!0),items:h(y)}),c=l(!1)},items(y){const{items:v}=y.detail;for(;r.length!==0;)r.remove(0);for(const x of v){const{displayValue:S,exportValue:C}=x,k=document.createElement("option");k.textContent=S,k.value=C,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:h(y)}),c=l(!1)},indices(y){const v=new Set(y.detail.indices);for(const x of y.target.options)x.selected=v.has(x.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,d)}),r.addEventListener("input",d=>{var v;const m=l(!0),y=l(!1);e.setValue(t,{value:m}),d.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class pb extends Cr{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Cr._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new iR({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${b_}${n}`).join(",")),this.container}}var Og,oy,ly,Mg,gf,pr,Uu,Fg,m1,v1,Dg,qu,To,Hu,y1,$u,w1,mf,vf,Tn,p2,gb,Y4,K4,X4,J4,g2,m2,mb;class iR{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:a,richText:l,parent:c,rect:h,parentRect:d,open:m}){B(this,Tn);B(this,Og,U(this,Tn,X4).bind(this));B(this,oy,U(this,Tn,mb).bind(this));B(this,ly,U(this,Tn,m2).bind(this));B(this,Mg,U(this,Tn,g2).bind(this));B(this,gf,null);B(this,pr,null);B(this,Uu,null);B(this,Fg,null);B(this,m1,null);B(this,v1,null);B(this,Dg,null);B(this,qu,!1);B(this,To,null);B(this,Hu,null);B(this,y1,null);B(this,$u,null);B(this,w1,null);B(this,mf,null);B(this,vf,!1);var y;R(this,pr,e),R(this,w1,r),R(this,Uu,a),R(this,$u,l),R(this,v1,c),R(this,gf,t),R(this,y1,h),R(this,Dg,d),R(this,m1,n),R(this,Fg,A_.toDateObject(i)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",f(this,Mg)),v.addEventListener("mouseenter",f(this,ly)),v.addEventListener("mouseleave",f(this,oy)),v.classList.add("popupTriggerArea");for(const v of n)(y=v.container)==null||y.addEventListener("keydown",f(this,Og));f(this,pr).hidden=!0,m&&U(this,Tn,g2).call(this)}render(){if(f(this,To))return;const e=R(this,To,document.createElement("div"));if(e.className="popup",f(this,gf)){const i=e.style.outlineColor=wt.makeHexColor(...f(this,gf));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=wt.makeHexColor(...f(this,gf).map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=f(this,w1),e.append(t),f(this,Fg)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:f(this,Fg).valueOf()})),t.append(i)}const r=f(this,Tn,p2);if(r)H4.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(f(this,Uu));e.append(i)}f(this,pr).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let i=0,a=r.length;i<a;++i){const l=r[i];n.append(document.createTextNode(l)),i<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;f(this,mf)||R(this,mf,{contentsObj:f(this,Uu),richText:f(this,$u)}),e&&R(this,Hu,null),t&&(R(this,$u,U(this,Tn,K4).call(this,t)),R(this,Uu,null)),(n=f(this,To))==null||n.remove(),R(this,To,null)}resetEdited(){var e;f(this,mf)&&({contentsObj:hs(this,Uu)._,richText:hs(this,$u)._}=f(this,mf),R(this,mf,null),(e=f(this,To))==null||e.remove(),R(this,To,null),R(this,Hu,null))}forceHide(){R(this,vf,this.isVisible),f(this,vf)&&(f(this,pr).hidden=!0)}maybeShow(){f(this,vf)&&(f(this,To)||U(this,Tn,m2).call(this),R(this,vf,!1),f(this,pr).hidden=!1)}get isVisible(){return f(this,pr).hidden===!1}}Og=new WeakMap,oy=new WeakMap,ly=new WeakMap,Mg=new WeakMap,gf=new WeakMap,pr=new WeakMap,Uu=new WeakMap,Fg=new WeakMap,m1=new WeakMap,v1=new WeakMap,Dg=new WeakMap,qu=new WeakMap,To=new WeakMap,Hu=new WeakMap,y1=new WeakMap,$u=new WeakMap,w1=new WeakMap,mf=new WeakMap,vf=new WeakMap,Tn=new WeakSet,p2=function(){const e=f(this,$u),t=f(this,Uu);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&f(this,$u).html||null},gb=function(){var e,t,n;return((n=(t=(e=f(this,Tn,p2))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},Y4=function(){var e,t,n;return((n=(t=(e=f(this,Tn,p2))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},K4=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:f(this,Tn,Y4),fontSize:f(this,Tn,gb)?`calc(${f(this,Tn,gb)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},X4=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&f(this,qu))&&U(this,Tn,g2).call(this)},J4=function(){if(f(this,Hu)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=f(this,v1);let a=!!f(this,Dg),l=a?f(this,Dg):f(this,y1);for(const x of f(this,m1))if(!l||wt.intersect(x.data.rect,l)!==null){l=x.data.rect,a=!0;break}const c=wt.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),d=a?l[2]-l[0]+5:0,m=c[0]+d,y=c[1];R(this,Hu,[100*(m-r)/t,100*(y-i)/n]);const{style:v}=f(this,pr);v.left=`${f(this,Hu)[0]}%`,v.top=`${f(this,Hu)[1]}%`},g2=function(){R(this,qu,!f(this,qu)),f(this,qu)?(U(this,Tn,m2).call(this),f(this,pr).addEventListener("click",f(this,Mg)),f(this,pr).addEventListener("keydown",f(this,Og))):(U(this,Tn,mb).call(this),f(this,pr).removeEventListener("click",f(this,Mg)),f(this,pr).removeEventListener("keydown",f(this,Og)))},m2=function(){f(this,To)||this.render(),this.isVisible?f(this,qu)&&f(this,pr).classList.add("focused"):(U(this,Tn,J4).call(this),f(this,pr).hidden=!1,f(this,pr).style.zIndex=parseInt(f(this,pr).style.zIndex)+1e3)},mb=function(){f(this,pr).classList.remove("focused"),!(f(this,qu)||!this.isVisible)&&(f(this,pr).hidden=!0,f(this,pr).style.zIndex=parseInt(f(this,pr).style.zIndex)-1e3)};class Q4 extends Cr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=$t.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var b1;class sR extends Cr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});B(this,b1,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:r}=jh(t.rect),i=this.svgFactory.create(n,r,!0),a=R(this,b1,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,b1)}addHighlightArea(){this.container.classList.add("highlightArea")}}b1=new WeakMap;var _1;class aR extends Cr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});B(this,_1,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:r}=jh(t.rect),i=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,l=R(this,_1,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",r-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,_1)}addHighlightArea(){this.container.classList.add("highlightArea")}}_1=new WeakMap;var x1;class oR extends Cr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});B(this,x1,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:r}=jh(t.rect),i=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,l=R(this,x1,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",r/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",r/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,x1)}addHighlightArea(){this.container.classList.add("highlightArea")}}x1=new WeakMap;var A1;class Z4 extends Cr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});B(this,A1,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i}}=this;if(!n)return this.container;const{width:a,height:l}=jh(t),c=this.svgFactory.create(a,l,!0);let h=[];for(let m=0,y=n.length;m<y;m+=2){const v=n[m]-t[0],x=t[3]-n[m+1];h.push(`${v},${x}`)}h=h.join(" ");const d=R(this,A1,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",h),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,A1)}addHighlightArea(){this.container.classList.add("highlightArea")}}A1=new WeakMap;class lR extends Z4{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class uR extends Cr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var S1,yf,E1,vb;class L_ extends Cr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});B(this,E1);B(this,S1,null);B(this,yf,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?$t.HIGHLIGHT:$t.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:l,width:c,height:h}=U(this,E1,vb).call(this,n,t),d=this.svgFactory.create(c,h,!0),m=R(this,S1,this.svgFactory.createElement("svg:g"));d.append(m),m.setAttribute("stroke-width",i.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",l);for(let y=0,v=r.length;y<v;y++){const x=this.svgFactory.createElement(this.svgElementName);f(this,yf).push(x),x.setAttribute("points",r[y].join(",")),m.append(x)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,a=f(this,S1);if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let l=0,c=f(this,yf).length;l<c;l++)f(this,yf)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:c,height:h}=U(this,E1,vb).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return f(this,yf)}addHighlightArea(){this.container.classList.add("highlightArea")}}S1=new WeakMap,yf=new WeakMap,E1=new WeakSet,vb=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class eE extends Cr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=$t.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class cR extends Cr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class hR extends Cr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class dR extends Cr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class tE extends Cr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=$t.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var k1,C1,yb;class fR extends Cr{constructor(t){var r;super(t,{isRenderable:!0});B(this,C1);B(this,k1,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",U(this,C1,yb).bind(this)),R(this,k1,r);const{isMac:i}=vs.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&U(this,C1,yb).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return f(this,k1)}addHighlightArea(){this.container.classList.add("highlightArea")}}k1=new WeakMap,C1=new WeakSet,yb=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var L1,wf,bf,P1,$f,nE,wb;class pR{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:l}){B(this,$f);B(this,L1,null);B(this,wf,null);B(this,bf,new Map);B(this,P1,null);this.div=e,R(this,L1,t),R(this,wf,n),R(this,P1,l||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return f(this,bf).size>0}async render(e){var a;const{annotations:t}=e,n=this.div;Uf(n,this.viewport);const r=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new C_,annotationStorage:e.annotationStorage||new E_,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===Br.POPUP;if(c){const m=r.get(l.id);if(!m)continue;i.elements=m}else{const{width:m,height:y}=jh(l.rect);if(m<=0||y<=0)continue}i.data=l;const h=JT.create(i);if(!h.isRenderable)continue;if(!c&&l.popupRef){const m=r.get(l.popupRef);m?m.push(h):r.set(l.popupRef,[h])}const d=h.render();l.hidden&&(d.style.visibility="hidden"),await U(this,$f,nE).call(this,d,l.id),h._isEditable&&(f(this,bf).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}U(this,$f,wb).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Uf(t,{rotation:e.rotation}),U(this,$f,wb).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(f(this,bf).values())}getEditableAnnotation(e){return f(this,bf).get(e)}}L1=new WeakMap,wf=new WeakMap,bf=new WeakMap,P1=new WeakMap,$f=new WeakSet,nE=async function(e,t){var a,l;const n=e.firstChild||e,r=n.id=`${b_}${t}`,i=await((a=f(this,P1))==null?void 0:a.getAriaAttributes(r));if(i)for(const[c,h]of i)n.setAttribute(c,h);this.div.append(e),(l=f(this,L1))==null||l.moveElementInDOM(this.div,e,n,!1)},wb=function(){if(!f(this,wf))return;const e=this.div;for(const[t,n]of f(this,wf)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:i}=r;i?i.nodeName==="CANVAS"?i.replaceWith(n):i.classList.contains("annotationContent")?i.after(n):i.before(n):r.append(n)}f(this,wf).clear()};const Yv=/\r\n?|\n/g;var Ro,ha,N1,_f,da,Ir,rE,iE,sE,v2,tc,y2,w2,aE,_b,oE;const jn=class jn extends lr{constructor(t){super({...t,name:"freeTextEditor"});B(this,Ir);B(this,Ro);B(this,ha,"");B(this,N1,`${this.id}-editor`);B(this,_f,null);B(this,da);R(this,Ro,t.color||jn._defaultColor||lr._defaultLineColor),R(this,da,t.fontSize||jn._defaultFontSize)}static get _keyboardManager(){const t=jn.prototype,n=a=>a.isEmpty(),r=qf.TRANSLATE_SMALL,i=qf.TRANSLATE_BIG;return Xt(this,"_keyboardManager",new rv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){lr.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case nn.FREETEXT_SIZE:jn._defaultFontSize=n;break;case nn.FREETEXT_COLOR:jn._defaultColor=n;break}}updateParams(t,n){switch(t){case nn.FREETEXT_SIZE:U(this,Ir,rE).call(this,n);break;case nn.FREETEXT_COLOR:U(this,Ir,iE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[nn.FREETEXT_SIZE,jn._defaultFontSize],[nn.FREETEXT_COLOR,jn._defaultColor||lr._defaultLineColor]]}get propertiesToUpdate(){return[[nn.FREETEXT_SIZE,f(this,da)],[nn.FREETEXT_COLOR,f(this,Ro)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-jn._internalPadding*t,-(jn._internalPadding+f(this,da))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar($t.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),R(this,_f,new AbortController);const t=this._uiManager.combinedSignal(f(this,_f));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,N1)),this._isDraggable=!0,(t=f(this,_f))==null||t.abort(),R(this,_f,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=f(this,ha),n=R(this,ha,U(this,Ir,sE).call(this).trimEnd());if(t===n)return;const r=i=>{if(R(this,ha,i),!i){this.remove();return}U(this,Ir,w2).call(this),this._uiManager.rebuild(this),U(this,Ir,v2).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),U(this,Ir,v2).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){jn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,N1)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${f(this,da)}px * var(--scale-factor))`,r.color=f(this,Ro),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),j2(this,this.div,["dblclick","keydown"]),this.width){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,m]=this.pageDimensions,[y,v]=this.pageTranslation;let x,S;switch(this.rotation){case 0:x=t+(l[0]-y)/d,S=n+this.height-(l[1]-v)/m;break;case 90:x=t+(l[0]-y)/d,S=n-(l[1]-v)/m,[c,h]=[h,-c];break;case 180:x=t-this.width+(l[0]-y)/d,S=n-(l[1]-v)/m,[c,h]=[-c,-h];break;case 270:x=t+(l[0]-y-this.height*m)/d,S=n+(l[1]-v-this.width*d)/m,[c,h]=[-h,c];break}this.setAt(x*i,S*a,c,h)}else this.setAt(t*i,n*a,this.width*i,this.height*a);U(this,Ir,w2).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var x,S,C;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=U(x=jn,tc,_b).call(x,n.getData("text")||"").replaceAll(Yv,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=l,d=[],m=[];if(c.nodeType===Node.TEXT_NODE){const k=c.parentElement;if(m.push(c.nodeValue.slice(h).replaceAll(Yv,"")),k!==this.editorDiv){let T=d;for(const M of this.editorDiv.childNodes){if(M===k){T=m;continue}T.push(U(S=jn,tc,y2).call(S,M))}}d.push(c.nodeValue.slice(0,h).replaceAll(Yv,""))}else if(c===this.editorDiv){let k=d,T=0;for(const M of this.editorDiv.childNodes)T++===h&&(k=m),k.push(U(C=jn,tc,y2).call(C,M))}R(this,ha,`${d.join(`
`)}${i}${m.join(`
`)}`),U(this,Ir,w2).call(this);const y=new Range;let v=d.reduce((k,T)=>k+T.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const T=k.nodeValue.length;if(v<=T){y.setStart(k,v),y.setEnd(k,v);break}v-=T}a.removeAllRanges(),a.addRange(y)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var l;let i=null;if(t instanceof Q4){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:m,id:y,popupRef:v},textContent:x,textPosition:S,parent:{page:{pageNumber:C}}}=t;if(!x||x.length===0)return null;i=t={annotationType:$t.FREETEXT,color:Array.from(h),fontSize:c,value:x.join(`
`),position:S,pageIndex:C-1,rect:d.slice(0),rotation:m,id:y,deleted:!1,popupRef:v}}const a=await super.deserialize(t,n,r);return R(a,da,t.fontSize),R(a,Ro,wt.makeHexColor(...t.color)),R(a,ha,U(l=jn,tc,_b).call(l,t.value)),a.annotationElementId=t.id||null,a._initialData=i,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=jn._internalPadding*this.parentScale,r=this.getRect(n,n),i=lr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,Ro)),a={annotationType:$t.FREETEXT,color:i,fontSize:f(this,da),value:U(this,Ir,aE).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!U(this,Ir,oE).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${f(this,da)}px * var(--scale-factor))`,r.color=f(this,Ro),n.replaceChildren();for(const a of f(this,ha).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const i=jn._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:f(this,ha)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ro=new WeakMap,ha=new WeakMap,N1=new WeakMap,_f=new WeakMap,da=new WeakMap,Ir=new WeakSet,rE=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-f(this,da))*this.parentScale),R(this,da,i),U(this,Ir,v2).call(this)},r=f(this,da);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},iE=function(t){const n=i=>{R(this,Ro,this.editorDiv.style.color=i)},r=f(this,Ro);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sE=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(U(r=jn,tc,y2).call(r,i)),n=i);return t.join(`
`)},v2=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},tc=new WeakSet,y2=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Yv,"")},w2=function(){if(this.editorDiv.replaceChildren(),!!f(this,ha))for(const t of f(this,ha).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},aE=function(){return f(this,ha).replaceAll(""," ")},_b=function(t){return t.replaceAll(" ","")},oE=function(t){const{value:n,fontSize:r,color:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==a},B(jn,tc),kt(jn,"_freeTextDefaultContent",""),kt(jn,"_internalPadding",0),kt(jn,"_defaultColor",null),kt(jn,"_defaultFontSize",10),kt(jn,"_type","freetext"),kt(jn,"_editorType",$t.FREETEXT);let bb=jn;class ht{toSVGPath(){On("Abstract method `toSVGPath` must be implemented.")}get box(){On("Abstract getter `box` must be implemented.")}serialize(e,t){On("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l]*r,a[l+1]=n+e[l+1]*i;return a}static _rescaleAndSwap(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l+1]*r,a[l+1]=n+e[l]*i;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+a)/6,(n+i)/2,(r+a)/2]}}kt(ht,"PRECISION",1e-4);var fa,Io,jg,Bg,Nl,Kt,xf,Af,T1,R1,zg,Ug,Sh,I1,uy,cy,Hr,n0,lE,uE,cE,hE,dE,fE;const ku=class ku{constructor({x:e,y:t},n,r,i,a,l=0){B(this,Hr);B(this,fa);B(this,Io,[]);B(this,jg);B(this,Bg);B(this,Nl,[]);B(this,Kt,new Float32Array(18));B(this,xf);B(this,Af);B(this,T1);B(this,R1);B(this,zg);B(this,Ug);B(this,Sh,[]);R(this,fa,n),R(this,Ug,i*r),R(this,Bg,a),f(this,Kt).set([NaN,NaN,NaN,NaN,e,t],6),R(this,jg,l),R(this,R1,f(ku,I1)*r),R(this,T1,f(ku,cy)*r),R(this,zg,r),f(this,Sh).push(e,t)}isEmpty(){return isNaN(f(this,Kt)[8])}add({x:e,y:t}){var fe;R(this,xf,e),R(this,Af,t);const[n,r,i,a]=f(this,fa);let[l,c,h,d]=f(this,Kt).subarray(8,12);const m=e-h,y=t-d,v=Math.hypot(m,y);if(v<f(this,T1))return!1;const x=v-f(this,R1),S=x/v,C=S*m,k=S*y;let T=l,M=c;l=h,c=d,h+=C,d+=k,(fe=f(this,Sh))==null||fe.push(e,t);const H=-k/x,X=C/x,he=H*f(this,Ug),ne=X*f(this,Ug);return f(this,Kt).set(f(this,Kt).subarray(2,8),0),f(this,Kt).set([h+he,d+ne],4),f(this,Kt).set(f(this,Kt).subarray(14,18),12),f(this,Kt).set([h-he,d-ne],16),isNaN(f(this,Kt)[6])?(f(this,Nl).length===0&&(f(this,Kt).set([l+he,c+ne],2),f(this,Nl).push(NaN,NaN,NaN,NaN,(l+he-n)/i,(c+ne-r)/a),f(this,Kt).set([l-he,c-ne],14),f(this,Io).push(NaN,NaN,NaN,NaN,(l-he-n)/i,(c-ne-r)/a)),f(this,Kt).set([T,M,l,c,h,d],6),!this.isEmpty()):(f(this,Kt).set([T,M,l,c,h,d],6),Math.abs(Math.atan2(M-c,T-l)-Math.atan2(k,C))<Math.PI/2?([l,c,h,d]=f(this,Kt).subarray(2,6),f(this,Nl).push(NaN,NaN,NaN,NaN,((l+h)/2-n)/i,((c+d)/2-r)/a),[l,c,T,M]=f(this,Kt).subarray(14,18),f(this,Io).push(NaN,NaN,NaN,NaN,((T+l)/2-n)/i,((M+c)/2-r)/a),!0):([T,M,l,c,h,d]=f(this,Kt).subarray(0,6),f(this,Nl).push(((T+5*l)/6-n)/i,((M+5*c)/6-r)/a,((5*l+h)/6-n)/i,((5*c+d)/6-r)/a,((l+h)/2-n)/i,((c+d)/2-r)/a),[h,d,l,c,T,M]=f(this,Kt).subarray(12,18),f(this,Io).push(((T+5*l)/6-n)/i,((M+5*c)/6-r)/a,((5*l+h)/6-n)/i,((5*c+d)/6-r)/a,((l+h)/2-n)/i,((c+d)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=f(this,Nl),t=f(this,Io);if(isNaN(f(this,Kt)[6])&&!this.isEmpty())return U(this,Hr,lE).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);U(this,Hr,cE).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return U(this,Hr,uE).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,a){return new pE(e,t,n,r,i,a)}getOutlines(){var m;const e=f(this,Nl),t=f(this,Io),n=f(this,Kt),[r,i,a,l]=f(this,fa),c=new Float32Array((((m=f(this,Sh))==null?void 0:m.length)??0)+2);for(let y=0,v=c.length-2;y<v;y+=2)c[y]=(f(this,Sh)[y]-r)/a,c[y+1]=(f(this,Sh)[y+1]-i)/l;if(c[c.length-2]=(f(this,xf)-r)/a,c[c.length-1]=(f(this,Af)-i)/l,isNaN(n[6])&&!this.isEmpty())return U(this,Hr,hE).call(this,c);const h=new Float32Array(f(this,Nl).length+24+f(this,Io).length);let d=e.length;for(let y=0;y<d;y+=2){if(isNaN(e[y])){h[y]=h[y+1]=NaN;continue}h[y]=e[y],h[y+1]=e[y+1]}d=U(this,Hr,fE).call(this,h,d);for(let y=t.length-6;y>=6;y-=6)for(let v=0;v<6;v+=2){if(isNaN(t[y+v])){h[d]=h[d+1]=NaN,d+=2;continue}h[d]=t[y+v],h[d+1]=t[y+v+1],d+=2}return U(this,Hr,dE).call(this,h,d),this.newFreeDrawOutline(h,c,f(this,fa),f(this,zg),f(this,jg),f(this,Bg))}};fa=new WeakMap,Io=new WeakMap,jg=new WeakMap,Bg=new WeakMap,Nl=new WeakMap,Kt=new WeakMap,xf=new WeakMap,Af=new WeakMap,T1=new WeakMap,R1=new WeakMap,zg=new WeakMap,Ug=new WeakMap,Sh=new WeakMap,I1=new WeakMap,uy=new WeakMap,cy=new WeakMap,Hr=new WeakSet,n0=function(){const e=f(this,Kt).subarray(4,6),t=f(this,Kt).subarray(16,18),[n,r,i,a]=f(this,fa);return[(f(this,xf)+(e[0]-t[0])/2-n)/i,(f(this,Af)+(e[1]-t[1])/2-r)/a,(f(this,xf)+(t[0]-e[0])/2-n)/i,(f(this,Af)+(t[1]-e[1])/2-r)/a]},lE=function(){const[e,t,n,r]=f(this,fa),[i,a,l,c]=U(this,Hr,n0).call(this);return`M${(f(this,Kt)[2]-e)/n} ${(f(this,Kt)[3]-t)/r} L${(f(this,Kt)[4]-e)/n} ${(f(this,Kt)[5]-t)/r} L${i} ${a} L${l} ${c} L${(f(this,Kt)[16]-e)/n} ${(f(this,Kt)[17]-t)/r} L${(f(this,Kt)[14]-e)/n} ${(f(this,Kt)[15]-t)/r} Z`},uE=function(e){const t=f(this,Io);e.push(`L${t[4]} ${t[5]} Z`)},cE=function(e){const[t,n,r,i]=f(this,fa),a=f(this,Kt).subarray(4,6),l=f(this,Kt).subarray(16,18),[c,h,d,m]=U(this,Hr,n0).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-n)/i} L${c} ${h} L${d} ${m} L${(l[0]-t)/r} ${(l[1]-n)/i}`)},hE=function(e){const t=f(this,Kt),[n,r,i,a]=f(this,fa),[l,c,h,d]=U(this,Hr,n0).call(this),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(m,e,f(this,fa),f(this,zg),f(this,jg),f(this,Bg))},dE=function(e,t){const n=f(this,Io);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},fE=function(e,t){const n=f(this,Kt).subarray(4,6),r=f(this,Kt).subarray(16,18),[i,a,l,c]=f(this,fa),[h,d,m,y]=U(this,Hr,n0).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/l,(n[1]-a)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-a)/c],t),t+=24},B(ku,I1,8),B(ku,uy,2),B(ku,cy,f(ku,I1)+f(ku,uy));let U2=ku;var qg,Sf,Wu,O1,pa,M1,xr,hy,gE;class pE extends ht{constructor(t,n,r,i,a,l){super();B(this,hy);B(this,qg);B(this,Sf,new Float32Array(4));B(this,Wu);B(this,O1);B(this,pa);B(this,M1);B(this,xr);R(this,xr,t),R(this,pa,n),R(this,qg,r),R(this,M1,i),R(this,Wu,a),R(this,O1,l),this.lastPoint=[NaN,NaN],U(this,hy,gE).call(this,l);const[c,h,d,m]=f(this,Sf);for(let y=0,v=t.length;y<v;y+=2)t[y]=(t[y]-c)/d,t[y+1]=(t[y+1]-h)/m;for(let y=0,v=n.length;y<v;y+=2)n[y]=(n[y]-c)/d,n[y+1]=(n[y+1]-h)/m}toSVGPath(){const t=[`M${f(this,xr)[4]} ${f(this,xr)[5]}`];for(let n=6,r=f(this,xr).length;n<r;n+=6){if(isNaN(f(this,xr)[n])){t.push(`L${f(this,xr)[n+4]} ${f(this,xr)[n+5]}`);continue}t.push(`C${f(this,xr)[n]} ${f(this,xr)[n+1]} ${f(this,xr)[n+2]} ${f(this,xr)[n+3]} ${f(this,xr)[n+4]} ${f(this,xr)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],a){const l=r-t,c=i-n;let h,d;switch(a){case 0:h=ht._rescale(f(this,xr),t,i,l,-c),d=ht._rescale(f(this,pa),t,i,l,-c);break;case 90:h=ht._rescaleAndSwap(f(this,xr),t,n,l,c),d=ht._rescaleAndSwap(f(this,pa),t,n,l,c);break;case 180:h=ht._rescale(f(this,xr),r,n,-l,c),d=ht._rescale(f(this,pa),r,n,-l,c);break;case 270:h=ht._rescaleAndSwap(f(this,xr),r,i,-l,-c),d=ht._rescaleAndSwap(f(this,pa),r,i,-l,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}get box(){return f(this,Sf)}newOutliner(t,n,r,i,a,l=0){return new U2(t,n,r,i,a,l)}getNewOutline(t,n){const[r,i,a,l]=f(this,Sf),[c,h,d,m]=f(this,qg),y=a*d,v=l*m,x=r*d+c,S=i*m+h,C=this.newOutliner({x:f(this,pa)[0]*y+x,y:f(this,pa)[1]*v+S},f(this,qg),f(this,M1),t,f(this,O1),n??f(this,Wu));for(let k=2;k<f(this,pa).length;k+=2)C.add({x:f(this,pa)[k]*y+x,y:f(this,pa)[k+1]*v+S});return C.getOutlines()}}qg=new WeakMap,Sf=new WeakMap,Wu=new WeakMap,O1=new WeakMap,pa=new WeakMap,M1=new WeakMap,xr=new WeakMap,hy=new WeakSet,gE=function(t){const n=f(this,xr);let r=n[4],i=n[5],a=r,l=i,c=r,h=i,d=r,m=i;const y=t?Math.max:Math.min;for(let x=6,S=n.length;x<S;x+=6){if(isNaN(n[x]))a=Math.min(a,n[x+4]),l=Math.min(l,n[x+5]),c=Math.max(c,n[x+4]),h=Math.max(h,n[x+5]),m<n[x+5]?(d=n[x+4],m=n[x+5]):m===n[x+5]&&(d=y(d,n[x+4]));else{const C=wt.bezierBoundingBox(r,i,...n.slice(x,x+6));a=Math.min(a,C[0]),l=Math.min(l,C[1]),c=Math.max(c,C[2]),h=Math.max(h,C[3]),m<C[3]?(d=C[2],m=C[3]):m===C[3]&&(d=y(d,C[2]))}r=n[x+4],i=n[x+5]}const v=f(this,Sf);v[0]=a-f(this,Wu),v[1]=l-f(this,Wu),v[2]=c-a+2*f(this,Wu),v[3]=h-l+2*f(this,Wu),this.lastPoint=[d,m]};var F1,D1,Eh,Oo,ws,mE,b2,vE,yE,Ab;class xb{constructor(e,t=0,n=0,r=!0){B(this,ws);B(this,F1);B(this,D1);B(this,Eh,[]);B(this,Oo,[]);let i=1/0,a=-1/0,l=1/0,c=-1/0;const h=10**-4;for(const{x:C,y:k,width:T,height:M}of e){const H=Math.floor((C-t)/h)*h,X=Math.ceil((C+T+t)/h)*h,he=Math.floor((k-t)/h)*h,ne=Math.ceil((k+M+t)/h)*h,Z=[H,he,ne,!0],fe=[X,he,ne,!1];f(this,Eh).push(Z,fe),i=Math.min(i,H),a=Math.max(a,X),l=Math.min(l,he),c=Math.max(c,ne)}const d=a-i+2*n,m=c-l+2*n,y=i-n,v=l-n,x=f(this,Eh).at(r?-1:-2),S=[x[0],x[2]];for(const C of f(this,Eh)){const[k,T,M]=C;C[0]=(k-y)/d,C[1]=(T-v)/m,C[2]=(M-v)/m}R(this,F1,new Float32Array([y,v,d,m])),R(this,D1,S)}getOutlines(){f(this,Eh).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of f(this,Eh))t[3]?(e.push(...U(this,ws,Ab).call(this,t)),U(this,ws,vE).call(this,t)):(U(this,ws,yE).call(this,t),e.push(...U(this,ws,Ab).call(this,t)));return U(this,ws,mE).call(this,e)}}F1=new WeakMap,D1=new WeakMap,Eh=new WeakMap,Oo=new WeakMap,ws=new WeakSet,mE=function(e){const t=[],n=new Set;for(const a of e){const[l,c,h]=a;t.push([l,c,a],[l,h,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const c=t[a][2],h=t[a+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const r=[];let i;for(;n.size>0;){const a=n.values().next().value;let[l,c,h,d,m]=a;n.delete(a);let y=l,v=c;for(i=[l,h],r.push(i);;){let x;if(n.has(d))x=d;else if(n.has(m))x=m;else break;n.delete(x),[l,c,h,d,m]=x,y!==l&&(i.push(y,v,l,v===c?c:h),y=l),v=v===c?h:c}i.push(y,v)}return new gR(r,f(this,F1),f(this,D1))},b2=function(e){const t=f(this,Oo);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:r=i-1}return r+1},vE=function([,e,t]){const n=U(this,ws,b2).call(this,e);f(this,Oo).splice(n,0,[e,t])},yE=function([,e,t]){const n=U(this,ws,b2).call(this,e);for(let r=n;r<f(this,Oo).length;r++){const[i,a]=f(this,Oo)[r];if(i!==e)break;if(i===e&&a===t){f(this,Oo).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,a]=f(this,Oo)[r];if(i!==e)break;if(i===e&&a===t){f(this,Oo).splice(r,1);return}}},Ab=function(e){const[t,n,r]=e,i=[[t,n,r]],a=U(this,ws,b2).call(this,r);for(let l=0;l<a;l++){const[c,h]=f(this,Oo)[l];for(let d=0,m=i.length;d<m;d++){const[,y,v]=i[d];if(!(h<=y||v<=c)){if(y>=c){if(v>h)i[d][1]=h;else{if(m===1)return[];i.splice(d,1),d--,m--}continue}i[d][2]=c,v>h&&i.push([t,h,v])}}}return i};var j1,Hg;class gR extends ht{constructor(t,n,r){super();B(this,j1);B(this,Hg);R(this,Hg,t),R(this,j1,n),this.lastPoint=r}toSVGPath(){const t=[];for(const n of f(this,Hg)){let[r,i]=n;t.push(`M${r} ${i}`);for(let a=2;a<n.length;a+=2){const l=n[a],c=n[a+1];l===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],a){const l=[],c=r-t,h=i-n;for(const d of f(this,Hg)){const m=new Array(d.length);for(let y=0;y<d.length;y+=2)m[y]=t+d[y]*c,m[y+1]=i-d[y+1]*h;l.push(m)}return l}get box(){return f(this,j1)}get classNamesForOutlining(){return["highlightOutline"]}}j1=new WeakMap,Hg=new WeakMap;class Sb extends U2{newFreeDrawOutline(e,t,n,r,i,a){return new mR(e,t,n,r,i,a)}}class mR extends pE{newOutliner(e,t,n,r,i,a=0){return new Sb(e,t,n,r,i,a)}}var Mo,Ef,$g,qr,B1,Wg,z1,U1,kh,Fo,Gg,q1,Nn,Eb,kb,Cb,Cd,wE,th;const zs=class zs{constructor({editor:e=null,uiManager:t=null}){B(this,Nn);B(this,Mo,null);B(this,Ef,null);B(this,$g);B(this,qr,null);B(this,B1,!1);B(this,Wg,!1);B(this,z1,null);B(this,U1);B(this,kh,null);B(this,Fo,null);B(this,Gg);var n;e?(R(this,Wg,!1),R(this,Gg,nn.HIGHLIGHT_COLOR),R(this,z1,e)):(R(this,Wg,!0),R(this,Gg,nn.HIGHLIGHT_DEFAULT_COLOR)),R(this,Fo,(e==null?void 0:e._uiManager)||t),R(this,U1,f(this,Fo)._eventBus),R(this,$g,(e==null?void 0:e.color)||((n=f(this,Fo))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),f(zs,q1)||R(zs,q1,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Xt(this,"_keyboardManager",new rv([[["Escape","mac+Escape"],zs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],zs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],zs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],zs.prototype._moveToPrevious],[["Home","mac+Home"],zs.prototype._moveToBeginning],[["End","mac+End"],zs.prototype._moveToEnd]]))}renderButton(){const e=R(this,Mo,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=f(this,Fo)._signal;e.addEventListener("click",U(this,Nn,Cd).bind(this),{signal:t}),e.addEventListener("keydown",U(this,Nn,Cb).bind(this),{signal:t});const n=R(this,Ef,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=f(this,$g),e.append(n),e}renderMainDropdown(){const e=R(this,qr,U(this,Nn,Eb).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===f(this,Mo)){U(this,Nn,Cd).call(this,e);return}const t=e.target.getAttribute("data-color");t&&U(this,Nn,kb).call(this,t,e)}_moveToNext(e){var t,n;if(!f(this,Nn,th)){U(this,Nn,Cd).call(this,e);return}if(e.target===f(this,Mo)){(t=f(this,qr).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=f(this,qr))==null?void 0:t.firstChild)||e.target===f(this,Mo)){f(this,Nn,th)&&this._hideDropdownFromKeyboard();return}f(this,Nn,th)||U(this,Nn,Cd).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!f(this,Nn,th)){U(this,Nn,Cd).call(this,e);return}(t=f(this,qr).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!f(this,Nn,th)){U(this,Nn,Cd).call(this,e);return}(t=f(this,qr).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=f(this,qr))==null||e.classList.add("hidden"),(t=f(this,kh))==null||t.abort(),R(this,kh,null)}_hideDropdownFromKeyboard(){var e;if(!f(this,Wg)){if(!f(this,Nn,th)){(e=f(this,z1))==null||e.unselect();return}this.hideDropdown(),f(this,Mo).focus({preventScroll:!0,focusVisible:f(this,B1)})}}updateColor(e){if(f(this,Ef)&&(f(this,Ef).style.backgroundColor=e),!f(this,qr))return;const t=f(this,Fo).highlightColors.values();for(const n of f(this,qr).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=f(this,Mo))==null||e.remove(),R(this,Mo,null),R(this,Ef,null),(t=f(this,qr))==null||t.remove(),R(this,qr,null)}};Mo=new WeakMap,Ef=new WeakMap,$g=new WeakMap,qr=new WeakMap,B1=new WeakMap,Wg=new WeakMap,z1=new WeakMap,U1=new WeakMap,kh=new WeakMap,Fo=new WeakMap,Gg=new WeakMap,q1=new WeakMap,Nn=new WeakSet,Eb=function(){const e=document.createElement("div"),t=f(this,Fo)._signal;e.addEventListener("contextmenu",Uo,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of f(this,Fo).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",f(zs,q1)[n]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=r,i.setAttribute("aria-selected",r===f(this,$g)),i.addEventListener("click",U(this,Nn,kb).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",U(this,Nn,Cb).bind(this),{signal:t}),e},kb=function(e,t){t.stopPropagation(),f(this,U1).dispatch("switchannotationeditorparams",{source:this,type:f(this,Gg),value:e})},Cb=function(e){zs._keyboardManager.exec(this,e)},Cd=function(e){if(f(this,Nn,th)){this.hideDropdown();return}if(R(this,B1,e.detail===0),f(this,kh)||(R(this,kh,new AbortController),window.addEventListener("pointerdown",U(this,Nn,wE).bind(this),{signal:f(this,Fo).combinedSignal(f(this,kh))})),f(this,qr)){f(this,qr).classList.remove("hidden");return}const t=R(this,qr,U(this,Nn,Eb).call(this));f(this,Mo).append(t)},wE=function(e){var t;(t=f(this,qr))!=null&&t.contains(e.target)||this.hideDropdown()},th=function(){return f(this,qr)&&!f(this,qr).classList.contains("hidden")},B(zs,q1,null);let q2=zs;var Vg,H1,Gu,kf,Yg,Hs,$1,W1,Cf,Wa,ga,bi,Kg,Vu,Vi,Xg,Ga,G1,qt,Lb,_2,bE,_E,xE,Pb,Ld,Xa,qp,AE,x2,r0,SE,EE,kE,CE,LE;const bn=class bn extends lr{constructor(t){super({...t,name:"highlightEditor"});B(this,qt);B(this,Vg,null);B(this,H1,0);B(this,Gu);B(this,kf,null);B(this,Yg,null);B(this,Hs,null);B(this,$1,null);B(this,W1,0);B(this,Cf,null);B(this,Wa,null);B(this,ga,null);B(this,bi,!1);B(this,Kg,null);B(this,Vu);B(this,Vi,null);B(this,Xg,"");B(this,Ga);B(this,G1,"");this.color=t.color||bn._defaultColor,R(this,Ga,t.thickness||bn._defaultThickness),R(this,Vu,t.opacity||bn._defaultOpacity),R(this,Gu,t.boxes||null),R(this,G1,t.methodOfCreation||""),R(this,Xg,t.text||""),this._isDraggable=!1,t.highlightId>-1?(R(this,bi,!0),U(this,qt,_2).call(this,t),U(this,qt,Ld).call(this)):f(this,Gu)&&(R(this,Vg,t.anchorNode),R(this,H1,t.anchorOffset),R(this,$1,t.focusNode),R(this,W1,t.focusOffset),U(this,qt,Lb).call(this),U(this,qt,Ld).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=bn.prototype;return Xt(this,"_keyboardManager",new rv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,bi)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:f(this,Ga),methodOfCreation:f(this,G1)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;lr.initialize(t,n),bn._defaultColor||(bn._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case nn.HIGHLIGHT_DEFAULT_COLOR:bn._defaultColor=n;break;case nn.HIGHLIGHT_THICKNESS:bn._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return f(this,Kg)}updateParams(t,n){switch(t){case nn.HIGHLIGHT_COLOR:U(this,qt,bE).call(this,n);break;case nn.HIGHLIGHT_THICKNESS:U(this,qt,_E).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[nn.HIGHLIGHT_DEFAULT_COLOR,bn._defaultColor],[nn.HIGHLIGHT_THICKNESS,bn._defaultThickness]]}get propertiesToUpdate(){return[[nn.HIGHLIGHT_COLOR,this.color||bn._defaultColor],[nn.HIGHLIGHT_THICKNESS,f(this,Ga)||bn._defaultThickness],[nn.HIGHLIGHT_FREE,f(this,bi)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(R(this,Yg,new q2({editor:this})),t.addColorPicker(f(this,Yg))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(U(this,qt,r0).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,U(this,qt,r0).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){U(this,qt,Pb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(U(this,qt,Ld).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?U(this,qt,Pb).call(this):t&&(U(this,qt,Ld).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,a,l;const{drawLayer:n}=this.parent;let r;f(this,bi)?(t=(t-this.rotation+360)%360,r=U(i=bn,Xa,qp).call(i,f(this,Wa).box,t)):r=U(a=bn,Xa,qp).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(f(this,ga),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(f(this,Vi),{bbox:U(l=bn,Xa,qp).call(l,f(this,Hs).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();f(this,Xg)&&(t.setAttribute("aria-label",f(this,Xg)),t.setAttribute("role","mark")),f(this,bi)?t.classList.add("free"):this.div.addEventListener("keydown",U(this,qt,AE).bind(this),{signal:this._uiManager._signal});const n=R(this,Cf,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=f(this,kf);const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),j2(this,f(this,Cf),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(f(this,Vi),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(f(this,Vi),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:U(this,qt,x2).call(this,!0);break;case 1:case 3:U(this,qt,x2).call(this,!1);break}}select(){var t;super.select(),f(this,Vi)&&((t=this.parent)==null||t.drawLayer.updateProperties(f(this,Vi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),f(this,Vi)&&((t=this.parent)==null||t.drawLayer.updateProperties(f(this,Vi),{rootClass:{selected:!1}}),f(this,bi)||U(this,qt,x2).call(this,!1))}get _mustFixPosition(){return!f(this,bi)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(f(this,ga),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(f(this,Vi),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:a}){const{x:l,y:c,width:h,height:d}=r.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),v=x=>{m.abort(),U(this,Xa,CE).call(this,t,x)};window.addEventListener("blur",v,{signal:y}),window.addEventListener("pointerup",v,{signal:y}),window.addEventListener("pointerdown",_a,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Uo,{signal:y}),r.addEventListener("pointermove",U(this,Xa,kE).bind(this,t),{signal:y}),this._freeHighlight=new Sb({x:i,y:a},[l,c,h,d],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var S,C,k,T;let i=null;if(t instanceof eE){const{data:{quadPoints:M,rect:H,rotation:X,id:he,color:ne,opacity:Z,popupRef:fe},parent:{page:{pageNumber:Se}}}=t;i=t={annotationType:$t.HIGHLIGHT,color:Array.from(ne),opacity:Z,quadPoints:M,boxes:null,pageIndex:Se-1,rect:H.slice(0),rotation:X,id:he,deleted:!1,popupRef:fe}}else if(t instanceof L_){const{data:{inkLists:M,rect:H,rotation:X,id:he,color:ne,borderStyle:{rawWidth:Z},popupRef:fe},parent:{page:{pageNumber:Se}}}=t;i=t={annotationType:$t.HIGHLIGHT,color:Array.from(ne),thickness:Z,inkLists:M,boxes:null,pageIndex:Se-1,rect:H.slice(0),rotation:X,id:he,deleted:!1,popupRef:fe}}const{color:a,quadPoints:l,inkLists:c,opacity:h}=t,d=await super.deserialize(t,n,r);d.color=wt.makeHexColor(...a),R(d,Vu,h||1),c&&R(d,Ga,t.thickness),d.annotationElementId=t.id||null,d._initialData=i;const[m,y]=d.pageDimensions,[v,x]=d.pageTranslation;if(l){const M=R(d,Gu,[]);for(let H=0;H<l.length;H+=8)M.push({x:(l[H]-v)/m,y:1-(l[H+1]-x)/y,width:(l[H+2]-l[H])/m,height:(l[H+1]-l[H+5])/y});U(S=d,qt,Lb).call(S),U(C=d,qt,Ld).call(C),d.rotate(d.rotation)}else if(c){R(d,bi,!0);const M=c[0],H={x:M[0]-v,y:y-(M[1]-x)},X=new Sb(H,[0,0,m,y],1,f(d,Ga)/2,!0,.001);for(let Z=0,fe=M.length;Z<fe;Z+=2)H.x=M[Z]-v,H.y=y-(M[Z+1]-x),X.add(H);const{id:he,clipPathId:ne}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:X.toSVGPath()}},!0,!0);U(k=d,qt,_2).call(k,{highlightOutlines:X.getOutlines(),highlightId:he,clipPathId:ne}),U(T=d,qt,Ld).call(T)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=lr._colorManager.convert(this.color),i={annotationType:$t.HIGHLIGHT,color:r,opacity:f(this,Vu),thickness:f(this,Ga),quadPoints:U(this,qt,SE).call(this),outlines:U(this,qt,EE).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:U(this,qt,r0).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!U(this,qt,LE).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Vg=new WeakMap,H1=new WeakMap,Gu=new WeakMap,kf=new WeakMap,Yg=new WeakMap,Hs=new WeakMap,$1=new WeakMap,W1=new WeakMap,Cf=new WeakMap,Wa=new WeakMap,ga=new WeakMap,bi=new WeakMap,Kg=new WeakMap,Vu=new WeakMap,Vi=new WeakMap,Xg=new WeakMap,Ga=new WeakMap,G1=new WeakMap,qt=new WeakSet,Lb=function(){const t=new xb(f(this,Gu),.001);R(this,Wa,t.getOutlines()),[this.x,this.y,this.width,this.height]=f(this,Wa).box;const n=new xb(f(this,Gu),.0025,.001,this._uiManager.direction==="ltr");R(this,Hs,n.getOutlines());const{lastPoint:r}=f(this,Hs);R(this,Kg,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},_2=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var m,y;if(R(this,Wa,t),R(this,Hs,t.getNewOutline(f(this,Ga)/2+1.5,.0025)),n>=0)R(this,ga,n),R(this,kf,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),R(this,Vi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:f(this,Hs).box,path:{d:f(this,Hs).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(f(this,ga),{bbox:U(m=bn,Xa,qp).call(m,f(this,Wa).box,(v-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(f(this,Vi),{bbox:U(y=bn,Xa,qp).call(y,f(this,Hs).box,v),path:{d:f(this,Hs).toSVGPath()}})}const[a,l,c,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=h;break;case 90:{const[v,x]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*x/v,this.height=h*v/x;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[v,x]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*x/v,this.height=h*v/x;break}}const{lastPoint:d}=f(this,Hs);R(this,Kg,[(d[0]-a)/c,(d[1]-l)/h])},bE=function(t){const n=(a,l)=>{var c,h;this.color=a,R(this,Vu,l),(c=this.parent)==null||c.drawLayer.updateProperties(f(this,ga),{root:{fill:a,"fill-opacity":l}}),(h=f(this,Yg))==null||h.updateColor(a)},r=this.color,i=f(this,Vu);this.addCommands({cmd:n.bind(this,t,bn._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},_E=function(t){const n=f(this,Ga),r=i=>{R(this,Ga,i),U(this,qt,xE).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},xE=function(t){if(!f(this,bi))return;U(this,qt,_2).call(this,{highlightOutlines:f(this,Wa).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},Pb=function(){f(this,ga)===null||!this.parent||(this.parent.drawLayer.remove(f(this,ga)),R(this,ga,null),this.parent.drawLayer.remove(f(this,Vi)),R(this,Vi,null))},Ld=function(t=this.parent){f(this,ga)===null&&({id:hs(this,ga)._,clipPathId:hs(this,kf)._}=t.drawLayer.draw({bbox:f(this,Wa).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":f(this,Vu)},rootClass:{highlight:!0,free:f(this,bi)},path:{d:f(this,Wa).toSVGPath()}},!1,!0),R(this,Vi,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:f(this,bi)},bbox:f(this,Hs).box,path:{d:f(this,Hs).toSVGPath()}},f(this,bi))),f(this,Cf)&&(f(this,Cf).style.clipPath=f(this,kf)))},Xa=new WeakSet,qp=function([t,n,r,i],a){switch(a){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},AE=function(t){bn._keyboardManager.exec(this,t)},x2=function(t){if(!f(this,Vg))return;const n=window.getSelection();t?n.setPosition(f(this,Vg),f(this,H1)):n.setPosition(f(this,$1),f(this,W1))},r0=function(){return f(this,bi)?this.rotation:0},SE=function(){if(f(this,bi))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,a=f(this,Gu),l=new Float32Array(a.length*8);let c=0;for(const{x:h,y:d,width:m,height:y}of a){const v=h*t+r,x=(1-d)*n+i;l[c]=l[c+4]=v,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=v+m*t,l[c+5]=l[c+7]=x-y*n,c+=8}return l},EE=function(t){return f(this,Wa).serialize(t,U(this,qt,r0).call(this))},kE=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},CE=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},LE=function(t){const{color:n}=this._initialData;return t.color.some((r,i)=>r!==n[i])},B(bn,Xa),kt(bn,"_defaultColor",null),kt(bn,"_defaultOpacity",1),kt(bn,"_defaultThickness",12),kt(bn,"_type","highlight"),kt(bn,"_editorType",$t.HIGHLIGHT),kt(bn,"_freeHighlightId",-1),kt(bn,"_freeHighlight",null),kt(bn,"_freeHighlightClipId","");let H2=bn;var Lf;class vR{constructor(){B(this,Lf,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){f(this,Lf)[e]=t}toSVGProperties(){const e=f(this,Lf);return R(this,Lf,Object.create(null)),{root:e}}reset(){R(this,Lf,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){On("Not implemented")}}Lf=new WeakMap;var ma,Jg,si,Pf,Nf,Ch,Lh,Ph,Tf,dn,Tb,Rb,Ib,i0,PE,A2,s0,Hp;const dt=class dt extends lr{constructor(t){super(t);B(this,dn);B(this,ma,null);B(this,Jg);kt(this,"_drawId",null);R(this,Jg,t.mustBeCommitted||!1),t.drawOutlines&&(U(this,dn,Tb).call(this,t),U(this,dn,i0).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,a]of Object.entries(n))r.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){On("Not implemented")}static get typesMap(){On("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(f(dt,si).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,a=i[n],l=c=>{var d;i.updateProperty(n,c);const h=f(this,ma).updateProperty(n,c);h&&U(this,dn,s0).call(this,h),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(f(this,ma).getPathResizingSVGProperties(U(this,dn,A2).call(this)),{bbox:U(this,dn,Hp).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(f(this,ma).getPathResizedSVGProperties(U(this,dn,A2).call(this)),{bbox:U(this,dn,Hp).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:U(this,dn,Hp).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(f(this,ma).getPathTranslatedSVGProperties(U(this,dn,A2).call(this),this.parentDimensions),{bbox:U(this,dn,Hp).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,f(this,Jg)&&(R(this,Jg,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){U(this,dn,Ib).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(U(this,dn,i0).call(this),U(this,dn,s0).call(this,f(this,ma).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),U(this,dn,Ib).call(this)):t&&(this._uiManager.addShouldRescale(this),U(this,dn,i0).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties({bbox:U(this,dn,Hp).call(this)},f(this,ma).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&U(this,dn,s0).call(this,f(this,ma).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,r,i,a){On("Not implemented")}static startDrawing(t,n,r,i){var C;const{target:a,offsetX:l,offsetY:c,pointerId:h,pointerType:d}=i;if(f(dt,Lh)&&f(dt,Lh)!==d)return;const{viewport:{rotation:m}}=t,{width:y,height:v}=a.getBoundingClientRect(),x=R(dt,Pf,new AbortController),S=t.combinedSignal(x);if(f(dt,Ch)||R(dt,Ch,h),f(dt,Lh)??R(dt,Lh,d),window.addEventListener("pointerup",k=>{var T;f(dt,Ch)===k.pointerId?this._endDraw(k):(T=f(dt,Ph))==null||T.delete(k.pointerId)},{signal:S}),window.addEventListener("pointercancel",k=>{var T;f(dt,Ch)===k.pointerId?this._currentParent.endDrawingSession():(T=f(dt,Ph))==null||T.delete(k.pointerId)},{signal:S}),window.addEventListener("pointerdown",k=>{f(dt,Lh)===k.pointerType&&((f(dt,Ph)||R(dt,Ph,new Set)).add(k.pointerId),f(dt,si).isCancellable()&&(f(dt,si).removeLastElement(),f(dt,si).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",Uo,{signal:S}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),a.addEventListener("touchmove",k=>{k.timeStamp===f(dt,Tf)&&_a(k)},{signal:S}),t.toggleDrawing(),(C=n._editorUndoBar)==null||C.hide(),f(dt,si)){t.drawLayer.updateProperties(this._currentDrawId,f(dt,si).startNew(l,c,y,v,m));return}n.updateUIForDefaultProperties(this),R(dt,si,this.createDrawerInstance(l,c,y,v,m)),R(dt,Nf,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(f(dt,Nf).toSVGProperties(),f(dt,si).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(R(dt,Tf,-1),!f(dt,si))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(f(dt,Ch)===i){if(((a=f(dt,Ph))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,f(dt,si).add(n,r)),R(dt,Tf,t.timeStamp),_a(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,R(dt,si,null),R(dt,Nf,null),R(dt,Lh,null),R(dt,Tf,NaN)),f(dt,Pf)&&(f(dt,Pf).abort(),R(dt,Pf,null),R(dt,Ch,NaN),R(dt,Ph,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,f(dt,si).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=f(dt,si),i=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:nn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(nn.DRAW_STEP),!f(dt,si).isEmpty()){const{pageDimensions:[r,i],scale:a}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:f(dt,si).getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:f(dt,Nf),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,a,l){On("Not implemented")}static async deserialize(t,n,r){var m,y;const{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=n.viewport,h=this.deserializeDraw(l,c,i,a,this._INNER_MARGIN,t),d=await super.deserialize(t,n,r);return d.createDrawingOptions(t),U(m=d,dn,Tb).call(m,{drawOutlines:h}),U(y=d,dn,i0).call(y),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[n,r]=this.pageTranslation,[i,a]=this.pageDimensions;return f(this,ma).serialize([n,r,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ma=new WeakMap,Jg=new WeakMap,si=new WeakMap,Pf=new WeakMap,Nf=new WeakMap,Ch=new WeakMap,Lh=new WeakMap,Ph=new WeakMap,Tf=new WeakMap,dn=new WeakSet,Tb=function({drawOutlines:t,drawId:n,drawingOptions:r}){R(this,ma,t),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=U(this,dn,Rb).call(this,t,this.parent),U(this,dn,s0).call(this,t.box)},Rb=function(t,n){const{id:r}=n.drawLayer.draw(dt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},Ib=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},i0=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=U(this,dn,Rb).call(this,f(this,ma),t)}},PE=function([t,n,r,i]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[n,1-t,r*(l/a),i*(a/l)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(l/a),i*(a/l)];default:return[t,n,r,i]}},A2=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-n,t,r*(a/l),i*(l/a)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(a/l),i*(l/a)];default:return[t,n,r,i]}},s0=function(t){if([this.x,this.y,this.width,this.height]=U(this,dn,PE).call(this,t),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},Hp=function(){const{x:t,y:n,width:r,height:i,rotation:a,parentRotation:l,parentDimensions:[c,h]}=this;switch((a*4+l)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(c/h),i*(h/c),r*(c/h)];case 5:return[1-n,t,r*(c/h),i*(h/c)];case 6:return[1-t-i*(h/c),1-n,i*(h/c),r*(c/h)];case 7:return[n-r*(c/h),1-t-i*(h/c),r*(c/h),i*(h/c)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(h/c),n,i*(h/c),r*(c/h)];case 13:return[1-n-r*(c/h),t-i*(h/c),r*(c/h),i*(h/c)];case 14:return[1-t,1-n-r*(c/h),i*(h/c),r*(c/h)];case 15:return[n,1-t,r*(c/h),i*(h/c)];default:return[t,n,r,i]}},kt(dt,"_currentDrawId",-1),kt(dt,"_currentParent",null),B(dt,si,null),B(dt,Pf,null),B(dt,Nf,null),B(dt,Ch,NaN),B(dt,Lh,null),B(dt,Ph,null),B(dt,Tf,NaN),kt(dt,"_INNER_MARGIN",3);let Nb=dt;var Tl,ai,oi,Rf,Qg,ps,_i,Va,If,Of,Mf,Zg,S2;class yR{constructor(e,t,n,r,i,a){B(this,Zg);B(this,Tl,new Float64Array(6));B(this,ai);B(this,oi);B(this,Rf);B(this,Qg);B(this,ps);B(this,_i,"");B(this,Va,0);B(this,If,new $2);B(this,Of);B(this,Mf);R(this,Of,n),R(this,Mf,r),R(this,Rf,i),R(this,Qg,a),[e,t]=U(this,Zg,S2).call(this,e,t);const l=R(this,ai,[NaN,NaN,NaN,NaN,e,t]);R(this,ps,[e,t]),R(this,oi,[{line:l,points:f(this,ps)}]),f(this,Tl).set(l,0)}updateProperty(e,t){e==="stroke-width"&&R(this,Qg,t)}isEmpty(){return!f(this,oi)||f(this,oi).length===0}isCancellable(){return f(this,ps).length<=10}add(e,t){[e,t]=U(this,Zg,S2).call(this,e,t);const[n,r,i,a]=f(this,Tl).subarray(2,6),l=e-i,c=t-a;return Math.hypot(f(this,Of)*l,f(this,Mf)*c)<=2?null:(f(this,ps).push(e,t),isNaN(n)?(f(this,Tl).set([i,a,e,t],2),f(this,ai).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(f(this,Tl)[0])&&f(this,ai).splice(6,6),f(this,Tl).set([n,r,i,a,e,t],0),f(this,ai).push(...ht.createBezierPoints(n,r,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(f(this,ps).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){R(this,Of,n),R(this,Mf,r),R(this,Rf,i),[e,t]=U(this,Zg,S2).call(this,e,t);const a=R(this,ai,[NaN,NaN,NaN,NaN,e,t]);R(this,ps,[e,t]);const l=f(this,oi).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),f(this,oi).push({line:a,points:f(this,ps)}),f(this,Tl).set(a,0),R(this,Va,0),this.toSVGPath(),null}getLastElement(){return f(this,oi).at(-1)}setLastElement(e){return f(this,oi)?(f(this,oi).push(e),R(this,ai,e.line),R(this,ps,e.points),R(this,Va,0),{path:{d:this.toSVGPath()}}):f(this,If).setLastElement(e)}removeLastElement(){if(!f(this,oi))return f(this,If).removeLastElement();f(this,oi).pop(),R(this,_i,"");for(let e=0,t=f(this,oi).length;e<t;e++){const{line:n,points:r}=f(this,oi)[e];R(this,ai,n),R(this,ps,r),R(this,Va,0),this.toSVGPath()}return{path:{d:f(this,_i)}}}toSVGPath(){const e=ht.svgRound(f(this,ai)[4]),t=ht.svgRound(f(this,ai)[5]);if(f(this,ps).length===2)return R(this,_i,`${f(this,_i)} M ${e} ${t} Z`),f(this,_i);if(f(this,ps).length<=6){const r=f(this,_i).lastIndexOf("M");R(this,_i,`${f(this,_i).slice(0,r)} M ${e} ${t}`),R(this,Va,6)}if(f(this,ps).length===4){const r=ht.svgRound(f(this,ai)[10]),i=ht.svgRound(f(this,ai)[11]);return R(this,_i,`${f(this,_i)} L ${r} ${i}`),R(this,Va,12),f(this,_i)}const n=[];f(this,Va)===0&&(n.push(`M ${e} ${t}`),R(this,Va,6));for(let r=f(this,Va),i=f(this,ai).length;r<i;r+=6){const[a,l,c,h,d,m]=f(this,ai).slice(r,r+6).map(ht.svgRound);n.push(`C${a} ${l} ${c} ${h} ${d} ${m}`)}return R(this,_i,f(this,_i)+n.join(" ")),R(this,Va,f(this,ai).length),f(this,_i)}getOutlines(e,t,n,r){const i=f(this,oi).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),f(this,If).build(f(this,oi),e,t,n,f(this,Rf),f(this,Qg),r),R(this,Tl,null),R(this,ai,null),R(this,oi,null),R(this,_i,null),f(this,If)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Tl=new WeakMap,ai=new WeakMap,oi=new WeakMap,Rf=new WeakMap,Qg=new WeakMap,ps=new WeakMap,_i=new WeakMap,Va=new WeakMap,If=new WeakMap,Of=new WeakMap,Mf=new WeakMap,Zg=new WeakSet,S2=function(e,t){return ht._normalizePoint(e,t,f(this,Of),f(this,Mf),f(this,Rf))};var gs,V1,Y1,va,Rl,Il,em,tm,nm,Ai,Au,NE,TE,RE;const F_=class F_ extends ht{constructor(){super(...arguments);B(this,Ai);B(this,gs);B(this,V1,0);B(this,Y1);B(this,va);B(this,Rl);B(this,Il);B(this,em);B(this,tm);B(this,nm)}build(t,n,r,i,a,l,c){R(this,Rl,n),R(this,Il,r),R(this,em,i),R(this,tm,a),R(this,nm,l),R(this,Y1,c??0),R(this,va,t),U(this,Ai,TE).call(this)}setLastElement(t){return f(this,va).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return f(this,va).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of f(this,va)){if(t.push(`M${ht.svgRound(n[4])} ${ht.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${ht.svgRound(n[10])} ${ht.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[a,l,c,h,d,m]=n.subarray(r,r+6).map(ht.svgRound);t.push(`C${a} ${l} ${c} ${h} ${d} ${m}`)}}return t.join("")}serialize([t,n,r,i],a){const l=[],c=[],[h,d,m,y]=U(this,Ai,NE).call(this);let v,x,S,C,k,T,M,H,X;switch(f(this,tm)){case 0:X=ht._rescale,v=t,x=n+i,S=r,C=-i,k=t+h*r,T=n+(1-d-y)*i,M=t+(h+m)*r,H=n+(1-d)*i;break;case 90:X=ht._rescaleAndSwap,v=t,x=n,S=r,C=i,k=t+d*r,T=n+h*i,M=t+(d+y)*r,H=n+(h+m)*i;break;case 180:X=ht._rescale,v=t+r,x=n,S=-r,C=i,k=t+(1-h-m)*r,T=n+d*i,M=t+(1-h)*r,H=n+(d+y)*i;break;case 270:X=ht._rescaleAndSwap,v=t+r,x=n+i,S=-r,C=-i,k=t+(1-d-y)*r,T=n+(1-h-m)*i,M=t+(1-d)*r,H=n+(1-h)*i;break}for(const{line:he,points:ne}of f(this,va))l.push(X(he,v,x,S,C,a?new Array(he.length):null)),c.push(X(ne,v,x,S,C,a?new Array(ne.length):null));return{lines:l,points:c,rect:[k,T,M,H]}}static deserialize(t,n,r,i,a,{paths:{lines:l,points:c},rotation:h,thickness:d}){const m=[];let y,v,x,S,C;switch(h){case 0:C=ht._rescale,y=-t/r,v=n/i+1,x=1/r,S=-1/i;break;case 90:C=ht._rescaleAndSwap,y=-n/i,v=-t/r,x=1/i,S=1/r;break;case 180:C=ht._rescale,y=t/r+1,v=-n/i,x=-1/r,S=1/i;break;case 270:C=ht._rescaleAndSwap,y=n/i+1,v=t/r+1,x=-1/i,S=-1/r;break}if(!l){l=[];for(const T of c){const M=T.length;if(M===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(M===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const H=new Float32Array(3*(M-2));l.push(H);let[X,he,ne,Z]=T.subarray(0,4);H.set([NaN,NaN,NaN,NaN,X,he],0);for(let fe=4;fe<M;fe+=2){const Se=T[fe],q=T[fe+1];H.set(ht.createBezierPoints(X,he,ne,Z,Se,q),(fe-2)*3),[X,he,ne,Z]=[ne,Z,Se,q]}}}for(let T=0,M=l.length;T<M;T++)m.push({line:C(l[T].map(H=>H??NaN),y,v,x,S),points:C(c[T].map(H=>H??NaN),y,v,x,S)});const k=new F_;return k.build(m,r,i,1,h,d,a),k}get box(){return f(this,gs)}updateProperty(t,n){return t==="stroke-width"?U(this,Ai,RE).call(this,n):null}updateParentDimensions([t,n],r){const[i,a]=U(this,Ai,Au).call(this);R(this,Rl,t),R(this,Il,n),R(this,em,r);const[l,c]=U(this,Ai,Au).call(this),h=l-i,d=c-a,m=f(this,gs);return m[0]-=h,m[1]-=d,m[2]+=2*h,m[3]+=2*d,m}updateRotation(t){return R(this,V1,t),{path:{transform:this.rotationTransform}}}get viewBox(){return f(this,gs).map(ht.svgRound).join(" ")}get defaultProperties(){const[t,n]=f(this,gs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=f(this,gs);let r=0,i=0,a=0,l=0,c=0,h=0;switch(f(this,V1)){case 90:i=n/t,a=-t/n,c=t;break;case 180:r=-1,l=-1,c=t,h=n;break;case 270:i=-n/t,a=t/n,h=n;break;default:return""}return`matrix(${r} ${i} ${a} ${l} ${ht.svgRound(c)} ${ht.svgRound(h)})`}getPathResizingSVGProperties([t,n,r,i]){const[a,l]=U(this,Ai,Au).call(this),[c,h,d,m]=f(this,gs);if(Math.abs(d-a)<=ht.PRECISION||Math.abs(m-l)<=ht.PRECISION){const C=t+r/2-(c+d/2),k=n+i/2-(h+m/2);return{path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(n)}`,transform:`${this.rotationTransform} translate(${C} ${k})`}}}const y=(r-2*a)/(d-2*a),v=(i-2*l)/(m-2*l),x=d/r,S=m/i;return{path:{"transform-origin":`${ht.svgRound(c)} ${ht.svgRound(h)}`,transform:`${this.rotationTransform} scale(${x} ${S}) translate(${ht.svgRound(a)} ${ht.svgRound(l)}) scale(${y} ${v}) translate(${ht.svgRound(-a)} ${ht.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[a,l]=U(this,Ai,Au).call(this),c=f(this,gs),[h,d,m,y]=c;if(c[0]=t,c[1]=n,c[2]=r,c[3]=i,Math.abs(m-a)<=ht.PRECISION||Math.abs(y-l)<=ht.PRECISION){const k=t+r/2-(h+m/2),T=n+i/2-(d+y/2);for(const{line:M,points:H}of f(this,va))ht._translate(M,k,T,M),ht._translate(H,k,T,H);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(r-2*a)/(m-2*a),x=(i-2*l)/(y-2*l),S=-v*(h+a)+t+a,C=-x*(d+l)+n+l;if(v!==1||x!==1||S!==0||C!==0)for(const{line:k,points:T}of f(this,va))ht._rescale(k,S,C,v,x,k),ht._rescale(T,S,C,v,x,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,a]=r,l=f(this,gs),c=t-l[0],h=n-l[1];if(f(this,Rl)===i&&f(this,Il)===a)for(const{line:d,points:m}of f(this,va))ht._translate(d,c,h,d),ht._translate(m,c,h,m);else{const d=f(this,Rl)/i,m=f(this,Il)/a;R(this,Rl,i),R(this,Il,a);for(const{line:y,points:v}of f(this,va))ht._rescale(y,c,h,d,m,y),ht._rescale(v,c,h,d,m,v);l[2]*=d,l[3]*=m}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(n)}`}}}get defaultSVGProperties(){const t=f(this,gs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ht.svgRound(t[0])} ${ht.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};gs=new WeakMap,V1=new WeakMap,Y1=new WeakMap,va=new WeakMap,Rl=new WeakMap,Il=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,Ai=new WeakSet,Au=function(t=f(this,nm)){const n=f(this,Y1)+t/2*f(this,em);return f(this,tm)%180===0?[n/f(this,Rl),n/f(this,Il)]:[n/f(this,Il),n/f(this,Rl)]},NE=function(){const[t,n,r,i]=f(this,gs),[a,l]=U(this,Ai,Au).call(this,0);return[t+a,n+l,r-2*a,i-2*l]},TE=function(){const t=R(this,gs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of f(this,va)){if(i.length<=12){for(let c=4,h=i.length;c<h;c+=6){const[d,m]=i.subarray(c,c+2);t[0]=Math.min(t[0],d),t[1]=Math.min(t[1],m),t[2]=Math.max(t[2],d),t[3]=Math.max(t[3],m)}continue}let a=i[4],l=i[5];for(let c=6,h=i.length;c<h;c+=6){const[d,m,y,v,x,S]=i.subarray(c,c+6);wt.bezierBoundingBox(a,l,d,m,y,v,x,S,t),a=x,l=S}}const[n,r]=U(this,Ai,Au).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-r)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+r)),t[2]-=t[0],t[3]-=t[1]},RE=function(t){const[n,r]=U(this,Ai,Au).call(this);R(this,nm,t);const[i,a]=U(this,Ai,Au).call(this),[l,c]=[i-n,a-r],h=f(this,gs);return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h};let $2=F_;var rm;const D_=class D_ extends vR{constructor(t){super();B(this,rm);R(this,rm,t),super.updateProperties({fill:"none",stroke:lr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=f(this,rm).realScale),super.updateSVGProperty(t,n)}clone(){const t=new D_(f(this,rm));return t.updateAll(this),t}};rm=new WeakMap;let Ob=D_;var dy,IE;const Yp=class Yp extends Nb{constructor(t){super({...t,name:"inkEditor"});B(this,dy);this._willKeepAspectRatio=!0}static initialize(t,n){lr.initialize(t,n),this._defaultDrawingOptions=new Ob(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Xt(this,"typesMap",new Map([[nn.INK_THICKNESS,"stroke-width"],[nn.INK_COLOR,"stroke"],[nn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,a){return new yR(t,n,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,a,l){return $2.deserialize(t,n,r,i,a,l)}static async deserialize(t,n,r){let i=null;if(t instanceof L_){const{data:{inkLists:l,rect:c,rotation:h,id:d,color:m,opacity:y,borderStyle:{rawWidth:v},popupRef:x},parent:{page:{pageNumber:S}}}=t;i=t={annotationType:$t.INK,color:Array.from(m),thickness:v,opacity:y,paths:{points:l},boxes:null,pageIndex:S-1,rect:c.slice(0),rotation:h,id:d,deleted:!1,popupRef:x}}const a=await super.deserialize(t,n,r);return a.annotationElementId=t.id||null,a._initialData=i,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=Yp.getDefaultDrawingOptions({stroke:wt.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:$t.INK,color:lr._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?h:this.annotationElementId&&!U(this,dy,IE).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(t){const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n}),null}};dy=new WeakSet,IE=function(t){const{color:n,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==n[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==a},kt(Yp,"_type","ink"),kt(Yp,"_editorType",$t.INK),kt(Yp,"_defaultDrawingOptions",null);let Mb=Yp;var or,xi,Nh,Yu,Th,im,Ol,Ml,ya,sm,mn,a0,o0,E2,Db,k2,jb,C2,OE;const p0=class p0 extends lr{constructor(t){super({...t,name:"stampEditor"});B(this,mn);B(this,or,null);B(this,xi,null);B(this,Nh,null);B(this,Yu,null);B(this,Th,null);B(this,im,"");B(this,Ol,null);B(this,Ml,null);B(this,ya,!1);B(this,sm,!1);R(this,Yu,t.bitmapUrl),R(this,Th,t.bitmapFile)}static initialize(t,n){lr.initialize(t,n)}static get supportedTypes(){return Xt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Xt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor($t.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:a,height:l,channels:i.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t;f(this,xi)&&(R(this,or,null),this._uiManager.imageManager.deleteId(f(this,xi)),(t=f(this,Ol))==null||t.remove(),R(this,Ol,null),f(this,Ml)&&(clearTimeout(f(this,Ml)),R(this,Ml,null))),super.remove()}rebuild(){if(!this.parent){f(this,xi)&&U(this,mn,E2).call(this);return}super.rebuild(),this.div!==null&&(f(this,xi)&&f(this,Ol)===null&&U(this,mn,E2).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(f(this,Nh)||f(this,or)||f(this,Yu)||f(this,Th)||f(this,xi))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),f(this,or)?U(this,mn,Db).call(this):U(this,mn,E2).call(this),this.width&&!this.annotationElementId){const[r,i]=this.parentDimensions;this.setAt(t*r,n*i,this.width*r,this.height*i)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;f(this,Ml)!==null&&clearTimeout(f(this,Ml)),R(this,Ml,setTimeout(()=>{R(this,Ml,null),U(this,mn,jb).call(this)},200))}copyCanvas(t,n,r=!1){var v;t||(t=224);const{width:i,height:a}=f(this,or),l=new Ow;let c=f(this,or),h=i,d=a,m=null;if(n){if(i>n||a>n){const Z=Math.min(n/i,n/a);h=Math.floor(i*Z),d=Math.floor(a*Z)}m=document.createElement("canvas");const x=m.width=Math.ceil(h*l.sx),S=m.height=Math.ceil(d*l.sy);f(this,ya)||(c=U(this,mn,k2).call(this,x,S));const C=m.getContext("2d");C.filter=this._uiManager.hcmFilter;let k="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":(v=window.matchMedia)!=null&&v.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",T="#42414d");const M=15,H=M*l.sx,X=M*l.sy,he=new OffscreenCanvas(H*2,X*2),ne=he.getContext("2d");ne.fillStyle=k,ne.fillRect(0,0,H*2,X*2),ne.fillStyle=T,ne.fillRect(0,0,H,X),ne.fillRect(H,X,H,X),C.fillStyle=C.createPattern(he,"repeat"),C.fillRect(0,0,x,S),C.drawImage(c,0,0,c.width,c.height,0,0,x,S)}let y=null;if(r){let x,S;if(l.symmetric&&c.width<t&&c.height<t)x=c.width,S=c.height;else if(c=f(this,or),i>t||a>t){const T=Math.min(t/i,t/a);x=Math.floor(i*T),S=Math.floor(a*T),f(this,ya)||(c=U(this,mn,k2).call(this,x,S))}const k=new OffscreenCanvas(x,S).getContext("2d",{willReadFrequently:!0});k.drawImage(c,0,0,c.width,c.height,0,0,x,S),y={width:x,height:S,data:k.getImageData(0,0,x,S).data}}return{canvas:m,width:h,height:d,imageData:y}}getImageForAltText(){return f(this,Ol)}static async deserialize(t,n,r){var S;let i=null;if(t instanceof tE){const{data:{rect:C,rotation:k,id:T,structParent:M,popupRef:H},container:X,parent:{page:{pageNumber:he}}}=t,ne=X.querySelector("canvas"),Z=r.imageManager.getFromCanvas(X.id,ne);ne.remove();const fe=((S=await n._structTree.getAriaAttributes(`${b_}${T}`))==null?void 0:S.get("aria-label"))||"";i=t={annotationType:$t.STAMP,bitmapId:Z.id,bitmap:Z.bitmap,pageIndex:he-1,rect:C.slice(0),rotation:k,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:fe},isSvg:!1,structParent:M,popupRef:H}}const a=await super.deserialize(t,n,r),{rect:l,bitmap:c,bitmapUrl:h,bitmapId:d,isSvg:m,accessibilityData:y}=t;d&&r.imageManager.isValidId(d)?(R(a,xi,d),c&&R(a,or,c)):R(a,Yu,h),R(a,ya,m);const[v,x]=a.pageDimensions;return a.width=(l[2]-l[0])/v,a.height=(l[3]-l[1])/x,a.annotationElementId=t.id||null,y&&(a.altTextData=y),a._initialData=i,R(a,sm,!!i),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:$t.STAMP,bitmapId:f(this,xi),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:f(this,ya),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=U(this,mn,C2).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=U(this,mn,OE).call(this,r);if(c.isSame)return null;c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const l=f(this,ya)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(f(this,xi)))n.stamps.set(f(this,xi),{area:l,serialized:r}),r.bitmap=U(this,mn,C2).call(this,!1);else if(f(this,ya)){const c=n.stamps.get(f(this,xi));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=U(this,mn,C2).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};or=new WeakMap,xi=new WeakMap,Nh=new WeakMap,Yu=new WeakMap,Th=new WeakMap,im=new WeakMap,Ol=new WeakMap,Ml=new WeakMap,ya=new WeakMap,sm=new WeakMap,mn=new WeakSet,a0=function(t,n=!1){if(!t){this.remove();return}R(this,or,t.bitmap),n||(R(this,xi,t.id),R(this,ya,t.isSvg)),t.file&&R(this,im,t.file.name),U(this,mn,Db).call(this)},o0=function(){if(R(this,Nh,null),this._uiManager.enableWaiting(!1),!!f(this,Ol)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,or)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,or)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},E2=function(){if(f(this,xi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,xi)).then(r=>U(this,mn,a0).call(this,r,!0)).finally(()=>U(this,mn,o0).call(this));return}if(f(this,Yu)){const r=f(this,Yu);R(this,Yu,null),this._uiManager.enableWaiting(!0),R(this,Nh,this._uiManager.imageManager.getFromUrl(r).then(i=>U(this,mn,a0).call(this,i)).finally(()=>U(this,mn,o0).call(this)));return}if(f(this,Th)){const r=f(this,Th);R(this,Th,null),this._uiManager.enableWaiting(!0),R(this,Nh,this._uiManager.imageManager.getFromFile(r).then(i=>U(this,mn,a0).call(this,i)).finally(()=>U(this,mn,o0).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=p0.supportedTypesStr;const n=this._uiManager._signal;R(this,Nh,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),U(this,mn,a0).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>U(this,mn,o0).call(this))),t.click()},Db=function(){var m;const{div:t}=this;let{width:n,height:r}=f(this,or);const[i,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*i,r=this.height*a;else if(n>l*i||r>l*a){const y=Math.min(l*i/n,l*a/r);n*=y,r*=y}const[c,h]=this.parentDimensions;this.setDims(n*c/i,r*h/a),this._uiManager.enableWaiting(!1);const d=R(this,Ol,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/i,this.height=r/a,(m=this._initialOptions)!=null&&m.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),U(this,mn,jb).call(this),f(this,sm)||(this.parent.addUndoableEditor(this),R(this,sm,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,im)&&d.setAttribute("aria-label",f(this,im))},k2=function(t,n){const{width:r,height:i}=f(this,or);let a=r,l=i,c=f(this,or);for(;a>2*t||l>2*n;){const h=a,d=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const m=new OffscreenCanvas(a,l);m.getContext("2d").drawImage(c,0,0,h,d,0,0,a,l),c=m.transferToImageBitmap()}return c},jb=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,a=new Ow,l=Math.ceil(r*t*a.sx),c=Math.ceil(i*n*a.sy),h=f(this,Ol);if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const d=f(this,ya)?f(this,or):U(this,mn,k2).call(this,l,c),m=h.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(d,0,0,d.width,d.height,0,0,l,c)},C2=function(t){if(t){if(f(this,ya)){const i=this._uiManager.imageManager.getSvgUrl(f(this,xi));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=f(this,or),n.getContext("2d").drawImage(f(this,or),0,0),n.toDataURL()}if(f(this,ya)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*zh.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*zh.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(f(this,or),0,0,f(this,or).width,f(this,or).height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(f(this,or))},OE=function(t){var l;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,a=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},kt(p0,"_type","stamp"),kt(p0,"_editorType",$t.STAMP);let Fb=p0;var Ff,am,Fl,Rh,Ku,Ya,Ih,om,Df,Do,Xu,Yi,Ju,yt,Oh,nr,ME,yl,zb,Ub,L2;const So=class So{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:a,drawLayer:l,textLayer:c,viewport:h,l10n:d}){B(this,nr);B(this,Ff);B(this,am,!1);B(this,Fl,null);B(this,Rh,null);B(this,Ku,null);B(this,Ya,new Map);B(this,Ih,!1);B(this,om,!1);B(this,Df,!1);B(this,Do,null);B(this,Xu,null);B(this,Yi,null);B(this,Ju,null);B(this,yt);const m=[...f(So,Oh).values()];if(!So._initialized){So._initialized=!0;for(const y of m)y.initialize(d,e)}e.registerEditorTypes(m),R(this,yt,e),this.pageIndex=t,this.div=n,R(this,Ff,i),R(this,Fl,a),this.viewport=h,R(this,Yi,c),this.drawLayer=l,this._structTree=r,f(this,yt).addLayer(this)}get isEmpty(){return f(this,Ya).size===0}get isInvisible(){return this.isEmpty&&f(this,yt).getMode()===$t.NONE}updateToolbar(e){f(this,yt).updateToolbar(e)}updateMode(e=f(this,yt).getMode()){switch(U(this,nr,L2).call(this),e){case $t.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case $t.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case $t.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of f(So,Oh).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=f(this,Yi))==null?void 0:t.div)}setEditingState(e){f(this,yt).setEditingState(e)}addCommands(e){f(this,yt).addCommands(e)}cleanUndoStack(e){f(this,yt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=f(this,Fl))==null||t.div.classList.toggle("disabled",!e)}async enable(){R(this,Df,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of f(this,Ya).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(f(this,yt).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!f(this,Fl)){R(this,Df,!1);return}const t=f(this,Fl).getEditableAnnotations();for(const n of t){if(n.hide(),f(this,yt).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}R(this,Df,!1)}disable(){var r;R(this,om,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of f(this,Ya).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(r=this.getEditableAnnotation(i.annotationElementId))==null||r.show(),i.remove()}if(f(this,Fl)){const i=f(this,Fl).getEditableAnnotations();for(const a of i){const{id:l}=a.data;if(f(this,yt).isDeletedAnnotationElement(l))continue;let c=t.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(l),c&&(f(this,yt).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}U(this,nr,L2).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of f(So,Oh).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),R(this,om,!1)}getEditableAnnotation(e){var t;return((t=f(this,Fl))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){f(this,yt).getActive()!==e&&f(this,yt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=f(this,Yi))!=null&&e.div&&!f(this,Ju)){R(this,Ju,new AbortController);const t=f(this,yt).combinedSignal(f(this,Ju));f(this,Yi).div.addEventListener("pointerdown",U(this,nr,ME).bind(this),{signal:t}),f(this,Yi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=f(this,Yi))!=null&&e.div&&f(this,Ju)&&(f(this,Ju).abort(),R(this,Ju,null),f(this,Yi).div.classList.remove("highlighting"))}enableClick(){if(f(this,Rh))return;R(this,Rh,new AbortController);const e=f(this,yt).combinedSignal(f(this,Rh));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=f(this,Rh))==null||e.abort(),R(this,Rh,null)}attach(e){f(this,Ya).set(e.id,e);const{annotationElementId:t}=e;t&&f(this,yt).isDeletedAnnotationElement(t)&&f(this,yt).removeDeletedAnnotationElement(e)}detach(e){var t;f(this,Ya).delete(e.id),(t=f(this,Ff))==null||t.removePointerInTextLayer(e.contentDiv),!f(this,om)&&e.annotationElementId&&f(this,yt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),f(this,yt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(f(this,yt).addDeletedAnnotationElement(e.annotationElementId),lr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),f(this,yt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!f(this,Df)),f(this,yt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!f(this,Ku)&&(e._focusEventsAllowed=!1,R(this,Ku,setTimeout(()=>{R(this,Ku,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:f(this,yt)._signal}),t.focus())},0))),e._structTreeParentId=(n=f(this,Ff))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return f(this,yt).getId()}combinedSignal(e){return f(this,yt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=f(this,nr,yl))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){f(this,yt).updateToolbar(e),f(this,yt).updateMode(e);const{offsetX:n,offsetY:r}=U(this,nr,Ub).call(this),i=this.getNextId(),a=U(this,nr,zb).call(this,{parent:this,id:i,x:n,y:r,uiManager:f(this,yt),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=f(So,Oh).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,f(this,yt)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=U(this,nr,zb).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:f(this,yt),isCentered:t,...n});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(U(this,nr,Ub).call(this),!0)}setSelected(e){f(this,yt).setSelected(e)}toggleSelected(e){f(this,yt).toggleSelected(e)}unselect(e){f(this,yt).unselect(e)}pointerup(e){var n;const{isMac:t}=vs.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&f(this,Ih)&&(R(this,Ih,!1),!((n=f(this,nr,yl))!=null&&n.isDrawer&&f(this,nr,yl).supportMultipleDrawings))){if(!f(this,am)){R(this,am,!0);return}if(f(this,yt).getMode()===$t.STAMP){f(this,yt).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var r;if(f(this,yt).getMode()===$t.HIGHLIGHT&&this.enableTextSelection(),f(this,Ih)){R(this,Ih,!1);return}const{isMac:t}=vs.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(R(this,Ih,!0),(r=f(this,nr,yl))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=f(this,yt).getActive();R(this,am,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),f(this,Do)){f(this,nr,yl).startDrawing(this,f(this,yt),!1,e);return}f(this,yt).setCurrentDrawingSession(this),R(this,Do,new AbortController);const t=f(this,yt).combinedSignal(f(this,Do));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(R(this,Xu,null),this.commitOrRemove())},{signal:t}),f(this,nr,yl).startDrawing(this,f(this,yt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&R(this,Xu,t);return}f(this,Xu)&&setTimeout(()=>{var t;(t=f(this,Xu))==null||t.focus(),R(this,Xu,null)},0)}endDrawingSession(e=!1){return f(this,Do)?(f(this,yt).setCurrentDrawingSession(null),f(this,Do).abort(),R(this,Do,null),R(this,Xu,null),f(this,nr,yl).endDrawing(e)):null}findNewParent(e,t,n){const r=f(this,yt).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return f(this,Do)?(this.endDrawingSession(),!0):!1}onScaleChanging(){f(this,Do)&&f(this,nr,yl).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=f(this,yt).getActive())==null?void 0:e.parent)===this&&(f(this,yt).commitOrRemove(),f(this,yt).setActiveEditor(null)),f(this,Ku)&&(clearTimeout(f(this,Ku)),R(this,Ku,null));for(const n of f(this,Ya).values())(t=f(this,Ff))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,f(this,Ya).clear(),f(this,yt).removeLayer(this)}render({viewport:e}){this.viewport=e,Uf(this.div,e);for(const t of f(this,yt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){f(this,yt).commitOrRemove(),U(this,nr,L2).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Uf(this.div,{rotation:n}),t!==n)for(const r of f(this,Ya).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return f(this,yt).viewParameters.realScale}};Ff=new WeakMap,am=new WeakMap,Fl=new WeakMap,Rh=new WeakMap,Ku=new WeakMap,Ya=new WeakMap,Ih=new WeakMap,om=new WeakMap,Df=new WeakMap,Do=new WeakMap,Xu=new WeakMap,Yi=new WeakMap,Ju=new WeakMap,yt=new WeakMap,Oh=new WeakMap,nr=new WeakSet,ME=function(e){f(this,yt).unselectAll();const{target:t}=e;if(t===f(this,Yi).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&f(this,Yi).div.contains(t)){const{isMac:n}=vs.platform;if(e.button!==0||e.ctrlKey&&n)return;f(this,yt).showAllEditors("highlight",!0,!0),f(this,Yi).div.classList.add("free"),this.toggleDrawing(),H2.startHighlighting(this,f(this,yt).direction==="ltr",{target:f(this,Yi).div,x:e.x,y:e.y}),f(this,Yi).div.addEventListener("pointerup",()=>{f(this,Yi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:f(this,yt)._signal}),e.preventDefault()}},yl=function(){return f(So,Oh).get(f(this,yt).getMode())},zb=function(e){const t=f(this,nr,yl);return t?new t.prototype.constructor(e):null},Ub=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+r),h=(i+l)/2-e,d=(a+c)/2-t,[m,y]=this.viewport.rotation%180===0?[h,d]:[d,h];return{offsetX:m,offsetY:y}},L2=function(){for(const e of f(this,Ya).values())e.isEmpty()&&e.remove()},kt(So,"_initialized",!1),B(So,Oh,new Map([bb,Mb,Fb,H2].map(e=>[e._editorType,e])));let Bb=So;var jo,K1,ms,jf,fy,FE,Bl,Hb,DE,$b;const $i=class $i{constructor({pageIndex:e}){B(this,Bl);B(this,jo,null);B(this,K1,0);B(this,ms,new Map);B(this,jf,new Map);this.pageIndex=e}setParent(e){if(!f(this,jo)){R(this,jo,e);return}if(f(this,jo)!==e){if(f(this,ms).size>0)for(const t of f(this,ms).values())t.remove(),e.append(t);R(this,jo,e)}}static get _svgFactory(){return Xt(this,"_svgFactory",new C_)}draw(e,t=!1,n=!1){const r=hs(this,K1)._++,i=U(this,Bl,Hb).call(this),a=$i._svgFactory.createElement("defs");i.append(a);const l=$i._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&f(this,jf).set(r,l);const h=n?U(this,Bl,DE).call(this,a,c):null,d=$i._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(i,e),f(this,ms).set(r,i),{id:r,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=hs(this,K1)._++,r=U(this,Bl,Hb).call(this),i=$i._svgFactory.createElement("defs");r.append(i);const a=$i._svgFactory.createElement("path");i.append(a);const l=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const m=$i._svgFactory.createElement("mask");i.append(m),c=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",c),m.setAttribute("maskUnits","objectBoundingBox");const y=$i._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=$i._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${l}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const h=$i._svgFactory.createElement("use");r.append(h),h.setAttribute("href",`#${l}`),c&&h.setAttribute("mask",`url(#${c})`);const d=h.cloneNode();return r.append(d),h.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(r,e),f(this,ms).set(n,r),n}finalizeDraw(e,t){f(this,jf).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:n,bbox:r,rootClass:i,path:a}=t,l=typeof e=="number"?f(this,ms).get(e):e;if(l){if(n&&U(this,Bl,$b).call(this,l,n),r&&U(c=$i,fy,FE).call(c,l,r),i){const{classList:h}=l;for(const[d,m]of Object.entries(i))h.toggle(d,m)}if(a){const d=l.firstChild.firstChild;U(this,Bl,$b).call(this,d,a)}}}updateParent(e,t){if(t===this)return;const n=f(this,ms).get(e);n&&(f(t,jo).append(n),f(this,ms).delete(e),f(t,ms).set(e,n))}remove(e){f(this,jf).delete(e),f(this,jo)!==null&&(f(this,ms).get(e).remove(),f(this,ms).delete(e))}destroy(){R(this,jo,null);for(const e of f(this,ms).values())e.remove();f(this,ms).clear(),f(this,jf).clear()}};jo=new WeakMap,K1=new WeakMap,ms=new WeakMap,jf=new WeakMap,fy=new WeakSet,FE=function(e,[t,n,r,i]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*i}%`},Bl=new WeakSet,Hb=function(){const e=$i._svgFactory.create(1,1,!0);return f(this,jo).append(e),e.setAttribute("aria-hidden",!0),e},DE=function(e,t){const n=$i._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=$i._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},$b=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},B($i,fy);let qb=$i;globalThis.pdfjsTestingUtils={HighlightOutliner:xb};Ft.AbortException;Ft.AnnotationEditorLayer;Ft.AnnotationEditorParamsType;Ft.AnnotationEditorType;Ft.AnnotationEditorUIManager;Ft.AnnotationLayer;Ft.AnnotationMode;Ft.ColorPicker;Ft.DOMSVGFactory;Ft.DrawLayer;Ft.FeatureTest;var wR=Ft.GlobalWorkerOptions;Ft.ImageKind;Ft.InvalidPDFException;Ft.MissingPDFException;Ft.OPS;Ft.OutputScale;Ft.PDFDataRangeTransport;Ft.PDFDateString;Ft.PDFWorker;Ft.PasswordResponses;Ft.PermissionFlag;Ft.PixelsPerInch;Ft.RenderingCancelledException;Ft.TextLayer;Ft.TouchManager;Ft.UnexpectedResponseException;Ft.Util;Ft.VerbosityLevel;Ft.XfaLayer;Ft.build;Ft.createValidAbsoluteUrl;Ft.fetchData;var bR=Ft.getDocument;Ft.getFilenameFromUrl;Ft.getPdfFilenameFromUrl;Ft.getXfaPageViewport;Ft.isDataScheme;Ft.isPdfFile;Ft.noContextMenu;Ft.normalizeUnicode;Ft.setLayerDimensions;Ft.shadow;Ft.stopEvent;var _R=Ft.version;const xR=()=>Q.jsxs("div",{className:"text-center mb-8",children:[Q.jsx("div",{className:"bg-blue-500/10 rounded-full w-16 h-16 md:w-20 md:h-20 mx-auto mb-4 flex items-center justify-center",children:Q.jsx(my,{className:"h-8 w-8 md:h-12 md:w-12 text-blue-400"})}),Q.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PrepAI Tool"}),Q.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"AI That Turns Your Study Material into Practice Questions!"})]}),AR=({onReset:s,onOpenAiStudio:e})=>Q.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3 mb-4",children:Q.jsxs("button",{onClick:s,className:"flex items-center gap-1 md:gap-2 bg-red-500 hover:bg-red-600 text-white px-3 md:px-4 py-2 rounded-lg transition-all shadow-lg hover:shadow-red-500/20 text-sm md:text-base",children:[Q.jsx(bN,{className:"h-4 w-4"}),"Reset"]})}),SR=({apiKey:s,onChange:e})=>Q.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700/50",children:[Q.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Q.jsx(gN,{className:"h-4 w-4 text-purple-400"}),Q.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Custom API Key (Optional)"})]}),Q.jsx("input",{type:"text",value:s,onChange:t=>e(t.target.value),placeholder:"Enter your Gemini API key...",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-purple-500 focus:border-purple-500"})]}),ER=({score:s,totalQuestions:e,attemptedQuestions:t,time:n})=>s===null?null:Q.jsx("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 p-6 md:p-8 rounded-lg text-center border border-blue-500/20 shadow-lg",children:Q.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Q.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[Q.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Your Score"}),Q.jsxs("p",{className:"text-xl md:text-2xl font-semibold",children:[Q.jsx("span",{className:"text-green-400 font-bold",children:s}),Q.jsx("span",{className:"text-gray-400",children:" / "}),Q.jsx("span",{className:"text-blue-400 font-bold",children:e})]})]}),Q.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[Q.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Attempted"}),Q.jsxs("p",{className:"text-xl md:text-2xl font-semibold",children:[Q.jsx("span",{className:"text-orange-400 font-bold",children:t}),Q.jsx("span",{className:"text-gray-400",children:" / "}),Q.jsx("span",{className:"text-blue-400 font-bold",children:e})]})]}),Q.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[Q.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Time Taken"}),Q.jsx("p",{className:"text-xl md:text-2xl font-semibold text-purple-400 font-mono",children:n})]})]})});function Ln(s){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(s)}var Ji=Uint8Array,xa=Uint16Array,P_=Int32Array,Ey=new Ji([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ky=new Ji([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Wb=new Ji([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jE=function(s,e){for(var t=new xa(31),n=0;n<31;++n)t[n]=e+=1<<s[n-1];for(var r=new P_(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)r[i]=i-t[n]<<5|n;return{b:t,r}},BE=jE(Ey,2),zE=BE.b,Gb=BE.r;zE[28]=258,Gb[258]=28;var UE=jE(ky,0),kR=UE.b,CS=UE.r,Vb=new xa(32768);for(var Xn=0;Xn<32768;++Xn){var Jc=(Xn&43690)>>1|(Xn&21845)<<1;Jc=(Jc&52428)>>2|(Jc&13107)<<2,Jc=(Jc&61680)>>4|(Jc&3855)<<4,Vb[Xn]=((Jc&65280)>>8|(Jc&255)<<8)>>1}var jl=function(s,e,t){for(var n=s.length,r=0,i=new xa(e);r<n;++r)s[r]&&++i[s[r]-1];var a=new xa(e);for(r=1;r<e;++r)a[r]=a[r-1]+i[r-1]<<1;var l;if(t){l=new xa(1<<e);var c=15-e;for(r=0;r<n;++r)if(s[r])for(var h=r<<4|s[r],d=e-s[r],m=a[s[r]-1]++<<d,y=m|(1<<d)-1;m<=y;++m)l[Vb[m]>>c]=h}else for(l=new xa(n),r=0;r<n;++r)s[r]&&(l[r]=Vb[a[s[r]-1]++]>>15-s[r]);return l},Uh=new Ji(288);for(var Xn=0;Xn<144;++Xn)Uh[Xn]=8;for(var Xn=144;Xn<256;++Xn)Uh[Xn]=9;for(var Xn=256;Xn<280;++Xn)Uh[Xn]=7;for(var Xn=280;Xn<288;++Xn)Uh[Xn]=8;var S0=new Ji(32);for(var Xn=0;Xn<32;++Xn)S0[Xn]=5;var CR=jl(Uh,9,0),LR=jl(Uh,9,1),PR=jl(S0,5,0),NR=jl(S0,5,1),sw=function(s){for(var e=s[0],t=1;t<s.length;++t)s[t]>e&&(e=s[t]);return e},xo=function(s,e,t){var n=e/8|0;return(s[n]|s[n+1]<<8)>>(e&7)&t},aw=function(s,e){var t=e/8|0;return(s[t]|s[t+1]<<8|s[t+2]<<16)>>(e&7)},N_=function(s){return(s+7)/8|0},qE=function(s,e,t){return(t==null||t>s.length)&&(t=s.length),new Ji(s.subarray(e,t))},TR=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ko=function(s,e,t){var n=new Error(e||TR[s]);if(n.code=s,Error.captureStackTrace&&Error.captureStackTrace(n,ko),!t)throw n;return n},RR=function(s,e,t,n){var r=s.length,i=0;if(!r||e.f&&!e.l)return t||new Ji(0);var a=!t,l=a||e.i!=2,c=e.i;a&&(t=new Ji(r*3));var h=function($e){var De=t.length;if($e>De){var Be=new Ji(Math.max(De*2,$e));Be.set(t),t=Be}},d=e.f||0,m=e.p||0,y=e.b||0,v=e.l,x=e.d,S=e.m,C=e.n,k=r*8;do{if(!v){d=xo(s,m,1);var T=xo(s,m+1,3);if(m+=3,T)if(T==1)v=LR,x=NR,S=9,C=5;else if(T==2){var he=xo(s,m,31)+257,ne=xo(s,m+10,15)+4,Z=he+xo(s,m+5,31)+1;m+=14;for(var fe=new Ji(Z),Se=new Ji(19),q=0;q<ne;++q)Se[Wb[q]]=xo(s,m+q*3,7);m+=ne*3;for(var V=sw(Se),ue=(1<<V)-1,re=jl(Se,V,1),q=0;q<Z;){var Ee=re[xo(s,m,ue)];m+=Ee&15;var M=Ee>>4;if(M<16)fe[q++]=M;else{var ce=0,me=0;for(M==16?(me=3+xo(s,m,3),m+=2,ce=fe[q-1]):M==17?(me=3+xo(s,m,7),m+=3):M==18&&(me=11+xo(s,m,127),m+=7);me--;)fe[q++]=ce}}var ae=fe.subarray(0,he),te=fe.subarray(he);S=sw(ae),C=sw(te),v=jl(ae,S,1),x=jl(te,C,1)}else ko(1);else{var M=N_(m)+4,H=s[M-4]|s[M-3]<<8,X=M+H;if(X>r){c&&ko(0);break}l&&h(y+H),t.set(s.subarray(M,X),y),e.b=y+=H,e.p=m=X*8,e.f=d;continue}if(m>k){c&&ko(0);break}}l&&h(y+131072);for(var J=(1<<S)-1,G=(1<<C)-1,N=m;;N=m){var ce=v[aw(s,m)&J],j=ce>>4;if(m+=ce&15,m>k){c&&ko(0);break}if(ce||ko(2),j<256)t[y++]=j;else if(j==256){N=m,v=null;break}else{var Y=j-254;if(j>264){var q=j-257,se=Ey[q];Y=xo(s,m,(1<<se)-1)+zE[q],m+=se}var oe=x[aw(s,m)&G],de=oe>>4;oe||ko(3),m+=oe&15;var te=kR[de];if(de>3){var se=ky[de];te+=aw(s,m)&(1<<se)-1,m+=se}if(m>k){c&&ko(0);break}l&&h(y+131072);var be=y+Y;if(y<te){var Ae=i-te,qe=Math.min(te,be);for(Ae+y<0&&ko(3);y<qe;++y)t[y]=n[Ae+y]}for(;y<be;++y)t[y]=t[y-te]}}e.l=v,e.p=N,e.b=y,e.f=d,v&&(d=1,e.m=S,e.d=x,e.n=C)}while(!d);return y!=t.length&&a?qE(t,0,y):t.subarray(0,y)},bu=function(s,e,t){t<<=e&7;var n=e/8|0;s[n]|=t,s[n+1]|=t>>8},qm=function(s,e,t){t<<=e&7;var n=e/8|0;s[n]|=t,s[n+1]|=t>>8,s[n+2]|=t>>16},ow=function(s,e){for(var t=[],n=0;n<s.length;++n)s[n]&&t.push({s:n,f:s[n]});var r=t.length,i=t.slice();if(!r)return{t:$E,l:0};if(r==1){var a=new Ji(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(X,he){return X.f-he.f}),t.push({s:-1,f:25001});var l=t[0],c=t[1],h=0,d=1,m=2;for(t[0]={s:-1,f:l.f+c.f,l,r:c};d!=r-1;)l=t[t[h].f<t[m].f?h++:m++],c=t[h!=d&&t[h].f<t[m].f?h++:m++],t[d++]={s:-1,f:l.f+c.f,l,r:c};for(var y=i[0].s,n=1;n<r;++n)i[n].s>y&&(y=i[n].s);var v=new xa(y+1),x=Yb(t[d-1],v,0);if(x>e){var n=0,S=0,C=x-e,k=1<<C;for(i.sort(function(he,ne){return v[ne.s]-v[he.s]||he.f-ne.f});n<r;++n){var T=i[n].s;if(v[T]>e)S+=k-(1<<x-v[T]),v[T]=e;else break}for(S>>=C;S>0;){var M=i[n].s;v[M]<e?S-=1<<e-v[M]++-1:++n}for(;n>=0&&S;--n){var H=i[n].s;v[H]==e&&(--v[H],++S)}x=e}return{t:new Ji(v),l:x}},Yb=function(s,e,t){return s.s==-1?Math.max(Yb(s.l,e,t+1),Yb(s.r,e,t+1)):e[s.s]=t},LS=function(s){for(var e=s.length;e&&!s[--e];);for(var t=new xa(++e),n=0,r=s[0],i=1,a=function(c){t[n++]=c},l=1;l<=e;++l)if(s[l]==r&&l!=e)++i;else{if(!r&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(r),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(r);i=1,r=s[l]}return{c:t.subarray(0,n),n:e}},Hm=function(s,e){for(var t=0,n=0;n<e.length;++n)t+=s[n]*e[n];return t},HE=function(s,e,t){var n=t.length,r=N_(e+2);s[r]=n&255,s[r+1]=n>>8,s[r+2]=s[r]^255,s[r+3]=s[r+1]^255;for(var i=0;i<n;++i)s[r+i+4]=t[i];return(r+4+n)*8},PS=function(s,e,t,n,r,i,a,l,c,h,d){bu(e,d++,t),++r[256];for(var m=ow(r,15),y=m.t,v=m.l,x=ow(i,15),S=x.t,C=x.l,k=LS(y),T=k.c,M=k.n,H=LS(S),X=H.c,he=H.n,ne=new xa(19),Z=0;Z<T.length;++Z)++ne[T[Z]&31];for(var Z=0;Z<X.length;++Z)++ne[X[Z]&31];for(var fe=ow(ne,7),Se=fe.t,q=fe.l,V=19;V>4&&!Se[Wb[V-1]];--V);var ue=h+5<<3,re=Hm(r,Uh)+Hm(i,S0)+a,Ee=Hm(r,y)+Hm(i,S)+a+14+3*V+Hm(ne,Se)+2*ne[16]+3*ne[17]+7*ne[18];if(c>=0&&ue<=re&&ue<=Ee)return HE(e,d,s.subarray(c,c+h));var ce,me,ae,te;if(bu(e,d,1+(Ee<re)),d+=2,Ee<re){ce=jl(y,v,0),me=y,ae=jl(S,C,0),te=S;var J=jl(Se,q,0);bu(e,d,M-257),bu(e,d+5,he-1),bu(e,d+10,V-4),d+=14;for(var Z=0;Z<V;++Z)bu(e,d+3*Z,Se[Wb[Z]]);d+=3*V;for(var G=[T,X],N=0;N<2;++N)for(var j=G[N],Z=0;Z<j.length;++Z){var Y=j[Z]&31;bu(e,d,J[Y]),d+=Se[Y],Y>15&&(bu(e,d,j[Z]>>5&127),d+=j[Z]>>12)}}else ce=CR,me=Uh,ae=PR,te=S0;for(var Z=0;Z<l;++Z){var se=n[Z];if(se>255){var Y=se>>18&31;qm(e,d,ce[Y+257]),d+=me[Y+257],Y>7&&(bu(e,d,se>>23&31),d+=Ey[Y]);var oe=se&31;qm(e,d,ae[oe]),d+=te[oe],oe>3&&(qm(e,d,se>>5&8191),d+=ky[oe])}else qm(e,d,ce[se]),d+=me[se]}return qm(e,d,ce[256]),d+me[256]},IR=new P_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$E=new Ji(0),OR=function(s,e,t,n,r,i){var a=i.z||s.length,l=new Ji(n+a+5*(1+Math.ceil(a/7e3))+r),c=l.subarray(n,l.length-r),h=i.l,d=(i.r||0)&7;if(e){d&&(c[0]=i.r>>3);for(var m=IR[e-1],y=m>>13,v=m&8191,x=(1<<t)-1,S=i.p||new xa(32768),C=i.h||new xa(x+1),k=Math.ceil(t/3),T=2*k,M=function(rt){return(s[rt]^s[rt+1]<<k^s[rt+2]<<T)&x},H=new P_(25e3),X=new xa(288),he=new xa(32),ne=0,Z=0,fe=i.i||0,Se=0,q=i.w||0,V=0;fe+2<a;++fe){var ue=M(fe),re=fe&32767,Ee=C[ue];if(S[re]=Ee,C[ue]=re,q<=fe){var ce=a-fe;if((ne>7e3||Se>24576)&&(ce>423||!h)){d=PS(s,c,0,H,X,he,Z,Se,V,fe-V,d),Se=ne=Z=0,V=fe;for(var me=0;me<286;++me)X[me]=0;for(var me=0;me<30;++me)he[me]=0}var ae=2,te=0,J=v,G=re-Ee&32767;if(ce>2&&ue==M(fe-G))for(var N=Math.min(y,ce)-1,j=Math.min(32767,fe),Y=Math.min(258,ce);G<=j&&--J&&re!=Ee;){if(s[fe+ae]==s[fe+ae-G]){for(var se=0;se<Y&&s[fe+se]==s[fe+se-G];++se);if(se>ae){if(ae=se,te=G,se>N)break;for(var oe=Math.min(G,se-2),de=0,me=0;me<oe;++me){var be=fe-G+me&32767,Ae=S[be],qe=be-Ae&32767;qe>de&&(de=qe,Ee=be)}}}re=Ee,Ee=S[re],G+=re-Ee&32767}if(te){H[Se++]=268435456|Gb[ae]<<18|CS[te];var $e=Gb[ae]&31,De=CS[te]&31;Z+=Ey[$e]+ky[De],++X[257+$e],++he[De],q=fe+ae,++ne}else H[Se++]=s[fe],++X[s[fe]]}}for(fe=Math.max(fe,q);fe<a;++fe)H[Se++]=s[fe],++X[s[fe]];d=PS(s,c,h,H,X,he,Z,Se,V,fe-V,d),h||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=C,i.p=S,i.i=fe,i.w=q)}else{for(var fe=i.w||0;fe<a+h;fe+=65535){var Be=fe+65535;Be>=a&&(c[d/8|0]=h,Be=a),d=HE(c,d+1,s.subarray(fe,Be))}i.i=a}return qE(l,0,n+N_(d)+r)},WE=function(){var s=1,e=0;return{p:function(t){for(var n=s,r=e,i=t.length|0,a=0;a!=i;){for(var l=Math.min(a+2655,i);a<l;++a)r+=n+=t[a];n=(n&65535)+15*(n>>16),r=(r&65535)+15*(r>>16)}s=n,e=r},d:function(){return s%=65521,e%=65521,(s&255)<<24|(s&65280)<<8|(e&255)<<8|e>>8}}},MR=function(s,e,t,n,r){if(!r&&(r={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new Ji(i.length+s.length);a.set(i),a.set(s,i.length),s=a,r.w=i.length}return OR(s,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+e.mem,t,n,r)},GE=function(s,e,t){for(;t;++e)s[e]=t,t>>>=8},FR=function(s,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(s[0]=120,s[1]=n<<6|(e.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,e.dictionary){var r=WE();r.p(e.dictionary),GE(s,2,r.d())}},DR=function(s,e){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&ko(6,"invalid zlib data"),(s[1]>>5&1)==1&&ko(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function Kb(s,e){e||(e={});var t=WE();t.p(s);var n=MR(s,e,e.dictionary?6:2,4);return FR(n,e),GE(n,n.length-4,t.d()),n}function jR(s,e){return RR(s.subarray(DR(s),-4),{i:2},e,e)}var BR=typeof TextDecoder<"u"&&new TextDecoder,zR=0;try{BR.decode($E,{stream:!0}),zR=1}catch{}var Tt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function lw(){Tt.console&&typeof Tt.console.log=="function"&&Tt.console.log.apply(Tt.console,arguments)}var In={log:lw,warn:function(s){Tt.console&&(typeof Tt.console.warn=="function"?Tt.console.warn.apply(Tt.console,arguments):lw.call(null,arguments))},error:function(s){Tt.console&&(typeof Tt.console.error=="function"?Tt.console.error.apply(Tt.console,arguments):lw(s))}};function uw(s,e,t){var n=new XMLHttpRequest;n.open("GET",s),n.responseType="blob",n.onload=function(){Pd(n.response,e,t)},n.onerror=function(){In.error("could not download file")},n.send()}function NS(s){var e=new XMLHttpRequest;e.open("HEAD",s,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Kv(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(e)}}var d0,Xb,Pd=Tt.saveAs||((typeof window>"u"?"undefined":Ln(window))!=="object"||window!==Tt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,e,t){var n=Tt.URL||Tt.webkitURL,r=document.createElement("a");e=e||s.name||"download",r.download=e,r.rel="noopener",typeof s=="string"?(r.href=s,r.origin!==location.origin?NS(r.href)?uw(s,e,t):Kv(r,r.target="_blank"):Kv(r)):(r.href=n.createObjectURL(s),setTimeout(function(){n.revokeObjectURL(r.href)},4e4),setTimeout(function(){Kv(r)},0))}:"msSaveOrOpenBlob"in navigator?function(s,e,t){if(e=e||s.name||"download",typeof s=="string")if(NS(s))uw(s,e,t);else{var n=document.createElement("a");n.href=s,n.target="_blank",setTimeout(function(){Kv(n)})}else navigator.msSaveOrOpenBlob(function(r,i){return i===void 0?i={autoBom:!1}:Ln(i)!=="object"&&(In.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(s,t),e)}:function(s,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof s=="string")return uw(s,e,t);var r=s.type==="application/octet-stream",i=/constructor/i.test(Tt.HTMLElement)||Tt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&i)&&(typeof FileReader>"u"?"undefined":Ln(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(s)}else{var c=Tt.URL||Tt.webkitURL,h=c.createObjectURL(s);n?n.location=h:location.href=h,n=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function VE(s){var e;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<t.length;n++){var r=t[n].re,i=t[n].process,a=r.exec(s);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+l+c+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function cw(s,e){var t=s[0],n=s[1],r=s[2],i=s[3];t=ji(t,n,r,i,e[0],7,-680876936),i=ji(i,t,n,r,e[1],12,-389564586),r=ji(r,i,t,n,e[2],17,606105819),n=ji(n,r,i,t,e[3],22,-1044525330),t=ji(t,n,r,i,e[4],7,-176418897),i=ji(i,t,n,r,e[5],12,1200080426),r=ji(r,i,t,n,e[6],17,-1473231341),n=ji(n,r,i,t,e[7],22,-45705983),t=ji(t,n,r,i,e[8],7,1770035416),i=ji(i,t,n,r,e[9],12,-1958414417),r=ji(r,i,t,n,e[10],17,-42063),n=ji(n,r,i,t,e[11],22,-1990404162),t=ji(t,n,r,i,e[12],7,1804603682),i=ji(i,t,n,r,e[13],12,-40341101),r=ji(r,i,t,n,e[14],17,-1502002290),t=Bi(t,n=ji(n,r,i,t,e[15],22,1236535329),r,i,e[1],5,-165796510),i=Bi(i,t,n,r,e[6],9,-1069501632),r=Bi(r,i,t,n,e[11],14,643717713),n=Bi(n,r,i,t,e[0],20,-373897302),t=Bi(t,n,r,i,e[5],5,-701558691),i=Bi(i,t,n,r,e[10],9,38016083),r=Bi(r,i,t,n,e[15],14,-660478335),n=Bi(n,r,i,t,e[4],20,-405537848),t=Bi(t,n,r,i,e[9],5,568446438),i=Bi(i,t,n,r,e[14],9,-1019803690),r=Bi(r,i,t,n,e[3],14,-187363961),n=Bi(n,r,i,t,e[8],20,1163531501),t=Bi(t,n,r,i,e[13],5,-1444681467),i=Bi(i,t,n,r,e[2],9,-51403784),r=Bi(r,i,t,n,e[7],14,1735328473),t=zi(t,n=Bi(n,r,i,t,e[12],20,-1926607734),r,i,e[5],4,-378558),i=zi(i,t,n,r,e[8],11,-2022574463),r=zi(r,i,t,n,e[11],16,1839030562),n=zi(n,r,i,t,e[14],23,-35309556),t=zi(t,n,r,i,e[1],4,-1530992060),i=zi(i,t,n,r,e[4],11,1272893353),r=zi(r,i,t,n,e[7],16,-155497632),n=zi(n,r,i,t,e[10],23,-1094730640),t=zi(t,n,r,i,e[13],4,681279174),i=zi(i,t,n,r,e[0],11,-358537222),r=zi(r,i,t,n,e[3],16,-722521979),n=zi(n,r,i,t,e[6],23,76029189),t=zi(t,n,r,i,e[9],4,-640364487),i=zi(i,t,n,r,e[12],11,-421815835),r=zi(r,i,t,n,e[15],16,530742520),t=Ui(t,n=zi(n,r,i,t,e[2],23,-995338651),r,i,e[0],6,-198630844),i=Ui(i,t,n,r,e[7],10,1126891415),r=Ui(r,i,t,n,e[14],15,-1416354905),n=Ui(n,r,i,t,e[5],21,-57434055),t=Ui(t,n,r,i,e[12],6,1700485571),i=Ui(i,t,n,r,e[3],10,-1894986606),r=Ui(r,i,t,n,e[10],15,-1051523),n=Ui(n,r,i,t,e[1],21,-2054922799),t=Ui(t,n,r,i,e[8],6,1873313359),i=Ui(i,t,n,r,e[15],10,-30611744),r=Ui(r,i,t,n,e[6],15,-1560198380),n=Ui(n,r,i,t,e[13],21,1309151649),t=Ui(t,n,r,i,e[4],6,-145523070),i=Ui(i,t,n,r,e[11],10,-1120210379),r=Ui(r,i,t,n,e[2],15,718787259),n=Ui(n,r,i,t,e[9],21,-343485551),s[0]=Fh(t,s[0]),s[1]=Fh(n,s[1]),s[2]=Fh(r,s[2]),s[3]=Fh(i,s[3])}function Cy(s,e,t,n,r,i){return e=Fh(Fh(e,s),Fh(n,i)),Fh(e<<r|e>>>32-r,t)}function ji(s,e,t,n,r,i,a){return Cy(e&t|~e&n,s,e,r,i,a)}function Bi(s,e,t,n,r,i,a){return Cy(e&n|t&~n,s,e,r,i,a)}function zi(s,e,t,n,r,i,a){return Cy(e^t^n,s,e,r,i,a)}function Ui(s,e,t,n,r,i,a){return Cy(t^(e|~n),s,e,r,i,a)}function YE(s){var e,t=s.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=s.length;e+=64)cw(n,UR(s.substring(e-64,e)));s=s.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<s.length;e++)r[e>>2]|=s.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(cw(n,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,cw(n,r),n}function UR(s){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=s.charCodeAt(e)+(s.charCodeAt(e+1)<<8)+(s.charCodeAt(e+2)<<16)+(s.charCodeAt(e+3)<<24);return t}d0=Tt.atob.bind(Tt),Xb=Tt.btoa.bind(Tt);var TS="0123456789abcdef".split("");function qR(s){for(var e="",t=0;t<4;t++)e+=TS[s>>8*t+4&15]+TS[s>>8*t&15];return e}function HR(s){return String.fromCharCode((255&s)>>0,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function Jb(s){return YE(s).map(HR).join("")}var $R=function(s){for(var e=0;e<s.length;e++)s[e]=qR(s[e]);return s.join("")}(YE("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fh(s,e){if($R){var t=(65535&s)+(65535&e);return(s>>16)+(e>>16)+(t>>16)<<16|65535&t}return s+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Qb(s,e){var t,n,r,i;if(s!==t){for(var a=(r=s,i=1+(256/s.length>>0),new Array(i+1).join(r)),l=[],c=0;c<256;c++)l[c]=c;var h=0;for(c=0;c<256;c++){var d=l[c];h=(h+d+a.charCodeAt(c))%256,l[c]=l[h],l[h]=d}t=s,n=l}else l=n;var m=e.length,y=0,v=0,x="";for(c=0;c<m;c++)v=(v+(d=l[y=(y+1)%256]))%256,l[y]=l[v],l[v]=d,a=l[(l[y]+l[v])%256],x+=String.fromCharCode(e.charCodeAt(c)^a);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var RS={print:4,modify:8,copy:16,"annot-forms":32};function $p(s,e,t,n){this.v=1,this.r=2;var r=192;s.forEach(function(l){if(RS.perm!==void 0)throw new Error("Invalid permission: "+l);r+=RS[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^r)),this.encryptionKey=Jb(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Qb(this.encryptionKey,this.padding)}function Wp(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var e="",t=s.length,n=0;n<t;n++){var r=s.charCodeAt(n);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=s[n]}return e}function IS(s){if(Ln(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,typeof t!="string"||typeof n!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!r],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),r=[];for(var i in e[t]){var a=e[t][i];try{a[0].apply(s,n)}catch(l){Tt.console&&In.error("jsPDF PubSub Error",l.message,l)}a[1]&&r.push(i)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function W2(s){if(!(this instanceof W2))return new W2(s);var e="opacity,stroke-opacity".split(",");for(var t in s)s.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=s[t]);this.id="",this.objectNumber=-1}function KE(s,e){this.gState=s,this.matrix=e,this.id="",this.objectNumber=-1}function Td(s,e,t,n,r){if(!(this instanceof Td))return new Td(s,e,t,n,r);this.type=s==="axial"?2:3,this.coords=e,this.colors=t,KE.call(this,n,r)}function Gp(s,e,t,n,r){if(!(this instanceof Gp))return new Gp(s,e,t,n,r);this.boundingBox=s,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,KE.call(this,n,r)}function Pt(s){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],r=arguments[2],i=arguments[3],a=[],l=1,c=16,h="S",d=null;Ln(s=s||{})==="object"&&(t=s.orientation,n=s.unit||n,r=s.format||r,i=s.compress||s.compressPdf||i,(d=s.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(e=s.precision),s.floatPrecision!==void 0&&(c=s.floatPrecision),h=s.defaultPathOperation||"S"),a=s.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",t=(""+(t||"P")).toLowerCase();var m=s.putOnlyUsedFonts||!1,y={},v={internal:{},__private__:{}};v.__private__.PubSub=IS;var x="1.3",S=v.__private__.getPdfVersion=function(){return x};v.__private__.setPdfVersion=function(_){x=_};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return C};var k=v.__private__.getPageFormat=function(_){return C[_]};r=r||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},M=T.COMPAT;function H(){this.saveGraphicsState(),ee(new _t(it,0,0,-it,0,rl()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),h="n",M=T.ADVANCED}function X(){this.restoreGraphicsState(),h="S",M=T.COMPAT}var he=v.__private__.combineFontStyleAndFontWeight=function(_,O){if(_=="bold"&&O=="normal"||_=="bold"&&O==400||_=="normal"&&O=="italic"||_=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(_=O==400||O==="normal"?_==="italic"?"italic":"normal":O!=700&&O!=="bold"||_!=="normal"?(O==700?"bold":O)+""+_:"bold"),_};v.advancedAPI=function(_){var O=M===T.COMPAT;return O&&H.call(this),typeof _!="function"||(_(this),O&&X.call(this)),this},v.compatAPI=function(_){var O=M===T.ADVANCED;return O&&X.call(this),typeof _!="function"||(_(this),O&&H.call(this)),this},v.isAdvancedAPI=function(){return M===T.ADVANCED};var ne,Z=function(_){if(M!==T.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},fe=v.roundToPrecision=v.__private__.roundToPrecision=function(_,O){var ie=e||O;if(isNaN(_)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(ie).replace(/0+$/,"")};ne=v.hpf=v.__private__.hpf=typeof c=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(_,c)}:c==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(_,16)};var Se=v.f2=v.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return fe(_,2)},q=v.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return fe(_,3)},V=v.scale=v.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return M===T.COMPAT?_*it:M===T.ADVANCED?_:void 0},ue=function(_){return M===T.COMPAT?rl()-_:M===T.ADVANCED?_:void 0},re=function(_){return V(ue(_))};v.__private__.setPrecision=v.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var Ee,ce="00000000000000000000000000000000",me=v.__private__.getFileId=function(){return ce},ae=v.__private__.setFileId=function(_){return ce=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&($n=new $p(d.userPermissions,d.userPassword,d.ownerPassword,ce)),ce};v.setFileId=function(_){return ae(_),this},v.getFileId=function(){return me()};var te=v.__private__.convertDateToPDFDate=function(_){var O=_.getTimezoneOffset(),ie=O<0?"+":"-",pe=Math.floor(Math.abs(O/60)),ke=Math.abs(O%60),Oe=[ie,Y(pe),"'",Y(ke),"'"].join("");return["D:",_.getFullYear(),Y(_.getMonth()+1),Y(_.getDate()),Y(_.getHours()),Y(_.getMinutes()),Y(_.getSeconds()),Oe].join("")},J=v.__private__.convertPDFDateToDate=function(_){var O=parseInt(_.substr(2,4),10),ie=parseInt(_.substr(6,2),10)-1,pe=parseInt(_.substr(8,2),10),ke=parseInt(_.substr(10,2),10),Oe=parseInt(_.substr(12,2),10),Ge=parseInt(_.substr(14,2),10);return new Date(O,ie,pe,ke,Oe,Ge,0)},G=v.__private__.setCreationDate=function(_){var O;if(_===void 0&&(_=new Date),_ instanceof Date)O=te(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=_}return Ee=O},N=v.__private__.getCreationDate=function(_){var O=Ee;return _==="jsDate"&&(O=J(Ee)),O};v.setCreationDate=function(_){return G(_),this},v.getCreationDate=function(_){return N(_)};var j,Y=v.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},se=v.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},oe=0,de=[],be=[],Ae=0,qe=[],$e=[],De=!1,Be=be,rt=function(){oe=0,Ae=0,be=[],de=[],qe=[],Za=qn(),Vs=qn()};v.__private__.setCustomOutputDestination=function(_){De=!0,Be=_};var Te=function(_){De||(Be=_)};v.__private__.resetCustomOutputDestination=function(){De=!1,Be=be};var ee=v.__private__.out=function(_){return _=_.toString(),Ae+=_.length+1,Be.push(_),Be},Ke=v.__private__.write=function(_){return ee(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Ze=v.__private__.getArrayBuffer=function(_){for(var O=_.length,ie=new ArrayBuffer(O),pe=new Uint8Array(ie);O--;)pe[O]=_.charCodeAt(O);return ie},ze=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return ze};var We=s.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(_){return We=M===T.ADVANCED?_/it:_,this};var Je,et=v.__private__.getFontSize=v.getFontSize=function(){return M===T.COMPAT?We:We*it},gt=s.R2L||!1;v.__private__.setR2L=v.setR2L=function(_){return gt=_,this},v.__private__.getR2L=v.getR2L=function(){return gt};var Nt,jt=v.__private__.setZoomMode=function(_){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Je=_;else if(isNaN(_)){if(O.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Je=_}else Je=parseInt(_,10)};v.__private__.getZoomMode=function(){return Je};var Ht,Jt=v.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');Nt=_};v.__private__.getPageMode=function(){return Nt};var on=v.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Ht=_};v.__private__.getLayoutMode=function(){return Ht},v.__private__.setDisplayMode=v.setDisplayMode=function(_,O,ie){return jt(_),on(O),Jt(ie),this};var Lt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(_){if(Object.keys(Lt).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Lt[_]},v.__private__.getDocumentProperties=function(){return Lt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(_){for(var O in Lt)Lt.hasOwnProperty(O)&&_[O]&&(Lt[O]=_[O]);return this},v.__private__.setDocumentProperty=function(_,O){if(Object.keys(Lt).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Lt[_]=O};var zt,it,$r,en,bs,An={},Pn={},_s=[],rn={},Qa={},Mn={},Wr={},Si=null,zn=0,It=[],ln=new IS(v),Wo=s.hotfixes||[],Lr={},xs={},Gs=[],_t=function _(O,ie,pe,ke,Oe,Ge){if(!(this instanceof _))return new _(O,ie,pe,ke,Oe,Ge);isNaN(O)&&(O=1),isNaN(ie)&&(ie=0),isNaN(pe)&&(pe=0),isNaN(ke)&&(ke=1),isNaN(Oe)&&(Oe=0),isNaN(Ge)&&(Ge=0),this._matrix=[O,ie,pe,ke,Oe,Ge]};Object.defineProperty(_t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(_t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(_t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(_t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(_t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(_t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(_t.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(_t.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(_t.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(_t.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(_t.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(_t.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(_t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_t.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ne).join(_)},_t.prototype.multiply=function(_){var O=_.sx*this.sx+_.shy*this.shx,ie=_.sx*this.shy+_.shy*this.sy,pe=_.shx*this.sx+_.sy*this.shx,ke=_.shx*this.shy+_.sy*this.sy,Oe=_.tx*this.sx+_.ty*this.shx+this.tx,Ge=_.tx*this.shy+_.ty*this.sy+this.ty;return new _t(O,ie,pe,ke,Oe,Ge)},_t.prototype.decompose=function(){var _=this.sx,O=this.shy,ie=this.shx,pe=this.sy,ke=this.tx,Oe=this.ty,Ge=Math.sqrt(_*_+O*O),at=(_/=Ge)*ie+(O/=Ge)*pe;ie-=_*at,pe-=O*at;var bt=Math.sqrt(ie*ie+pe*pe);return at/=bt,_*(pe/=bt)<O*(ie/=bt)&&(_=-_,O=-O,at=-at,Ge=-Ge),{scale:new _t(Ge,0,0,bt,0,0),translate:new _t(1,0,0,1,ke,Oe),rotate:new _t(_,O,-O,_,0,0),skew:new _t(1,0,at,1,0,0)}},_t.prototype.toString=function(_){return this.join(" ")},_t.prototype.inversed=function(){var _=this.sx,O=this.shy,ie=this.shx,pe=this.sy,ke=this.tx,Oe=this.ty,Ge=1/(_*pe-O*ie),at=pe*Ge,bt=-O*Ge,Dt=-ie*Ge,Mt=_*Ge;return new _t(at,bt,Dt,Mt,-at*ke-Dt*Oe,-bt*ke-Mt*Oe)},_t.prototype.applyToPoint=function(_){var O=_.x*this.sx+_.y*this.shx+this.tx,ie=_.x*this.shy+_.y*this.sy+this.ty;return new Pa(O,ie)},_t.prototype.applyToRectangle=function(_){var O=this.applyToPoint(_),ie=this.applyToPoint(new Pa(_.x+_.w,_.y+_.h));return new nl(O.x,O.y,ie.x-O.x,ie.y-O.y)},_t.prototype.clone=function(){var _=this.sx,O=this.shy,ie=this.shx,pe=this.sy,ke=this.tx,Oe=this.ty;return new _t(_,O,ie,pe,ke,Oe)},v.Matrix=_t;var Qi=v.matrixMult=function(_,O){return O.multiply(_)},Ei=new _t(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=Ei;var ki=function(_,O){if(!Qa[_]){var ie=(O instanceof Td?"Sh":"P")+(Object.keys(rn).length+1).toString(10);O.id=ie,Qa[_]=ie,rn[ie]=O,ln.publish("addPattern",O)}};v.ShadingPattern=Td,v.TilingPattern=Gp,v.addShadingPattern=function(_,O){return Z("addShadingPattern()"),ki(_,O),this},v.beginTilingPattern=function(_){Z("beginTilingPattern()"),rp(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},v.endTilingPattern=function(_,O){Z("endTilingPattern()"),O.stream=$e[j].join(`
`),ki(_,O),ln.publish("endTilingPattern",O),Gs.pop().restore()};var Un=v.__private__.newObject=function(){var _=qn();return Gr(_,!0),_},qn=v.__private__.newObjectDeferred=function(){return oe++,de[oe]=function(){return Ae},oe},Gr=function(_,O){return O=typeof O=="boolean"&&O,de[_]=Ae,O&&ee(_+" 0 obj"),_},Go=v.__private__.newAdditionalObject=function(){var _={objId:qn(),content:""};return qe.push(_),_},Za=qn(),Vs=qn(),Ys=v.__private__.decodeColorString=function(_){var O=_.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var ie=parseFloat(O[0]);O=[ie,ie,ie,"r"]}for(var pe="#",ke=0;ke<3;ke++)pe+=("0"+Math.floor(255*parseFloat(O[ke])).toString(16)).slice(-2);return pe},Or=v.__private__.encodeColorString=function(_){var O;typeof _=="string"&&(_={ch1:_});var ie=_.ch1,pe=_.ch2,ke=_.ch3,Oe=_.ch4,Ge=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var at=new VE(ie);if(at.ok)ie=at.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var bt=parseInt(ie.substr(1),16);ie=bt>>16&255,pe=bt>>8&255,ke=255&bt}if(pe===void 0||Oe===void 0&&ie===pe&&pe===ke)if(typeof ie=="string")O=ie+" "+Ge[0];else switch(_.precision){case 2:O=Se(ie/255)+" "+Ge[0];break;case 3:default:O=q(ie/255)+" "+Ge[0]}else if(Oe===void 0||Ln(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return O=["1.","1.","1.",Ge[1]].join(" ");if(typeof ie=="string")O=[ie,pe,ke,Ge[1]].join(" ");else switch(_.precision){case 2:O=[Se(ie/255),Se(pe/255),Se(ke/255),Ge[1]].join(" ");break;default:case 3:O=[q(ie/255),q(pe/255),q(ke/255),Ge[1]].join(" ")}}else if(typeof ie=="string")O=[ie,pe,ke,Oe,Ge[2]].join(" ");else switch(_.precision){case 2:O=[Se(ie),Se(pe),Se(ke),Se(Oe),Ge[2]].join(" ");break;case 3:default:O=[q(ie),q(pe),q(ke),q(Oe),Ge[2]].join(" ")}return O},Ks=v.__private__.getFilters=function(){return a},Zi=v.__private__.putStream=function(_){var O=(_=_||{}).data||"",ie=_.filters||Ks(),pe=_.alreadyAppliedFilters||[],ke=_.addLength1||!1,Oe=O.length,Ge=_.objectId,at=function(Vr){return Vr};if(d!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(at=$n.encryptor(Ge,0));var bt={};ie===!0&&(ie=["FlateEncode"]);var Dt=_.additionalKeyValues||[],Mt=(bt=Pt.API.processDataByFilters!==void 0?Pt.API.processDataByFilters(O,ie):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(bt.data.length!==0&&(Dt.push({key:"Length",value:bt.data.length}),ke===!0&&Dt.push({key:"Length1",value:Oe})),Mt.length!=0)if(Mt.split("/").length-1==1)Dt.push({key:"Filter",value:Mt});else{Dt.push({key:"Filter",value:"["+Mt+"]"});for(var Qt=0;Qt<Dt.length;Qt+=1)if(Dt[Qt].key==="DecodeParms"){for(var Wn=[],Jn=0;Jn<bt.reverseChain.split("/").length-1;Jn+=1)Wn.push("null");Wn.push(Dt[Qt].value),Dt[Qt].value="["+Wn.join(" ")+"]"}}ee("<<");for(var ur=0;ur<Dt.length;ur++)ee("/"+Dt[ur].key+" "+Dt[ur].value);ee(">>"),bt.data.length!==0&&(ee("stream"),ee(at(bt.data)),ee("endstream"))},Sa=v.__private__.putPage=function(_){var O=_.number,ie=_.data,pe=_.objId,ke=_.contentsObjId;Gr(pe,!0),ee("<</Type /Page"),ee("/Parent "+_.rootDictionaryObjId+" 0 R"),ee("/Resources "+_.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(ne(_.mediaBox.bottomLeftX))+" "+parseFloat(ne(_.mediaBox.bottomLeftY))+" "+ne(_.mediaBox.topRightX)+" "+ne(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&ee("/CropBox ["+ne(_.cropBox.bottomLeftX)+" "+ne(_.cropBox.bottomLeftY)+" "+ne(_.cropBox.topRightX)+" "+ne(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&ee("/BleedBox ["+ne(_.bleedBox.bottomLeftX)+" "+ne(_.bleedBox.bottomLeftY)+" "+ne(_.bleedBox.topRightX)+" "+ne(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&ee("/TrimBox ["+ne(_.trimBox.bottomLeftX)+" "+ne(_.trimBox.bottomLeftY)+" "+ne(_.trimBox.topRightX)+" "+ne(_.trimBox.topRightY)+"]"),_.artBox!==null&&ee("/ArtBox ["+ne(_.artBox.bottomLeftX)+" "+ne(_.artBox.bottomLeftY)+" "+ne(_.artBox.topRightX)+" "+ne(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&ee("/UserUnit "+_.userUnit),ln.publish("putPage",{objId:pe,pageContext:It[O],pageNumber:O,page:ie}),ee("/Contents "+ke+" 0 R"),ee(">>"),ee("endobj");var Oe=ie.join(`
`);return M===T.ADVANCED&&(Oe+=`
Q`),Gr(ke,!0),Zi({data:Oe,filters:Ks(),objectId:ke}),ee("endobj"),pe},Vo=v.__private__.putPages=function(){var _,O,ie=[];for(_=1;_<=zn;_++)It[_].objId=qn(),It[_].contentsObjId=qn();for(_=1;_<=zn;_++)ie.push(Sa({number:_,data:$e[_],objId:It[_].objId,contentsObjId:It[_].contentsObjId,mediaBox:It[_].mediaBox,cropBox:It[_].cropBox,bleedBox:It[_].bleedBox,trimBox:It[_].trimBox,artBox:It[_].artBox,userUnit:It[_].userUnit,rootDictionaryObjId:Za,resourceDictionaryObjId:Vs}));Gr(Za,!0),ee("<</Type /Pages");var pe="/Kids [";for(O=0;O<zn;O++)pe+=ie[O]+" 0 R ";ee(pe+"]"),ee("/Count "+zn),ee(">>"),ee("endobj"),ln.publish("postPutPages")},Ul=function(_){ln.publish("putFont",{font:_,out:ee,newObject:Un,putStream:Zi}),_.isAlreadyPutted!==!0&&(_.objectNumber=Un(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Wp(_.postScriptName)),ee("/Subtype /Type1"),typeof _.encoding=="string"&&ee("/Encoding /"+_.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},ql=function(){for(var _ in An)An.hasOwnProperty(_)&&(m===!1||m===!0&&y.hasOwnProperty(_))&&Ul(An[_])},Hl=function(_){_.objectNumber=Un();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[ne(_.x),ne(_.y),ne(_.x+_.width),ne(_.y+_.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var ie=_.pages[1].join(`
`);Zi({data:ie,additionalKeyValues:O,objectId:_.objectNumber}),ee("endobj")},ac=function(){for(var _ in Lr)Lr.hasOwnProperty(_)&&Hl(Lr[_])},Kf=function(_,O){var ie,pe=[],ke=1/(O-1);for(ie=0;ie<1;ie+=ke)pe.push(ie);if(pe.push(1),_[0].offset!=0){var Oe={offset:0,color:_[0].color};_.unshift(Oe)}if(_[_.length-1].offset!=1){var Ge={offset:1,color:_[_.length-1].color};_.push(Ge)}for(var at="",bt=0,Dt=0;Dt<pe.length;Dt++){for(ie=pe[Dt];ie>_[bt+1].offset;)bt++;var Mt=_[bt].offset,Qt=(ie-Mt)/(_[bt+1].offset-Mt),Wn=_[bt].color,Jn=_[bt+1].color;at+=se(Math.round((1-Qt)*Wn[0]+Qt*Jn[0]).toString(16))+se(Math.round((1-Qt)*Wn[1]+Qt*Jn[1]).toString(16))+se(Math.round((1-Qt)*Wn[2]+Qt*Jn[2]).toString(16))}return at.trim()},Hn=function(_,O){O||(O=21);var ie=Un(),pe=Kf(_.colors,O),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+O+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zi({data:pe,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),ee("endobj"),_.objectNumber=Un(),ee("<< /ShadingType "+_.type),ee("/ColorSpace /DeviceRGB");var Oe="/Coords ["+ne(parseFloat(_.coords[0]))+" "+ne(parseFloat(_.coords[1]))+" ";_.type===2?Oe+=ne(parseFloat(_.coords[2]))+" "+ne(parseFloat(_.coords[3])):Oe+=ne(parseFloat(_.coords[2]))+" "+ne(parseFloat(_.coords[3]))+" "+ne(parseFloat(_.coords[4]))+" "+ne(parseFloat(_.coords[5])),ee(Oe+="]"),_.matrix&&ee("/Matrix ["+_.matrix.toString()+"]"),ee("/Function "+ie+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},dm=function(_,O){var ie=qn(),pe=Un();O.push({resourcesOid:ie,objectOid:pe}),_.objectNumber=pe;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+_.boundingBox.map(ne).join(" ")+"]"}),ke.push({key:"XStep",value:ne(_.xStep)}),ke.push({key:"YStep",value:ne(_.yStep)}),ke.push({key:"Resources",value:ie+" 0 R"}),_.matrix&&ke.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Zi({data:_.stream,additionalKeyValues:ke,objectId:_.objectNumber}),ee("endobj")},Yo=function(_){var O;for(O in rn)rn.hasOwnProperty(O)&&(rn[O]instanceof Td?Hn(rn[O]):rn[O]instanceof Gp&&dm(rn[O],_))},Vh=function(_){for(var O in _.objectNumber=Un(),ee("<<"),_)switch(O){case"opacity":ee("/ca "+Se(_[O]));break;case"stroke-opacity":ee("/CA "+Se(_[O]))}ee(">>"),ee("endobj")},oc=function(){var _;for(_ in Mn)Mn.hasOwnProperty(_)&&Vh(Mn[_])},Yh=function(){for(var _ in ee("/XObject <<"),Lr)Lr.hasOwnProperty(_)&&Lr[_].objectNumber>=0&&ee("/"+_+" "+Lr[_].objectNumber+" 0 R");ln.publish("putXobjectDict"),ee(">>")},Xf=function(){$n.oid=Un(),ee("<<"),ee("/Filter /Standard"),ee("/V "+$n.v),ee("/R "+$n.r),ee("/U <"+$n.toHexString($n.U)+">"),ee("/O <"+$n.toHexString($n.O)+">"),ee("/P "+$n.P),ee(">>"),ee("endobj")},$l=function(){for(var _ in ee("/Font <<"),An)An.hasOwnProperty(_)&&(m===!1||m===!0&&y.hasOwnProperty(_))&&ee("/"+_+" "+An[_].objectNumber+" 0 R");ee(">>")},As=function(){if(Object.keys(rn).length>0){for(var _ in ee("/Shading <<"),rn)rn.hasOwnProperty(_)&&rn[_]instanceof Td&&rn[_].objectNumber>=0&&ee("/"+_+" "+rn[_].objectNumber+" 0 R");ln.publish("putShadingPatternDict"),ee(">>")}},lc=function(_){if(Object.keys(rn).length>0){for(var O in ee("/Pattern <<"),rn)rn.hasOwnProperty(O)&&rn[O]instanceof v.TilingPattern&&rn[O].objectNumber>=0&&rn[O].objectNumber<_&&ee("/"+O+" "+rn[O].objectNumber+" 0 R");ln.publish("putTilingPatternDict"),ee(">>")}},es=function(){if(Object.keys(Mn).length>0){var _;for(_ in ee("/ExtGState <<"),Mn)Mn.hasOwnProperty(_)&&Mn[_].objectNumber>=0&&ee("/"+_+" "+Mn[_].objectNumber+" 0 R");ln.publish("putGStateDict"),ee(">>")}},rr=function(_){Gr(_.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),$l(),As(),lc(_.objectOid),es(),Yh(),ee(">>"),ee("endobj")},Jf=function(){var _=[];ql(),oc(),ac(),Yo(_),ln.publish("putResources"),_.forEach(rr),rr({resourcesOid:Vs,objectOid:Number.MAX_SAFE_INTEGER}),ln.publish("postPutResources")},Qf=function(){ln.publish("putAdditionalObjects");for(var _=0;_<qe.length;_++){var O=qe[_];Gr(O.objId,!0),ee(O.content),ee("endobj")}ln.publish("postPutAdditionalObjects")},Wl=function(_){Pn[_.fontName]=Pn[_.fontName]||{},Pn[_.fontName][_.fontStyle]=_.id},Ko=function(_,O,ie,pe,ke){var Oe={id:"F"+(Object.keys(An).length+1).toString(10),postScriptName:_,fontName:O,fontStyle:ie,encoding:pe,isStandardFont:ke||!1,metadata:{}};return ln.publish("addFont",{font:Oe,instance:this}),An[Oe.id]=Oe,Wl(Oe),Oe.id},Gl=function(_){for(var O=0,ie=ze.length;O<ie;O++){var pe=Ko.call(this,_[O][0],_[O][1],_[O][2],ze[O][3],!0);m===!1&&(y[pe]=!0);var ke=_[O][0].split("-");Wl({id:pe,fontName:ke[0],fontStyle:ke[1]||""})}ln.publish("addFonts",{fonts:An,dictionary:Pn})},Ci=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(pe){var O=pe.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var ie="Error in function "+O.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Tt.console)throw new Error(ie);Tt.console.error(ie,pe),Tt.alert&&alert(ie)}},_.foo.bar=_,_.foo},uc=function(_,O){var ie,pe,ke,Oe,Ge,at,bt,Dt,Mt;if(ke=(O=O||{}).sourceEncoding||"Unicode",Ge=O.outputEncoding,(O.autoencode||Ge)&&An[zt].metadata&&An[zt].metadata[ke]&&An[zt].metadata[ke].encoding&&(Oe=An[zt].metadata[ke].encoding,!Ge&&An[zt].encoding&&(Ge=An[zt].encoding),!Ge&&Oe.codePages&&(Ge=Oe.codePages[0]),typeof Ge=="string"&&(Ge=Oe[Ge]),Ge)){for(bt=!1,at=[],ie=0,pe=_.length;ie<pe;ie++)(Dt=Ge[_.charCodeAt(ie)])?at.push(String.fromCharCode(Dt)):at.push(_[ie]),at[ie].charCodeAt(0)>>8&&(bt=!0);_=at.join("")}for(ie=_.length;bt===void 0&&ie!==0;)_.charCodeAt(ie-1)>>8&&(bt=!0),ie--;if(!bt)return _;for(at=O.noBOM?[]:[254,255],ie=0,pe=_.length;ie<pe;ie++){if((Mt=(Dt=_.charCodeAt(ie))>>8)>>8)throw new Error("Character at position "+ie+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");at.push(Mt),at.push(Dt-(Mt<<8))}return String.fromCharCode.apply(void 0,at)},Li=v.__private__.pdfEscape=v.pdfEscape=function(_,O){return uc(_,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vl=v.__private__.beginPage=function(_){$e[++zn]=[],It[zn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Xo(zn),Te($e[j])},Kh=function(_,O){var ie,pe,ke;switch(t=O||t,typeof _=="string"&&(ie=k(_.toLowerCase()),Array.isArray(ie)&&(pe=ie[0],ke=ie[1])),Array.isArray(_)&&(pe=_[0]*it,ke=_[1]*it),isNaN(pe)&&(pe=r[0],ke=r[1]),(pe>14400||ke>14400)&&(In.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),ke=Math.min(14400,ke)),r=[pe,ke],t.substr(0,1)){case"l":ke>pe&&(r=[ke,pe]);break;case"p":pe>ke&&(r=[ke,pe])}Vl(r),Ql(Zh),ee(Pi),td!==0&&ee(td+" J"),eu!==0&&ee(eu+" j"),ln.publish("addPage",{pageNumber:zn})},Xh=function(_){_>0&&_<=zn&&($e.splice(_,1),It.splice(_,1),zn--,j>zn&&(j=zn),this.setPage(j))},Xo=function(_){_>0&&_<=zn&&(j=_)},fm=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return $e.length-1},cc=function(_,O,ie){var pe,ke=void 0;return ie=ie||{},_=_!==void 0?_:An[zt].fontName,O=O!==void 0?O:An[zt].fontStyle,pe=_.toLowerCase(),Pn[pe]!==void 0&&Pn[pe][O]!==void 0?ke=Pn[pe][O]:Pn[_]!==void 0&&Pn[_][O]!==void 0?ke=Pn[_][O]:ie.disableWarning===!1&&In.warn("Unable to look up font label for font '"+_+"', '"+O+"'. Refer to getFontList() for available fonts."),ke||ie.noFallback||(ke=Pn.times[O])==null&&(ke=Pn.times.normal),ke},un=v.__private__.putInfo=function(){var _=Un(),O=function(pe){return pe};for(var ie in d!==null&&(O=$n.encryptor(_,0)),ee("<<"),ee("/Producer ("+Li(O("jsPDF "+Pt.version))+")"),Lt)Lt.hasOwnProperty(ie)&&Lt[ie]&&ee("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+Li(O(Lt[ie]))+")");ee("/CreationDate ("+Li(O(Ee))+")"),ee(">>"),ee("endobj")},hc=v.__private__.putCatalog=function(_){var O=(_=_||{}).rootDictionaryObjId||Za;switch(Un(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+O+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+Je;ie.substr(ie.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+Se(Je)+"]")}switch(Ht||(Ht="continuous"),Ht){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}Nt&&ee("/PageMode /"+Nt),ln.publish("putCatalog"),ee(">>"),ee("endobj")},Zf=v.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(oe+1)),ee("/Root "+oe+" 0 R"),ee("/Info "+(oe-1)+" 0 R"),d!==null&&ee("/Encrypt "+$n.oid+" 0 R"),ee("/ID [ <"+ce+"> <"+ce+"> ]"),ee(">>")},Jh=v.__private__.putHeader=function(){ee("%PDF-"+x),ee("%")},ep=v.__private__.putXRef=function(){var _="0000000000";ee("xref"),ee("0 "+(oe+1)),ee("0000000000 65535 f ");for(var O=1;O<=oe;O++)typeof de[O]=="function"?ee((_+de[O]()).slice(-10)+" 00000 n "):de[O]!==void 0?ee((_+de[O]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},Ea=v.__private__.buildDocument=function(){rt(),Te(be),ln.publish("buildDocument"),Jh(),Vo(),Qf(),Jf(),d!==null&&Xf(),un(),hc();var _=Ae;return ep(),Zf(),ee("startxref"),ee(""+_),ee("%%EOF"),Te($e[j]),be.join(`
`)},Yl=v.__private__.getBlob=function(_){return new Blob([Ze(_)],{type:"application/pdf"})},Jo=v.output=v.__private__.output=Ci(function(_,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",_){case void 0:return Ea();case"save":v.save(O.filename);break;case"arraybuffer":return Ze(Ea());case"blob":return Yl(Ea());case"bloburi":case"bloburl":if(Tt.URL!==void 0&&typeof Tt.URL.createObjectURL=="function")return Tt.URL&&Tt.URL.createObjectURL(Yl(Ea()))||void 0;In.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",pe=Ea();try{ie=Xb(pe)}catch{ie=Xb(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+O.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Tt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(ke=O.pdfObjectUrl,Oe="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",at=Tt.open();return at!==null&&at.document.write(Ge),at}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Tt)==="[object Window]"){var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',Dt=Tt.open();if(Dt!==null){Dt.document.write(bt);var Mt=this;Dt.document.documentElement.querySelector("#pdfViewer").onload=function(){Dt.document.title=O.filename,Dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mt.output("bloburl"))}}return Dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Tt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Wn=Tt.open();if(Wn!==null&&(Wn.document.write(Qt),Wn.document.title=O.filename),Wn||typeof safari>"u")return Wn;break;case"datauri":case"dataurl":return Tt.document.location.href=this.output("datauristring",O);default:return null}}),Kl=function(_){return Array.isArray(Wo)===!0&&Wo.indexOf(_)>-1};switch(n){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=Kl("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);it=n}var $n=null;G(),ae();var ka=function(_){return d!==null?$n.encryptor(_,0):function(O){return O}},Xs=v.__private__.getPageInfo=v.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[_].objId,pageNumber:_,pageContext:It[_]}},Et=v.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in It)if(It[O].objId===_)break;return Xs(O)},Xl=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:It[j].objId,pageNumber:j,pageContext:It[j]}};v.addPage=function(){return Kh.apply(this,arguments),this},v.setPage=function(){return Xo.apply(this,arguments),Te.call(this,$e[j]),this},v.insertPage=function(_){return this.addPage(),this.movePage(j,_),this},v.movePage=function(_,O){var ie,pe;if(_>O){ie=$e[_],pe=It[_];for(var ke=_;ke>O;ke--)$e[ke]=$e[ke-1],It[ke]=It[ke-1];$e[O]=ie,It[O]=pe,this.setPage(O)}else if(_<O){ie=$e[_],pe=It[_];for(var Oe=_;Oe<O;Oe++)$e[Oe]=$e[Oe+1],It[Oe]=It[Oe+1];$e[O]=ie,It[O]=pe,this.setPage(O)}return this},v.deletePage=function(){return Xh.apply(this,arguments),this},v.__private__.text=v.text=function(_,O,ie,pe,ke){var Oe,Ge,at,bt,Dt,Mt,Qt,Wn,Jn,ur=(pe=pe||{}).scope||this;if(typeof _=="number"&&typeof O=="number"&&(typeof ie=="string"||Array.isArray(ie))){var Vr=ie;ie=O,O=_,_=Vr}if(arguments[3]instanceof _t?(Z("The transform parameter of text() with a Matrix value"),Jn=ke):(at=arguments[4],bt=arguments[5],Ln(Qt=arguments[3])==="object"&&Qt!==null||(typeof at=="string"&&(bt=at,at=null),typeof Qt=="string"&&(bt=Qt,Qt=null),typeof Qt=="number"&&(at=Qt,Qt=null),pe={flags:Qt,angle:at,align:bt})),isNaN(O)||isNaN(ie)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return ur;var Pr="",ea=!1,ns=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:Jl,ks=ur.internal.scaleFactor;function il(Sn){return Sn=Sn.split("	").join(Array(pe.TabLen||9).join(" ")),Li(Sn,Qt)}function id(Sn){for(var vn,Zn=Sn.concat(),cr=[],Ra=Zn.length;Ra--;)typeof(vn=Zn.shift())=="string"?cr.push(vn):Array.isArray(Sn)&&(vn.length===1||vn[1]===void 0&&vn[2]===void 0)?cr.push(vn[0]):cr.push([vn[0],vn[1],vn[2]]);return cr}function _c(Sn,vn){var Zn;if(typeof Sn=="string")Zn=vn(Sn)[0];else if(Array.isArray(Sn)){for(var cr,Ra,Tc=Sn.concat(),lu=[],od=Tc.length;od--;)typeof(cr=Tc.shift())=="string"?lu.push(vn(cr)[0]):Array.isArray(cr)&&typeof cr[0]=="string"&&(Ra=vn(cr[0],cr[1],cr[2]),lu.push([Ra[0],Ra[1],Ra[2]]));Zn=lu}return Zn}var tu=!1,xc=!0;if(typeof _=="string")tu=!0;else if(Array.isArray(_)){var Ac=_.concat();Ge=[];for(var nu,Qn=Ac.length;Qn--;)(typeof(nu=Ac.shift())!="string"||Array.isArray(nu)&&typeof nu[0]!="string")&&(xc=!1);tu=xc}if(tu===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var Sc=We/ur.internal.scaleFactor,Ec=Sc*(ns-1);switch(pe.baseline){case"bottom":ie-=Ec;break;case"top":ie+=Sc-Ec;break;case"hanging":ie+=Sc-2*Ec;break;case"middle":ie+=Sc/2-Ec}if((Mt=pe.maxWidth||0)>0&&(typeof _=="string"?_=ur.splitTextToSize(_,Mt):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Sn,vn){return Sn.concat(ur.splitTextToSize(vn,Mt))},[]))),Oe={text:_,x:O,y:ie,options:pe,mutex:{pdfEscape:Li,activeFontKey:zt,fonts:An,activeFontSize:We}},ln.publish("preProcessText",Oe),_=Oe.text,at=(pe=Oe.options).angle,!(Jn instanceof _t)&&at&&typeof at=="number"){at*=Math.PI/180,pe.rotationDirection===0&&(at=-at),M===T.ADVANCED&&(at=-at);var kc=Math.cos(at),Cc=Math.sin(at);Jn=new _t(kc,Cc,-Cc,kc,0,0)}else at&&at instanceof _t&&(Jn=at);M!==T.ADVANCED||Jn||(Jn=Ei),(Dt=pe.charSpace||tl)!==void 0&&(Pr+=ne(V(Dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Wn=pe.horizontalScale)!==void 0&&(Pr+=ne(100*Wn)+` Tz
`),pe.lang;var ci=-1,ru=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,no=ur.internal.getCurrentPageInfo().pageContext;switch(ru){case 0:case!1:case"fill":ci=0;break;case 1:case!0:case"stroke":ci=1;break;case 2:case"fillThenStroke":ci=2;break;case 3:case"invisible":ci=3;break;case 4:case"fillAndAddForClipping":ci=4;break;case 5:case"strokeAndAddPathForClipping":ci=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ci=6;break;case 7:case"addToPathForClipping":ci=7}var ip=no.usedRenderingMode!==void 0?no.usedRenderingMode:-1;ci!==-1?Pr+=ci+` Tr
`:ip!==-1&&(Pr+=`0 Tr
`),ci!==-1&&(no.usedRenderingMode=ci),bt=pe.align||"left";var hi,Lc=We*ns,sd=ur.internal.pageSize.getWidth(),Pc=An[zt];Dt=pe.charSpace||tl,Mt=pe.maxWidth||0,Qt=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var Na=[],sl=function(Sn){return ur.getStringUnitWidth(Sn,{font:Pc,charSpace:Dt,fontSize:We,doKerning:!1})*We/ks};if(Object.prototype.toString.call(_)==="[object Array]"){var di;Ge=id(_),bt!=="left"&&(hi=Ge.map(sl));var Yr,al=0;if(bt==="right"){O-=hi[0],_=[],Qn=Ge.length;for(var ro=0;ro<Qn;ro++)ro===0?(Yr=Ss(O),di=Es(ie)):(Yr=V(al-hi[ro]),di=-Lc),_.push([Ge[ro],Yr,di]),al=hi[ro]}else if(bt==="center"){O-=hi[0]/2,_=[],Qn=Ge.length;for(var io=0;io<Qn;io++)io===0?(Yr=Ss(O),di=Es(ie)):(Yr=V((al-hi[io])/2),di=-Lc),_.push([Ge[io],Yr,di]),al=hi[io]}else if(bt==="left"){_=[],Qn=Ge.length;for(var Nc=0;Nc<Qn;Nc++)_.push(Ge[Nc])}else if(bt==="justify"&&Pc.encoding==="Identity-H"){_=[],Qn=Ge.length,Mt=Mt!==0?Mt:sd;for(var so=0,cn=0;cn<Qn;cn++)if(di=cn===0?Es(ie):-Lc,Yr=cn===0?Ss(O):so,cn<Qn-1){var ao=V((Mt-hi[cn])/(Ge[cn].split(" ").length-1)),Kr=Ge[cn].split(" ");_.push([Kr[0]+" ",Yr,di]),so=0;for(var rs=1;rs<Kr.length;rs++){var iu=(sl(Kr[rs-1]+" "+Kr[rs])-sl(Kr[rs]))*ks+ao;rs==Kr.length-1?_.push([Kr[rs],iu,0]):_.push([Kr[rs]+" ",iu,0]),so-=iu}}else _.push([Ge[cn],Yr,di]);_.push(["",so,0])}else{if(bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],Qn=Ge.length,Mt=Mt!==0?Mt:sd,cn=0;cn<Qn;cn++)di=cn===0?Es(ie):-Lc,Yr=cn===0?Ss(O):0,cn<Qn-1?Na.push(ne(V((Mt-hi[cn])/(Ge[cn].split(" ").length-1)))):Na.push(0),_.push([Ge[cn],Yr,di])}}var ad=typeof pe.R2L=="boolean"?pe.R2L:gt;ad===!0&&(_=_c(_,function(Sn,vn,Zn){return[Sn.split("").reverse().join(""),vn,Zn]})),Oe={text:_,x:O,y:ie,options:pe,mutex:{pdfEscape:Li,activeFontKey:zt,fonts:An,activeFontSize:We}},ln.publish("postProcessText",Oe),_=Oe.text,ea=Oe.mutex.isHex||!1;var su=An[zt].encoding;su!=="WinAnsiEncoding"&&su!=="StandardEncoding"||(_=_c(_,function(Sn,vn,Zn){return[il(Sn),vn,Zn]})),Ge=id(_),_=[];for(var au,ou,is,oo=0,Ta=1,lo=Array.isArray(Ge[0])?Ta:oo,uo="",ol=function(Sn,vn,Zn){var cr="";return Zn instanceof _t?(Zn=typeof pe.angle=="number"?Qi(Zn,new _t(1,0,0,1,Sn,vn)):Qi(new _t(1,0,0,1,Sn,vn),Zn),M===T.ADVANCED&&(Zn=Qi(new _t(1,0,0,-1,0,0),Zn)),cr=Zn.join(" ")+` Tm
`):cr=ne(Sn)+" "+ne(vn)+` Td
`,cr},Mr=0;Mr<Ge.length;Mr++){switch(uo="",lo){case Ta:is=(ea?"<":"(")+Ge[Mr][0]+(ea?">":")"),au=parseFloat(Ge[Mr][1]),ou=parseFloat(Ge[Mr][2]);break;case oo:is=(ea?"<":"(")+Ge[Mr]+(ea?">":")"),au=Ss(O),ou=Es(ie)}Na!==void 0&&Na[Mr]!==void 0&&(uo=Na[Mr]+` Tw
`),Mr===0?_.push(uo+ol(au,ou,Jn)+is):lo===oo?_.push(uo+is):lo===Ta&&_.push(uo+ol(au,ou,Jn)+is)}_=lo===oo?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Ni=`BT
/`;return Ni+=zt+" "+We+` Tf
`,Ni+=ne(We*ns)+` TL
`,Ni+=mr+`
`,Ni+=Pr,Ni+=_,ee(Ni+="ET"),y[zt]=!0,ur};var Ca=v.__private__.clip=v.clip=function(_){return ee(_==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Ca("evenodd")},v.__private__.discardPath=v.discardPath=function(){return ee("n"),this};var La=v.__private__.isValidStyle=function(_){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(O=!0),O};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(_){return La(_)&&(h=_),this};var Qh=v.__private__.getStyle=v.getStyle=function(_){var O=h;switch(_){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=_}return O},Qo=v.close=function(){return ee("h"),this};v.stroke=function(){return ee("S"),this},v.fill=function(_){return dc("f",_),this},v.fillEvenOdd=function(_){return dc("f*",_),this},v.fillStroke=function(_){return dc("B",_),this},v.fillStrokeEvenOdd=function(_){return dc("B*",_),this};var dc=function(_,O){Ln(O)==="object"?tp(O,_):ee(_)},fc=function(_){_===null||M===T.ADVANCED&&_===void 0||(_=Qh(_),ee(_))};function pc(_,O,ie,pe,ke){var Oe=new Gp(O||this.boundingBox,ie||this.xStep,pe||this.yStep,this.gState,ke||this.matrix);Oe.stream=this.stream;var Ge=_+"$$"+this.cloneIndex+++"$$";return ki(Ge,Oe),Oe}var tp=function(_,O){var ie=Qa[_.key],pe=rn[ie];if(pe instanceof Td)ee("q"),ee(pm(O)),pe.gState&&v.setGState(pe.gState),ee(_.matrix.toString()+" cm"),ee("/"+ie+" sh"),ee("Q");else if(pe instanceof Gp){var ke=new _t(1,0,0,-1,0,rl());_.matrix&&(ke=ke.multiply(_.matrix||Ei),ie=pc.call(pe,_.key,_.boundingBox,_.xStep,_.yStep,ke).id),ee("q"),ee("/Pattern cs"),ee("/"+ie+" scn"),pe.gState&&v.setGState(pe.gState),ee(O),ee("Q")}},pm=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},eo=v.moveTo=function(_,O){return ee(ne(V(_))+" "+ne(re(O))+" m"),this},Js=v.lineTo=function(_,O){return ee(ne(V(_))+" "+ne(re(O))+" l"),this},ts=v.curveTo=function(_,O,ie,pe,ke,Oe){return ee([ne(V(_)),ne(re(O)),ne(V(ie)),ne(re(pe)),ne(V(ke)),ne(re(Oe)),"c"].join(" ")),this};v.__private__.line=v.line=function(_,O,ie,pe,ke){if(isNaN(_)||isNaN(O)||isNaN(ie)||isNaN(pe)||!La(ke))throw new Error("Invalid arguments passed to jsPDF.line");return M===T.COMPAT?this.lines([[ie-_,pe-O]],_,O,[1,1],ke||"S"):this.lines([[ie-_,pe-O]],_,O,[1,1]).stroke()},v.__private__.lines=v.lines=function(_,O,ie,pe,ke,Oe){var Ge,at,bt,Dt,Mt,Qt,Wn,Jn,ur,Vr,Pr,ea;if(typeof _=="number"&&(ea=ie,ie=O,O=_,_=ea),pe=pe||[1,1],Oe=Oe||!1,isNaN(O)||isNaN(ie)||!Array.isArray(_)||!Array.isArray(pe)||!La(ke)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(eo(O,ie),Ge=pe[0],at=pe[1],Dt=_.length,Vr=O,Pr=ie,bt=0;bt<Dt;bt++)(Mt=_[bt]).length===2?(Vr=Mt[0]*Ge+Vr,Pr=Mt[1]*at+Pr,Js(Vr,Pr)):(Qt=Mt[0]*Ge+Vr,Wn=Mt[1]*at+Pr,Jn=Mt[2]*Ge+Vr,ur=Mt[3]*at+Pr,Vr=Mt[4]*Ge+Vr,Pr=Mt[5]*at+Pr,ts(Qt,Wn,Jn,ur,Vr,Pr));return Oe&&Qo(),fc(ke),this},v.path=function(_){for(var O=0;O<_.length;O++){var ie=_[O],pe=ie.c;switch(ie.op){case"m":eo(pe[0],pe[1]);break;case"l":Js(pe[0],pe[1]);break;case"c":ts.apply(this,pe);break;case"h":Qo()}}return this},v.__private__.rect=v.rect=function(_,O,ie,pe,ke){if(isNaN(_)||isNaN(O)||isNaN(ie)||isNaN(pe)||!La(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return M===T.COMPAT&&(pe=-pe),ee([ne(V(_)),ne(re(O)),ne(V(ie)),ne(V(pe)),"re"].join(" ")),fc(ke),this},v.__private__.triangle=v.triangle=function(_,O,ie,pe,ke,Oe,Ge){if(isNaN(_)||isNaN(O)||isNaN(ie)||isNaN(pe)||isNaN(ke)||isNaN(Oe)||!La(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-_,pe-O],[ke-ie,Oe-pe],[_-ke,O-Oe]],_,O,[1,1],Ge,!0),this},v.__private__.roundedRect=v.roundedRect=function(_,O,ie,pe,ke,Oe,Ge){if(isNaN(_)||isNaN(O)||isNaN(ie)||isNaN(pe)||isNaN(ke)||isNaN(Oe)||!La(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var at=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*ie),Oe=Math.min(Oe,.5*pe),this.lines([[ie-2*ke,0],[ke*at,0,ke,Oe-Oe*at,ke,Oe],[0,pe-2*Oe],[0,Oe*at,-ke*at,Oe,-ke,Oe],[2*ke-ie,0],[-ke*at,0,-ke,-Oe*at,-ke,-Oe],[0,2*Oe-pe],[0,-Oe*at,ke*at,-Oe,ke,-Oe]],_+ke,O,[1,1],Ge,!0),this},v.__private__.ellipse=v.ellipse=function(_,O,ie,pe,ke){if(isNaN(_)||isNaN(O)||isNaN(ie)||isNaN(pe)||!La(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*ie,Ge=4/3*(Math.SQRT2-1)*pe;return eo(_+ie,O),ts(_+ie,O-Ge,_+Oe,O-pe,_,O-pe),ts(_-Oe,O-pe,_-ie,O-Ge,_-ie,O),ts(_-ie,O+Ge,_-Oe,O+pe,_,O+pe),ts(_+Oe,O+pe,_+ie,O+Ge,_+ie,O),fc(ke),this},v.__private__.circle=v.circle=function(_,O,ie,pe){if(isNaN(_)||isNaN(O)||isNaN(ie)||!La(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,O,ie,ie,pe)},v.setFont=function(_,O,ie){return ie&&(O=he(O,ie)),zt=cc(_,O,{disableWarning:!1}),this};var gc=v.__private__.getFont=v.getFont=function(){return An[cc.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var _,O,ie={};for(_ in Pn)if(Pn.hasOwnProperty(_))for(O in ie[_]=[],Pn[_])Pn[_].hasOwnProperty(O)&&ie[_].push(O);return ie},v.addFont=function(_,O,ie,pe,ke){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(ie=he(ie,pe)),ke=ke||"Identity-H",Ko.call(this,_,O,ie,ke)};var Jl,Zh=s.lineWidth||.200025,Zo=v.__private__.getLineWidth=v.getLineWidth=function(){return Zh},Ql=v.__private__.setLineWidth=v.setLineWidth=function(_){return Zh=_,ee(ne(V(_))+" w"),this};v.__private__.setLineDash=Pt.API.setLineDash=Pt.API.setLineDashPattern=function(_,O){if(_=_||[],O=O||0,isNaN(O)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(ie){return ne(V(ie))}).join(" "),O=ne(V(O)),ee("["+_+"] "+O+" d"),this};var mc=v.__private__.getLineHeight=v.getLineHeight=function(){return We*Jl};v.__private__.getLineHeight=v.getLineHeight=function(){return We*Jl};var ed=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(Jl=_),this},Qs=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return Jl};ed(s.lineHeight);var Ss=v.__private__.getHorizontalCoordinate=function(_){return V(_)},Es=v.__private__.getVerticalCoordinate=function(_){return M===T.ADVANCED?_:It[j].mediaBox.topRightY-It[j].mediaBox.bottomLeftY-V(_)},np=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(_){return ne(Ss(_))},Zs=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(_){return ne(Es(_))},Pi=s.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Ys(Pi)},v.__private__.setStrokeColor=v.setDrawColor=function(_,O,ie,pe){return Pi=Or({ch1:_,ch2:O,ch3:ie,ch4:pe,pdfColorType:"draw",precision:2}),ee(Pi),this};var vc=s.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Ys(vc)},v.__private__.setFillColor=v.setFillColor=function(_,O,ie,pe){return vc=Or({ch1:_,ch2:O,ch3:ie,ch4:pe,pdfColorType:"fill",precision:2}),ee(vc),this};var mr=s.textColor||"0 g",el=v.__private__.getTextColor=v.getTextColor=function(){return Ys(mr)};v.__private__.setTextColor=v.setTextColor=function(_,O,ie,pe){return mr=Or({ch1:_,ch2:O,ch3:ie,ch4:pe,pdfColorType:"text",precision:3}),this};var tl=s.charSpace,Zl=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(tl||0)};v.__private__.setCharSpace=v.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return tl=_,this};var td=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(_){var O=v.CapJoinStyles[_];if(O===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return td=O,ee(O+" J"),this};var eu=0;v.__private__.setLineJoin=v.setLineJoin=function(_){var O=v.CapJoinStyles[_];if(O===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return eu=O,ee(O+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(ne(V(_))+" M"),this},v.GState=W2,v.setGState=function(_){(_=typeof _=="string"?Mn[Wr[_]]:yc(null,_)).equals(Si)||(ee("/"+_.id+" gs"),Si=_)};var yc=function(_,O){if(!_||!Wr[_]){var ie=!1;for(var pe in Mn)if(Mn.hasOwnProperty(pe)&&Mn[pe].equals(O)){ie=!0;break}if(ie)O=Mn[pe];else{var ke="GS"+(Object.keys(Mn).length+1).toString(10);Mn[ke]=O,O.id=ke}return _&&(Wr[_]=O.id),ln.publish("addGState",O),O}};v.addGState=function(_,O){return yc(_,O),this},v.saveGraphicsState=function(){return ee("q"),_s.push({key:zt,size:We,color:mr}),this},v.restoreGraphicsState=function(){ee("Q");var _=_s.pop();return zt=_.key,We=_.size,mr=_.color,Si=null,this},v.setCurrentTransformationMatrix=function(_){return ee(_.toString()+" cm"),this},v.comment=function(_){return ee("#"+_),this};var Pa=function(_,O){var ie=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(Oe){isNaN(Oe)||(ie=parseFloat(Oe))}});var pe=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Oe){isNaN(Oe)||(pe=parseFloat(Oe))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Oe){ke=Oe.toString()}}),this},nl=function(_,O,ie,pe){Pa.call(this,_,O),this.type="rect";var ke=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(Ge){isNaN(Ge)||(ke=parseFloat(Ge))}});var Oe=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(Ge){isNaN(Ge)||(Oe=parseFloat(Ge))}}),this},wc=function(){this.page=zn,this.currentPage=j,this.pages=$e.slice(0),this.pagesContext=It.slice(0),this.x=$r,this.y=en,this.matrix=bs,this.width=to(j),this.height=rl(j),this.outputDestination=Be,this.id="",this.objectNumber=-1};wc.prototype.restore=function(){zn=this.page,j=this.currentPage,It=this.pagesContext,$e=this.pages,$r=this.x,en=this.y,bs=this.matrix,nd(j,this.width),rd(j,this.height),Be=this.outputDestination};var rp=function(_,O,ie,pe,ke){Gs.push(new wc),zn=j=0,$e=[],$r=_,en=O,bs=ke,Vl([ie,pe])},gm=function(_){if(xs[_])Gs.pop().restore();else{var O=new wc,ie="Xo"+(Object.keys(Lr).length+1).toString(10);O.id=ie,xs[_]=ie,Lr[ie]=O,ln.publish("addFormObject",O),Gs.pop().restore()}};for(var bc in v.beginFormObject=function(_,O,ie,pe,ke){return rp(_,O,ie,pe,ke),this},v.endFormObject=function(_){return gm(_),this},v.doFormObject=function(_,O){var ie=Lr[xs[_]];return ee("q"),ee(O.toString()+" cm"),ee("/"+ie.id+" Do"),ee("Q"),this},v.getFormObject=function(_){var O=Lr[xs[_]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},v.save=function(_,O){return _=_||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Pd(Yl(Ea()),_),typeof Pd.unload=="function"&&Tt.setTimeout&&setTimeout(Pd.unload,911),this):new Promise(function(ie,pe){try{var ke=Pd(Yl(Ea()),_);typeof Pd.unload=="function"&&Tt.setTimeout&&setTimeout(Pd.unload,911),ie(ke)}catch(Oe){pe(Oe.message)}})},Pt.API)Pt.API.hasOwnProperty(bc)&&(bc==="events"&&Pt.API.events.length?function(_,O){var ie,pe,ke;for(ke=O.length-1;ke!==-1;ke--)ie=O[ke][0],pe=O[ke][1],_.subscribe.apply(_,[ie].concat(typeof pe=="function"?[pe]:pe))}(ln,Pt.API.events):v[bc]=Pt.API[bc]);var to=v.getPageWidth=function(_){return(It[_=_||j].mediaBox.topRightX-It[_].mediaBox.bottomLeftX)/it},nd=v.setPageWidth=function(_,O){It[_].mediaBox.topRightX=O*it+It[_].mediaBox.bottomLeftX},rl=v.getPageHeight=function(_){return(It[_=_||j].mediaBox.topRightY-It[_].mediaBox.bottomLeftY)/it},rd=v.setPageHeight=function(_,O){It[_].mediaBox.topRightY=O*it+It[_].mediaBox.bottomLeftY};return v.internal={pdfEscape:Li,getStyle:Qh,getFont:gc,getFontSize:et,getCharSpace:Zl,getTextColor:el,getLineHeight:mc,getLineHeightFactor:Qs,getLineWidth:Zo,write:Ke,getHorizontalCoordinate:Ss,getVerticalCoordinate:Es,getCoordinateString:np,getVerticalCoordinateString:Zs,collections:{},newObject:Un,newAdditionalObject:Go,newObjectDeferred:qn,newObjectDeferredBegin:Gr,getFilters:Ks,putStream:Zi,events:ln,scaleFactor:it,pageSize:{getWidth:function(){return to(j)},setWidth:function(_){nd(j,_)},getHeight:function(){return rl(j)},setHeight:function(_){rd(j,_)}},encryptionOptions:d,encryption:$n,getEncryptor:ka,output:Jo,getNumberOfPages:fm,pages:$e,out:ee,f2:Se,f3:q,getPageInfo:Xs,getPageInfoByObjId:Et,getCurrentPageInfo:Xl,getPDFVersion:S,Point:Pa,Rectangle:nl,Matrix:_t,hasHotfix:Kl},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return to(j)},set:function(_){nd(j,_)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return rl(j)},set:function(_){rd(j,_)},enumerable:!0,configurable:!0}),Gl.call(v,ze),zt="F1",Kh(r,t),ln.publish("initialized"),v}$p.prototype.lsbFirstWord=function(s){return String.fromCharCode(s>>0&255,s>>8&255,s>>16&255,s>>24&255)},$p.prototype.toHexString=function(s){return s.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$p.prototype.hexToBytes=function(s){for(var e=[],t=0;t<s.length;t+=2)e.push(String.fromCharCode(parseInt(s.substr(t,2),16)));return e.join("")},$p.prototype.processOwnerPassword=function(s,e){return Qb(Jb(e).substr(0,5),s)},$p.prototype.encryptor=function(s,e){var t=Jb(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Qb(t,n)}},W2.prototype.equals=function(s){var e,t="id,objectNumber,equals";if(!s||Ln(s)!==Ln(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!s.hasOwnProperty(e)||this[e]!==s[e])return!1;n++}for(e in s)s.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Pt.API={events:[]},Pt.version="3.0.0";var gr=Pt.API,T_=1,Yf=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Op=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bt=function(s){return s.toFixed(2)},Qc=function(s){return s.toFixed(5)};gr.__acroform__={};var Ws=function(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s},OS=function(s){return s*T_},wl=function(s){var e=new JE,t=pt.internal.getHeight(s)||0,n=pt.internal.getWidth(s)||0;return e.BBox=[0,0,Number(Bt(n)),Number(Bt(t))],e},WR=gr.__acroform__.setBit=function(s,e){if(s=s||0,e=e||0,isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|=1<<e},GR=gr.__acroform__.clearBit=function(s,e){if(s=s||0,e=e||0,isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&=~(1<<e)},VR=gr.__acroform__.getBit=function(s,e){if(isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(s&1<<e)==0?0:1},Ar=gr.__acroform__.getBitForPdf=function(s,e){if(isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return VR(s,e-1)},Sr=gr.__acroform__.setBitForPdf=function(s,e){if(isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return WR(s,e-1)},Er=gr.__acroform__.clearBitForPdf=function(s,e){if(isNaN(s)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return GR(s,e-1)},YR=gr.__acroform__.calculateCoordinates=function(s,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,r=s[0],i=s[1],a=s[2],l=s[3],c={};return c.lowerLeft_X=t(r)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=t(r+a)||0,c.upperRight_Y=n(i)||0,[Number(Bt(c.lowerLeft_X)),Number(Bt(c.lowerLeft_Y)),Number(Bt(c.upperRight_X)),Number(Bt(c.upperRight_Y))]},KR=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var e=[],t=s._V||s.DV,n=Zb(s,t),r=s.scope.internal.getFont(s.fontName,s.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(s.scope.__private__.encodeColorString(s.color)),e.push("/"+r+" "+Bt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=wl(s);return i.scope=s.scope,i.stream=e.join(`
`),i}},Zb=function(s,e){var t=s.fontSize===0?s.maxFontSize:s.fontSize,n={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=s.multiline?r.map(function(q){return q.split(`
`)}):r.map(function(q){return[q]});var i=t,a=pt.internal.getHeight(s)||0;a=a<0?-a:a;var l=pt.internal.getWidth(s)||0;l=l<0?-l:l;var c=function(q,V,ue){if(q+1<r.length){var re=V+" "+r[q+1][0];return Xv(re,s,ue).width<=l-4}return!1};i++;e:for(;i>0;){e="",i--;var h,d,m=Xv("3",s,i).height,y=s.multiline?a-i:(a-m)/2,v=y+=2,x=0,S=0,C=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Xv(e,s,i=12).width+", FieldWidth:"+l+`
`;break}for(var k="",T=0,M=0;M<r.length;M++)if(r.hasOwnProperty(M)){var H=!1;if(r[M].length!==1&&C!==r[M].length-1){if((m+2)*(T+2)+2>a)continue e;k+=r[M][C],H=!0,S=M,M--}else{k=(k+=r[M][C]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var X=parseInt(M),he=c(X,k,i),ne=M>=r.length-1;if(he&&!ne){k+=" ",C=0;continue}if(he||ne){if(ne)S=X;else if(s.multiline&&(m+2)*(T+2)+2>a)continue e}else{if(!s.multiline||(m+2)*(T+2)+2>a)continue e;S=X}}for(var Z="",fe=x;fe<=S;fe++){var Se=r[fe];if(s.multiline){if(fe===S){Z+=Se[C]+" ",C=(C+1)%Se.length;continue}if(fe===x){Z+=Se[Se.length-1]+" ";continue}}Z+=Se[0]+" "}switch(Z=Z.substr(Z.length-1)==" "?Z.substr(0,Z.length-1):Z,d=Xv(Z,s,i).width,s.textAlign){case"right":h=l-d-2;break;case"center":h=(l-d)/2;break;case"left":default:h=2}e+=Bt(h)+" "+Bt(v)+` Td
`,e+="("+Yf(Z)+`) Tj
`,e+=-Bt(h)+` 0 Td
`,v=-(i+2),d=0,x=H?S:S+1,T++,k=""}break}return n.text=e,n.fontSize=i,n},Xv=function(s,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(s,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},XR={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},JR=function(s,e){var t={type:"reference",object:s};e.internal.getPageInfo(s.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(s.page).pageContext.annotations.push(t)},QR=function(s,e){for(var t in s)if(s.hasOwnProperty(t)){var n=t,r=s[t];e.internal.newObjectDeferredBegin(r.objId,!0),Ln(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete s[n]}},ZR=function(s,e){if(e.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(Ho.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(XR)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T_=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new QE,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i.objId=void 0,i.hasAnnotation&&JR(i,t)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(t){(function(n,r){var i=!n;for(var a in n||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var l=n[a],c=[],h=l.Rect;if(l.Rect&&(l.Rect=YR(l.Rect,r)),r.internal.newObjectDeferredBegin(l.objId,!0),l.DA=pt.createDefaultAppearanceStream(l),Ln(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=h,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=KR(l);c.push({key:"AP",value:"<</N "+d+">>"}),r.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var m="";for(var y in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(y)){var v=l.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var a in v)if(v.hasOwnProperty(a)){var x=v[a];typeof x=="function"&&(x=x.call(r,l)),m+="/"+a+" "+x+" ",r.internal.acroformPlugin.xForms.indexOf(x)>=0||r.internal.acroformPlugin.xForms.push(x)}}else typeof(x=v)=="function"&&(x=x.call(r,l)),m+="/"+a+" "+x,r.internal.acroformPlugin.xForms.indexOf(x)>=0||r.internal.acroformPlugin.xForms.push(x);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}r.internal.putStream({additionalKeyValues:c,objectId:l.objId}),r.internal.out("endobj")}i&&QR(r.internal.acroformPlugin.xForms,r)})(t,s)}),s.internal.acroformPlugin.isInitialized=!0}},XE=gr.__acroform__.arrayToPdfArray=function(s,e,t){var n=function(a){return a};if(Array.isArray(s)){for(var r="[",i=0;i<s.length;i++)switch(i!==0&&(r+=" "),Ln(s[i])){case"boolean":case"number":case"object":r+=s[i].toString();break;case"string":s[i].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),r+="("+Yf(n(s[i].toString()))+")"):r+=s[i].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},hw=function(s,e,t){var n=function(r){return r};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(s=s||"").toString(),s="("+Yf(n(s))+")"},Dl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Dl.prototype.toString=function(){return this.objId+" 0 R"},Dl.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},Dl.prototype.getKeyValueListForStream=function(){var s=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],r=this[n];r&&(Array.isArray(r)?s.push({key:n,value:XE(r,this.objId,this.scope)}):r instanceof Dl?(r.scope=this.scope,s.push({key:n,value:r.objId+" 0 R"})):typeof r!="function"&&s.push({key:n,value:r}))}return s};var JE=function(){Dl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){s=t.trim()},get:function(){return s||null}})};Ws(JE,Dl);var QE=function(){Dl.call(this);var s,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Yf(t(s))+")"}},set:function(t){s=t}})};Ws(QE,Dl);var Ho=function s(){Dl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ar(e,3)},set:function(k){k?this.F=Sr(e,3):this.F=Er(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');t=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof G2)return;i="FieldObject"+s.FieldNum++}var k=function(T){return T};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+Yf(k(i))+")"},set:function(k){i=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(k){i=k}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(k){l=k}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(k){c=k}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/T_:h},set:function(k){h=k}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(k){d=k}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof G2||this instanceof Bf))return hw(m,this.objId,this.scope)},set:function(k){k=k.toString(),m=k}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof ui?y:hw(y,this.objId,this.scope)},set:function(k){k=k.toString(),y=this instanceof ui?k:k.substr(0,1)==="("?Op(k.substr(1,k.length-2)):Op(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ui?Op(y.substr(1,y.length-1)):y},set:function(k){k=k.toString(),y=this instanceof ui?"/"+k:k}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof ui?v:hw(v,this.objId,this.scope)},set:function(k){k=k.toString(),v=this instanceof ui?k:k.substr(0,1)==="("?Op(k.substr(1,k.length-2)):Op(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ui?Op(v.substr(1,v.length-1)):v},set:function(k){k=k.toString(),v=this instanceof ui?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(k){k=!!k,S=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(k){x=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,1)},set:function(k){k?this.Ff=Sr(this.Ff,1):this.Ff=Er(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,2)},set:function(k){k?this.Ff=Sr(this.Ff,2):this.Ff=Er(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,3)},set:function(k){k?this.Ff=Sr(this.Ff,3):this.Ff=Er(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');C=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(C){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};Ws(Ho,Dl);var Qp=function(){Ho.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return XE(e,this.objId,this.scope)},set:function(t){var n,r;r=[],typeof(n=t)=="string"&&(r=function(i,a,l){l||(l=1);for(var c,h=[];c=a.exec(i);)h.push(c[l]);return h}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,18)},set:function(t){t?this.Ff=Sr(this.Ff,18):this.Ff=Er(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Sr(this.Ff,19):this.Ff=Er(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,20)},set:function(t){t?(this.Ff=Sr(this.Ff,20),e.sort()):this.Ff=Er(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,22)},set:function(t){t?this.Ff=Sr(this.Ff,22):this.Ff=Er(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,23)},set:function(t){t?this.Ff=Sr(this.Ff,23):this.Ff=Er(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,27)},set:function(t){t?this.Ff=Sr(this.Ff,27):this.Ff=Er(this.Ff,27)}}),this.hasAppearanceStream=!1};Ws(Qp,Ho);var Zp=function(){Qp.call(this),this.fontName="helvetica",this.combo=!1};Ws(Zp,Qp);var eg=function(){Zp.call(this),this.combo=!0};Ws(eg,Zp);var P2=function(){eg.call(this),this.edit=!0};Ws(P2,eg);var ui=function(){Ho.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,15)},set:function(t){t?this.Ff=Sr(this.Ff,15):this.Ff=Er(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,16)},set:function(t){t?this.Ff=Sr(this.Ff,16):this.Ff=Er(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,17)},set:function(t){t?this.Ff=Sr(this.Ff,17):this.Ff=Er(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,26)},set:function(t){t?this.Ff=Sr(this.Ff,26):this.Ff=Er(this.Ff,26)}});var s,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+Yf(t(e[n]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){Ln(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(t){s="/"+t}})};Ws(ui,Ho);var N2=function(){ui.call(this),this.pushButton=!0};Ws(N2,ui);var tg=function(){ui.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(e){s=e!==void 0?e:[]}})};Ws(tg,ui);var G2=function(){var s,e;Ho.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+Yf(r(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(r){Ln(r)==="object"&&(n=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(r){typeof r=="string"&&(n.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ws(G2,Ho),tg.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=s.createAppearanceStream(t.optionName),t.caption=s.getCA()}},tg.prototype.createOption=function(s){var e=new G2;return e.Parent=this,e.optionName=s,this.Kids.push(e),eI.call(this.scope,e),e};var T2=function(){ui.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pt.CheckBox.createAppearanceStream()};Ws(T2,ui);var Bf=function(){Ho.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,13)},set:function(e){e?this.Ff=Sr(this.Ff,13):this.Ff=Er(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,21)},set:function(e){e?this.Ff=Sr(this.Ff,21):this.Ff=Er(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,23)},set:function(e){e?this.Ff=Sr(this.Ff,23):this.Ff=Er(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,24)},set:function(e){e?this.Ff=Sr(this.Ff,24):this.Ff=Er(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,25)},set:function(e){e?this.Ff=Sr(this.Ff,25):this.Ff=Er(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,26)},set:function(e){e?this.Ff=Sr(this.Ff,26):this.Ff=Er(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(e){s=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){Number.isInteger(e)&&(s=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ws(Bf,Ho);var R2=function(){Bf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,14)},set:function(s){s?this.Ff=Sr(this.Ff,14):this.Ff=Er(this.Ff,14)}}),this.password=!0};Ws(R2,Bf);var pt={CheckBox:{createAppearanceStream:function(){return{N:{On:pt.CheckBox.YesNormal},D:{On:pt.CheckBox.YesPushDown,Off:pt.CheckBox.OffPushDown}}},YesPushDown:function(s){var e=wl(s);e.scope=s.scope;var t=[],n=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color),i=Zb(s,s.caption);return t.push("0.749023 g"),t.push("0 0 "+Bt(pt.internal.getWidth(s))+" "+Bt(pt.internal.getHeight(s))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Bt(i.fontSize)+" Tf "+r),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(s){var e=wl(s);e.scope=s.scope;var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,n=s.scope.__private__.encodeColorString(s.color),r=[],i=pt.internal.getHeight(s),a=pt.internal.getWidth(s),l=Zb(s,s.caption);return r.push("1 g"),r.push("0 0 "+Bt(a)+" "+Bt(i)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Bt(a-1)+" "+Bt(i-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+Bt(l.fontSize)+" Tf "+n),r.push(l.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(s){var e=wl(s);e.scope=s.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Bt(pt.internal.getWidth(s))+" "+Bt(pt.internal.getHeight(s))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(s){var e={D:{Off:pt.RadioButton.Circle.OffPushDown},N:{}};return e.N[s]=pt.RadioButton.Circle.YesNormal,e.D[s]=pt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(s){var e=wl(s);e.scope=s.scope;var t=[],n=pt.internal.getWidth(s)<=pt.internal.getHeight(s)?pt.internal.getWidth(s)/4:pt.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=pt.internal.Bezier_C,i=Number((n*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Qc(pt.internal.getWidth(s)/2)+" "+Qc(pt.internal.getHeight(s)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),t.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),t.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),t.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(s){var e=wl(s);e.scope=s.scope;var t=[],n=pt.internal.getWidth(s)<=pt.internal.getHeight(s)?pt.internal.getWidth(s)/4:pt.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),i=Number((r*pt.internal.Bezier_C).toFixed(5)),a=Number((n*pt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qc(pt.internal.getWidth(s)/2)+" "+Qc(pt.internal.getHeight(s)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Qc(pt.internal.getWidth(s)/2)+" "+Qc(pt.internal.getHeight(s)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(s){var e=wl(s);e.scope=s.scope;var t=[],n=pt.internal.getWidth(s)<=pt.internal.getHeight(s)?pt.internal.getWidth(s)/4:pt.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),i=Number((r*pt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qc(pt.internal.getWidth(s)/2)+" "+Qc(pt.internal.getHeight(s)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(s){var e={D:{Off:pt.RadioButton.Cross.OffPushDown},N:{}};return e.N[s]=pt.RadioButton.Cross.YesNormal,e.D[s]=pt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(s){var e=wl(s);e.scope=s.scope;var t=[],n=pt.internal.calculateCross(s);return t.push("q"),t.push("1 1 "+Bt(pt.internal.getWidth(s)-2)+" "+Bt(pt.internal.getHeight(s)-2)+" re"),t.push("W"),t.push("n"),t.push(Bt(n.x1.x)+" "+Bt(n.x1.y)+" m"),t.push(Bt(n.x2.x)+" "+Bt(n.x2.y)+" l"),t.push(Bt(n.x4.x)+" "+Bt(n.x4.y)+" m"),t.push(Bt(n.x3.x)+" "+Bt(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(s){var e=wl(s);e.scope=s.scope;var t=pt.internal.calculateCross(s),n=[];return n.push("0.749023 g"),n.push("0 0 "+Bt(pt.internal.getWidth(s))+" "+Bt(pt.internal.getHeight(s))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Bt(pt.internal.getWidth(s)-2)+" "+Bt(pt.internal.getHeight(s)-2)+" re"),n.push("W"),n.push("n"),n.push(Bt(t.x1.x)+" "+Bt(t.x1.y)+" m"),n.push(Bt(t.x2.x)+" "+Bt(t.x2.y)+" l"),n.push(Bt(t.x4.x)+" "+Bt(t.x4.y)+" m"),n.push(Bt(t.x3.x)+" "+Bt(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(s){var e=wl(s);e.scope=s.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Bt(pt.internal.getWidth(s))+" "+Bt(pt.internal.getHeight(s))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(s){var e=s.scope.internal.getFont(s.fontName,s.fontStyle).id,t=s.scope.__private__.encodeColorString(s.color);return"/"+e+" "+s.fontSize+" Tf "+t}};pt.internal={Bezier_C:.551915024494,calculateCross:function(s){var e=pt.internal.getWidth(s),t=pt.internal.getHeight(s),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},pt.internal.getWidth=function(s){var e=0;return Ln(s)==="object"&&(e=OS(s.Rect[2])),e},pt.internal.getHeight=function(s){var e=0;return Ln(s)==="object"&&(e=OS(s.Rect[3])),e};var eI=gr.addField=function(s){if(ZR(this,s),!(s instanceof Ho))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=s).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};gr.AcroFormChoiceField=Qp,gr.AcroFormListBox=Zp,gr.AcroFormComboBox=eg,gr.AcroFormEditBox=P2,gr.AcroFormButton=ui,gr.AcroFormPushButton=N2,gr.AcroFormRadioButton=tg,gr.AcroFormCheckBox=T2,gr.AcroFormTextField=Bf,gr.AcroFormPasswordField=R2,gr.AcroFormAppearance=pt,gr.AcroForm={ChoiceField:Qp,ListBox:Zp,ComboBox:eg,EditBox:P2,Button:ui,PushButton:N2,RadioButton:tg,CheckBox:T2,TextField:Bf,PasswordField:R2,Appearance:pt},Pt.AcroForm={ChoiceField:Qp,ListBox:Zp,ComboBox:eg,EditBox:P2,Button:ui,PushButton:N2,RadioButton:tg,CheckBox:T2,TextField:Bf,PasswordField:R2,Appearance:pt};Pt.AcroForm;function ZE(s){return s.reduce(function(e,t,n){return e[t]=n,e},{})}(function(s){s.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=s.__addimage__.getImageFileTypeByImageData=function(q,V){var ue,re,Ee,ce,me,ae=e;if((V=V||e)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(he(q))for(me in t)for(Ee=t[me],ue=0;ue<Ee.length;ue+=1){for(ce=!0,re=0;re<Ee[ue].length;re+=1)if(Ee[ue][re]!==void 0&&Ee[ue][re]!==q[re]){ce=!1;break}if(ce===!0){ae=me;break}}else for(me in t)for(Ee=t[me],ue=0;ue<Ee.length;ue+=1){for(ce=!0,re=0;re<Ee[ue].length;re+=1)if(Ee[ue][re]!==void 0&&Ee[ue][re]!==q.charCodeAt(re)){ce=!1;break}if(ce===!0){ae=me;break}}return ae===e&&V!==e&&(ae=V),ae},r=function q(V){for(var ue=this.internal.write,re=this.internal.putStream,Ee=(0,this.internal.getFilters)();Ee.indexOf("FlateEncode")!==-1;)Ee.splice(Ee.indexOf("FlateEncode"),1);V.objectId=this.internal.newObject();var ce=[];if(ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Image"}),ce.push({key:"Width",value:V.width}),ce.push({key:"Height",value:V.height}),V.colorSpace===C.INDEXED?ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(V.palette.length/3-1)+" "+("sMask"in V&&V.sMask!==void 0?V.objectId+2:V.objectId+1)+" 0 R]"}):(ce.push({key:"ColorSpace",value:"/"+V.colorSpace}),V.colorSpace===C.DEVICE_CMYK&&ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ce.push({key:"BitsPerComponent",value:V.bitsPerComponent}),"decodeParameters"in V&&V.decodeParameters!==void 0&&ce.push({key:"DecodeParms",value:"<<"+V.decodeParameters+">>"}),"transparency"in V&&Array.isArray(V.transparency)){for(var me="",ae=0,te=V.transparency.length;ae<te;ae++)me+=V.transparency[ae]+" "+V.transparency[ae]+" ";ce.push({key:"Mask",value:"["+me+"]"})}V.sMask!==void 0&&ce.push({key:"SMask",value:V.objectId+1+" 0 R"});var J=V.filter!==void 0?["/"+V.filter]:void 0;if(re({data:V.data,additionalKeyValues:ce,alreadyAppliedFilters:J,objectId:V.objectId}),ue("endobj"),"sMask"in V&&V.sMask!==void 0){var G="/Predictor "+V.predictor+" /Colors 1 /BitsPerComponent "+V.bitsPerComponent+" /Columns "+V.width,N={width:V.width,height:V.height,colorSpace:"DeviceGray",bitsPerComponent:V.bitsPerComponent,decodeParameters:G,data:V.sMask};"filter"in V&&(N.filter=V.filter),q.call(this,N)}if(V.colorSpace===C.INDEXED){var j=this.internal.newObject();re({data:Z(new Uint8Array(V.palette)),objectId:j}),ue("endobj")}},i=function(){var q=this.internal.collections.addImage_images;for(var V in q)r.call(this,q[V])},a=function(){var q,V=this.internal.collections.addImage_images,ue=this.internal.write;for(var re in V)ue("/I"+(q=V[re]).index,q.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var q=this.internal.collections.addImage_images;return l.call(this),q},h=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(q){return typeof s["process"+q.toUpperCase()]=="function"},m=function(q){return Ln(q)==="object"&&q.nodeType===1},y=function(q,V){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var ue=""+q.getAttribute("src");if(ue.indexOf("data:image/")===0)return d0(unescape(ue).split("base64,").pop());var re=s.loadFile(ue,!0);if(re!==void 0)return re}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var Ee;switch(V){case"PNG":Ee="image/png";break;case"WEBP":Ee="image/webp";break;case"JPEG":case"JPG":default:Ee="image/jpeg"}return d0(q.toDataURL(Ee,1).split("base64,").pop())}},v=function(q){var V=this.internal.collections.addImage_images;if(V){for(var ue in V)if(q===V[ue].alias)return V[ue]}},x=function(q,V,ue){return q||V||(q=-96,V=-96),q<0&&(q=-1*ue.width*72/q/this.internal.scaleFactor),V<0&&(V=-1*ue.height*72/V/this.internal.scaleFactor),q===0&&(q=V*ue.width/ue.height),V===0&&(V=q*ue.height/ue.width),[q,V]},S=function(q,V,ue,re,Ee,ce){var me=x.call(this,ue,re,Ee),ae=this.internal.getCoordinateString,te=this.internal.getVerticalCoordinateString,J=c.call(this);if(ue=me[0],re=me[1],J[Ee.index]=Ee,ce){ce*=Math.PI/180;var G=Math.cos(ce),N=Math.sin(ce),j=function(se){return se.toFixed(4)},Y=[j(G),j(N),j(-1*N),j(G),0,0,"cm"]}this.internal.write("q"),ce?(this.internal.write([1,"0","0",1,ae(q),te(V+re),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([ae(ue),"0","0",ae(re),"0","0","cm"].join(" "))):this.internal.write([ae(ue),"0","0",ae(re),ae(q),te(V+re),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ee.index+" Do"),this.internal.write("Q")},C=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=s.__addimage__.sHashCode=function(q){var V,ue,re=0;if(typeof q=="string")for(ue=q.length,V=0;V<ue;V++)re=(re<<5)-re+q.charCodeAt(V),re|=0;else if(he(q))for(ue=q.byteLength/2,V=0;V<ue;V++)re=(re<<5)-re+q[V],re|=0;return re},M=s.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var V=!0;return q.length===0&&(V=!1),q.length%4!=0&&(V=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&(V=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&(V=!1),V},H=s.__addimage__.extractImageFromDataUrl=function(q){var V=(q=q||"").split("base64,"),ue=null;if(V.length===2){var re=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(V[0]);Array.isArray(re)&&(ue={mimeType:re[1],charset:re[2],data:V[1]})}return ue},X=s.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};s.__addimage__.isArrayBuffer=function(q){return X()&&q instanceof ArrayBuffer};var he=s.__addimage__.isArrayBufferView=function(q){return X()&&typeof Uint32Array<"u"&&(q instanceof Int8Array||q instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array)},ne=s.__addimage__.binaryStringToUint8Array=function(q){for(var V=q.length,ue=new Uint8Array(V),re=0;re<V;re++)ue[re]=q.charCodeAt(re);return ue},Z=s.__addimage__.arrayBufferToBinaryString=function(q){for(var V="",ue=he(q)?q:new Uint8Array(q),re=0;re<ue.length;re+=8192)V+=String.fromCharCode.apply(null,ue.subarray(re,re+8192));return V};s.addImage=function(){var q,V,ue,re,Ee,ce,me,ae,te;if(typeof arguments[1]=="number"?(V=e,ue=arguments[1],re=arguments[2],Ee=arguments[3],ce=arguments[4],me=arguments[5],ae=arguments[6],te=arguments[7]):(V=arguments[1],ue=arguments[2],re=arguments[3],Ee=arguments[4],ce=arguments[5],me=arguments[6],ae=arguments[7],te=arguments[8]),Ln(q=arguments[0])==="object"&&!m(q)&&"imageData"in q){var J=q;q=J.imageData,V=J.format||V||e,ue=J.x||ue||0,re=J.y||re||0,Ee=J.w||J.width||Ee,ce=J.h||J.height||ce,me=J.alias||me,ae=J.compression||ae,te=J.rotation||J.angle||te}var G=this.internal.getFilters();if(ae===void 0&&G.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(ue)||isNaN(re))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var N=fe.call(this,q,V,me,ae);return S.call(this,ue,re,Ee,ce,N,te),this};var fe=function(q,V,ue,re){var Ee,ce,me;if(typeof q=="string"&&n(q)===e){q=unescape(q);var ae=Se(q,!1);(ae!==""||(ae=s.loadFile(q,!0))!==void 0)&&(q=ae)}if(m(q)&&(q=y(q,V)),V=n(q,V),!d(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(((me=ue)==null||me.length===0)&&(ue=function(te){return typeof te=="string"||he(te)?T(te):he(te.data)?T(te.data):null}(q)),(Ee=v.call(this,ue))||(X()&&(q instanceof Uint8Array||V==="RGBA"||(ce=q,q=ne(q))),Ee=this["process"+V.toUpperCase()](q,h.call(this),ue,function(te){return te&&typeof te=="string"&&(te=te.toUpperCase()),te in s.image_compression?te:k.NONE}(re),ce)),!Ee)throw new Error("An unknown error occurred whilst processing the image.");return Ee},Se=s.__addimage__.convertBase64ToBinaryString=function(q,V){var ue;V=typeof V!="boolean"||V;var re,Ee="";if(typeof q=="string"){re=(ue=H(q))!==null?ue.data:q;try{Ee=d0(re)}catch(ce){if(V)throw M(re)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ee};s.getImageProperties=function(q){var V,ue,re="";if(m(q)&&(q=y(q)),typeof q=="string"&&n(q)===e&&((re=Se(q,!1))===""&&(re=s.loadFile(q)||""),q=re),ue=n(q),!d(ue))throw new Error("addImage does not support files of type '"+ue+"', please ensure that a plugin for '"+ue+"' support is added.");if(!X()||q instanceof Uint8Array||(q=ne(q)),!(V=this["process"+ue.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return V.fileType=ue,V}})(Pt.API),function(s){var e=function(t){if(t!==void 0&&t!="")return!0};Pt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(t){for(var n,r,i,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),h=t.pageContext.annotations,d=!1,m=0;m<h.length&&!d;m++)switch((n=h[m]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var y=0;y<h.length;y++){n=h[y];var v=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(S.objId),T=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+v(k(n.contents))+")",i+=" /Popup "+C.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+v(k(T))+") >>",S.content=i;var M=S.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+M,n.open&&(i+=" /Open true"),i+=" >>",C.content=i,this.internal.write(S.objId,"0 R",C.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+l(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var H=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+v(x(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+H+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var X=this.annotations._nameMap[n.options.name];n.options.pageNumber=X.page,n.options.top=X.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+v(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var he=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+he+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),s.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},s.link=function(t,n,r,i,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(t),y:h(n),w:c(t+r),h:h(n+i)},options:a,type:"link"})},s.textWithLink=function(t,n,r,i){var a,l,c=this.getTextWidth(t),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(t,l).length;a=Math.ceil(h*d)}else l=c,a=h;return this.text(t,n,r,i),r+=.2*h,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,r-h,l,a,i),c},s.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Pt.API),function(s){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];s.__arabicParser__={};var i=s.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=s.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},l=s.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length<=2},c=s.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&r.indexOf(S.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length>=1};var h=s.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length>=3};var d=s.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length==4},m=s.__arabicParser__.resolveLigatures=function(S){var C=0,k=t,T="",M=0;for(C=0;C<S.length;C+=1)k[S.charCodeAt(C)]!==void 0?(M++,typeof(k=k[S.charCodeAt(C)])=="number"&&(T+=String.fromCharCode(k),k=t,M=0),C===S.length-1&&(k=t,T+=S.charAt(C-(M-1)),C-=M-1,M=0)):(k=t,T+=S.charAt(C-M),C-=M,M=0);return T};s.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&n[S.charCodeAt(0)]!==void 0};var y=s.__arabicParser__.getCorrectForm=function(S,C,k){return a(S)?i(S)===!1?-1:!h(S)||!a(C)&&!a(k)||!a(k)&&l(C)||l(S)&&!a(C)||l(S)&&c(C)||l(S)&&l(C)?0:d(S)&&a(C)&&!l(C)&&a(k)&&h(k)?3:l(S)||!a(k)?1:2:-1},v=function(S){var C=0,k=0,T=0,M="",H="",X="",he=(S=S||"").split("\\s+"),ne=[];for(C=0;C<he.length;C+=1){for(ne.push(""),k=0;k<he[C].length;k+=1)M=he[C][k],H=he[C][k-1],X=he[C][k+1],a(M)?(T=y(M,H,X),ne[C]+=T!==-1?String.fromCharCode(e[M.charCodeAt(0)][T]):M):ne[C]+=M;ne[C]=m(ne[C])}return ne.join(" ")},x=s.__arabicParser__.processArabic=s.processArabic=function(){var S,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(C)){var T=0;for(k=[],T=0;T<C.length;T+=1)Array.isArray(C[T])?k.push([v(C[T][0]),C[T][1],C[T][2]]):k.push([v(C[T])]);S=k}else S=v(C);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};s.events.push(["preProcessText",x])}(Pt.API),Pt.API.autoPrint=function(s){var e;switch((s=s||{}).variant=s.variant||"non-conform",s.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(s){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var r;if((t=t||"2d")!=="2d")return null;for(r in n)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=n[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Pt.API),function(s){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(S){h=S}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(S){d=S}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(S){x=S}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},s.getTextDimensions=function(c,h){n.call(this);var d=(h=h||{}).fontSize||this.getFontSize(),m=h.font||this.getFont(),y=h.scaleFactor||this.internal.scaleFactor,v=0,x=0,S=0,C=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var k=h.maxWidth;k>0?typeof c=="string"?c=this.splitTextToSize(c,k):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(M,H){return M.concat(C.splitTextToSize(H,k))},[])):c=Array.isArray(c)?c:[c];for(var T=0;T<c.length;T++)v<(S=this.getStringUnitWidth(c[T],{font:m})*d)&&(v=S);return v!==0&&(x=c.length),{w:v/=y,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/y,0)}},s.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=s.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var h=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,v&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};s.table=function(c,h,d,m,y){if(n.call(this),!d)throw new Error("No data for PDF table.");var v,x,S,C,k=[],T=[],M=[],H={},X={},he=[],ne=[],Z=(y=y||{}).autoSize||!1,fe=y.printHeaders!==!1,Se=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,q=y.margins||Object.assign({width:this.getPageWidth()},e),V=typeof y.padding=="number"?y.padding:3,ue=y.headerBackgroundColor||"#c8c8c8",re=y.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=fe,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=Se,this.internal.__cell__.padding=V,this.internal.__cell__.headerBackgroundColor=ue,this.internal.__cell__.headerTextColor=re,this.setFontSize(Se),m==null)T=k=Object.keys(d[0]),M=k.map(function(){return"left"});else if(Array.isArray(m)&&Ln(m[0])==="object")for(k=m.map(function(J){return J.name}),T=m.map(function(J){return J.prompt||J.name||""}),M=m.map(function(J){return J.align||"left"}),v=0;v<m.length;v+=1)X[m[v].name]=m[v].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(T=k=m,M=k.map(function(){return"left"}));if(Z||Array.isArray(m)&&typeof m[0]=="string")for(v=0;v<k.length;v+=1){for(H[C=k[v]]=d.map(function(J){return J[C]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(T[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=H[C],this.setFont(void 0,"normal"),S=0;S<x.length;S+=1)he.push(this.getTextDimensions(x[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);X[C]=Math.max.apply(null,he)+V+V,he=[]}if(fe){var Ee={};for(v=0;v<k.length;v+=1)Ee[k[v]]={},Ee[k[v]].text=T[v],Ee[k[v]].align=M[v];var ce=l.call(this,Ee,X);ne=k.map(function(J){return new i(c,h,X[J],ce,Ee[J].text,void 0,Ee[J].align)}),this.setTableHeaderRow(ne),this.printHeaderRow(1,!1)}var me=m.reduce(function(J,G){return J[G.name]=G.align,J},{});for(v=0;v<d.length;v+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:v,data:d[v]},this);var ae=l.call(this,d[v],X);for(S=0;S<k.length;S+=1){var te=d[v][k[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:v,col:S,data:te},this),a.call(this,new i(c,h,X[k[S]],ae,te,v+2,me[k[S]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var l=function(c,h){var d=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(v){var x=c[v];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,h[v]-d-d)},this).map(function(v){return this.getLineHeightFactor()*v.length*m/y+d+d},this).reduce(function(v,x){return Math.max(v,x)},0)};s.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},s.printHeaderRow=function(c,h){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){d=this.internal.__cell__.tableHeaderRow[v].clone(),h&&(d.y=this.internal.__cell__.margins.top||0,y.push(d)),d.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(x)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}}(Pt.API);var ek={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tk=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],e_=ZE(tk),nk=[100,200,300,400,500,600,700,800,900],tI=ZE(nk);function t_(s){var e=s.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return ek[i=i||"normal"]?i:"normal"}(s.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(s.weight),r=function(i){return typeof e_[i=i||"normal"]=="number"?i:"normal"}(s.stretch);return{family:e,style:t,weight:n,stretch:r,src:s.src||[],ref:s.ref||{name:e,style:[r,t,n].join(" ")}}}function MS(s,e,t,n){var r;for(r=t;r>=0&&r<e.length;r+=n)if(s[e[r]])return s[e[r]];for(r=t;r>=0&&r<e.length;r-=n)if(s[e[r]])return s[e[r]]}var nI={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},FS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function DS(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function rI(s,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},nI,t.genericFontFamilies||{}),i=null,a=null,l=0;l<e.length;++l)if(r[(i=t_(e[l])).family]&&(i.family=r[i.family]),s.hasOwnProperty(i.family)){a=s[i.family];break}if(!(a=a||s[n]))throw new Error("Could not find a font-family for the rule '"+DS(i)+"' and default family '"+n+"'.");if(a=function(c,h){if(h[c])return h[c];var d=e_[c],m=d<=e_.normal?-1:1,y=MS(h,tk,d,m);if(!y)throw new Error("Could not find a matching font-stretch value for "+c);return y}(i.stretch,a),a=function(c,h){if(h[c])return h[c];for(var d=ek[c],m=0;m<d.length;++m)if(h[d[m]])return h[d[m]];throw new Error("Could not find a matching font-style for "+c)}(i.style,a),!(a=function(c,h){if(h[c])return h[c];if(c===400&&h[500])return h[500];if(c===500&&h[400])return h[400];var d=tI[c],m=MS(h,nk,d,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+DS(i)+"'.");return a}function jS(s){return s.trimLeft()}function iI(s,e){for(var t=0;t<s.length;){if(s.charAt(t)===e)return[s.substring(0,t),s.substring(t+1)];t+=1}return null}function sI(s){var e=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],s.substring(e[0].length)]}var Jv,BS,zS,dw=["times"];(function(s){var e,t,n,r,i,a,l,c,h,d=function(N){return N=N||{},this.isStrokeTransparent=N.isStrokeTransparent||!1,this.strokeOpacity=N.strokeOpacity||1,this.strokeStyle=N.strokeStyle||"#000000",this.fillStyle=N.fillStyle||"#000000",this.isFillTransparent=N.isFillTransparent||!1,this.fillOpacity=N.fillOpacity||1,this.font=N.font||"10px sans-serif",this.textBaseline=N.textBaseline||"alphabetic",this.textAlign=N.textAlign||"left",this.lineWidth=N.lineWidth||1,this.lineJoin=N.lineJoin||"miter",this.lineCap=N.lineCap||"butt",this.path=N.path||[],this.transform=N.transform!==void 0?N.transform.clone():new c,this.globalCompositeOperation=N.globalCompositeOperation||"normal",this.globalAlpha=N.globalAlpha||1,this.clip_path=N.clip_path||[],this.currentPoint=N.currentPoint||new a,this.miterLimit=N.miterLimit||10,this.lastPoint=N.lastPoint||new a,this.lineDashOffset=N.lineDashOffset||0,this.lineDash=N.lineDash||[],this.margin=N.margin||[0,0,0,0],this.prevPageLastElemOffset=N.prevPageLastElemOffset||0,this.ignoreClearRect=typeof N.ignoreClearRect!="boolean"||N.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,h=new d}]);var m=function(N){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=N;Object.defineProperty(this,"pdf",{get:function(){return j}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(Te){Y=!!Te}});var se=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return se},set:function(Te){se=!!Te}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(Te){isNaN(Te)||(oe=Te)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(Te){isNaN(Te)||(de=Te)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Te){var ee;typeof Te=="number"?ee=[Te,Te,Te,Te]:((ee=new Array(4))[0]=Te[0],ee[1]=Te.length>=2?Te[1]:ee[0],ee[2]=Te.length>=3?Te[2]:ee[0],ee[3]=Te.length>=4?Te[3]:ee[1]),h.margin=ee}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(Te){be=Te}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(Te){Ae=Te}});var qe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return qe},set:function(Te){qe=Te}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Te){Te instanceof d&&(h=Te)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Te){h.path=Te}});var $e=[];Object.defineProperty(this,"ctxStack",{get:function(){return $e},set:function(Te){$e=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var ee;ee=y(Te),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var ee=y(Te);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var De=null;function Be(Te,ee){if(De===null){var Ke=function(Ze){var ze=[];return Object.keys(Ze).forEach(function(We){Ze[We].forEach(function(Je){var et=null;switch(Je){case"bold":et={family:We,weight:"bold"};break;case"italic":et={family:We,style:"italic"};break;case"bolditalic":et={family:We,weight:"bold",style:"italic"};break;case"":case"normal":et={family:We}}et!==null&&(et.ref={name:We,style:Je},ze.push(et))})}),ze}(Te.getFontList());De=function(Ze){for(var ze={},We=0;We<Ze.length;++We){var Je=t_(Ze[We]),et=Je.family,gt=Je.stretch,Nt=Je.style,jt=Je.weight;ze[et]=ze[et]||{},ze[et][gt]=ze[et][gt]||{},ze[et][gt][Nt]=ze[et][gt][Nt]||{},ze[et][gt][Nt][jt]=Je}return ze}(Ke.concat(ee))}return De}var rt=null;Object.defineProperty(this,"fontFaces",{get:function(){return rt},set:function(Te){De=null,rt=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var ee;if(this.ctx.font=Te,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var Ke=ee[1],Ze=(ee[2],ee[3]),ze=ee[4],We=(ee[5],ee[6]),Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(Je==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var et=function(Lt){var zt,it,$r=[],en=Lt.trim();if(en==="")return dw;if(en in FS)return[FS[en]];for(;en!=="";){switch(it=null,zt=(en=jS(en)).charAt(0)){case'"':case"'":it=iI(en.substring(1),zt);break;default:it=sI(en)}if(it===null||($r.push(it[0]),(en=jS(it[1]))!==""&&en.charAt(0)!==","))return dw;en=en.replace(/^,/,"")}return $r}(We);if(this.fontFaces){var gt=rI(Be(this.pdf,this.fontFaces),et.map(function(Lt){return{family:Lt,stretch:"normal",weight:Ze,style:Ke}}));this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var Nt="";(Ze==="bold"||parseInt(Ze,10)>=700||Ke==="bold")&&(Nt="bold"),Ke==="italic"&&(Nt+="italic"),Nt.length===0&&(Nt="normal");for(var jt="",Ht={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Jt=0;Jt<et.length;Jt++){if(this.pdf.internal.getFont(et[Jt],Nt,{noFallback:!0,disableWarning:!0})!==void 0){jt=et[Jt];break}if(Nt==="bolditalic"&&this.pdf.internal.getFont(et[Jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)jt=et[Jt],Nt="bold";else if(this.pdf.internal.getFont(et[Jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){jt=et[Jt],Nt="normal";break}}if(jt===""){for(var on=0;on<et.length;on++)if(Ht[et[on]]){jt=Ht[et[on]];break}}jt=jt===""?"Times":jt,this.pdf.setFont(jt,Nt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};m.prototype.setLineDash=function(N){this.lineDash=N},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){H.call(this,"fill",!1)},m.prototype.stroke=function(){H.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(N,j){if(isNaN(N)||isNaN(j))throw In.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new a(N,j));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(N,j)},m.prototype.closePath=function(){var N=new a(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&Ln(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){N=new a(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(N.x,N.y)},m.prototype.lineTo=function(N,j){if(isNaN(N)||isNaN(j))throw In.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new a(N,j));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(Y.x,Y.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),H.call(this,null,!0)},m.prototype.quadraticCurveTo=function(N,j,Y,se){if(isNaN(Y)||isNaN(se)||isNaN(N)||isNaN(j))throw In.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new a(Y,se)),de=this.ctx.transform.applyToPoint(new a(N,j));this.path.push({type:"qct",x1:de.x,y1:de.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new a(oe.x,oe.y)},m.prototype.bezierCurveTo=function(N,j,Y,se,oe,de){if(isNaN(oe)||isNaN(de)||isNaN(N)||isNaN(j)||isNaN(Y)||isNaN(se))throw In.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new a(oe,de)),Ae=this.ctx.transform.applyToPoint(new a(N,j)),qe=this.ctx.transform.applyToPoint(new a(Y,se));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:qe.x,y2:qe.y,x:be.x,y:be.y}),this.ctx.lastPoint=new a(be.x,be.y)},m.prototype.arc=function(N,j,Y,se,oe,de){if(isNaN(N)||isNaN(j)||isNaN(Y)||isNaN(se)||isNaN(oe))throw In.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new a(N,j));N=be.x,j=be.y;var Ae=this.ctx.transform.applyToPoint(new a(0,Y)),qe=this.ctx.transform.applyToPoint(new a(0,0));Y=Math.sqrt(Math.pow(Ae.x-qe.x,2)+Math.pow(Ae.y-qe.y,2))}Math.abs(oe-se)>=2*Math.PI&&(se=0,oe=2*Math.PI),this.path.push({type:"arc",x:N,y:j,radius:Y,startAngle:se,endAngle:oe,counterclockwise:de})},m.prototype.arcTo=function(N,j,Y,se,oe){throw new Error("arcTo not implemented.")},m.prototype.rect=function(N,j,Y,se){if(isNaN(N)||isNaN(j)||isNaN(Y)||isNaN(se))throw In.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(N,j),this.lineTo(N+Y,j),this.lineTo(N+Y,j+se),this.lineTo(N,j+se),this.lineTo(N,j),this.lineTo(N+Y,j),this.lineTo(N,j)},m.prototype.fillRect=function(N,j,Y,se){if(isNaN(N)||isNaN(j)||isNaN(Y)||isNaN(se))throw In.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(N,j,Y,se),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},m.prototype.strokeRect=function(N,j,Y,se){if(isNaN(N)||isNaN(j)||isNaN(Y)||isNaN(se))throw In.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(N,j,Y,se),this.stroke())},m.prototype.clearRect=function(N,j,Y,se){if(isNaN(N)||isNaN(j)||isNaN(Y)||isNaN(se))throw In.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(N,j,Y,se))},m.prototype.save=function(N){N=typeof N!="boolean"||N;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),N){this.ctx.fontSize=this.pdf.internal.getFontSize();var se=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=se}},m.prototype.restore=function(N){N=typeof N!="boolean"||N;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(j),N&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(N){var j,Y,se,oe;if(N.isCanvasGradient===!0&&(N=N.getColor()),!N)return{r:0,g:0,b:0,a:0,style:N};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(N))j=0,Y=0,se=0,oe=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(N);if(de!==null)j=parseInt(de[1]),Y=parseInt(de[2]),se=parseInt(de[3]),oe=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(N))!==null)j=parseInt(de[1]),Y=parseInt(de[2]),se=parseInt(de[3]),oe=parseFloat(de[4]);else{if(oe=1,typeof N=="string"&&N.charAt(0)!=="#"){var be=new VE(N);N=be.ok?be.toHex():"#000000"}N.length===4?(j=N.substring(1,2),j+=j,Y=N.substring(2,3),Y+=Y,se=N.substring(3,4),se+=se):(j=N.substring(1,3),Y=N.substring(3,5),se=N.substring(5,7)),j=parseInt(j,16),Y=parseInt(Y,16),se=parseInt(se,16)}}return{r:j,g:Y,b:se,a:oe,style:N}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(N,j,Y,se){if(isNaN(j)||isNaN(Y)||typeof N!="string")throw In.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(se=isNaN(se)?void 0:se,!v.call(this)){var oe=ae(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;V.call(this,{text:N,x:j,y:Y,scale:de,angle:oe,align:this.textAlign,maxWidth:se})}},m.prototype.strokeText=function(N,j,Y,se){if(isNaN(j)||isNaN(Y)||typeof N!="string")throw In.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){se=isNaN(se)?void 0:se;var oe=ae(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;V.call(this,{text:N,x:j,y:Y,scale:de,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:se})}},m.prototype.measureText=function(N){if(typeof N!="string")throw In.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,Y=this.pdf.internal.scaleFactor,se=j.internal.getFontSize(),oe=j.getStringUnitWidth(N)*se/j.internal.scaleFactor,de=function(be){var Ae=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this};return new de({width:oe*=Math.round(96*Y/72*1e4)/1e4})},m.prototype.scale=function(N,j){if(isNaN(N)||isNaN(j))throw In.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(N,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},m.prototype.rotate=function(N){if(isNaN(N))throw In.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new c(Math.cos(N),Math.sin(N),-Math.sin(N),Math.cos(N),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},m.prototype.translate=function(N,j){if(isNaN(N)||isNaN(j))throw In.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,N,j);this.ctx.transform=this.ctx.transform.multiply(Y)},m.prototype.transform=function(N,j,Y,se,oe,de){if(isNaN(N)||isNaN(j)||isNaN(Y)||isNaN(se)||isNaN(oe)||isNaN(de))throw In.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new c(N,j,Y,se,oe,de);this.ctx.transform=this.ctx.transform.multiply(be)},m.prototype.setTransform=function(N,j,Y,se,oe,de){N=isNaN(N)?1:N,j=isNaN(j)?0:j,Y=isNaN(Y)?0:Y,se=isNaN(se)?1:se,oe=isNaN(oe)?0:oe,de=isNaN(de)?0:de,this.ctx.transform=new c(N,j,Y,se,oe,de)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(N,j,Y,se,oe,de,be,Ae,qe){var $e=this.pdf.getImageProperties(N),De=1,Be=1,rt=1,Te=1;se!==void 0&&Ae!==void 0&&(rt=Ae/se,Te=qe/oe,De=$e.width/se*Ae/se,Be=$e.height/oe*qe/oe),de===void 0&&(de=j,be=Y,j=0,Y=0),se!==void 0&&Ae===void 0&&(Ae=se,qe=oe),se===void 0&&Ae===void 0&&(Ae=$e.width,qe=$e.height);for(var ee,Ke=this.ctx.transform.decompose(),Ze=ae(Ke.rotate.shx),ze=new c,We=(ze=(ze=(ze=ze.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new l(de-j*rt,be-Y*Te,se*De,oe*Be)),Je=C.call(this,We),et=[],gt=0;gt<Je.length;gt+=1)et.indexOf(Je[gt])===-1&&et.push(Je[gt]);if(M(et),this.autoPaging)for(var Nt=et[0],jt=et[et.length-1],Ht=Nt;Ht<jt+1;Ht++){this.pdf.setPage(Ht);var Jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],on=Ht===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Ht===1?0:Lt+(Ht-2)*zt;if(this.ctx.clip_path.length!==0){var $r=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ee,this.posX+this.margin[3],-it+on+this.ctx.prevPageLastElemOffset),X.call(this,"fill",!0),this.path=$r}var en=JSON.parse(JSON.stringify(We));en=T([en],this.posX+this.margin[3],-it+on+this.ctx.prevPageLastElemOffset)[0];var bs=(Ht>Nt||Ht<jt)&&S.call(this);bs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,zt,null).clip().discardPath()),this.pdf.addImage(N,"JPEG",en.x,en.y,en.w,en.h,null,null,Ze),bs&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(N,"JPEG",We.x,We.y,We.w,We.h,null,null,Ze)};var C=function(N,j,Y){var se=[];j=j||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(N.type){default:case"mt":case"lt":se.push(Math.floor((N.y+oe)/Y)+1);break;case"arc":se.push(Math.floor((N.y+oe-N.radius)/Y)+1),se.push(Math.floor((N.y+oe+N.radius)/Y)+1);break;case"qct":var de=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x,N.y);se.push(Math.floor((de.y+oe)/Y)+1),se.push(Math.floor((de.y+de.h+oe)/Y)+1);break;case"bct":var be=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);se.push(Math.floor((be.y+oe)/Y)+1),se.push(Math.floor((be.y+be.h+oe)/Y)+1);break;case"rect":se.push(Math.floor((N.y+oe)/Y)+1),se.push(Math.floor((N.y+N.h+oe)/Y)+1)}for(var Ae=0;Ae<se.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<se[Ae];)k.call(this);return se},k=function(){var N=this.fillStyle,j=this.strokeStyle,Y=this.font,se=this.lineCap,oe=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=N,this.strokeStyle=j,this.font=Y,this.lineCap=se,this.lineWidth=oe,this.lineJoin=de},T=function(N,j,Y){for(var se=0;se<N.length;se++)switch(N[se].type){case"bct":N[se].x2+=j,N[se].y2+=Y;case"qct":N[se].x1+=j,N[se].y1+=Y;case"mt":case"lt":case"arc":default:N[se].x+=j,N[se].y+=Y}return N},M=function(N){return N.sort(function(j,Y){return j-Y})},H=function(N,j){for(var Y,se,oe=this.fillStyle,de=this.strokeStyle,be=this.lineCap,Ae=this.lineWidth,qe=Math.abs(Ae*this.ctx.transform.scaleX),$e=this.lineJoin,De=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),rt=[],Te=0;Te<Be.length;Te++)if(Be[Te].x!==void 0)for(var ee=C.call(this,Be[Te]),Ke=0;Ke<ee.length;Ke+=1)rt.indexOf(ee[Ke])===-1&&rt.push(ee[Ke]);for(var Ze=0;Ze<rt.length;Ze++)for(;this.pdf.internal.getNumberOfPages()<rt[Ze];)k.call(this);if(M(rt),this.autoPaging)for(var ze=rt[0],We=rt[rt.length-1],Je=ze;Je<We+1;Je++){this.pdf.setPage(Je),this.fillStyle=oe,this.strokeStyle=de,this.lineCap=be,this.lineWidth=qe,this.lineJoin=$e;var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gt=Je===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ht=Je===1?0:Nt+(Je-2)*jt;if(this.ctx.clip_path.length!==0){var Jt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Y,this.posX+this.margin[3],-Ht+gt+this.ctx.prevPageLastElemOffset),X.call(this,N,!0),this.path=Jt}if(se=JSON.parse(JSON.stringify(De)),this.path=T(se,this.posX+this.margin[3],-Ht+gt+this.ctx.prevPageLastElemOffset),j===!1||Je===0){var on=(Je>ze||Je<We)&&S.call(this);on&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,jt,null).clip().discardPath()),X.call(this,N,j),on&&this.pdf.restoreGraphicsState()}this.lineWidth=Ae}else this.lineWidth=qe,X.call(this,N,j),this.lineWidth=Ae;this.path=De},X=function(N,j){if((N!=="stroke"||j||!x.call(this))&&(N==="stroke"||j||!v.call(this))){for(var Y,se,oe=[],de=this.path,be=0;be<de.length;be++){var Ae=de[be];switch(Ae.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:Ae,deltas:[],abs:[]});break;case"lt":var qe=oe.length;if(de[be-1]&&!isNaN(de[be-1].x)&&(Y=[Ae.x-de[be-1].x,Ae.y-de[be-1].y],qe>0)){for(;qe>=0;qe--)if(oe[qe-1].close!==!0&&oe[qe-1].begin!==!0){oe[qe-1].deltas.push(Y),oe[qe-1].abs.push(Ae);break}}break;case"bct":Y=[Ae.x1-de[be-1].x,Ae.y1-de[be-1].y,Ae.x2-de[be-1].x,Ae.y2-de[be-1].y,Ae.x-de[be-1].x,Ae.y-de[be-1].y],oe[oe.length-1].deltas.push(Y);break;case"qct":var $e=de[be-1].x+2/3*(Ae.x1-de[be-1].x),De=de[be-1].y+2/3*(Ae.y1-de[be-1].y),Be=Ae.x+2/3*(Ae.x1-Ae.x),rt=Ae.y+2/3*(Ae.y1-Ae.y),Te=Ae.x,ee=Ae.y;Y=[$e-de[be-1].x,De-de[be-1].y,Be-de[be-1].x,rt-de[be-1].y,Te-de[be-1].x,ee-de[be-1].y],oe[oe.length-1].deltas.push(Y);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(Ae)}}se=j?null:N==="stroke"?"stroke":"fill";for(var Ke=!1,Ze=0;Ze<oe.length;Ze++)if(oe[Ze].arc)for(var ze=oe[Ze].abs,We=0;We<ze.length;We++){var Je=ze[We];Je.type==="arc"?Z.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,j,!Ke):ue.call(this,Je.x,Je.y),Ke=!0}else if(oe[Ze].close===!0)this.pdf.internal.out("h"),Ke=!1;else if(oe[Ze].begin!==!0){var et=oe[Ze].start.x,gt=oe[Ze].start.y;re.call(this,oe[Ze].deltas,et,gt),Ke=!0}se&&fe.call(this,se),j&&Se.call(this)}},he=function(N){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return N-Y;case"top":return N+j-Y;case"hanging":return N+j-2*Y;case"middle":return N+j/2-Y;case"ideographic":return N;case"alphabetic":default:return N}},ne=function(N){return N+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var N=function(){};return N.colorStops=[],N.addColorStop=function(j,Y){this.colorStops.push([j,Y])},N.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},N.isCanvasGradient=!0,N},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Z=function(N,j,Y,se,oe,de,be,Ae,qe){for(var $e=ce.call(this,Y,se,oe,de),De=0;De<$e.length;De++){var Be=$e[De];De===0&&(qe?q.call(this,Be.x1+N,Be.y1+j):ue.call(this,Be.x1+N,Be.y1+j)),Ee.call(this,N,j,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}Ae?Se.call(this):fe.call(this,be)},fe=function(N){switch(N){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Se=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(N,j){this.pdf.internal.out(t(N)+" "+n(j)+" m")},V=function(N){var j;switch(N.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var Y=this.pdf.getTextDimensions(N.text),se=he.call(this,N.y),oe=ne.call(this,se)-Y.h,de=this.ctx.transform.applyToPoint(new a(N.x,se)),be=this.ctx.transform.decompose(),Ae=new c;Ae=(Ae=(Ae=Ae.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var qe,$e,De,Be=this.ctx.transform.applyToRectangle(new l(N.x,se,Y.w,Y.h)),rt=Ae.applyToRectangle(new l(N.x,oe,Y.w,Y.h)),Te=C.call(this,rt),ee=[],Ke=0;Ke<Te.length;Ke+=1)ee.indexOf(Te[Ke])===-1&&ee.push(Te[Ke]);if(M(ee),this.autoPaging)for(var Ze=ee[0],ze=ee[ee.length-1],We=Ze;We<ze+1;We++){this.pdf.setPage(We);var Je=We===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[2],Nt=gt-this.margin[0],jt=this.pdf.internal.pageSize.width-this.margin[1],Ht=jt-this.margin[3],Jt=We===1?0:et+(We-2)*Nt;if(this.ctx.clip_path.length!==0){var on=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(qe,this.posX+this.margin[3],-1*Jt+Je),X.call(this,"fill",!0),this.path=on}var Lt=T([JSON.parse(JSON.stringify(rt))],this.posX+this.margin[3],-Jt+Je+this.ctx.prevPageLastElemOffset)[0];N.scale>=.01&&($e=this.pdf.internal.getFontSize(),this.pdf.setFontSize($e*N.scale),De=this.lineWidth,this.lineWidth=De*N.scale);var zt=this.autoPaging!=="text";if(zt||Lt.y+Lt.h<=gt){if(zt||Lt.y>=Je&&Lt.x<=jt){var it=zt?N.text:this.pdf.splitTextToSize(N.text,N.maxWidth||jt-Lt.x)[0],$r=T([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-Jt+Je+this.ctx.prevPageLastElemOffset)[0],en=zt&&(We>Ze||We<ze)&&S.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,Nt,null).clip().discardPath()),this.pdf.text(it,$r.x,$r.y,{angle:N.angle,align:j,renderingMode:N.renderingMode}),en&&this.pdf.restoreGraphicsState()}}else Lt.y<gt&&(this.ctx.prevPageLastElemOffset+=gt-Lt.y);N.scale>=.01&&(this.pdf.setFontSize($e),this.lineWidth=De)}else N.scale>=.01&&($e=this.pdf.internal.getFontSize(),this.pdf.setFontSize($e*N.scale),De=this.lineWidth,this.lineWidth=De*N.scale),this.pdf.text(N.text,de.x+this.posX,de.y+this.posY,{angle:N.angle,align:j,renderingMode:N.renderingMode,maxWidth:N.maxWidth}),N.scale>=.01&&(this.pdf.setFontSize($e),this.lineWidth=De)},ue=function(N,j,Y,se){Y=Y||0,se=se||0,this.pdf.internal.out(t(N+Y)+" "+n(j+se)+" l")},re=function(N,j,Y){return this.pdf.lines(N,j,Y,null,null)},Ee=function(N,j,Y,se,oe,de,be,Ae){this.pdf.internal.out([e(r(Y+N)),e(i(se+j)),e(r(oe+N)),e(i(de+j)),e(r(be+N)),e(i(Ae+j)),"c"].join(" "))},ce=function(N,j,Y,se){for(var oe=2*Math.PI,de=Math.PI/2;j>Y;)j-=oe;var be=Math.abs(Y-j);be<oe&&se&&(be=oe-be);for(var Ae=[],qe=se?-1:1,$e=j;be>1e-5;){var De=$e+qe*Math.min(be,de);Ae.push(me.call(this,N,$e,De)),be-=Math.abs(De-$e),$e=De}return Ae},me=function(N,j,Y){var se=(Y-j)/2,oe=N*Math.cos(se),de=N*Math.sin(se),be=oe,Ae=-de,qe=be*be+Ae*Ae,$e=qe+be*oe+Ae*de,De=4/3*(Math.sqrt(2*qe*$e)-$e)/(be*de-Ae*oe),Be=be-De*Ae,rt=Ae+De*be,Te=Be,ee=-rt,Ke=se+j,Ze=Math.cos(Ke),ze=Math.sin(Ke);return{x1:N*Math.cos(j),y1:N*Math.sin(j),x2:Be*Ze-rt*ze,y2:Be*ze+rt*Ze,x3:Te*Ze-ee*ze,y3:Te*ze+ee*Ze,x4:N*Math.cos(Y),y4:N*Math.sin(Y)}},ae=function(N){return 180*N/Math.PI},te=function(N,j,Y,se,oe,de){var be=N+.5*(Y-N),Ae=j+.5*(se-j),qe=oe+.5*(Y-oe),$e=de+.5*(se-de),De=Math.min(N,oe,be,qe),Be=Math.max(N,oe,be,qe),rt=Math.min(j,de,Ae,$e),Te=Math.max(j,de,Ae,$e);return new l(De,rt,Be-De,Te-rt)},J=function(N,j,Y,se,oe,de,be,Ae){var qe,$e,De,Be,rt,Te,ee,Ke,Ze,ze,We,Je,et,gt,Nt=Y-N,jt=se-j,Ht=oe-Y,Jt=de-se,on=be-oe,Lt=Ae-de;for($e=0;$e<41;$e++)Ze=(ee=(De=N+(qe=$e/40)*Nt)+qe*((rt=Y+qe*Ht)-De))+qe*(rt+qe*(oe+qe*on-rt)-ee),ze=(Ke=(Be=j+qe*jt)+qe*((Te=se+qe*Jt)-Be))+qe*(Te+qe*(de+qe*Lt-Te)-Ke),$e==0?(We=Ze,Je=ze,et=Ze,gt=ze):(We=Math.min(We,Ze),Je=Math.min(Je,ze),et=Math.max(et,Ze),gt=Math.max(gt,ze));return new l(Math.round(We),Math.round(Je),Math.round(et-We),Math.round(gt-Je))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var N,j,Y=(N=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:N,lineDashOffset:j}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(Pt.API),function(s){var e=function(i){var a,l,c,h,d,m,y,v,x,S;for(l=[],c=0,h=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;h>c;c+=4)(d=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(m=(d=((d=((d=((d=(d-(S=d%85))/85)-(x=d%85))/85)-(v=d%85))/85)-(y=d%85))/85)%85,l.push(m+33,y+33,v+33,x+33,S+33)):l.push(122);return function(C,k){for(var T=k;T>0;T--)C.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},t=function(i){var a,l,c,h,d,m=String,y="length",v=255,x="charCodeAt",S="slice",C="replace";for(i[S](-2),i=i[S](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),c=[],h=0,d=(i+=a="uuuuu"[S](i[y]%5||5))[y];d>h;h+=5)l=52200625*(i[x](h)-33)+614125*(i[x](h+1)-33)+7225*(i[x](h+2)-33)+85*(i[x](h+3)-33)+(i[x](h+4)-33),c.push(v&l>>24,v&l>>16,v&l>>8,v&l);return function(k,T){for(var M=T;M>0;M--)k.pop()}(c,a[y]),m.fromCharCode.apply(m,c)},n=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},r=function(i){for(var a=new Uint8Array(i.length),l=i.length;l--;)a[l]=i.charCodeAt(l);return i=(a=Kb(a)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};s.processDataByFilters=function(i,a){var l=0,c=i||"",h=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=r(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}}(Pt.API),function(s){s.loadFile=function(e,t,n){return function(r,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(c,h,d){var m=new XMLHttpRequest,y=0,v=function(x){var S=x.length,C=[],k=String.fromCharCode;for(y=0;y<S;y+=1)C.push(k(255&x.charCodeAt(y)));return C.join("")};if(m.open("GET",c,!h),m.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(m.onload=function(){m.status===200?d(v(this.responseText)):d(void 0)}),m.send(null),h&&m.status===200)return v(m.responseText)}(r,i,a)}catch{}return l}(e,t,n)},s.loadImageFile=s.loadFile}(Pt.API),function(s){function e(){return(Tt.html2canvas?Promise.resolve(Tt.html2canvas):nc(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Tt.DOMPurify?Promise.resolve(Tt.DOMPurify):nc(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var l=Ln(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},r=function(a,l){var c=document.createElement(a);for(var h in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[h]=l.style[h];return c},i=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),h=a.convert(Promise.resolve(),c);return h=(h=h.setProgress(1,a,1,[a])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,l){return a.__proto__=l||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:r("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(h,d){for(var m=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)d!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(c(y,d));return h.nodeType===1&&(h.nodeName==="CANVAS"?(m.width=h.width,m.height=h.height,m.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(m.value=h.value),m.addEventListener("load",function(){m.scrollTop=h.scrollTop,m.scrollLeft=h.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=this.opt.jsPDF,h=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var y=0;y<h.length;++y){var v=h[y],x=v.src.find(function(S){return S.format==="truetype"});x&&c.addFont(x.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},i.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(n(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(a,l){return this.then(function(){var c=a in i.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},i.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function l(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(a=a||Pt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,l,c,h){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,l,c,h){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},i.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(h,d){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,h),m}).then(h,d).then(function(m){return c.updateProgress(1),m})})},i.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=c.call(h,a,l);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},i.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return i.convert(l,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Pt.getPageSize=function(a,l,c){if(Ln(a)==="object"){var h=a;a=h.orientation,l=h.unit||l,c=h.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,m=(""+c).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var v,x=0,S=0;if(y.hasOwnProperty(m))x=y[m][1]/d,S=y[m][0]/d;else try{x=c[1],S=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",S>x&&(v=S,S=x,x=v);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>S&&(v=S,S=x,x=v)}return{width:S,height:x,unit:l,k:d,orientation:a}},s.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(t_):null;var c=new i(l);return l.worker?c:c.from(a).doCallback()}}(Pt.API),Pt.API.addJS=function(s){return zS=s,this.internal.events.subscribe("postPutResources",function(){Jv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Jv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),BS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+zS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Jv!==void 0&&BS!==void 0&&this.internal.out("/Names <</JavaScript "+Jv+" 0 R>>")}),this},function(s){var e;s.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),i=0;i<r.length;i++){var a=r[i],l=n.exec(a);if(l!=null){var c=l[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,d=[];for(i=0;i<h;i++){var m=t.internal.newObject();d.push(m);var y=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<d.length;i++)t.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),s.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,r,i){var a={title:r,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var r=0;r<n.children.length;r++)this.genIds_r(n.children[r])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var h=0;h<n.children.length;h++)this.renderItems(n.children[h])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,r){for(var i=0;i<r.children.length;i++)n.count++,this.count_r(n,r.children[i]);return n.count}}])}(Pt.API),function(s){var e=[192,193,194,195,196,197,198,199];s.processJPEG=function(t,n,r,i,a,l){var c,h=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(m){for(var y,v=256*m.charCodeAt(4)+m.charCodeAt(5),x=m.length,S={width:0,height:0,numcomponents:1},C=4;C<x;C+=2){if(C+=v,e.indexOf(m.charCodeAt(C+1))!==-1){y=256*m.charCodeAt(C+5)+m.charCodeAt(C+6),S={width:256*m.charCodeAt(C+7)+m.charCodeAt(C+8),height:y,numcomponents:m.charCodeAt(C+9)};break}v=256*m.charCodeAt(C+2)+m.charCodeAt(C+3)}return S}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:t,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:h,index:n,alias:r}}return d}}(Pt.API);var Mp,Qv,US,qS,HS,aI=function(){var s,e,t;function n(i){var a,l,c,h,d,m,y,v,x,S,C,k,T,M;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),x=(function(){var H,X;for(X=[],H=0;H<4;++H)X.push(String.fromCharCode(this.data[this.pos++]));return X}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),h=this.readUInt16()||100,m.delay=1e3*d/h,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,a-=4),i=(m!=null?m.data:void 0)||this.imgData,k=0;0<=a?k<a:k>a;0<=a?++k:--k)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((S=c-this.transparency.indexed.length)>0)for(T=0;0<=S?T<S:T>S;0<=S?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":y=(C=this.read(a)).indexOf(0),v=String.fromCharCode.apply(String,C.slice(0,y)),this.text[v]=String.fromCharCode.apply(String,C.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var a,l;for(l=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,h=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(m,y,v,x){var S,C,k,T,M,H,X,he,ne,Z,fe,Se,q,V,ue,re,Ee,ce,me,ae,te,J=Math.ceil((h.width-m)/v),G=Math.ceil((h.height-y)/x),N=h.width==J&&h.height==G;for(V=a*J,Se=N?l:new Uint8Array(V*G),H=i.length,q=0,C=0;q<G&&c<H;){switch(i[c++]){case 0:for(T=Ee=0;Ee<V;T=Ee+=1)Se[C++]=i[c++];break;case 1:for(T=ce=0;ce<V;T=ce+=1)S=i[c++],M=T<a?0:Se[C-a],Se[C++]=(S+M)%256;break;case 2:for(T=me=0;me<V;T=me+=1)S=i[c++],k=(T-T%a)/a,ue=q&&Se[(q-1)*V+k*a+T%a],Se[C++]=(ue+S)%256;break;case 3:for(T=ae=0;ae<V;T=ae+=1)S=i[c++],k=(T-T%a)/a,M=T<a?0:Se[C-a],ue=q&&Se[(q-1)*V+k*a+T%a],Se[C++]=(S+Math.floor((M+ue)/2))%256;break;case 4:for(T=te=0;te<V;T=te+=1)S=i[c++],k=(T-T%a)/a,M=T<a?0:Se[C-a],q===0?ue=re=0:(ue=Se[(q-1)*V+k*a+T%a],re=k&&Se[(q-1)*V+(k-1)*a+T%a]),X=M+ue-re,he=Math.abs(X-M),Z=Math.abs(X-ue),fe=Math.abs(X-re),ne=he<=Z&&he<=fe?M:Z<=fe?ue:re,Se[C++]=(S+ne)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!N){var j=((y+q*x)*h.width+m)*a,Y=q*V;for(T=0;T<J;T+=1){for(var se=0;se<a;se+=1)l[j++]=Se[Y++];j+=(v-1)*a}}q++}}return i=jR(i),h.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var i,a,l,c,h,d,m,y,v;for(l=this.palette,d=this.transparency.indexed||[],h=new Uint8Array((d.length||0)+l.length),c=0,i=0,a=m=0,y=l.length;m<y;a=m+=3)h[c++]=l[a],h[c++]=l[a+1],h[c++]=l[a+2],h[c++]=(v=d[i++])!=null?v:255;return h},n.prototype.copyToImageData=function(i,a){var l,c,h,d,m,y,v,x,S,C,k;if(c=this.colors,S=null,l=this.hasAlphaChannel,this.palette.length&&(S=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),c=4,l=!0),x=(h=i.data||i).length,m=S||a,d=y=0,c===1)for(;d<x;)v=S?4*a[d/4]:y,C=m[v++],h[d++]=C,h[d++]=C,h[d++]=C,h[d++]=l?m[v++]:255,y=v;else for(;d<x;)v=S?4*a[d/4]:y,h[d++]=m[v++],h[d++]=m[v++],h[d++]=m[v++],h[d++]=l?m[v++]:255,y=v},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var r=function(){if(Object.prototype.toString.call(Tt)==="[object Window]"){try{e=Tt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),s=function(i){var a;if(r()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var a,l,c,h,d,m,y,v;if(this.animation){for(v=[],l=d=0,m=(y=this.animation.frames).length;d<m;l=++d)a=y[l],c=i.createImageData(a.width,a.height),h=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,h),a.imageData=c,v.push(a.image=s(c));return v}},n.prototype.renderFrame=function(i,a){var l,c,h;return l=(c=this.animation.frames)[a],h=c[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?i.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&i.putImageData(h.imageData,h.xOffset,h.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var a,l,c,h,d,m,y=this;return l=0,m=this.animation,h=m.numFrames,c=m.frames,d=m.numPlays,(a=function(){var v,x;if(v=l++%h,x=c[v],y.renderFrame(i,v),h>1&&l/h<d)return y.animation._timeout=setTimeout(a,x.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var a,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function oI(s){var e=0;if(s[e++]!==71||s[e++]!==73||s[e++]!==70||s[e++]!==56||(s[e++]+1&253)!=56||s[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=s[e++]|s[e++]<<8,n=s[e++]|s[e++]<<8,r=s[e++],i=r>>7,a=1<<(7&r)+1;s[e++],s[e++];var l=null,c=null;i&&(l=e,c=a,e+=3*a);var h=!0,d=[],m=0,y=null,v=0,x=null;for(this.width=t,this.height=n;h&&e<s.length;)switch(s[e++]){case 33:switch(s[e++]){case 255:if(s[e]!==11||s[e+1]==78&&s[e+2]==69&&s[e+3]==84&&s[e+4]==83&&s[e+5]==67&&s[e+6]==65&&s[e+7]==80&&s[e+8]==69&&s[e+9]==50&&s[e+10]==46&&s[e+11]==48&&s[e+12]==3&&s[e+13]==1&&s[e+16]==0)e+=14,x=s[e++]|s[e++]<<8,e++;else for(e+=12;;){if(!((q=s[e++])>=0))throw Error("Invalid block size");if(q===0)break;e+=q}break;case 249:if(s[e++]!==4||s[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=s[e++];m=s[e++]|s[e++]<<8,y=s[e++],(1&S)==0&&(y=null),v=S>>2&7,e++;break;case 254:for(;;){if(!((q=s[e++])>=0))throw Error("Invalid block size");if(q===0)break;e+=q}break;default:throw new Error("Unknown graphic control label: 0x"+s[e-1].toString(16))}break;case 44:var C=s[e++]|s[e++]<<8,k=s[e++]|s[e++]<<8,T=s[e++]|s[e++]<<8,M=s[e++]|s[e++]<<8,H=s[e++],X=H>>6&1,he=1<<(7&H)+1,ne=l,Z=c,fe=!1;H>>7&&(fe=!0,ne=e,Z=he,e+=3*he);var Se=e;for(e++;;){var q;if(!((q=s[e++])>=0))throw Error("Invalid block size");if(q===0)break;e+=q}d.push({x:C,y:k,width:T,height:M,has_local_palette:fe,palette_offset:ne,palette_size:Z,data_offset:Se,data_length:e-Se,transparent_index:y,interlaced:!!X,delay:m,disposal:v});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+s[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(V){if(V<0||V>=d.length)throw new Error("Frame index out of range.");return d[V]},this.decodeAndBlitFrameBGRA=function(V,ue){var re=this.frameInfo(V),Ee=re.width*re.height,ce=new Uint8Array(Ee);$S(s,re.data_offset,ce,Ee);var me=re.palette_offset,ae=re.transparent_index;ae===null&&(ae=256);var te=re.width,J=t-te,G=te,N=4*(re.y*t+re.x),j=4*((re.y+re.height)*t+re.x),Y=N,se=4*J;re.interlaced===!0&&(se+=4*t*7);for(var oe=8,de=0,be=ce.length;de<be;++de){var Ae=ce[de];if(G===0&&(G=te,(Y+=se)>=j&&(se=4*J+4*t*(oe-1),Y=N+(te+J)*(oe<<1),oe>>=1)),Ae===ae)Y+=4;else{var qe=s[me+3*Ae],$e=s[me+3*Ae+1],De=s[me+3*Ae+2];ue[Y++]=De,ue[Y++]=$e,ue[Y++]=qe,ue[Y++]=255}--G}},this.decodeAndBlitFrameRGBA=function(V,ue){var re=this.frameInfo(V),Ee=re.width*re.height,ce=new Uint8Array(Ee);$S(s,re.data_offset,ce,Ee);var me=re.palette_offset,ae=re.transparent_index;ae===null&&(ae=256);var te=re.width,J=t-te,G=te,N=4*(re.y*t+re.x),j=4*((re.y+re.height)*t+re.x),Y=N,se=4*J;re.interlaced===!0&&(se+=4*t*7);for(var oe=8,de=0,be=ce.length;de<be;++de){var Ae=ce[de];if(G===0&&(G=te,(Y+=se)>=j&&(se=4*J+4*t*(oe-1),Y=N+(te+J)*(oe<<1),oe>>=1)),Ae===ae)Y+=4;else{var qe=s[me+3*Ae],$e=s[me+3*Ae+1],De=s[me+3*Ae+2];ue[Y++]=qe,ue[Y++]=$e,ue[Y++]=De,ue[Y++]=255}--G}}}function $S(s,e,t,n){for(var r=s[e++],i=1<<r,a=i+1,l=a+1,c=r+1,h=(1<<c)-1,d=0,m=0,y=0,v=s[e++],x=new Int32Array(4096),S=null;;){for(;d<16&&v!==0;)m|=s[e++]<<d,d+=8,v===1?v=s[e++]:--v;if(d<c)break;var C=m&h;if(m>>=c,d-=c,C!==i){if(C===a)break;for(var k=C<l?C:S,T=0,M=k;M>i;)M=x[M]>>8,++T;var H=M;if(y+T+(k!==C?1:0)>n)return void In.log("Warning, gif stream longer than expected.");t[y++]=H;var X=y+=T;for(k!==C&&(t[y++]=H),M=k;T--;)M=x[M],t[--X]=255&M,M>>=8;S!==null&&l<4096&&(x[l++]=S<<8|H,l>=h+1&&c<12&&(++c,h=h<<1|1)),S=C}else l=a+1,h=(1<<(c=r+1))-1,S=null}return y!==n&&In.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function fw(s){var e,t,n,r,i,a=Math.floor,l=new Array(64),c=new Array(64),h=new Array(64),d=new Array(64),m=new Array(65535),y=new Array(65535),v=new Array(64),x=new Array(64),S=[],C=0,k=7,T=new Array(64),M=new Array(64),H=new Array(64),X=new Array(256),he=new Array(2048),ne=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Z=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],fe=[0,1,2,3,4,5,6,7,8,9,10,11],Se=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ue=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ce(N,j){for(var Y=0,se=0,oe=new Array,de=1;de<=16;de++){for(var be=1;be<=N[de];be++)oe[j[se]]=[],oe[j[se]][0]=Y,oe[j[se]][1]=de,se++,Y++;Y*=2}return oe}function me(N){for(var j=N[0],Y=N[1]-1;Y>=0;)j&1<<Y&&(C|=1<<k),Y--,--k<0&&(C==255?(ae(255),ae(0)):ae(C),k=7,C=0)}function ae(N){S.push(N)}function te(N){ae(N>>8&255),ae(255&N)}function J(N,j,Y,se,oe){for(var de,be=oe[0],Ae=oe[240],qe=function(ze,We){var Je,et,gt,Nt,jt,Ht,Jt,on,Lt,zt,it=0;for(Lt=0;Lt<8;++Lt){Je=ze[it],et=ze[it+1],gt=ze[it+2],Nt=ze[it+3],jt=ze[it+4],Ht=ze[it+5],Jt=ze[it+6];var $r=Je+(on=ze[it+7]),en=Je-on,bs=et+Jt,An=et-Jt,Pn=gt+Ht,_s=gt-Ht,rn=Nt+jt,Qa=Nt-jt,Mn=$r+rn,Wr=$r-rn,Si=bs+Pn,zn=bs-Pn;ze[it]=Mn+Si,ze[it+4]=Mn-Si;var It=.707106781*(zn+Wr);ze[it+2]=Wr+It,ze[it+6]=Wr-It;var ln=.382683433*((Mn=Qa+_s)-(zn=An+en)),Wo=.5411961*Mn+ln,Lr=1.306562965*zn+ln,xs=.707106781*(Si=_s+An),Gs=en+xs,_t=en-xs;ze[it+5]=_t+Wo,ze[it+3]=_t-Wo,ze[it+1]=Gs+Lr,ze[it+7]=Gs-Lr,it+=8}for(it=0,Lt=0;Lt<8;++Lt){Je=ze[it],et=ze[it+8],gt=ze[it+16],Nt=ze[it+24],jt=ze[it+32],Ht=ze[it+40],Jt=ze[it+48];var Qi=Je+(on=ze[it+56]),Ei=Je-on,ki=et+Jt,Un=et-Jt,qn=gt+Ht,Gr=gt-Ht,Go=Nt+jt,Za=Nt-jt,Vs=Qi+Go,Ys=Qi-Go,Or=ki+qn,Ks=ki-qn;ze[it]=Vs+Or,ze[it+32]=Vs-Or;var Zi=.707106781*(Ks+Ys);ze[it+16]=Ys+Zi,ze[it+48]=Ys-Zi;var Sa=.382683433*((Vs=Za+Gr)-(Ks=Un+Ei)),Vo=.5411961*Vs+Sa,Ul=1.306562965*Ks+Sa,ql=.707106781*(Or=Gr+Un),Hl=Ei+ql,ac=Ei-ql;ze[it+40]=ac+Vo,ze[it+24]=ac-Vo,ze[it+8]=Hl+Ul,ze[it+56]=Hl-Ul,it++}for(Lt=0;Lt<64;++Lt)zt=ze[Lt]*We[Lt],v[Lt]=zt>0?zt+.5|0:zt-.5|0;return v}(N,j),$e=0;$e<64;++$e)x[ne[$e]]=qe[$e];var De=x[0]-Y;Y=x[0],De==0?me(se[0]):(me(se[y[de=32767+De]]),me(m[de]));for(var Be=63;Be>0&&x[Be]==0;)Be--;if(Be==0)return me(be),Y;for(var rt,Te=1;Te<=Be;){for(var ee=Te;x[Te]==0&&Te<=Be;)++Te;var Ke=Te-ee;if(Ke>=16){rt=Ke>>4;for(var Ze=1;Ze<=rt;++Ze)me(Ae);Ke&=15}de=32767+x[Te],me(oe[(Ke<<4)+y[de]]),me(m[de]),Te++}return Be!=63&&me(be),Y}function G(N){N=Math.min(Math.max(N,1),100),i!=N&&(function(j){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],se=0;se<64;se++){var oe=a((Y[se]*j+50)/100);oe=Math.min(Math.max(oe,1),255),l[ne[se]]=oe}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var Ae=a((de[be]*j+50)/100);Ae=Math.min(Math.max(Ae,1),255),c[ne[be]]=Ae}for(var qe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],$e=0,De=0;De<8;De++)for(var Be=0;Be<8;Be++)h[$e]=1/(l[ne[$e]]*qe[De]*qe[Be]*8),d[$e]=1/(c[ne[$e]]*qe[De]*qe[Be]*8),$e++}(N<50?Math.floor(5e3/N):Math.floor(200-2*N)),i=N)}this.encode=function(N,j){j&&G(j),S=new Array,C=0,k=7,te(65496),te(65504),te(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),te(1),te(1),ae(0),ae(0),function(){te(65499),te(132),ae(0);for(var et=0;et<64;et++)ae(l[et]);ae(1);for(var gt=0;gt<64;gt++)ae(c[gt])}(),function(et,gt){te(65472),te(17),ae(8),te(gt),te(et),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)}(N.width,N.height),function(){te(65476),te(418),ae(0);for(var et=0;et<16;et++)ae(Z[et+1]);for(var gt=0;gt<=11;gt++)ae(fe[gt]);ae(16);for(var Nt=0;Nt<16;Nt++)ae(Se[Nt+1]);for(var jt=0;jt<=161;jt++)ae(q[jt]);ae(1);for(var Ht=0;Ht<16;Ht++)ae(V[Ht+1]);for(var Jt=0;Jt<=11;Jt++)ae(ue[Jt]);ae(17);for(var on=0;on<16;on++)ae(re[on+1]);for(var Lt=0;Lt<=161;Lt++)ae(Ee[Lt])}(),te(65498),te(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var Y=0,se=0,oe=0;C=0,k=7,this.encode.displayName="_encode_";for(var de,be,Ae,qe,$e,De,Be,rt,Te,ee=N.data,Ke=N.width,Ze=N.height,ze=4*Ke,We=0;We<Ze;){for(de=0;de<ze;){for($e=ze*We+de,Be=-1,rt=0,Te=0;Te<64;Te++)De=$e+(rt=Te>>3)*ze+(Be=4*(7&Te)),We+rt>=Ze&&(De-=ze*(We+1+rt-Ze)),de+Be>=ze&&(De-=de+Be-ze+4),be=ee[De++],Ae=ee[De++],qe=ee[De++],T[Te]=(he[be]+he[Ae+256>>0]+he[qe+512>>0]>>16)-128,M[Te]=(he[be+768>>0]+he[Ae+1024>>0]+he[qe+1280>>0]>>16)-128,H[Te]=(he[be+1280>>0]+he[Ae+1536>>0]+he[qe+1792>>0]>>16)-128;Y=J(T,h,Y,e,n),se=J(M,d,se,t,r),oe=J(H,d,oe,t,r),de+=32}We+=8}if(k>=0){var Je=[];Je[1]=k+1,Je[0]=(1<<k+1)-1,me(Je)}return te(65497),new Uint8Array(S)},s=s||50,function(){for(var N=String.fromCharCode,j=0;j<256;j++)X[j]=N(j)}(),e=ce(Z,fe),t=ce(V,ue),n=ce(Se,q),r=ce(re,Ee),function(){for(var N=1,j=2,Y=1;Y<=15;Y++){for(var se=N;se<j;se++)y[32767+se]=Y,m[32767+se]=[],m[32767+se][1]=Y,m[32767+se][0]=se;for(var oe=-(j-1);oe<=-N;oe++)y[32767+oe]=Y,m[32767+oe]=[],m[32767+oe][1]=Y,m[32767+oe][0]=j-1+oe;N<<=1,j<<=1}}(),function(){for(var N=0;N<256;N++)he[N]=19595*N,he[N+256>>0]=38470*N,he[N+512>>0]=7471*N+32768,he[N+768>>0]=-11059*N,he[N+1024>>0]=-21709*N,he[N+1280>>0]=32768*N+8421375,he[N+1536>>0]=-27439*N,he[N+1792>>0]=-5329*N}(),G(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ao(s,e){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function WS(s){function e(Z){if(!Z)throw Error("assert :P")}function t(Z,fe,Se){for(var q=0;4>q;q++)if(Z[fe+q]!=Se.charCodeAt(q))return!0;return!1}function n(Z,fe,Se,q,V){for(var ue=0;ue<V;ue++)Z[fe+ue]=Se[q+ue]}function r(Z,fe,Se,q){for(var V=0;V<q;V++)Z[fe+V]=Se}function i(Z){return new Int32Array(Z)}function a(Z,fe){for(var Se=[],q=0;q<Z;q++)Se.push(new fe);return Se}function l(Z,fe){var Se=[];return function q(V,ue,re){for(var Ee=re[ue],ce=0;ce<Ee&&(V.push(re.length>ue+1?[]:new fe),!(re.length<ue+1));ce++)q(V[ce],ue+1,re)}(Se,0,Z),Se}var c=function(){var Z=this;function fe(g,b){for(var E=1<<b-1>>>0;g&E;)E>>>=1;return E?(g&E-1)+E:g}function Se(g,b,E,P,I){e(!(P%E));do g[b+(P-=E)]=I;while(0<P)}function q(g,b,E,P,I){if(e(2328>=I),512>=I)var F=i(512);else if((F=i(I))==null)return 0;return function(z,$,W,K,ge,Ce){var Le,xe,Ue=$,Ie=1<<W,ye=i(16),we=i(16);for(e(ge!=0),e(K!=null),e(z!=null),e(0<W),xe=0;xe<ge;++xe){if(15<K[xe])return 0;++ye[K[xe]]}if(ye[0]==ge)return 0;for(we[1]=0,Le=1;15>Le;++Le){if(ye[Le]>1<<Le)return 0;we[Le+1]=we[Le]+ye[Le]}for(xe=0;xe<ge;++xe)Le=K[xe],0<K[xe]&&(Ce[we[Le]++]=xe);if(we[15]==1)return(K=new V).g=0,K.value=Ce[0],Se(z,Ue,1,Ie,K),Ie;var Fe,Me=-1,je=Ie-1,ot=0,tt=1,xt=1,nt=1<<W;for(xe=0,Le=1,ge=2;Le<=W;++Le,ge<<=1){if(tt+=xt<<=1,0>(xt-=ye[Le]))return 0;for(;0<ye[Le];--ye[Le])(K=new V).g=Le,K.value=Ce[xe++],Se(z,Ue+ot,ge,nt,K),ot=fe(ot,Le)}for(Le=W+1,ge=2;15>=Le;++Le,ge<<=1){if(tt+=xt<<=1,0>(xt-=ye[Le]))return 0;for(;0<ye[Le];--ye[Le]){if(K=new V,(ot&je)!=Me){for(Ue+=nt,Fe=1<<(Me=Le)-W;15>Me&&!(0>=(Fe-=ye[Me]));)++Me,Fe<<=1;Ie+=nt=1<<(Fe=Me-W),z[$+(Me=ot&je)].g=Fe+W,z[$+Me].value=Ue-$-Me}K.g=Le-W,K.value=Ce[xe++],Se(z,Ue+(ot>>W),ge,nt,K),ot=fe(ot,Le)}}return tt!=2*we[15]-1?0:Ie}(g,b,E,P,I,F)}function V(){this.value=this.g=0}function ue(){this.value=this.g=0}function re(){this.G=a(5,V),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Qn,ue)}function Ee(g,b,E,P){e(g!=null),e(b!=null),e(2147483648>P),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=b,g.pa=E,g.Jd=b,g.Yc=E+P,g.Zc=4<=P?E+P-4+1:E,de(g)}function ce(g,b){for(var E=0;0<b--;)E|=Ae(g,128)<<b;return E}function me(g,b){var E=ce(g,b);return be(g)?-E:E}function ae(g,b,E,P){var I,F=0;for(e(g!=null),e(b!=null),e(4294967288>P),g.Sb=P,g.Ra=0,g.u=0,g.h=0,4<P&&(P=4),I=0;I<P;++I)F+=b[E+I]<<8*I;g.Ra=F,g.bb=P,g.oa=b,g.pa=E}function te(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<kc-8>>>0,++g.bb,g.u-=8;Y(g)&&(g.h=1,g.u=0)}function J(g,b){if(e(0<=b),!g.h&&b<=Ec){var E=j(g)&Sc[b];return g.u+=b,te(g),E}return g.h=1,g.u=0}function G(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function N(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(g){return g.Ra>>>(g.u&kc-1)>>>0}function Y(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>kc}function se(g,b){g.u=b,g.h=Y(g)}function oe(g){g.u>=Cc&&(e(g.u>=Cc),te(g))}function de(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function be(g){return ce(g,1)}function Ae(g,b){var E=g.Ca;0>g.b&&de(g);var P=g.b,I=E*b>>>8,F=(g.I>>>P>I)+0;for(F?(E-=I,g.I-=I+1<<P>>>0):E=I+1,P=E,I=0;256<=P;)I+=8,P>>=8;return P=7^I+ci[P],g.b-=P,g.Ca=(E<<P)-1,F}function qe(g,b,E){g[b+0]=E>>24&255,g[b+1]=E>>16&255,g[b+2]=E>>8&255,g[b+3]=E>>0&255}function $e(g,b){return g[b+0]<<0|g[b+1]<<8}function De(g,b){return $e(g,b)|g[b+2]<<16}function Be(g,b){return $e(g,b)|$e(g,b+2)<<16}function rt(g,b){var E=1<<b;return e(g!=null),e(0<b),g.X=i(E),g.X==null?0:(g.Mb=32-b,g.Xa=b,1)}function Te(g,b){e(g!=null),e(b!=null),e(g.Xa==b.Xa),n(b.X,0,g.X,0,1<<b.Xa)}function ee(){this.X=[],this.Xa=this.Mb=0}function Ke(g,b,E,P){e(E!=null),e(P!=null);var I=E[0],F=P[0];return I==0&&(I=(g*F+b/2)/b),F==0&&(F=(b*I+g/2)/g),0>=I||0>=F?0:(E[0]=I,P[0]=F,1)}function Ze(g,b){return g+(1<<b)-1>>>b}function ze(g,b){return((4278255360&g)+(4278255360&b)>>>0&4278255360)+((16711935&g)+(16711935&b)>>>0&16711935)>>>0}function We(g,b){Z[b]=function(E,P,I,F,z,$,W){var K;for(K=0;K<z;++K){var ge=Z[g]($[W+K-1],I,F+K);$[W+K]=ze(E[P+K],ge)}}}function Je(){this.ud=this.hd=this.jd=0}function et(g,b){return((4278124286&(g^b))>>>1)+(g&b)>>>0}function gt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Nt(g,b){return gt(g+(g-b+.5>>1))}function jt(g,b,E){return Math.abs(b-E)-Math.abs(g-E)}function Ht(g,b,E,P,I,F,z){for(P=F[z-1],E=0;E<I;++E)F[z+E]=P=ze(g[b+E],P)}function Jt(g,b,E,P,I){var F;for(F=0;F<E;++F){var z=g[b+F],$=z>>8&255,W=16711935&(W=(W=16711935&z)+(($<<16)+$));P[I+F]=(4278255360&z)+W>>>0}}function on(g,b){b.jd=g>>0&255,b.hd=g>>8&255,b.ud=g>>16&255}function Lt(g,b,E,P,I,F){var z;for(z=0;z<P;++z){var $=b[E+z],W=$>>>8,K=$,ge=255&(ge=(ge=$>>>16)+((g.jd<<24>>24)*(W<<24>>24)>>>5));K=255&(K=(K=K+((g.hd<<24>>24)*(W<<24>>24)>>>5))+((g.ud<<24>>24)*(ge<<24>>24)>>>5)),I[F+z]=(4278255360&$)+(ge<<16)+K}}function zt(g,b,E,P,I){Z[b]=function(F,z,$,W,K,ge,Ce,Le,xe){for(W=Ce;W<Le;++W)for(Ce=0;Ce<xe;++Ce)K[ge++]=I($[P(F[z++])])},Z[g]=function(F,z,$,W,K,ge,Ce){var Le=8>>F.b,xe=F.Ea,Ue=F.K[0],Ie=F.w;if(8>Le)for(F=(1<<F.b)-1,Ie=(1<<Le)-1;z<$;++z){var ye,we=0;for(ye=0;ye<xe;++ye)ye&F||(we=P(W[K++])),ge[Ce++]=I(Ue[we&Ie]),we>>=Le}else Z["VP8LMapColor"+E](W,K,Ue,Ie,ge,Ce,z,$,xe)}}function it(g,b,E,P,I){for(E=b+E;b<E;){var F=g[b++];P[I++]=F>>16&255,P[I++]=F>>8&255,P[I++]=F>>0&255}}function $r(g,b,E,P,I){for(E=b+E;b<E;){var F=g[b++];P[I++]=F>>16&255,P[I++]=F>>8&255,P[I++]=F>>0&255,P[I++]=F>>24&255}}function en(g,b,E,P,I){for(E=b+E;b<E;){var F=(z=g[b++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;P[I++]=F,P[I++]=z}}function bs(g,b,E,P,I){for(E=b+E;b<E;){var F=(z=g[b++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;P[I++]=F,P[I++]=z}}function An(g,b,E,P,I){for(E=b+E;b<E;){var F=g[b++];P[I++]=F>>0&255,P[I++]=F>>8&255,P[I++]=F>>16&255}}function Pn(g,b,E,P,I,F){if(F==0)for(E=b+E;b<E;)qe(P,((F=g[b++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),I+=32;else n(P,I,g,b,E)}function _s(g,b){Z[b][0]=Z[g+"0"],Z[b][1]=Z[g+"1"],Z[b][2]=Z[g+"2"],Z[b][3]=Z[g+"3"],Z[b][4]=Z[g+"4"],Z[b][5]=Z[g+"5"],Z[b][6]=Z[g+"6"],Z[b][7]=Z[g+"7"],Z[b][8]=Z[g+"8"],Z[b][9]=Z[g+"9"],Z[b][10]=Z[g+"10"],Z[b][11]=Z[g+"11"],Z[b][12]=Z[g+"12"],Z[b][13]=Z[g+"13"],Z[b][14]=Z[g+"0"],Z[b][15]=Z[g+"0"]}function rn(g){return g==Ic||g==uu||g==cd||g==hd}function Qa(){this.eb=[],this.size=this.A=this.fb=0}function Mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qa,this.f.kb=new Mn,this.sd=null}function Si(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function zn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function It(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function ln(g,b){var E=g.T,P=b.ba.f.RGBA,I=P.eb,F=P.fb+g.ka*P.A,z=Ri[b.ba.S],$=g.y,W=g.O,K=g.f,ge=g.N,Ce=g.ea,Le=g.W,xe=b.cc,Ue=b.dc,Ie=b.Mc,ye=b.Nc,we=g.ka,Fe=g.ka+g.T,Me=g.U,je=Me+1>>1;for(we==0?z($,W,null,null,K,ge,Ce,Le,K,ge,Ce,Le,I,F,null,null,Me):(z(b.ec,b.fc,$,W,xe,Ue,Ie,ye,K,ge,Ce,Le,I,F-P.A,I,F,Me),++E);we+2<Fe;we+=2)xe=K,Ue=ge,Ie=Ce,ye=Le,ge+=g.Rc,Le+=g.Rc,F+=2*P.A,z($,(W+=2*g.fa)-g.fa,$,W,xe,Ue,Ie,ye,K,ge,Ce,Le,I,F-P.A,I,F,Me);return W+=g.fa,g.j+Fe<g.o?(n(b.ec,b.fc,$,W,Me),n(b.cc,b.dc,K,ge,je),n(b.Mc,b.Nc,Ce,Le,je),E--):1&Fe||z($,W,null,null,K,ge,Ce,Le,K,ge,Ce,Le,I,F+P.A,null,null,Me),E}function Wo(g,b,E){var P=g.F,I=[g.J];if(P!=null){var F=g.U,z=b.ba.S,$=z==ud||z==cd;b=b.ba.f.RGBA;var W=[0],K=g.ka;W[0]=g.T,g.Kb&&(K==0?--W[0]:(--K,I[0]-=g.width),g.j+g.ka+g.T==g.o&&(W[0]=g.o-g.j-K));var ge=b.eb;K=b.fb+K*b.A,g=vn(P,I[0],g.width,F,W,ge,K+($?0:3),b.A),e(E==W),g&&rn(z)&&Ni(ge,K,$,F,W,b.A)}return 0}function Lr(g){var b=g.ma,E=b.ba.S,P=11>E,I=E==ll||E==ld||E==ud||E==En||E==12||rn(E);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!xc(b.Oa,g,I?11:12))return 0;if(I&&rn(E)&&Ge(),g.da)alert("todo:use_scaling");else{if(P){if(b.Ib=It,g.Kb){if(E=g.U+1>>1,b.memory=i(g.U+2*E),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+g.U,b.Mc=b.cc,b.Nc=b.dc+E,b.Ib=ln,Ge()}}else alert("todo:EmitYUV");I&&(b.Jb=Wo,P&&ke())}if(P&&!Fr){for(g=0;256>g;++g)Ii[g]=89858*(g-128)+ta>>co,Oi[g]=-22014*(g-128)+ta,Dc[g]=-45773*(g-128),fu[g]=113618*(g-128)+ta>>co;for(g=yn;g<_n;++g)b=76283*(g-16)+ta>>co,up[g-yn]=ns(b,255),cv[g-yn]=ns(b+8>>4,15);Fr=1}return 1}function xs(g){var b=g.ma,E=g.U,P=g.T;return e(!(1&g.ka)),0>=E||0>=P?0:(E=b.Ib(g,b),b.Jb!=null&&b.Jb(g,b,E),b.Dc+=E,1)}function Gs(g){g.ma.memory=null}function _t(g,b,E,P){return J(g,8)!=47?0:(b[0]=J(g,14)+1,E[0]=J(g,14)+1,P[0]=J(g,1),J(g,3)!=0?0:!g.h)}function Qi(g,b){if(4>g)return g+1;var E=g-2>>1;return(2+(1&g)<<E)+J(b,E)+1}function Ei(g,b){return 120<b?b-120:1<=(E=((E=Ny[b-1])>>4)*g+(8-(15&E)))?E:1;var E}function ki(g,b,E){var P=j(E),I=g[b+=255&P].g-8;return 0<I&&(se(E,E.u+8),P=j(E),b+=g[b].value,b+=P&(1<<I)-1),se(E,E.u+g[b].g),g[b].value}function Un(g,b,E){return E.g+=g.g,E.value+=g.value<<b>>>0,e(8>=E.g),g.g}function qn(g,b,E){var P=g.xc;return e((b=P==0?0:g.vc[g.md*(E>>P)+(b>>P)])<g.Wb),g.Ya[b]}function Gr(g,b,E,P){var I=g.ab,F=g.c*b,z=g.C;b=z+b;var $=E,W=P;for(P=g.Ta,E=g.Ua;0<I--;){var K=g.gc[I],ge=z,Ce=b,Le=$,xe=W,Ue=(W=P,$=E,K.Ea);switch(e(ge<Ce),e(Ce<=K.nc),K.hc){case 2:ip(Le,xe,(Ce-ge)*Ue,W,$);break;case 0:var Ie=ge,ye=Ce,we=W,Fe=$,Me=(nt=K).Ea;Ie==0&&(ru(Le,xe,null,null,1,we,Fe),Ht(Le,xe+1,0,0,Me-1,we,Fe+1),xe+=Me,Fe+=Me,++Ie);for(var je=1<<nt.b,ot=je-1,tt=Ze(Me,nt.b),xt=nt.K,nt=nt.w+(Ie>>nt.b)*tt;Ie<ye;){var sn=xt,an=nt,Zt=1;for(no(Le,xe,we,Fe-Me,1,we,Fe);Zt<Me;){var Ut=(Zt&~ot)+je;Ut>Me&&(Ut=Me),(0,Na[sn[an++]>>8&15])(Le,xe+ +Zt,we,Fe+Zt-Me,Ut-Zt,we,Fe+Zt),Zt=Ut}xe+=Me,Fe+=Me,++Ie&ot||(nt+=tt)}Ce!=K.nc&&n(W,$-Ue,W,$+(Ce-ge-1)*Ue,Ue);break;case 1:for(Ue=Le,ye=xe,Me=(Le=K.Ea)-(Fe=Le&~(we=(xe=1<<K.b)-1)),Ie=Ze(Le,K.b),je=K.K,K=K.w+(ge>>K.b)*Ie;ge<Ce;){for(ot=je,tt=K,xt=new Je,nt=ye+Fe,sn=ye+Le;ye<nt;)on(ot[tt++],xt),sl(xt,Ue,ye,xe,W,$),ye+=xe,$+=xe;ye<sn&&(on(ot[tt++],xt),sl(xt,Ue,ye,Me,W,$),ye+=Me,$+=Me),++ge&we||(K+=Ie)}break;case 3:if(Le==W&&xe==$&&0<K.b){for(ye=W,Le=Ue=$+(Ce-ge)*Ue-(Fe=(Ce-ge)*Ze(K.Ea,K.b)),xe=W,we=$,Ie=[],Fe=(Me=Fe)-1;0<=Fe;--Fe)Ie[Fe]=xe[we+Fe];for(Fe=Me-1;0<=Fe;--Fe)ye[Le+Fe]=Ie[Fe];hi(K,ge,Ce,W,Ue,W,$)}else hi(K,ge,Ce,Le,xe,W,$)}$=P,W=E}W!=E&&n(P,E,$,W,F)}function Go(g,b){var E=g.V,P=g.Ba+g.c*g.C,I=b-g.C;if(e(b<=g.l.o),e(16>=I),0<I){var F=g.l,z=g.Ta,$=g.Ua,W=F.width;if(Gr(g,I,E,P),I=$=[$],e((E=g.C)<(P=b)),e(F.v<F.va),P>F.o&&(P=F.o),E<F.j){var K=F.j-E;E=F.j,I[0]+=K*W}if(E>=P?E=0:(I[0]+=4*F.v,F.ka=E-F.j,F.U=F.va-F.v,F.T=P-E,E=1),E){if($=$[0],11>(E=g.ca).S){var ge=E.f.RGBA,Ce=(P=E.S,I=F.U,F=F.T,K=ge.eb,ge.A),Le=F;for(ge=ge.fb+g.Ma*ge.A;0<Le--;){var xe=z,Ue=$,Ie=I,ye=K,we=ge;switch(P){case sp:di(xe,Ue,Ie,ye,we);break;case ll:Yr(xe,Ue,Ie,ye,we);break;case Ic:Yr(xe,Ue,Ie,ye,we),Ni(ye,we,0,Ie,1,0);break;case sv:io(xe,Ue,Ie,ye,we);break;case ld:Pn(xe,Ue,Ie,ye,we,1);break;case uu:Pn(xe,Ue,Ie,ye,we,1),Ni(ye,we,0,Ie,1,0);break;case ud:Pn(xe,Ue,Ie,ye,we,0);break;case cd:Pn(xe,Ue,Ie,ye,we,0),Ni(ye,we,1,Ie,1,0);break;case En:al(xe,Ue,Ie,ye,we);break;case hd:al(xe,Ue,Ie,ye,we),Sn(ye,we,Ie,1,0);break;case ap:ro(xe,Ue,Ie,ye,we);break;default:e(0)}$+=W,ge+=Ce}g.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=E.height)}}g.C=b,e(g.C<=g.i)}function Za(g){var b;if(0<g.ua)return 0;for(b=0;b<g.Wb;++b){var E=g.Ya[b].G,P=g.Ya[b].H;if(0<E[1][P[1]+0].g||0<E[2][P[2]+0].g||0<E[3][P[3]+0].g)return 0}return 1}function Vs(g,b,E,P,I,F){if(g.Z!=0){var z=g.qd,$=g.rd;for(e(Xr[g.Z]!=null);b<E;++b)Xr[g.Z](z,$,P,I,P,I,F),z=P,$=I,I+=F;g.qd=z,g.rd=$}}function Ys(g,b){var E=g.l.ma,P=E.Z==0||E.Z==1?g.l.j:g.C;if(P=g.C<P?P:g.C,e(b<=g.l.o),b>P){var I=g.l.width,F=E.ca,z=E.tb+I*P,$=g.V,W=g.Ba+g.c*P,K=g.gc;e(g.ab==1),e(K[0].hc==3),sd(K[0],P,b,$,W,F,z),Vs(E,P,b,F,z,I)}g.C=g.Ma=b}function Or(g,b,E,P,I,F,z){var $=g.$/P,W=g.$%P,K=g.m,ge=g.s,Ce=E+g.$,Le=Ce;I=E+P*I;var xe=E+P*F,Ue=280+ge.ua,Ie=g.Pb?$:16777216,ye=0<ge.ua?ge.Wa:null,we=ge.wc,Fe=Ce<xe?qn(ge,W,$):null;e(g.C<F),e(xe<=I);var Me=!1;e:for(;;){for(;Me||Ce<xe;){var je=0;if($>=Ie){var ot=Ce-E;e((Ie=g).Pb),Ie.wd=Ie.m,Ie.xd=ot,0<Ie.s.ua&&Te(Ie.s.Wa,Ie.s.vb),Ie=$+lp}if(W&we||(Fe=qn(ge,W,$)),e(Fe!=null),Fe.Qb&&(b[Ce]=Fe.qb,Me=!0),!Me)if(oe(K),Fe.jc){je=K,ot=b;var tt=Ce,xt=Fe.pd[j(je)&Qn-1];e(Fe.jc),256>xt.g?(se(je,je.u+xt.g),ot[tt]=xt.value,je=0):(se(je,je.u+xt.g-256),e(256<=xt.value),je=xt.value),je==0&&(Me=!0)}else je=ki(Fe.G[0],Fe.H[0],K);if(K.h)break;if(Me||256>je){if(!Me)if(Fe.nd)b[Ce]=(Fe.qb|je<<8)>>>0;else{if(oe(K),Me=ki(Fe.G[1],Fe.H[1],K),oe(K),ot=ki(Fe.G[2],Fe.H[2],K),tt=ki(Fe.G[3],Fe.H[3],K),K.h)break;b[Ce]=(tt<<24|Me<<16|je<<8|ot)>>>0}if(Me=!1,++Ce,++W>=P&&(W=0,++$,z!=null&&$<=F&&!($%16)&&z(g,$),ye!=null))for(;Le<Ce;)je=b[Le++],ye.X[(506832829*je&4294967295)>>>ye.Mb]=je}else if(280>je){if(je=Qi(je-256,K),ot=ki(Fe.G[4],Fe.H[4],K),oe(K),ot=Ei(P,ot=Qi(ot,K)),K.h)break;if(Ce-E<ot||I-Ce<je)break e;for(tt=0;tt<je;++tt)b[Ce+tt]=b[Ce+tt-ot];for(Ce+=je,W+=je;W>=P;)W-=P,++$,z!=null&&$<=F&&!($%16)&&z(g,$);if(e(Ce<=I),W&we&&(Fe=qn(ge,W,$)),ye!=null)for(;Le<Ce;)je=b[Le++],ye.X[(506832829*je&4294967295)>>>ye.Mb]=je}else{if(!(je<Ue))break e;for(Me=je-280,e(ye!=null);Le<Ce;)je=b[Le++],ye.X[(506832829*je&4294967295)>>>ye.Mb]=je;je=Ce,e(!(Me>>>(ot=ye).Xa)),b[je]=ot.X[Me],Me=!0}Me||e(K.h==Y(K))}if(g.Pb&&K.h&&Ce<I)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Te(g.s.vb,g.s.Wa);else{if(K.h)break e;z!=null&&z(g,$>F?F:$),g.a=0,g.$=Ce-E}return 1}return g.a=3,0}function Ks(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var b=g.Wa;b!=null&&(b.X=null),g.vb=null,e(g!=null)}function Zi(){var g=new gm;return g==null?null:(g.a=0,g.xb=Mc,_s("Predictor","VP8LPredictors"),_s("Predictor","VP8LPredictors_C"),_s("PredictorAdd","VP8LPredictorsAdd"),_s("PredictorAdd","VP8LPredictorsAdd_C"),ip=Jt,sl=Lt,di=it,Yr=$r,al=en,ro=bs,io=An,Z.VP8LMapColor32b=Lc,Z.VP8LMapColor8b=Pc,g)}function Sa(g,b,E,P,I){var F=1,z=[g],$=[b],W=P.m,K=P.s,ge=null,Ce=0;e:for(;;){if(E)for(;F&&J(W,1);){var Le=z,xe=$,Ue=P,Ie=1,ye=Ue.m,we=Ue.gc[Ue.ab],Fe=J(ye,2);if(Ue.Oc&1<<Fe)F=0;else{switch(Ue.Oc|=1<<Fe,we.hc=Fe,we.Ea=Le[0],we.nc=xe[0],we.K=[null],++Ue.ab,e(4>=Ue.ab),Fe){case 0:case 1:we.b=J(ye,3)+2,Ie=Sa(Ze(we.Ea,we.b),Ze(we.nc,we.b),0,Ue,we.K),we.K=we.K[0];break;case 3:var Me,je=J(ye,8)+1,ot=16<je?0:4<je?1:2<je?2:3;if(Le[0]=Ze(we.Ea,ot),we.b=ot,Me=Ie=Sa(je,1,0,Ue,we.K)){var tt,xt=je,nt=we,sn=1<<(8>>nt.b),an=i(sn);if(an==null)Me=0;else{var Zt=nt.K[0],Ut=nt.w;for(an[0]=nt.K[0][0],tt=1;tt<1*xt;++tt)an[tt]=ze(Zt[Ut+tt],an[tt-1]);for(;tt<4*sn;++tt)an[tt]=0;nt.K[0]=null,nt.K[0]=an,Me=1}}Ie=Me;break;case 2:break;default:e(0)}F=Ie}}if(z=z[0],$=$[0],F&&J(W,1)&&!(F=1<=(Ce=J(W,4))&&11>=Ce)){P.a=3;break e}var wn;if(wn=F)t:{var xn,Rt,Gn,gi=P,ir=z,vr=$,fn=Ce,Jr=E,Qr=gi.m,Vn=gi.s,yr=[null],Dr=1,Mi=0,Ps=ov[fn];n:for(;;){if(Jr&&J(Qr,1)){var Yn=J(Qr,3)+2,hr=Ze(ir,Yn),ss=Ze(vr,Yn),hl=hr*ss;if(!Sa(hr,ss,0,gi,yr))break n;for(yr=yr[0],Vn.xc=Yn,xn=0;xn<hl;++xn){var fo=yr[xn]>>8&65535;yr[xn]=fo,fo>=Dr&&(Dr=fo+1)}}if(Qr.h)break n;for(Rt=0;5>Rt;++Rt){var pn=cu[Rt];!Rt&&0<fn&&(pn+=1<<fn),Mi<pn&&(Mi=pn)}var Ma=a(Dr*Ps,V),cp=Dr,_m=a(cp,re);if(_m==null)var Ns=null;else e(65536>=cp),Ns=_m;var Ts=i(Mi);if(Ns==null||Ts==null||Ma==null){gi.a=1;break n}var gu=Ma;for(xn=Gn=0;xn<Dr;++xn){var Rs=Ns[xn],po=Rs.G,mu=Rs.H,jc=0,as=1,Bc=0;for(Rt=0;5>Rt;++Rt){pn=cu[Rt],po[Rt]=gu,mu[Rt]=Gn,!Rt&&0<fn&&(pn+=1<<fn);i:{var dl,go=pn,zc=gi,Fa=Ts,dv=gu,xm=Gn,Rn=0,na=zc.m,Am=J(na,1);if(r(Fa,0,0,go),Am){var Sm=J(na,1)+1,hp=J(na,1),dp=J(na,hp==0?1:8);Fa[dp]=1,Sm==2&&(Fa[dp=J(na,8)]=1);var Da=1}else{var Fn=i(19),dr=J(na,4)+4;if(19<dr){zc.a=3;var sr=0;break i}for(dl=0;dl<dr;++dl)Fn[Py[dl]]=J(na,3);var Uc=void 0,mo=void 0,qc=zc,My=Fn,wr=go,fp=Fa,md=0,ja=qc.m,ra=8,os=a(128,V);r:for(;q(os,0,7,My,19);){if(J(ja,1)){var vd=2+2*J(ja,3);if((Uc=2+J(ja,vd))>wr)break r}else Uc=wr;for(mo=0;mo<wr&&Uc--;){oe(ja);var pp=os[0+(127&j(ja))];se(ja,ja.u+pp.g);var fl=pp.value;if(16>fl)fp[mo++]=fl,fl!=0&&(ra=fl);else{var fv=fl==16,Em=fl-16,pv=op[Em],km=J(ja,dd[Em])+pv;if(mo+km>wr)break r;for(var gv=fv?ra:0;0<km--;)fp[mo++]=gv}}md=1;break r}md||(qc.a=3),Da=md}(Da=Da&&!na.h)&&(Rn=q(dv,xm,8,Fa,go)),Da&&Rn!=0?sr=Rn:(zc.a=3,sr=0)}if(sr==0)break n;if(as&&av[Rt]==1&&(as=gu[Gn].g==0),jc+=gu[Gn].g,Gn+=sr,3>=Rt){var Hc,gp=Ts[0];for(Hc=1;Hc<pn;++Hc)Ts[Hc]>gp&&(gp=Ts[Hc]);Bc+=gp}}if(Rs.nd=as,Rs.Qb=0,as&&(Rs.qb=(po[3][mu[3]+0].value<<24|po[1][mu[1]+0].value<<16|po[2][mu[2]+0].value)>>>0,jc==0&&256>po[0][mu[0]+0].value&&(Rs.Qb=1,Rs.qb+=po[0][mu[0]+0].value<<8)),Rs.jc=!Rs.Qb&&6>Bc,Rs.jc){var yd,ls=Rs;for(yd=0;yd<Qn;++yd){var vo=yd,ia=ls.pd[vo],vu=ls.G[0][ls.H[0]+vo];256<=vu.value?(ia.g=vu.g+256,ia.value=vu.value):(ia.g=0,ia.value=0,vo>>=Un(vu,8,ia),vo>>=Un(ls.G[1][ls.H[1]+vo],16,ia),vo>>=Un(ls.G[2][ls.H[2]+vo],0,ia),Un(ls.G[3][ls.H[3]+vo],24,ia))}}}Vn.vc=yr,Vn.Wb=Dr,Vn.Ya=Ns,Vn.yc=Ma,wn=1;break t}wn=0}if(!(F=wn)){P.a=3;break e}if(0<Ce){if(K.ua=1<<Ce,!rt(K.Wa,Ce)){P.a=1,F=0;break e}}else K.ua=0;var mp=P,vp=z,mv=$,yp=mp.s,wp=yp.xc;if(mp.c=vp,mp.i=mv,yp.md=Ze(vp,wp),yp.wc=wp==0?-1:(1<<wp)-1,E){P.xb=Oa;break e}if((ge=i(z*$))==null){P.a=1,F=0;break e}F=(F=Or(P,ge,0,z,$,$,null))&&!W.h;break e}return F?(I!=null?I[0]=ge:(e(ge==null),e(E)),P.$=0,E||Ks(K)):Ks(K),F}function Vo(g,b){var E=g.c*g.i,P=E+b+16*b;return e(g.c<=b),g.V=i(P),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+E+b,1)}function Ul(g,b){var E=g.C,P=b-E,I=g.V,F=g.Ba+g.c*E;for(e(b<=g.l.o);0<P;){var z=16<P?16:P,$=g.l.ma,W=g.l.width,K=W*z,ge=$.ca,Ce=$.tb+W*E,Le=g.Ta,xe=g.Ua;Gr(g,z,I,F),Zn(Le,xe,ge,Ce,K),Vs($,E,E+z,ge,Ce,W),P-=z,I+=z*g.c,E+=z}e(E==b),g.C=g.Ma=b}function ql(){this.ub=this.yd=this.td=this.Rb=0}function Hl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ac(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Kf(){this.Yb=function(){var g=[];return function b(E,P,I){for(var F=I[P],z=0;z<F&&(E.push(I.length>P+1?[]:0),!(I.length<P+1));z++)b(E[z],P+1,I)}(g,0,[3,11]),g}()}function Hn(){this.jb=i(3),this.Wc=l([4,8],Kf),this.Xc=l([4,17],Kf)}function dm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Yo(){this.ld=this.La=this.dd=this.tc=0}function Vh(){this.Na=this.la=0}function oc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Yh(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xf(){this.uc=this.M=this.Nb=0,this.wa=Array(new Yo),this.Y=0,this.ya=Array(new Yh),this.aa=0,this.l=new lc}function $l(){this.y=i(16),this.f=i(8),this.ea=i(8)}function As(){this.cb=this.a=0,this.sc="",this.m=new G,this.Od=new ql,this.Kc=new Hl,this.ed=new dm,this.Qa=new ac,this.Ic=this.$c=this.Aa=0,this.D=new Xf,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,G),this.ia=0,this.pb=a(4,oc),this.Pa=new Hn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $l),this.Hd=0,this.rb=Array(new Vh),this.sb=0,this.wa=Array(new Yo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Yh),this.L=this.aa=0,this.gd=l([4,2],Yo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function lc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function es(){var g=new As;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,hu||(hu=Wl)),g}function rr(g,b,E){return g.a==0&&(g.a=b,g.sc=E,g.cb=0),0}function Jf(g,b,E){return 3<=E&&g[b+0]==157&&g[b+1]==1&&g[b+2]==42}function Qf(g,b){if(g==null)return 0;if(g.a=0,g.sc="OK",b==null)return rr(g,2,"null VP8Io passed to VP8GetHeaders()");var E=b.data,P=b.w,I=b.ha;if(4>I)return rr(g,7,"Truncated header.");var F=E[P+0]|E[P+1]<<8|E[P+2]<<16,z=g.Od;if(z.Rb=!(1&F),z.td=F>>1&7,z.yd=F>>4&1,z.ub=F>>5,3<z.td)return rr(g,3,"Incorrect keyframe parameters.");if(!z.yd)return rr(g,4,"Frame not displayable.");P+=3,I-=3;var $=g.Kc;if(z.Rb){if(7>I)return rr(g,7,"cannot parse picture header");if(!Jf(E,P,I))return rr(g,3,"Bad code word");$.c=16383&(E[P+4]<<8|E[P+3]),$.Td=E[P+4]>>6,$.i=16383&(E[P+6]<<8|E[P+5]),$.Ud=E[P+6]>>6,P+=7,I-=7,g.za=$.c+15>>4,g.Ub=$.i+15>>4,b.width=$.c,b.height=$.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,r((F=g.Pa).jb,0,255,F.jb.length),e((F=g.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,r(F.Zb,0,0,F.Zb.length),r(F.Lb,0,0,F.Lb)}if(z.ub>I)return rr(g,7,"bad partition length");Ee(F=g.m,E,P,z.ub),P+=z.ub,I-=z.ub,z.Rb&&($.Ld=be(F),$.Kd=be(F)),$=g.Qa;var W,K=g.Pa;if(e(F!=null),e($!=null),$.Cb=be(F),$.Cb){if($.Bb=be(F),be(F)){for($.Fb=be(F),W=0;4>W;++W)$.Zb[W]=be(F)?me(F,7):0;for(W=0;4>W;++W)$.Lb[W]=be(F)?me(F,6):0}if($.Bb)for(W=0;3>W;++W)K.jb[W]=be(F)?ce(F,8):255}else $.Bb=0;if(F.Ka)return rr(g,3,"cannot parse segment header");if(($=g.ed).zd=be(F),$.Tb=ce(F,6),$.wb=ce(F,3),$.Pc=be(F),$.Pc&&be(F)){for(K=0;4>K;++K)be(F)&&($.vd[K]=me(F,6));for(K=0;4>K;++K)be(F)&&($.od[K]=me(F,6))}if(g.L=$.Tb==0?0:$.zd?1:2,F.Ka)return rr(g,3,"cannot parse filter header");var ge=I;if(I=W=P,P=W+ge,$=ge,g.Xb=(1<<ce(g.m,2))-1,ge<3*(K=g.Xb))E=7;else{for(W+=3*K,$-=3*K,ge=0;ge<K;++ge){var Ce=E[I+0]|E[I+1]<<8|E[I+2]<<16;Ce>$&&(Ce=$),Ee(g.Jc[+ge],E,W,Ce),W+=Ce,$-=Ce,I+=3}Ee(g.Jc[+K],E,W,$),E=W<P?0:5}if(E!=0)return rr(g,E,"cannot parse partitions");for(E=ce(W=g.m,7),I=be(W)?me(W,4):0,P=be(W)?me(W,4):0,$=be(W)?me(W,4):0,K=be(W)?me(W,4):0,W=be(W)?me(W,4):0,ge=g.Qa,Ce=0;4>Ce;++Ce){if(ge.Cb){var Le=ge.Zb[Ce];ge.Fb||(Le+=E)}else{if(0<Ce){g.pb[Ce]=g.pb[0];continue}Le=E}var xe=g.pb[Ce];xe.Sc[0]=Oc[ns(Le+I,127)],xe.Sc[1]=fd[ns(Le+0,127)],xe.Eb[0]=2*Oc[ns(Le+P,127)],xe.Eb[1]=101581*fd[ns(Le+$,127)]>>16,8>xe.Eb[1]&&(xe.Eb[1]=8),xe.Qc[0]=Oc[ns(Le+K,117)],xe.Qc[1]=fd[ns(Le+W,127)],xe.lc=Le+W}if(!z.Rb)return rr(g,4,"Not a key frame.");for(be(F),z=g.Pa,E=0;4>E;++E){for(I=0;8>I;++I)for(P=0;3>P;++P)for($=0;11>$;++$)K=Ae(F,Ry[E][I][P][$])?ce(F,8):uv[E][I][P][$],z.Wc[E][I].Yb[P][$]=K;for(I=0;17>I;++I)z.Xc[E][I]=z.Wc[E][ym[I]]}return g.kc=be(F),g.kc&&(g.Bd=ce(F,8)),g.cb=1}function Wl(g,b,E,P,I,F,z){var $=b[I].Yb[E];for(E=0;16>I;++I){if(!Ae(g,$[E+0]))return I;for(;!Ae(g,$[E+1]);)if($=b[++I].Yb[0],E=0,I==16)return 16;var W=b[I+1].Yb;if(Ae(g,$[E+2])){var K=g,ge=0;if(Ae(K,(Le=$)[(Ce=E)+3]))if(Ae(K,Le[Ce+6])){for($=0,Ce=2*(ge=Ae(K,Le[Ce+8]))+(Le=Ae(K,Le[Ce+9+ge])),ge=0,Le=mm[Ce];Le[$];++$)ge+=ge+Ae(K,Le[$]);ge+=3+(8<<Ce)}else Ae(K,Le[Ce+7])?(ge=7+2*Ae(K,165),ge+=Ae(K,145)):ge=5+Ae(K,159);else ge=Ae(K,Le[Ce+4])?3+Ae(K,Le[Ce+5]):2;$=W[2]}else ge=1,$=W[1];W=z+vm[I],0>(K=g).b&&de(K);var Ce,Le=K.b,xe=(Ce=K.Ca>>1)-(K.I>>Le)>>31;--K.b,K.Ca+=xe,K.Ca|=1,K.I-=(Ce+1&xe)<<Le,F[W]=((ge^xe)-xe)*P[(0<I)+0]}return 16}function Ko(g){var b=g.rb[g.sb-1];b.la=0,b.Na=0,r(g.zc,0,0,g.zc.length),g.ja=0}function Gl(g,b){if(g==null)return 0;if(b==null)return rr(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!Qf(g,b))return 0;if(e(g.cb),b.ac==null||b.ac(b)){b.ob&&(g.L=0);var E=pu[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=b.v-E>>4,g.zb=b.j-E>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=b.o+15+E>>4,g.Hb=b.va+15+E>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var P=g.ed;for(E=0;4>E;++E){var I;if(g.Qa.Cb){var F=g.Qa.Lb[E];g.Qa.Fb||(F+=P.Tb)}else F=P.Tb;for(I=0;1>=I;++I){var z=g.gd[E][I],$=F;if(P.Pc&&($+=P.vd[0],I&&($+=P.od[0])),0<($=0>$?0:63<$?63:$)){var W=$;0<P.wb&&(W=4<P.wb?W>>2:W>>1)>9-P.wb&&(W=9-P.wb),1>W&&(W=1),z.dd=W,z.tc=2*$+W,z.ld=40<=$?2:15<=$?1:0}else z.tc=0;z.La=I}}}E=0}else rr(g,6,"Frame setup failed"),E=g.a;if(E=E==0){if(E){g.$c=0,0<g.Aa||(g.Ic=ho);e:{E=g.Ic,P=4*(W=g.za);var K=32*W,ge=W+1,Ce=0<g.L?W*(0<g.Aa?2:1):0,Le=(g.Aa==2?2:1)*W;if((z=P+832+(I=3*(16*E+pu[g.L])/2*K)+(F=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=z)E=0;else{if(z>g.Vb){if(g.Vb=0,g.Ec=i(z),g.Fc=0,g.Ec==null){E=rr(g,1,"no memory during frame initialization.");break e}g.Vb=z}z=g.Ec,$=g.Fc,g.Ac=z,g.Bc=$,$+=P,g.Gd=a(K,$l),g.Hd=0,g.rb=a(ge+1,Vh),g.sb=1,g.wa=Ce?a(Ce,Yo):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=W),e(!0),g.oc=z,g.pc=$,$+=832,g.ya=a(Le,Yh),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=W),g.R=16*W,g.B=8*W,W=(K=pu[g.L])*g.R,K=K/2*g.B,g.sa=z,g.ta=$+W,g.qa=g.sa,g.ra=g.ta+16*E*g.R+K,g.Ha=g.qa,g.Ia=g.ra+8*E*g.B+K,g.$c=0,$+=I,g.mb=F?z:null,g.nb=F?$:null,e($+F<=g.Fc+g.Vb),Ko(g),r(g.Ac,g.Bc,0,P),E=1}}if(E){if(b.ka=0,b.y=g.sa,b.O=g.ta,b.f=g.qa,b.N=g.ra,b.ea=g.Ha,b.Vd=g.Ia,b.fa=g.R,b.Rc=g.B,b.F=null,b.J=0,!od){for(E=-255;255>=E;++E)cr[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)Ra[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)Tc[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)lu[255+E]=0>E?0:255<E?255:E;od=1}Nc=un,so=Xh,ao=Xo,Kr=fm,rs=cc,cn=Kh,iu=vc,ad=mr,su=Zl,au=td,ou=el,is=tl,oo=eu,Ta=yc,lo=Qs,uo=Ss,ol=Es,Mr=np,Ls[0]=La,Ls[1]=Zf,Ls[2]=Xl,Ls[3]=Ca,Ls[4]=Qh,Ls[5]=dc,Ls[6]=Qo,Ls[7]=fc,Ls[8]=tp,Ls[9]=pc,pi[0]=Kl,pi[1]=ep,pi[2]=Ea,pi[3]=Yl,pi[4]=$n,pi[5]=ka,pi[6]=Xs,Ti[0]=ts,Ti[1]=Jh,Ti[2]=pm,Ti[3]=eo,Ti[4]=Jl,Ti[5]=gc,Ti[6]=Zh,E=1}else E=0}E&&(E=function(xe,Ue){for(xe.M=0;xe.M<xe.Va;++xe.M){var Ie,ye=xe.Jc[xe.M&xe.Xb],we=xe.m,Fe=xe;for(Ie=0;Ie<Fe.za;++Ie){var Me=we,je=Fe,ot=je.Ac,tt=je.Bc+4*Ie,xt=je.zc,nt=je.ya[je.aa+Ie];if(je.Qa.Bb?nt.$b=Ae(Me,je.Pa.jb[0])?2+Ae(Me,je.Pa.jb[2]):Ae(Me,je.Pa.jb[1]):nt.$b=0,je.kc&&(nt.Ad=Ae(Me,je.Bd)),nt.Za=!Ae(Me,145)+0,nt.Za){var sn=nt.Ob,an=0;for(je=0;4>je;++je){var Zt,Ut=xt[0+je];for(Zt=0;4>Zt;++Zt){Ut=Ty[ot[tt+Zt]][Ut];for(var wn=lv[Ae(Me,Ut[0])];0<wn;)wn=lv[2*wn+Ae(Me,Ut[wn])];Ut=-wn,ot[tt+Zt]=Ut}n(sn,an,ot,tt,4),an+=4,xt[0+je]=Ut}}else Ut=Ae(Me,156)?Ae(Me,128)?1:3:Ae(Me,163)?2:0,nt.Ob[0]=Ut,r(ot,tt,Ut,4),r(xt,0,Ut,4);nt.Dd=Ae(Me,142)?Ae(Me,114)?Ae(Me,183)?1:3:2:0}if(Fe.m.Ka)return rr(xe,7,"Premature end-of-partition0 encountered.");for(;xe.ja<xe.za;++xe.ja){if(Fe=ye,Me=(we=xe).rb[we.sb-1],ot=we.rb[we.sb+we.ja],Ie=we.ya[we.aa+we.ja],tt=we.kc?Ie.Ad:0)Me.la=ot.la=0,Ie.Za||(Me.Na=ot.Na=0),Ie.Hc=0,Ie.Gc=0,Ie.ia=0;else{var xn,Rt;if(Me=ot,ot=Fe,tt=we.Pa.Xc,xt=we.ya[we.aa+we.ja],nt=we.pb[xt.$b],je=xt.ad,sn=0,an=we.rb[we.sb-1],Ut=Zt=0,r(je,sn,0,384),xt.Za)var Gn=0,gi=tt[3];else{wn=i(16);var ir=Me.Na+an.Na;if(ir=hu(ot,tt[1],ir,nt.Eb,0,wn,0),Me.Na=an.Na=(0<ir)+0,1<ir)Nc(wn,0,je,sn);else{var vr=wn[0]+3>>3;for(wn=0;256>wn;wn+=16)je[sn+wn]=vr}Gn=1,gi=tt[0]}var fn=15&Me.la,Jr=15&an.la;for(wn=0;4>wn;++wn){var Qr=1&Jr;for(vr=Rt=0;4>vr;++vr)fn=fn>>1|(Qr=(ir=hu(ot,gi,ir=Qr+(1&fn),nt.Sc,Gn,je,sn))>Gn)<<7,Rt=Rt<<2|(3<ir?3:1<ir?2:je[sn+0]!=0),sn+=16;fn>>=4,Jr=Jr>>1|Qr<<7,Zt=(Zt<<8|Rt)>>>0}for(gi=fn,Gn=Jr>>4,xn=0;4>xn;xn+=2){for(Rt=0,fn=Me.la>>4+xn,Jr=an.la>>4+xn,wn=0;2>wn;++wn){for(Qr=1&Jr,vr=0;2>vr;++vr)ir=Qr+(1&fn),fn=fn>>1|(Qr=0<(ir=hu(ot,tt[2],ir,nt.Qc,0,je,sn)))<<3,Rt=Rt<<2|(3<ir?3:1<ir?2:je[sn+0]!=0),sn+=16;fn>>=2,Jr=Jr>>1|Qr<<5}Ut|=Rt<<4*xn,gi|=fn<<4<<xn,Gn|=(240&Jr)<<xn}Me.la=gi,an.la=Gn,xt.Hc=Zt,xt.Gc=Ut,xt.ia=43690&Ut?0:nt.ia,tt=!(Zt|Ut)}if(0<we.L&&(we.wa[we.Y+we.ja]=we.gd[Ie.$b][Ie.Za],we.wa[we.Y+we.ja].La|=!tt),Fe.Ka)return rr(xe,7,"Premature end-of-file encountered.")}if(Ko(xe),we=Ue,Fe=1,Ie=(ye=xe).D,Me=0<ye.L&&ye.M>=ye.zb&&ye.M<=ye.Va,ye.Aa==0)e:{if(Ie.M=ye.M,Ie.uc=Me,_c(ye,Ie),Fe=1,Ie=(Rt=ye.D).Nb,Me=(Ut=pu[ye.L])*ye.R,ot=Ut/2*ye.B,wn=16*Ie*ye.R,vr=8*Ie*ye.B,tt=ye.sa,xt=ye.ta-Me+wn,nt=ye.qa,je=ye.ra-ot+vr,sn=ye.Ha,an=ye.Ia-ot+vr,Jr=(fn=Rt.M)==0,Zt=fn>=ye.Va-1,ye.Aa==2&&_c(ye,Rt),Rt.uc)for(Qr=(ir=ye).D.M,e(ir.D.uc),Rt=ir.yb;Rt<ir.Hb;++Rt){Gn=Rt,gi=Qr;var Vn=(yr=(pn=ir).D).Nb;xn=pn.R;var yr=yr.wa[yr.Y+Gn],Dr=pn.sa,Mi=pn.ta+16*Vn*xn+16*Gn,Ps=yr.dd,Yn=yr.tc;if(Yn!=0)if(e(3<=Yn),pn.L==1)0<Gn&&uo(Dr,Mi,xn,Yn+4),yr.La&&Mr(Dr,Mi,xn,Yn),0<gi&&lo(Dr,Mi,xn,Yn+4),yr.La&&ol(Dr,Mi,xn,Yn);else{var hr=pn.B,ss=pn.qa,hl=pn.ra+8*Vn*hr+8*Gn,fo=pn.Ha,pn=pn.Ia+8*Vn*hr+8*Gn;Vn=yr.ld,0<Gn&&(ad(Dr,Mi,xn,Yn+4,Ps,Vn),au(ss,hl,fo,pn,hr,Yn+4,Ps,Vn)),yr.La&&(is(Dr,Mi,xn,Yn,Ps,Vn),Ta(ss,hl,fo,pn,hr,Yn,Ps,Vn)),0<gi&&(iu(Dr,Mi,xn,Yn+4,Ps,Vn),su(ss,hl,fo,pn,hr,Yn+4,Ps,Vn)),yr.La&&(ou(Dr,Mi,xn,Yn,Ps,Vn),oo(ss,hl,fo,pn,hr,Yn,Ps,Vn))}}if(ye.ia&&alert("todo:DitherRow"),we.put!=null){if(Rt=16*fn,fn=16*(fn+1),Jr?(we.y=ye.sa,we.O=ye.ta+wn,we.f=ye.qa,we.N=ye.ra+vr,we.ea=ye.Ha,we.W=ye.Ia+vr):(Rt-=Ut,we.y=tt,we.O=xt,we.f=nt,we.N=je,we.ea=sn,we.W=an),Zt||(fn-=Ut),fn>we.o&&(fn=we.o),we.F=null,we.J=null,ye.Fa!=null&&0<ye.Fa.length&&Rt<fn&&(we.J=rd(ye,we,Rt,fn-Rt),we.F=ye.mb,we.F==null&&we.F.length==0)){Fe=rr(ye,3,"Could not decode alpha data.");break e}Rt<we.j&&(Ut=we.j-Rt,Rt=we.j,e(!(1&Ut)),we.O+=ye.R*Ut,we.N+=ye.B*(Ut>>1),we.W+=ye.B*(Ut>>1),we.F!=null&&(we.J+=we.width*Ut)),Rt<fn&&(we.O+=we.v,we.N+=we.v>>1,we.W+=we.v>>1,we.F!=null&&(we.J+=we.v),we.ka=Rt-we.j,we.U=we.va-we.v,we.T=fn-Rt,Fe=we.put(we))}Ie+1!=ye.Ic||Zt||(n(ye.sa,ye.ta-Me,tt,xt+16*ye.R,Me),n(ye.qa,ye.ra-ot,nt,je+8*ye.B,ot),n(ye.Ha,ye.Ia-ot,sn,an+8*ye.B,ot))}if(!Fe)return rr(xe,6,"Output aborted.")}return 1}(g,b)),b.bc!=null&&b.bc(b),E&=1}return E?(g.cb=0,E):0}function Ci(g,b,E,P,I){I=g[b+E+32*P]+(I>>3),g[b+E+32*P]=-256&I?0>I?0:255:I}function uc(g,b,E,P,I,F){Ci(g,b,0,E,P+I),Ci(g,b,1,E,P+F),Ci(g,b,2,E,P-F),Ci(g,b,3,E,P-I)}function Li(g){return(20091*g>>16)+g}function Vl(g,b,E,P){var I,F=0,z=i(16);for(I=0;4>I;++I){var $=g[b+0]+g[b+8],W=g[b+0]-g[b+8],K=(35468*g[b+4]>>16)-Li(g[b+12]),ge=Li(g[b+4])+(35468*g[b+12]>>16);z[F+0]=$+ge,z[F+1]=W+K,z[F+2]=W-K,z[F+3]=$-ge,F+=4,b++}for(I=F=0;4>I;++I)$=(g=z[F+0]+4)+z[F+8],W=g-z[F+8],K=(35468*z[F+4]>>16)-Li(z[F+12]),Ci(E,P,0,0,$+(ge=Li(z[F+4])+(35468*z[F+12]>>16))),Ci(E,P,1,0,W+K),Ci(E,P,2,0,W-K),Ci(E,P,3,0,$-ge),F++,P+=32}function Kh(g,b,E,P){var I=g[b+0]+4,F=35468*g[b+4]>>16,z=Li(g[b+4]),$=35468*g[b+1]>>16;uc(E,P,0,I+z,g=Li(g[b+1]),$),uc(E,P,1,I+F,g,$),uc(E,P,2,I-F,g,$),uc(E,P,3,I-z,g,$)}function Xh(g,b,E,P,I){Vl(g,b,E,P),I&&Vl(g,b+16,E,P+4)}function Xo(g,b,E,P){so(g,b+0,E,P,1),so(g,b+32,E,P+128,1)}function fm(g,b,E,P){var I;for(g=g[b+0]+4,I=0;4>I;++I)for(b=0;4>b;++b)Ci(E,P,b,I,g)}function cc(g,b,E,P){g[b+0]&&Kr(g,b+0,E,P),g[b+16]&&Kr(g,b+16,E,P+4),g[b+32]&&Kr(g,b+32,E,P+128),g[b+48]&&Kr(g,b+48,E,P+128+4)}function un(g,b,E,P){var I,F=i(16);for(I=0;4>I;++I){var z=g[b+0+I]+g[b+12+I],$=g[b+4+I]+g[b+8+I],W=g[b+4+I]-g[b+8+I],K=g[b+0+I]-g[b+12+I];F[0+I]=z+$,F[8+I]=z-$,F[4+I]=K+W,F[12+I]=K-W}for(I=0;4>I;++I)z=(g=F[0+4*I]+3)+F[3+4*I],$=F[1+4*I]+F[2+4*I],W=F[1+4*I]-F[2+4*I],K=g-F[3+4*I],E[P+0]=z+$>>3,E[P+16]=K+W>>3,E[P+32]=z-$>>3,E[P+48]=K-W>>3,P+=64}function hc(g,b,E){var P,I=b-32,F=fi,z=255-g[I-1];for(P=0;P<E;++P){var $,W=F,K=z+g[b-1];for($=0;$<E;++$)g[b+$]=W[K+g[I+$]];b+=32}}function Zf(g,b){hc(g,b,4)}function Jh(g,b){hc(g,b,8)}function ep(g,b){hc(g,b,16)}function Ea(g,b){var E;for(E=0;16>E;++E)n(g,b+32*E,g,b-32,16)}function Yl(g,b){var E;for(E=16;0<E;--E)r(g,b,g[b-1],16),b+=32}function Jo(g,b,E){var P;for(P=0;16>P;++P)r(b,E+32*P,g,16)}function Kl(g,b){var E,P=16;for(E=0;16>E;++E)P+=g[b-1+32*E]+g[b+E-32];Jo(P>>5,g,b)}function $n(g,b){var E,P=8;for(E=0;16>E;++E)P+=g[b-1+32*E];Jo(P>>4,g,b)}function ka(g,b){var E,P=8;for(E=0;16>E;++E)P+=g[b+E-32];Jo(P>>4,g,b)}function Xs(g,b){Jo(128,g,b)}function Et(g,b,E){return g+2*b+E+2>>2}function Xl(g,b){var E,P=b-32;for(P=new Uint8Array([Et(g[P-1],g[P+0],g[P+1]),Et(g[P+0],g[P+1],g[P+2]),Et(g[P+1],g[P+2],g[P+3]),Et(g[P+2],g[P+3],g[P+4])]),E=0;4>E;++E)n(g,b+32*E,P,0,P.length)}function Ca(g,b){var E=g[b-1],P=g[b-1+32],I=g[b-1+64],F=g[b-1+96];qe(g,b+0,16843009*Et(g[b-1-32],E,P)),qe(g,b+32,16843009*Et(E,P,I)),qe(g,b+64,16843009*Et(P,I,F)),qe(g,b+96,16843009*Et(I,F,F))}function La(g,b){var E,P=4;for(E=0;4>E;++E)P+=g[b+E-32]+g[b-1+32*E];for(P>>=3,E=0;4>E;++E)r(g,b+32*E,P,4)}function Qh(g,b){var E=g[b-1+0],P=g[b-1+32],I=g[b-1+64],F=g[b-1-32],z=g[b+0-32],$=g[b+1-32],W=g[b+2-32],K=g[b+3-32];g[b+0+96]=Et(P,I,g[b-1+96]),g[b+1+96]=g[b+0+64]=Et(E,P,I),g[b+2+96]=g[b+1+64]=g[b+0+32]=Et(F,E,P),g[b+3+96]=g[b+2+64]=g[b+1+32]=g[b+0+0]=Et(z,F,E),g[b+3+64]=g[b+2+32]=g[b+1+0]=Et($,z,F),g[b+3+32]=g[b+2+0]=Et(W,$,z),g[b+3+0]=Et(K,W,$)}function Qo(g,b){var E=g[b+1-32],P=g[b+2-32],I=g[b+3-32],F=g[b+4-32],z=g[b+5-32],$=g[b+6-32],W=g[b+7-32];g[b+0+0]=Et(g[b+0-32],E,P),g[b+1+0]=g[b+0+32]=Et(E,P,I),g[b+2+0]=g[b+1+32]=g[b+0+64]=Et(P,I,F),g[b+3+0]=g[b+2+32]=g[b+1+64]=g[b+0+96]=Et(I,F,z),g[b+3+32]=g[b+2+64]=g[b+1+96]=Et(F,z,$),g[b+3+64]=g[b+2+96]=Et(z,$,W),g[b+3+96]=Et($,W,W)}function dc(g,b){var E=g[b-1+0],P=g[b-1+32],I=g[b-1+64],F=g[b-1-32],z=g[b+0-32],$=g[b+1-32],W=g[b+2-32],K=g[b+3-32];g[b+0+0]=g[b+1+64]=F+z+1>>1,g[b+1+0]=g[b+2+64]=z+$+1>>1,g[b+2+0]=g[b+3+64]=$+W+1>>1,g[b+3+0]=W+K+1>>1,g[b+0+96]=Et(I,P,E),g[b+0+64]=Et(P,E,F),g[b+0+32]=g[b+1+96]=Et(E,F,z),g[b+1+32]=g[b+2+96]=Et(F,z,$),g[b+2+32]=g[b+3+96]=Et(z,$,W),g[b+3+32]=Et($,W,K)}function fc(g,b){var E=g[b+0-32],P=g[b+1-32],I=g[b+2-32],F=g[b+3-32],z=g[b+4-32],$=g[b+5-32],W=g[b+6-32],K=g[b+7-32];g[b+0+0]=E+P+1>>1,g[b+1+0]=g[b+0+64]=P+I+1>>1,g[b+2+0]=g[b+1+64]=I+F+1>>1,g[b+3+0]=g[b+2+64]=F+z+1>>1,g[b+0+32]=Et(E,P,I),g[b+1+32]=g[b+0+96]=Et(P,I,F),g[b+2+32]=g[b+1+96]=Et(I,F,z),g[b+3+32]=g[b+2+96]=Et(F,z,$),g[b+3+64]=Et(z,$,W),g[b+3+96]=Et($,W,K)}function pc(g,b){var E=g[b-1+0],P=g[b-1+32],I=g[b-1+64],F=g[b-1+96];g[b+0+0]=E+P+1>>1,g[b+2+0]=g[b+0+32]=P+I+1>>1,g[b+2+32]=g[b+0+64]=I+F+1>>1,g[b+1+0]=Et(E,P,I),g[b+3+0]=g[b+1+32]=Et(P,I,F),g[b+3+32]=g[b+1+64]=Et(I,F,F),g[b+3+64]=g[b+2+64]=g[b+0+96]=g[b+1+96]=g[b+2+96]=g[b+3+96]=F}function tp(g,b){var E=g[b-1+0],P=g[b-1+32],I=g[b-1+64],F=g[b-1+96],z=g[b-1-32],$=g[b+0-32],W=g[b+1-32],K=g[b+2-32];g[b+0+0]=g[b+2+32]=E+z+1>>1,g[b+0+32]=g[b+2+64]=P+E+1>>1,g[b+0+64]=g[b+2+96]=I+P+1>>1,g[b+0+96]=F+I+1>>1,g[b+3+0]=Et($,W,K),g[b+2+0]=Et(z,$,W),g[b+1+0]=g[b+3+32]=Et(E,z,$),g[b+1+32]=g[b+3+64]=Et(P,E,z),g[b+1+64]=g[b+3+96]=Et(I,P,E),g[b+1+96]=Et(F,I,P)}function pm(g,b){var E;for(E=0;8>E;++E)n(g,b+32*E,g,b-32,8)}function eo(g,b){var E;for(E=0;8>E;++E)r(g,b,g[b-1],8),b+=32}function Js(g,b,E){var P;for(P=0;8>P;++P)r(b,E+32*P,g,8)}function ts(g,b){var E,P=8;for(E=0;8>E;++E)P+=g[b+E-32]+g[b-1+32*E];Js(P>>4,g,b)}function gc(g,b){var E,P=4;for(E=0;8>E;++E)P+=g[b+E-32];Js(P>>3,g,b)}function Jl(g,b){var E,P=4;for(E=0;8>E;++E)P+=g[b-1+32*E];Js(P>>3,g,b)}function Zh(g,b){Js(128,g,b)}function Zo(g,b,E){var P=g[b-E],I=g[b+0],F=3*(I-P)+Ia[1020+g[b-2*E]-g[b+E]],z=Rc[112+(F+4>>3)];g[b-E]=fi[255+P+Rc[112+(F+3>>3)]],g[b+0]=fi[255+I-z]}function Ql(g,b,E,P){var I=g[b+0],F=g[b+E];return Cs[255+g[b-2*E]-g[b-E]]>P||Cs[255+F-I]>P}function mc(g,b,E,P){return 4*Cs[255+g[b-E]-g[b+0]]+Cs[255+g[b-2*E]-g[b+E]]<=P}function ed(g,b,E,P,I){var F=g[b-3*E],z=g[b-2*E],$=g[b-E],W=g[b+0],K=g[b+E],ge=g[b+2*E],Ce=g[b+3*E];return 4*Cs[255+$-W]+Cs[255+z-K]>P?0:Cs[255+g[b-4*E]-F]<=I&&Cs[255+F-z]<=I&&Cs[255+z-$]<=I&&Cs[255+Ce-ge]<=I&&Cs[255+ge-K]<=I&&Cs[255+K-W]<=I}function Qs(g,b,E,P){var I=2*P+1;for(P=0;16>P;++P)mc(g,b+P,E,I)&&Zo(g,b+P,E)}function Ss(g,b,E,P){var I=2*P+1;for(P=0;16>P;++P)mc(g,b+P*E,1,I)&&Zo(g,b+P*E,1)}function Es(g,b,E,P){var I;for(I=3;0<I;--I)Qs(g,b+=4*E,E,P)}function np(g,b,E,P){var I;for(I=3;0<I;--I)Ss(g,b+=4,E,P)}function Zs(g,b,E,P,I,F,z,$){for(F=2*F+1;0<I--;){if(ed(g,b,E,F,z))if(Ql(g,b,E,$))Zo(g,b,E);else{var W=g,K=b,ge=E,Ce=W[K-2*ge],Le=W[K-ge],xe=W[K+0],Ue=W[K+ge],Ie=W[K+2*ge],ye=27*(Fe=Ia[1020+3*(xe-Le)+Ia[1020+Ce-Ue]])+63>>7,we=18*Fe+63>>7,Fe=9*Fe+63>>7;W[K-3*ge]=fi[255+W[K-3*ge]+Fe],W[K-2*ge]=fi[255+Ce+we],W[K-ge]=fi[255+Le+ye],W[K+0]=fi[255+xe-ye],W[K+ge]=fi[255+Ue-we],W[K+2*ge]=fi[255+Ie-Fe]}b+=P}}function Pi(g,b,E,P,I,F,z,$){for(F=2*F+1;0<I--;){if(ed(g,b,E,F,z))if(Ql(g,b,E,$))Zo(g,b,E);else{var W=g,K=b,ge=E,Ce=W[K-ge],Le=W[K+0],xe=W[K+ge],Ue=Rc[112+((Ie=3*(Le-Ce))+4>>3)],Ie=Rc[112+(Ie+3>>3)],ye=Ue+1>>1;W[K-2*ge]=fi[255+W[K-2*ge]+ye],W[K-ge]=fi[255+Ce+Ie],W[K+0]=fi[255+Le-Ue],W[K+ge]=fi[255+xe-ye]}b+=P}}function vc(g,b,E,P,I,F){Zs(g,b,E,1,16,P,I,F)}function mr(g,b,E,P,I,F){Zs(g,b,1,E,16,P,I,F)}function el(g,b,E,P,I,F){var z;for(z=3;0<z;--z)Pi(g,b+=4*E,E,1,16,P,I,F)}function tl(g,b,E,P,I,F){var z;for(z=3;0<z;--z)Pi(g,b+=4,1,E,16,P,I,F)}function Zl(g,b,E,P,I,F,z,$){Zs(g,b,I,1,8,F,z,$),Zs(E,P,I,1,8,F,z,$)}function td(g,b,E,P,I,F,z,$){Zs(g,b,1,I,8,F,z,$),Zs(E,P,1,I,8,F,z,$)}function eu(g,b,E,P,I,F,z,$){Pi(g,b+4*I,I,1,8,F,z,$),Pi(E,P+4*I,I,1,8,F,z,$)}function yc(g,b,E,P,I,F,z,$){Pi(g,b+4,1,I,8,F,z,$),Pi(E,P+4,1,I,8,F,z,$)}function Pa(){this.ba=new Wr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new zn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rp(){this.ua=0,this.Wa=new ee,this.vb=new ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new re,this.yc=new V}function gm(){this.xb=this.a=0,this.l=new lc,this.ca=new Wr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new N,this.Pb=0,this.wd=new N,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rp,this.ab=0,this.gc=a(4,wc),this.Oc=0}function bc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new lc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function to(g,b,E,P,I,F,z){for(g=g==null?0:g[b+0],b=0;b<z;++b)I[F+b]=g+E[P+b]&255,g=I[F+b]}function nd(g,b,E,P,I,F,z){var $;if(g==null)to(null,null,E,P,I,F,z);else for($=0;$<z;++$)I[F+$]=g[b+$]+E[P+$]&255}function rl(g,b,E,P,I,F,z){if(g==null)to(null,null,E,P,I,F,z);else{var $,W=g[b+0],K=W,ge=W;for($=0;$<z;++$)K=ge+(W=g[b+$])-K,ge=E[P+$]+(-256&K?0>K?0:255:K)&255,K=W,I[F+$]=ge}}function rd(g,b,E,P){var I=b.width,F=b.o;if(e(g!=null&&b!=null),0>E||0>=P||E+P>F)return null;if(!g.Cc){if(g.ga==null){var z;if(g.ga=new bc,(z=g.ga==null)||(z=b.width*b.o,e(g.Gb.length==0),g.Gb=i(z),g.Uc=0,g.Gb==null?z=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,z=1),z=!z),!z){z=g.ga;var $=g.Fa,W=g.P,K=g.qc,ge=g.mb,Ce=g.nb,Le=W+1,xe=K-1,Ue=z.l;if(e($!=null&&ge!=null&&b!=null),Xr[0]=null,Xr[1]=to,Xr[2]=nd,Xr[3]=rl,z.ca=ge,z.tb=Ce,z.c=b.width,z.i=b.height,e(0<z.c&&0<z.i),1>=K)b=0;else if(z.$a=$[W+0]>>0&3,z.Z=$[W+0]>>2&3,z.Lc=$[W+0]>>4&3,W=$[W+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||W)b=0;else if(Ue.put=xs,Ue.ac=Lr,Ue.bc=Gs,Ue.ma=z,Ue.width=b.width,Ue.height=b.height,Ue.Da=b.Da,Ue.v=b.v,Ue.va=b.va,Ue.j=b.j,Ue.o=b.o,z.$a)e:{e(z.$a==1),b=Zi();t:for(;;){if(b==null){b=0;break e}if(e(z!=null),z.mc=b,b.c=z.c,b.i=z.i,b.l=z.l,b.l.ma=z,b.l.width=z.c,b.l.height=z.i,b.a=0,ae(b.m,$,Le,xe),!Sa(z.c,z.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&Za(b.s)?(z.ic=1,$=b.c*b.i,b.Ta=null,b.Ua=0,b.V=i($),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(z.ic=0,b=Vo(b,z.c)),!b))break t;b=1;break e}z.mc=null,b=0}else b=xe>=z.c*z.i;z=!b}if(z)return null;g.ga.Lc!=1?g.Ga=0:P=F-E}e(g.ga!=null),e(E+P<=F);e:{if(b=($=g.ga).c,F=$.l.o,$.$a==0){if(Le=g.rc,xe=g.Vc,Ue=g.Fa,W=g.P+1+E*b,K=g.mb,ge=g.nb+E*b,e(W<=g.P+g.qc),$.Z!=0)for(e(Xr[$.Z]!=null),z=0;z<P;++z)Xr[$.Z](Le,xe,Ue,W,K,ge,b),Le=K,xe=ge,ge+=b,W+=b;else for(z=0;z<P;++z)n(K,ge,Ue,W,b),Le=K,xe=ge,ge+=b,W+=b;g.rc=Le,g.Vc=xe}else{if(e($.mc!=null),b=E+P,e((z=$.mc)!=null),e(b<=z.i),z.C>=b)b=1;else if($.ic||ke(),$.ic){$=z.V,Le=z.Ba,xe=z.c;var Ie=z.i,ye=(Ue=1,W=z.$/xe,K=z.$%xe,ge=z.m,Ce=z.s,z.$),we=xe*Ie,Fe=xe*b,Me=Ce.wc,je=ye<Fe?qn(Ce,K,W):null;e(ye<=we),e(b<=Ie),e(Za(Ce));t:for(;;){for(;!ge.h&&ye<Fe;){if(K&Me||(je=qn(Ce,K,W)),e(je!=null),oe(ge),256>(Ie=ki(je.G[0],je.H[0],ge)))$[Le+ye]=Ie,++ye,++K>=xe&&(K=0,++W<=b&&!(W%16)&&Ys(z,W));else{if(!(280>Ie)){Ue=0;break t}Ie=Qi(Ie-256,ge);var ot,tt=ki(je.G[4],je.H[4],ge);if(oe(ge),!(ye>=(tt=Ei(xe,tt=Qi(tt,ge)))&&we-ye>=Ie)){Ue=0;break t}for(ot=0;ot<Ie;++ot)$[Le+ye+ot]=$[Le+ye+ot-tt];for(ye+=Ie,K+=Ie;K>=xe;)K-=xe,++W<=b&&!(W%16)&&Ys(z,W);ye<Fe&&K&Me&&(je=qn(Ce,K,W))}e(ge.h==Y(ge))}Ys(z,W>b?b:W);break t}!Ue||ge.h&&ye<we?(Ue=0,z.a=ge.h?5:3):z.$=ye,b=Ue}else b=Or(z,z.V,z.Ba,z.c,z.i,b,Ul);if(!b){P=0;break e}}E+P>=F&&(g.Cc=1),P=1}if(!P)return null;if(g.Cc&&((P=g.ga)!=null&&(P.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+E*I}function _(g,b,E,P,I,F){for(;0<I--;){var z,$=g,W=b+(E?1:0),K=g,ge=b+(E?0:3);for(z=0;z<P;++z){var Ce=K[ge+4*z];Ce!=255&&(Ce*=32897,$[W+4*z+0]=$[W+4*z+0]*Ce>>23,$[W+4*z+1]=$[W+4*z+1]*Ce>>23,$[W+4*z+2]=$[W+4*z+2]*Ce>>23)}b+=F}}function O(g,b,E,P,I){for(;0<P--;){var F;for(F=0;F<E;++F){var z=g[b+2*F+0],$=15&(K=g[b+2*F+1]),W=4369*$,K=(240&K|K>>4)*W>>16;g[b+2*F+0]=(240&z|z>>4)*W>>16&240|(15&z|z<<4)*W>>16>>4&15,g[b+2*F+1]=240&K|$}b+=I}}function ie(g,b,E,P,I,F,z,$){var W,K,ge=255;for(K=0;K<I;++K){for(W=0;W<P;++W){var Ce=g[b+W];F[z+4*W]=Ce,ge&=Ce}b+=E,z+=$}return ge!=255}function pe(g,b,E,P,I){var F;for(F=0;F<I;++F)E[P+F]=g[b+F]>>8}function ke(){Ni=_,Sn=O,vn=ie,Zn=pe}function Oe(g,b,E){Z[g]=function(P,I,F,z,$,W,K,ge,Ce,Le,xe,Ue,Ie,ye,we,Fe,Me){var je,ot=Me-1>>1,tt=$[W+0]|K[ge+0]<<16,xt=Ce[Le+0]|xe[Ue+0]<<16;e(P!=null);var nt=3*tt+xt+131074>>2;for(b(P[I+0],255&nt,nt>>16,Ie,ye),F!=null&&(nt=3*xt+tt+131074>>2,b(F[z+0],255&nt,nt>>16,we,Fe)),je=1;je<=ot;++je){var sn=$[W+je]|K[ge+je]<<16,an=Ce[Le+je]|xe[Ue+je]<<16,Zt=tt+sn+xt+an+524296,Ut=Zt+2*(sn+xt)>>3;nt=Ut+tt>>1,tt=(Zt=Zt+2*(tt+an)>>3)+sn>>1,b(P[I+2*je-1],255&nt,nt>>16,Ie,ye+(2*je-1)*E),b(P[I+2*je-0],255&tt,tt>>16,Ie,ye+(2*je-0)*E),F!=null&&(nt=Zt+xt>>1,tt=Ut+an>>1,b(F[z+2*je-1],255&nt,nt>>16,we,Fe+(2*je-1)*E),b(F[z+2*je+0],255&tt,tt>>16,we,Fe+(2*je+0)*E)),tt=sn,xt=an}1&Me||(nt=3*tt+xt+131074>>2,b(P[I+Me-1],255&nt,nt>>16,Ie,ye+(Me-1)*E),F!=null&&(nt=3*xt+tt+131074>>2,b(F[z+Me-1],255&nt,nt>>16,we,Fe+(Me-1)*E)))}}function Ge(){Ri[sp]=Iy,Ri[ll]=ul,Ri[sv]=Oy,Ri[ld]=Fc,Ri[ud]=du,Ri[En]=pd,Ri[ap]=wm,Ri[Ic]=ul,Ri[uu]=Fc,Ri[cd]=du,Ri[hd]=pd}function at(g){return g&-16384?0>g?0:255:g>>cl}function bt(g,b){return at((19077*g>>8)+(26149*b>>8)-14234)}function Dt(g,b,E){return at((19077*g>>8)-(6419*b>>8)-(13320*E>>8)+8708)}function Mt(g,b){return at((19077*g>>8)+(33050*b>>8)-17685)}function Qt(g,b,E,P,I){P[I+0]=bt(g,E),P[I+1]=Dt(g,b,E),P[I+2]=Mt(g,b)}function Wn(g,b,E,P,I){P[I+0]=Mt(g,b),P[I+1]=Dt(g,b,E),P[I+2]=bt(g,E)}function Jn(g,b,E,P,I){var F=Dt(g,b,E);b=F<<3&224|Mt(g,b)>>3,P[I+0]=248&bt(g,E)|F>>5,P[I+1]=b}function ur(g,b,E,P,I){var F=240&Mt(g,b)|15;P[I+0]=240&bt(g,E)|Dt(g,b,E)>>4,P[I+1]=F}function Vr(g,b,E,P,I){P[I+0]=255,Qt(g,b,E,P,I+1)}function Pr(g,b,E,P,I){Wn(g,b,E,P,I),P[I+3]=255}function ea(g,b,E,P,I){Qt(g,b,E,P,I),P[I+3]=255}function ns(g,b){return 0>g?0:g>b?b:g}function ks(g,b,E){Z[g]=function(P,I,F,z,$,W,K,ge,Ce){for(var Le=ge+(-2&Ce)*E;ge!=Le;)b(P[I+0],F[z+0],$[W+0],K,ge),b(P[I+1],F[z+0],$[W+0],K,ge+E),I+=2,++z,++W,ge+=2*E;1&Ce&&b(P[I+0],F[z+0],$[W+0],K,ge)}}function il(g,b,E){return E==0?g==0?b==0?6:5:b==0?4:0:E}function id(g,b,E,P,I){switch(g>>>30){case 3:so(b,E,P,I,0);break;case 2:cn(b,E,P,I);break;case 1:Kr(b,E,P,I)}}function _c(g,b){var E,P,I=b.M,F=b.Nb,z=g.oc,$=g.pc+40,W=g.oc,K=g.pc+584,ge=g.oc,Ce=g.pc+600;for(E=0;16>E;++E)z[$+32*E-1]=129;for(E=0;8>E;++E)W[K+32*E-1]=129,ge[Ce+32*E-1]=129;for(0<I?z[$-1-32]=W[K-1-32]=ge[Ce-1-32]=129:(r(z,$-32-1,127,21),r(W,K-32-1,127,9),r(ge,Ce-32-1,127,9)),P=0;P<g.za;++P){var Le=b.ya[b.aa+P];if(0<P){for(E=-1;16>E;++E)n(z,$+32*E-4,z,$+32*E+12,4);for(E=-1;8>E;++E)n(W,K+32*E-4,W,K+32*E+4,4),n(ge,Ce+32*E-4,ge,Ce+32*E+4,4)}var xe=g.Gd,Ue=g.Hd+P,Ie=Le.ad,ye=Le.Hc;if(0<I&&(n(z,$-32,xe[Ue].y,0,16),n(W,K-32,xe[Ue].f,0,8),n(ge,Ce-32,xe[Ue].ea,0,8)),Le.Za){var we=z,Fe=$-32+16;for(0<I&&(P>=g.za-1?r(we,Fe,xe[Ue].y[15],4):n(we,Fe,xe[Ue+1].y,0,4)),E=0;4>E;E++)we[Fe+128+E]=we[Fe+256+E]=we[Fe+384+E]=we[Fe+0+E];for(E=0;16>E;++E,ye<<=2)we=z,Fe=$+bm[E],Ls[Le.Ob[E]](we,Fe),id(ye,Ie,16*+E,we,Fe)}else if(we=il(P,I,Le.Ob[0]),pi[we](z,$),ye!=0)for(E=0;16>E;++E,ye<<=2)id(ye,Ie,16*+E,z,$+bm[E]);for(E=Le.Gc,we=il(P,I,Le.Dd),Ti[we](W,K),Ti[we](ge,Ce),ye=Ie,we=W,Fe=K,255&(Le=E>>0)&&(170&Le?ao(ye,256,we,Fe):rs(ye,256,we,Fe)),Le=ge,ye=Ce,255&(E>>=8)&&(170&E?ao(Ie,320,Le,ye):rs(Ie,320,Le,ye)),I<g.Ub-1&&(n(xe[Ue].y,0,z,$+480,16),n(xe[Ue].f,0,W,K+224,8),n(xe[Ue].ea,0,ge,Ce+224,8)),E=8*F*g.B,xe=g.sa,Ue=g.ta+16*P+16*F*g.R,Ie=g.qa,Le=g.ra+8*P+E,ye=g.Ha,we=g.Ia+8*P+E,E=0;16>E;++E)n(xe,Ue+E*g.R,z,$+32*E,16);for(E=0;8>E;++E)n(Ie,Le+E*g.B,W,K+32*E,8),n(ye,we+E*g.B,ge,Ce+32*E,8)}}function tu(g,b,E,P,I,F,z,$,W){var K=[0],ge=[0],Ce=0,Le=W!=null?W.kd:0,xe=W??new nl;if(g==null||12>E)return 7;xe.data=g,xe.w=b,xe.ha=E,b=[b],E=[E],xe.gb=[xe.gb];e:{var Ue=b,Ie=E,ye=xe.gb;if(e(g!=null),e(Ie!=null),e(ye!=null),ye[0]=0,12<=Ie[0]&&!t(g,Ue[0],"RIFF")){if(t(g,Ue[0]+8,"WEBP")){ye=3;break e}var we=Be(g,Ue[0]+4);if(12>we||4294967286<we){ye=3;break e}if(Le&&we>Ie[0]-8){ye=7;break e}ye[0]=we,Ue[0]+=12,Ie[0]-=12}ye=0}if(ye!=0)return ye;for(we=0<xe.gb[0],E=E[0];;){e:{var Fe=g;Ie=b,ye=E;var Me=K,je=ge,ot=Ue=[0];if((nt=Ce=[Ce])[0]=0,8>ye[0])ye=7;else{if(!t(Fe,Ie[0],"VP8X")){if(Be(Fe,Ie[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var tt=Be(Fe,Ie[0]+8),xt=1+De(Fe,Ie[0]+12);if(2147483648<=xt*(Fe=1+De(Fe,Ie[0]+15))){ye=3;break e}ot!=null&&(ot[0]=tt),Me!=null&&(Me[0]=xt),je!=null&&(je[0]=Fe),Ie[0]+=18,ye[0]-=18,nt[0]=1}ye=0}}if(Ce=Ce[0],Ue=Ue[0],ye!=0)return ye;if(Ie=!!(2&Ue),!we&&Ce)return 3;if(F!=null&&(F[0]=!!(16&Ue)),z!=null&&(z[0]=Ie),$!=null&&($[0]=0),z=K[0],Ue=ge[0],Ce&&Ie&&W==null){ye=0;break}if(4>E){ye=7;break}if(we&&Ce||!we&&!Ce&&!t(g,b[0],"ALPH")){E=[E],xe.na=[xe.na],xe.P=[xe.P],xe.Sa=[xe.Sa];e:{tt=g,ye=b,we=E;var nt=xe.gb;Me=xe.na,je=xe.P,ot=xe.Sa,xt=22,e(tt!=null),e(we!=null),Fe=ye[0];var sn=we[0];for(e(Me!=null),e(ot!=null),Me[0]=null,je[0]=null,ot[0]=0;;){if(ye[0]=Fe,we[0]=sn,8>sn){ye=7;break e}var an=Be(tt,Fe+4);if(4294967286<an){ye=3;break e}var Zt=8+an+1&-2;if(xt+=Zt,0<nt&&xt>nt){ye=3;break e}if(!t(tt,Fe,"VP8 ")||!t(tt,Fe,"VP8L")){ye=0;break e}if(sn[0]<Zt){ye=7;break e}t(tt,Fe,"ALPH")||(Me[0]=tt,je[0]=Fe+8,ot[0]=an),Fe+=Zt,sn-=Zt}}if(E=E[0],xe.na=xe.na[0],xe.P=xe.P[0],xe.Sa=xe.Sa[0],ye!=0)break}E=[E],xe.Ja=[xe.Ja],xe.xa=[xe.xa];e:if(nt=g,ye=b,we=E,Me=xe.gb[0],je=xe.Ja,ot=xe.xa,tt=ye[0],Fe=!t(nt,tt,"VP8 "),xt=!t(nt,tt,"VP8L"),e(nt!=null),e(we!=null),e(je!=null),e(ot!=null),8>we[0])ye=7;else{if(Fe||xt){if(nt=Be(nt,tt+4),12<=Me&&nt>Me-12){ye=3;break e}if(Le&&nt>we[0]-8){ye=7;break e}je[0]=nt,ye[0]+=8,we[0]-=8,ot[0]=xt}else ot[0]=5<=we[0]&&nt[tt+0]==47&&!(nt[tt+4]>>5),je[0]=we[0];ye=0}if(E=E[0],xe.Ja=xe.Ja[0],xe.xa=xe.xa[0],b=b[0],ye!=0)break;if(4294967286<xe.Ja)return 3;if($==null||Ie||($[0]=xe.xa?2:1),z=[z],Ue=[Ue],xe.xa){if(5>E){ye=7;break}$=z,Le=Ue,Ie=F,g==null||5>E?g=0:5<=E&&g[b+0]==47&&!(g[b+4]>>5)?(we=[0],nt=[0],Me=[0],ae(je=new N,g,b,E),_t(je,we,nt,Me)?($!=null&&($[0]=we[0]),Le!=null&&(Le[0]=nt[0]),Ie!=null&&(Ie[0]=Me[0]),g=1):g=0):g=0}else{if(10>E){ye=7;break}$=Ue,g==null||10>E||!Jf(g,b+3,E-3)?g=0:(Le=g[b+0]|g[b+1]<<8|g[b+2]<<16,Ie=16383&(g[b+7]<<8|g[b+6]),g=16383&(g[b+9]<<8|g[b+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=xe.Ja||!Ie||!g?g=0:(z&&(z[0]=Ie),$&&($[0]=g),g=1))}if(!g||(z=z[0],Ue=Ue[0],Ce&&(K[0]!=z||ge[0]!=Ue)))return 3;W!=null&&(W[0]=xe,W.offset=b-W.w,e(4294967286>b-W.w),e(W.offset==W.ha-E));break}return ye==0||ye==7&&Ce&&W==null?(F!=null&&(F[0]|=xe.na!=null&&0<xe.na.length),P!=null&&(P[0]=z),I!=null&&(I[0]=Ue),0):ye}function xc(g,b,E){var P=b.width,I=b.height,F=0,z=0,$=P,W=I;if(b.Da=g!=null&&0<g.Da,b.Da&&($=g.cd,W=g.bd,F=g.v,z=g.j,11>E||(F&=-2,z&=-2),0>F||0>z||0>=$||0>=W||F+$>P||z+W>I))return 0;if(b.v=F,b.j=z,b.va=F+$,b.o=z+W,b.U=$,b.T=W,b.da=g!=null&&0<g.da,b.da){if(!Ke($,W,E=[g.ib],F=[g.hb]))return 0;b.ib=E[0],b.hb=F[0]}return b.ob=g!=null&&g.ob,b.Kb=g==null||!g.Sd,b.da&&(b.ob=b.ib<3*P/4&&b.hb<3*I/4,b.Kb=0),1}function Ac(g){if(g==null)return 2;if(11>g.S){var b=g.f.RGBA;b.fb+=(g.height-1)*b.A,b.A=-b.A}else b=g.f.kb,g=g.height,b.O+=(g-1)*b.fa,b.fa=-b.fa,b.N+=(g-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(g-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(g-1)*b.lb,b.lb=-b.lb);return 0}function nu(g,b,E,P){if(P==null||0>=g||0>=b)return 2;if(E!=null){if(E.Da){var I=E.cd,F=E.bd,z=-2&E.v,$=-2&E.j;if(0>z||0>$||0>=I||0>=F||z+I>g||$+F>b)return 2;g=I,b=F}if(E.da){if(!Ke(g,b,I=[E.ib],F=[E.hb]))return 2;g=I[0],b=F[0]}}P.width=g,P.height=b;e:{var W=P.width,K=P.height;if(g=P.S,0>=W||0>=K||!(g>=sp&&13>g))g=2;else{if(0>=P.Rd&&P.sd==null){z=F=I=b=0;var ge=($=W*gd[g])*K;if(11>g||(F=(K+1)/2*(b=(W+1)/2),g==12&&(z=(I=W)*K)),(K=i(ge+2*F+z))==null){g=1;break e}P.sd=K,11>g?((W=P.f.RGBA).eb=K,W.fb=0,W.A=$,W.size=ge):((W=P.f.kb).y=K,W.O=0,W.fa=$,W.Fd=ge,W.f=K,W.N=0+ge,W.Ab=b,W.Cd=F,W.ea=K,W.W=0+ge+F,W.Db=b,W.Ed=F,g==12&&(W.F=K,W.J=0+ge+2*F),W.Tc=z,W.lb=I)}if(b=1,I=P.S,F=P.width,z=P.height,I>=sp&&13>I)if(11>I)g=P.f.RGBA,b&=($=Math.abs(g.A))*(z-1)+F<=g.size,b&=$>=F*gd[I],b&=g.eb!=null;else{g=P.f.kb,$=(F+1)/2,ge=(z+1)/2,W=Math.abs(g.fa),K=Math.abs(g.Ab);var Ce=Math.abs(g.Db),Le=Math.abs(g.lb),xe=Le*(z-1)+F;b&=W*(z-1)+F<=g.Fd,b&=K*(ge-1)+$<=g.Cd,b=(b&=Ce*(ge-1)+$<=g.Ed)&W>=F&K>=$&Ce>=$,b&=g.y!=null,b&=g.f!=null,b&=g.ea!=null,I==12&&(b&=Le>=F,b&=xe<=g.Tc,b&=g.F!=null)}else b=0;g=b?0:2}}return g!=0||E!=null&&E.fd&&(g=Ac(P)),g}var Qn=64,Sc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ec=24,kc=32,Cc=8,ci=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];We("Predictor0","PredictorAdd0"),Z.Predictor0=function(){return 4278190080},Z.Predictor1=function(g){return g},Z.Predictor2=function(g,b,E){return b[E+0]},Z.Predictor3=function(g,b,E){return b[E+1]},Z.Predictor4=function(g,b,E){return b[E-1]},Z.Predictor5=function(g,b,E){return et(et(g,b[E+1]),b[E+0])},Z.Predictor6=function(g,b,E){return et(g,b[E-1])},Z.Predictor7=function(g,b,E){return et(g,b[E+0])},Z.Predictor8=function(g,b,E){return et(b[E-1],b[E+0])},Z.Predictor9=function(g,b,E){return et(b[E+0],b[E+1])},Z.Predictor10=function(g,b,E){return et(et(g,b[E-1]),et(b[E+0],b[E+1]))},Z.Predictor11=function(g,b,E){var P=b[E+0];return 0>=jt(P>>24&255,g>>24&255,(b=b[E-1])>>24&255)+jt(P>>16&255,g>>16&255,b>>16&255)+jt(P>>8&255,g>>8&255,b>>8&255)+jt(255&P,255&g,255&b)?P:g},Z.Predictor12=function(g,b,E){var P=b[E+0];return(gt((g>>24&255)+(P>>24&255)-((b=b[E-1])>>24&255))<<24|gt((g>>16&255)+(P>>16&255)-(b>>16&255))<<16|gt((g>>8&255)+(P>>8&255)-(b>>8&255))<<8|gt((255&g)+(255&P)-(255&b)))>>>0},Z.Predictor13=function(g,b,E){var P=b[E-1];return(Nt((g=et(g,b[E+0]))>>24&255,P>>24&255)<<24|Nt(g>>16&255,P>>16&255)<<16|Nt(g>>8&255,P>>8&255)<<8|Nt(g>>0&255,P>>0&255))>>>0};var ru=Z.PredictorAdd0;Z.PredictorAdd1=Ht,We("Predictor2","PredictorAdd2"),We("Predictor3","PredictorAdd3"),We("Predictor4","PredictorAdd4"),We("Predictor5","PredictorAdd5"),We("Predictor6","PredictorAdd6"),We("Predictor7","PredictorAdd7"),We("Predictor8","PredictorAdd8"),We("Predictor9","PredictorAdd9"),We("Predictor10","PredictorAdd10"),We("Predictor11","PredictorAdd11"),We("Predictor12","PredictorAdd12"),We("Predictor13","PredictorAdd13");var no=Z.PredictorAdd2;zt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),zt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var ip,hi=Z.ColorIndexInverseTransform,Lc=Z.MapARGB,sd=Z.VP8LColorIndexInverseTransformAlpha,Pc=Z.MapAlpha,Na=Z.VP8LPredictorsAdd=[];Na.length=16,(Z.VP8LPredictors=[]).length=16,(Z.VP8LPredictorsAdd_C=[]).length=16,(Z.VP8LPredictors_C=[]).length=16;var sl,di,Yr,al,ro,io,Nc,so,cn,ao,Kr,rs,iu,ad,su,au,ou,is,oo,Ta,lo,uo,ol,Mr,Ni,Sn,vn,Zn,cr=i(511),Ra=i(2041),Tc=i(225),lu=i(767),od=0,Ia=Ra,Rc=Tc,fi=lu,Cs=cr,sp=0,ll=1,sv=2,ld=3,ud=4,En=5,ap=6,Ic=7,uu=8,cd=9,hd=10,dd=[2,3,7],op=[3,3,11],cu=[280,256,256,256,40],av=[0,1,1,1,0],Py=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ny=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ov=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lp=8,Oc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],fd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hu=null,mm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lv=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],uv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ty=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ry=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ym=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],pi=[],Ls=[],Ti=[],Oa=1,Mc=2,Xr=[],Ri=[];Oe("UpsampleRgbLinePair",Qt,3),Oe("UpsampleBgrLinePair",Wn,3),Oe("UpsampleRgbaLinePair",ea,4),Oe("UpsampleBgraLinePair",Pr,4),Oe("UpsampleArgbLinePair",Vr,4),Oe("UpsampleRgba4444LinePair",ur,2),Oe("UpsampleRgb565LinePair",Jn,2);var Iy=Z.UpsampleRgbLinePair,Oy=Z.UpsampleBgrLinePair,ul=Z.UpsampleRgbaLinePair,Fc=Z.UpsampleBgraLinePair,du=Z.UpsampleArgbLinePair,pd=Z.UpsampleRgba4444LinePair,wm=Z.UpsampleRgb565LinePair,co=16,ta=1<<co-1,yn=-227,_n=482,cl=6,Fr=0,Ii=i(256),fu=i(256),Dc=i(256),Oi=i(256),up=i(_n-yn),cv=i(_n-yn);ks("YuvToRgbRow",Qt,3),ks("YuvToBgrRow",Wn,3),ks("YuvToRgbaRow",ea,4),ks("YuvToBgraRow",Pr,4),ks("YuvToArgbRow",Vr,4),ks("YuvToRgba4444Row",ur,2),ks("YuvToRgb565Row",Jn,2);var bm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],pu=[0,2,8],hv=[8,7,6,4,4,2,2,2,1,1,1,1],ho=1;this.WebPDecodeRGBA=function(g,b,E,P,I){var F=ll,z=new Pa,$=new Wr;z.ba=$,$.S=F,$.width=[$.width],$.height=[$.height];var W=$.width,K=$.height,ge=new Si;if(ge==null||g==null)var Ce=2;else e(ge!=null),Ce=tu(g,b,E,ge.width,ge.height,ge.Pd,ge.Qd,ge.format,null);if(Ce!=0?W=0:(W!=null&&(W[0]=ge.width[0]),K!=null&&(K[0]=ge.height[0]),W=1),W){$.width=$.width[0],$.height=$.height[0],P!=null&&(P[0]=$.width),I!=null&&(I[0]=$.height);e:{if(P=new lc,(I=new nl).data=g,I.w=b,I.ha=E,I.kd=1,b=[0],e(I!=null),((g=tu(I.data,I.w,I.ha,null,null,null,b,null,I))==0||g==7)&&b[0]&&(g=4),(b=g)==0){if(e(z!=null),P.data=I.data,P.w=I.w+I.offset,P.ha=I.ha-I.offset,P.put=xs,P.ac=Lr,P.bc=Gs,P.ma=z,I.xa){if((g=Zi())==null){z=1;break e}if(function(Le,xe){var Ue=[0],Ie=[0],ye=[0];t:for(;;){if(Le==null)return 0;if(xe==null)return Le.a=2,0;if(Le.l=xe,Le.a=0,ae(Le.m,xe.data,xe.w,xe.ha),!_t(Le.m,Ue,Ie,ye)){Le.a=3;break t}if(Le.xb=Mc,xe.width=Ue[0],xe.height=Ie[0],!Sa(Ue[0],Ie[0],1,Le,null))break t;return 1}return e(Le.a!=0),0}(g,P)){if(P=(b=nu(P.width,P.height,z.Oa,z.ba))==0){t:{P=g;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((E=P.l)!=null),e((I=E.ma)!=null),P.xb!=0){if(P.ca=I.ba,P.tb=I.tb,e(P.ca!=null),!xc(I.Oa,E,ld)){P.a=2;break n}if(!Vo(P,E.width)||E.da)break n;if((E.da||rn(P.ca.S))&&ke(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&ke()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!rt(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!Or(P,P.V,P.Ba,P.c,P.i,E.o,Go))break n;I.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(b=g.a)}else b=g.a}else{if((g=new es)==null){z=1;break e}if(g.Fa=I.na,g.P=I.P,g.qc=I.Sa,Qf(g,P)){if((b=nu(P.width,P.height,z.Oa,z.ba))==0){if(g.Aa=0,E=z.Oa,e((I=g)!=null),E!=null){if(0<(W=0>(W=E.Md)?0:100<W?255:255*W/100)){for(K=ge=0;4>K;++K)12>(Ce=I.pb[K]).lc&&(Ce.ia=W*hv[0>Ce.lc?0:Ce.lc]>>3),ge|=Ce.ia;ge&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=E.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}Gl(g,P)||(b=g.a)}}else b=g.a}b==0&&z.Oa!=null&&z.Oa.fd&&(b=Ac(z.ba))}z=b}F=z!=0?null:11>F?$.f.RGBA.eb:$.f.kb.y}else F=null;return F};var gd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(Z,fe){for(var Se="",q=0;q<4;q++)Se+=String.fromCharCode(Z[fe++]);return Se}function d(Z,fe){return(Z[fe+0]<<0|Z[fe+1]<<8|Z[fe+2]<<16)>>>0}function m(Z,fe){return(Z[fe+0]<<0|Z[fe+1]<<8|Z[fe+2]<<16|Z[fe+3]<<24)>>>0}new c;var y=[0],v=[0],x=[],S=new c,C=s,k=function(Z,fe){var Se={},q=0,V=!1,ue=0,re=0;if(Se.frames=[],!function(j,Y,se,oe){for(var de=0;de<oe;de++)if(j[Y+de]!=se.charCodeAt(de))return!0;return!1}(Z,fe,"RIFF",4)){var Ee,ce;for(m(Z,fe+=4),fe+=8;fe<Z.length;){var me=h(Z,fe),ae=m(Z,fe+=4);fe+=4;var te=ae+(1&ae);switch(me){case"VP8 ":case"VP8L":Se.frames[q]===void 0&&(Se.frames[q]={}),(N=Se.frames[q]).src_off=V?re:fe-8,N.src_size=ue+ae+8,q++,V&&(V=!1,ue=0,re=0);break;case"VP8X":(N=Se.header={}).feature_flags=Z[fe];var J=fe+4;N.canvas_width=1+d(Z,J),J+=3,N.canvas_height=1+d(Z,J),J+=3;break;case"ALPH":V=!0,ue=te+8,re=fe-8;break;case"ANIM":(N=Se.header).bgcolor=m(Z,fe),J=fe+4,N.loop_count=(Ee=Z)[(ce=J)+0]<<0|Ee[ce+1]<<8,J+=2;break;case"ANMF":var G,N;(N=Se.frames[q]={}).offset_x=2*d(Z,fe),fe+=3,N.offset_y=2*d(Z,fe),fe+=3,N.width=1+d(Z,fe),fe+=3,N.height=1+d(Z,fe),fe+=3,N.duration=d(Z,fe),fe+=3,G=Z[fe++],N.dispose=1&G,N.blend=G>>1&1}me!="ANMF"&&(fe+=te)}return Se}}(C,0);k.response=C,k.rgbaoutput=!0,k.dataurl=!1;var T=k.header?k.header:null,M=k.frames?k.frames:null;if(T){T.loop_counter=T.loop_count,y=[T.canvas_height],v=[T.canvas_width];for(var H=0;H<M.length&&M[H].blend!=0;H++);}var X=M[0],he=S.WebPDecodeRGBA(C,X.src_off,X.src_size,v,y);X.rgba=he,X.imgwidth=v[0],X.imgheight=y[0];for(var ne=0;ne<v[0]*y[0]*4;ne++)x[ne]=he[ne];return this.width=v,this.height=y,this.data=x,this}(function(s){var e=function(){return typeof Kb=="function"},t=function(y,v,x,S){var C=4,k=a;switch(S){case s.image_compression.FAST:C=1,k=i;break;case s.image_compression.MEDIUM:C=6,k=l;break;case s.image_compression.SLOW:C=9,k=c}y=n(y,v,x,k);var T=Kb(y,{level:C});return s.__addimage__.arrayBufferToBinaryString(T)},n=function(y,v,x,S){for(var C,k,T,M=y.length/v,H=new Uint8Array(y.length+M),X=d(),he=0;he<M;he+=1){if(T=he*v,C=y.subarray(T,T+v),S)H.set(S(C,x,k),T+he);else{for(var ne,Z=X.length,fe=[];ne<Z;ne+=1)fe[ne]=X[ne](C,x,k);var Se=m(fe.concat());H.set(fe[Se],T+he)}k=C}return H},r=function(y){var v=Array.apply([],y);return v.unshift(0),v},i=function(y,v){var x,S=[],C=y.length;S[0]=1;for(var k=0;k<C;k+=1)x=y[k-v]||0,S[k+1]=y[k]-x+256&255;return S},a=function(y,v,x){var S,C=[],k=y.length;C[0]=2;for(var T=0;T<k;T+=1)S=x&&x[T]||0,C[T+1]=y[T]-S+256&255;return C},l=function(y,v,x){var S,C,k=[],T=y.length;k[0]=3;for(var M=0;M<T;M+=1)S=y[M-v]||0,C=x&&x[M]||0,k[M+1]=y[M]+256-(S+C>>>1)&255;return k},c=function(y,v,x){var S,C,k,T,M=[],H=y.length;M[0]=4;for(var X=0;X<H;X+=1)S=y[X-v]||0,C=x&&x[X]||0,k=x&&x[X-v]||0,T=h(S,C,k),M[X+1]=y[X]-T+256&255;return M},h=function(y,v,x){if(y===v&&v===x)return y;var S=Math.abs(v-x),C=Math.abs(y-x),k=Math.abs(y+v-x-x);return S<=C&&S<=k?y:C<=k?v:x},d=function(){return[r,i,a,l,c]},m=function(y){var v=y.map(function(x){return x.reduce(function(S,C){return S+Math.abs(C)},0)});return v.indexOf(Math.min.apply(null,v))};s.processPNG=function(y,v,x,S){var C,k,T,M,H,X,he,ne,Z,fe,Se,q,V,ue,re,Ee=this.decode.FLATE_DECODE,ce="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(T=new aI(y)).imgData,k=T.bits,C=T.colorSpace,H=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){Z=(ne=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,Se=new Uint8Array(Z*T.colors),fe=new Uint8Array(Z);var me,ae=T.pixelBitlength-T.bits;for(ue=0,re=0;ue<Z;ue++){for(V=ne[ue],me=0;me<ae;)Se[re++]=V>>>me&255,me+=T.bits;fe[ue]=V>>>me&255}}if(T.bits===16){Z=(ne=new Uint32Array(T.decodePixels().buffer)).length,Se=new Uint8Array(Z*(32/T.pixelBitlength)*T.colors),fe=new Uint8Array(Z*(32/T.pixelBitlength)),q=T.colors>1,ue=0,re=0;for(var te=0;ue<Z;)V=ne[ue++],Se[re++]=V>>>0&255,q&&(Se[re++]=V>>>16&255,V=ne[ue++],Se[re++]=V>>>0&255),fe[te++]=V>>>16&255;k=8}S!==s.image_compression.NONE&&e()?(y=t(Se,T.width*T.colors,T.colors,S),he=t(fe,T.width,1,S)):(y=Se,he=fe,Ee=void 0)}if(T.colorType===3&&(C=this.color_spaces.INDEXED,X=T.palette,T.transparency.indexed)){var J=T.transparency.indexed,G=0;for(ue=0,Z=J.length;ue<Z;++ue)G+=J[ue];if((G/=255)===Z-1&&J.indexOf(0)!==-1)M=[J.indexOf(0)];else if(G!==Z){for(ne=T.decodePixels(),fe=new Uint8Array(ne.length),ue=0,Z=ne.length;ue<Z;ue++)fe[ue]=J[ne[ue]];he=t(fe,T.width,1)}}var N=function(j){var Y;switch(j){case s.image_compression.FAST:Y=11;break;case s.image_compression.MEDIUM:Y=13;break;case s.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(S);return Ee===this.decode.FLATE_DECODE&&(ce="/Predictor "+N+" "),ce+="/Colors "+H+" /BitsPerComponent "+k+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(he&&this.__addimage__.isArrayBuffer(he)||this.__addimage__.isArrayBufferView(he))&&(he=this.__addimage__.arrayBufferToBinaryString(he)),{alias:x,data:y,index:v,filter:Ee,decodeParameters:ce,transparency:M,palette:X,sMask:he,predictor:N,width:T.width,height:T.height,bitsPerComponent:k,colorSpace:C}}}})(Pt.API),function(s){s.processGIF89A=function(e,t,n,r){var i=new oI(e),a=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:a,height:l},d=new fw(100).encode(h,100);return s.processJPEG.call(this,d,t,n,r)},s.processGIF87A=s.processGIF89A}(Pt.API),Ao.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var e=0;e<s;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:n,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ao.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[s]()}catch(t){In.log("bit decode error:"+t)}},Ao.prototype.bit1=function(){var s,e=Math.ceil(this.width/8),t=e%4;for(s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,r=0;r<e;r++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*r*4,l=0;l<8&&8*r+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}t!==0&&(this.pos+=4-t)}},Ao.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),e=s%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<s;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*r*4,l=i>>4,c=15&i,h=this.palette[l];if(this.data[a]=h.blue,this.data[a+1]=h.green,this.data[a+2]=h.red,this.data[a+3]=255,2*r+1>=this.width)break;h=this.palette[c],this.data[a+4]=h.blue,this.data[a+4+1]=h.green,this.data[a+4+2]=h.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ao.prototype.bit8=function(){for(var s=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;if(r<this.palette.length){var a=this.palette[r];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}s!==0&&(this.pos+=4-s)}},Ao.prototype.bit15=function(){for(var s=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,l=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,h=i>>15?255:0,d=n*this.width*4+4*r;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=h}this.pos+=s}},Ao.prototype.bit16=function(){for(var s=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,h=(a>>11)/e*255|0,d=r*this.width*4+4*i;this.data[d]=h,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=s}},Ao.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var e=this.bottom_up?s:this.height-1-s,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=i,this.data[a+1]=r,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ao.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var e=this.bottom_up?s:this.height-1-s,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=i,this.data[l+1]=r,this.data[l+2]=n,this.data[l+3]=a}},Ao.prototype.getData=function(){return this.data},function(s){s.processBMP=function(e,t,n,r){var i=new Ao(e,!1),a=i.width,l=i.height,c={data:i.getData(),width:a,height:l},h=new fw(100).encode(c,100);return s.processJPEG.call(this,h,t,n,r)}}(Pt.API),WS.prototype.getData=function(){return this.data},function(s){s.processWEBP=function(e,t,n,r){var i=new WS(e),a=i.width,l=i.height,c={data:i.getData(),width:a,height:l},h=new fw(100).encode(c,100);return s.processJPEG.call(this,h,t,n,r)}}(Pt.API),Pt.API.processRGBA=function(s,e,t){for(var n=s.data,r=n.length,i=new Uint8Array(r/4*3),a=new Uint8Array(r/4),l=0,c=0,h=0;h<r;h+=4){var d=n[h],m=n[h+1],y=n[h+2],v=n[h+3];i[l++]=d,i[l++]=m,i[l++]=y,a[c++]=v}var x=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},Pt.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mp=Pt.API,Qv=Mp.getCharWidthsArray=function(s,e){var t,n,r=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:r.metadata.Unicode.widths,c=l.fof?l.fof:1,h=e.kerning?e.kerning:r.metadata.Unicode.kerning,d=h.fof?h.fof:1,m=e.doKerning!==!1,y=0,v=s.length,x=0,S=l[0]||c,C=[];for(t=0;t<v;t++)n=s.charCodeAt(t),typeof r.metadata.widthOfString=="function"?C.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(y=m&&Ln(h[n])==="object"&&!isNaN(parseInt(h[n][x],10))?h[n][x]/d:0,C.push((l[n]||S)/c+y)),x=n;return C},US=Mp.getStringUnitWidth=function(s,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Mp.processArabic&&(s=Mp.processArabic(s)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(s,t,r)/t:Qv.apply(this,arguments).reduce(function(i,a){return i+a},0)},qS=function(s,e,t,n){for(var r=[],i=0,a=s.length,l=0;i!==a&&l+e[i]<t;)l+=e[i],i++;r.push(s.slice(0,i));var c=i;for(l=0;i!==a;)l+e[i]>n&&(r.push(s.slice(c,i)),l=0,c=i),l+=e[i],i++;return c!==i&&r.push(s.slice(c,i)),r},HS=function(s,e,t){t||(t={});var n,r,i,a,l,c,h,d=[],m=[d],y=t.textIndent||0,v=0,x=0,S=s.split(" "),C=Qv.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?S[0].length+2:t.lineIndent||0){var k=Array(c).join(" "),T=[];S.map(function(H){(H=H.split(/\s*\n/)).length>1?T=T.concat(H.map(function(X,he){return(he&&X.length?`
`:"")+X})):T.push(H[0])}),S=T,c=US.apply(this,[k,t])}for(i=0,a=S.length;i<a;i++){var M=0;if(n=S[i],c&&n[0]==`
`&&(n=n.substr(1),M=1),y+v+(x=(r=Qv.apply(this,[n,t])).reduce(function(H,X){return H+X},0))>e||M){if(x>e){for(l=qS.apply(this,[n,r,e-(y+v),e]),d.push(l.shift()),d=[l.pop()];l.length;)m.push([l.shift()]);x=r.slice(n.length-(d[0]?d[0].length:0)).reduce(function(H,X){return H+X},0)}else d=[n];m.push(d),y=x+c,v=C}else d.push(n),y+=v+x,v=C}return h=c?function(H,X){return(X?k:"")+H.join(" ")}:function(H){return H.join(" ")},m.map(h)},Mp.splitTextToSize=function(s,e,t){var n,r=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var m=this.internal.getFont(d.fontName,d.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(s)?s:String(s).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/r;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,i.lineIndent=t.lineIndent;var l,c,h=[];for(l=0,c=n.length;l<c;l++)h=h.concat(HS.apply(this,[n[l],a,i]));return h},function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},r=0;r<e.length;r++)t[e[r]]="0123456789abcdef"[r],n["0123456789abcdef"[r]]=e[r];var i=function(m){return"0x"+parseInt(m,10).toString(16)},a=s.__fontmetrics__.compress=function(m){var y,v,x,S,C=["{"];for(var k in m){if(y=m[k],isNaN(parseInt(k,10))?v="'"+k+"'":(k=parseInt(k,10),v=(v=i(k).slice(2)).slice(0,-1)+n[v.slice(-1)]),typeof y=="number")y<0?(x=i(y).slice(3),S="-"):(x=i(y).slice(2),S=""),x=S+x.slice(0,-1)+n[x.slice(-1)];else{if(Ln(y)!=="object")throw new Error("Don't know what to do with value type "+Ln(y)+".");x=a(y)}C.push(v+x)}return C.push("}"),C.join("")},l=s.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,v,x,S,C={},k=1,T=C,M=[],H="",X="",he=m.length-1,ne=1;ne<he;ne+=1)(S=m[ne])=="'"?y?(x=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(M.push([T,x]),T={},x=void 0):S=="}"?((v=M.pop())[0][v[1]]=T,x=void 0,T=v[0]):S=="-"?k=-1:x===void 0?t.hasOwnProperty(S)?(H+=t[S],x=parseInt(H,16)*k,k=1,H=""):H+=S:t.hasOwnProperty(S)?(X+=t[S],T[x]=parseInt(X,16)*k,k=1,x=void 0,X=""):X+=S;return C},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(m){var y=m.font,v=d.Unicode[y.postScriptName];v&&(y.metadata.Unicode={},y.metadata.Unicode.widths=v.widths,y.metadata.Unicode.kerning=v.kerning);var x=h.Unicode[y.postScriptName];x&&(y.metadata.Unicode.encoding=x,y.encoding=x.codePages[0])}])}(Pt.API),function(s){var e=function(t){for(var n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r};s.API.events.push(["addFont",function(t){var n=void 0,r=t.font,i=t.instance;if(!r.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(n=i.existsFileInVFS(r.postScriptName)===!1?i.loadFile(r.postScriptName):i.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(d0(l)),a.metadata=s.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(r,n)}}])}(Pt),function(s){function e(){return(Tt.canvg?Promise.resolve(Tt.canvg):nc(()=>import("./index.es-CjlIB4sF.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Pt.API.addSvgAsImage=function(t,n,r,i,a,l,c,h){if(isNaN(n)||isNaN(r))throw In.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw In.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=a;var m=d.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,d.width,d.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then(function(x){return x.fromString(m,t,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(y)}).then(function(){v.addImage(d.toDataURL("image/jpeg",1),n,r,i,a,c,h)})}}(),Pt.API.putTotalPages=function(s){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(s,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,t);return this},Pt.API.viewerPreferences=function(s,e){var t;s=s||{},e=e||!1;var n,r,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],h=0,d=0,m=0;function y(x,S){var C,k=!1;for(C=0;C<x.length;C+=1)x[C]===S&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,s==="reset"||e===!0){var v=l.length;for(m=0;m<v;m+=1)t[l[m]].value=t[l[m]].defaultValue,t[l[m]].explicitSet=!1}if(Ln(s)==="object"){for(r in s)if(i=s[r],y(l,r)&&i!==void 0){if(t[r].type==="boolean"&&typeof i=="boolean")t[r].value=i;else if(t[r].type==="name"&&y(t[r].valueSet,i))t[r].value=i;else if(t[r].type==="integer"&&Number.isInteger(i))t[r].value=i;else if(t[r].type==="array"){for(h=0;h<i.length;h+=1)if(n=!0,i[h].length===1&&typeof i[h][0]=="number")c.push(String(i[h]-1));else if(i[h].length>1){for(d=0;d<i[h].length;d+=1)typeof i[h][d]!="number"&&(n=!1);n===!0&&c.push([i[h][0]-1,i[h][1]-1].join(" "))}t[r].value="["+c.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,S=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?S.push("/"+x+" /"+t[x].value):S.push("/"+x+" "+t[x].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(s){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),h=i.length+a.length+l.length+r.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(r+i+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(n,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Pt.API),function(s){var e=s.API,t=e.pdfEscape16=function(i,a){for(var l,c=a.metadata.Unicode.widths,h=["","0","00","000","0000"],d=[""],m=0,y=i.length;m<y;++m){if(l=a.metadata.characterToGlyph(i.charCodeAt(m)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=i.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(h[4-l.length],l)}return d.join("")},n=function(i){var a,l,c,h,d,m,y;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,y=(l=Object.keys(i).sort(function(v,x){return v-x})).length;m<y;m++)a=l[m],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(h=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+h+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var l=a.font,c=a.out,h=a.newObject,d=a.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,y=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),v="",x=0;x<y.length;x++)v+=String.fromCharCode(y[x]);var S=h();d({data:v,addLength1:!0,objectId:S}),c("endobj");var C=h();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:C}),c("endobj");var k=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Wp(l.fontName)),c("/FontFile2 "+S+" 0 R"),c("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var T=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+Wp(l.fontName)),c("/FontDescriptor "+k+" 0 R"),c("/W "+s.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+C+" 0 R"),c("/BaseFont /"+Wp(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+T+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var l=a.font,c=a.out,h=a.newObject,d=a.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,y="",v=0;v<m.length;v++)y+=String.fromCharCode(m[v]);var x=h();d({data:y,addLength1:!0,objectId:x}),c("endobj");var S=h();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var C=h();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Wp(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=h();for(var k=0;k<l.metadata.hmtx.widths.length;k++)l.metadata.hmtx.widths[k]=parseInt(l.metadata.hmtx.widths[k]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Wp(l.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var r=function(i){var a,l=i.text||"",c=i.x,h=i.y,d=i.options||{},m=i.mutex||{},y=m.pdfEscape,v=m.activeFontKey,x=m.fonts,S=v,C="",k=0,T="",M=x[S].encoding;if(x[S].encoding!=="Identity-H")return{text:l,x:c,y:h,options:d,mutex:m};for(T=l,S=v,Array.isArray(l)&&(T=l[0]),k=0;k<T.length;k+=1)x[S].metadata.hasOwnProperty("cmap")&&(a=x[S].metadata.cmap.unicode.codeMap[T[k].charCodeAt(0)]),a||T[k].charCodeAt(0)<256&&x[S].metadata.hasOwnProperty("Unicode")?C+=T[k]:C+="";var H="";return parseInt(S.slice(1))<14||M==="WinAnsiEncoding"?H=y(C,S).split("").map(function(X){return X.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(H=t(C,x[S])),m.isHex=!0,{text:H,x:c,y:h,options:d,mutex:m}};e.events.push(["postProcessText",function(i){var a=i.text||"",l=[],c={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var h=0;for(h=0;h<a.length;h+=1)Array.isArray(a[h])&&a[h].length===3?l.push([r(Object.assign({},c,{text:a[h][0]})).text,a[h][1],a[h][2]]):l.push(r(Object.assign({},c,{text:a[h]})).text);i.text=l}else i.text=r(Object.assign({},c,{text:a})).text}])}(Pt),function(s){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},s.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},s.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Pt.API),function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(n){var r,i,a,l,c,h,d,m=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,M=0;this.__bidiEngine__={};var H=function(q){var V=q.charCodeAt(),ue=V>>8,re=S[ue];return re!==void 0?m[256*re+(255&V)]:ue===252||ue===253?"AL":k.test(ue)?"L":ue===8?"R":"N"},X=function(q){for(var V,ue=0;ue<q.length;ue++){if((V=H(q.charAt(ue)))==="L")return!1;if(V==="R")return!0}return!1},he=function(q,V,ue,re){var Ee,ce,me,ae,te=V[re];switch(te){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(te="AN");break;case"AL":T=!0,te="R";break;case"WS":te="N";break;case"CS":re<1||re+1>=V.length||(Ee=ue[re-1])!=="EN"&&Ee!=="AN"||(ce=V[re+1])!=="EN"&&ce!=="AN"?te="N":T&&(ce="AN"),te=ce===Ee?ce:"N";break;case"ES":te=(Ee=re>0?ue[re-1]:"B")==="EN"&&re+1<V.length&&V[re+1]==="EN"?"EN":"N";break;case"ET":if(re>0&&ue[re-1]==="EN"){te="EN";break}if(T){te="N";break}for(me=re+1,ae=V.length;me<ae&&V[me]==="ET";)me++;te=me<ae&&V[me]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(ae=V.length,me=re+1;me<ae&&V[me]==="NSM";)me++;if(me<ae){var J=q[re],G=J>=1425&&J<=2303||J===64286;if(Ee=V[me],G&&(Ee==="R"||Ee==="AL")){te="R";break}}}te=re<1||(Ee=V[re-1])==="B"?"N":ue[re-1];break;case"B":T=!1,r=!0,te=M;break;case"S":i=!0,te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":te="N"}return te},ne=function(q,V,ue){var re=q.split("");return ue&&Z(re,ue,{hiLevel:M}),re.reverse(),V&&V.reverse(),re.join("")},Z=function(q,V,ue){var re,Ee,ce,me,ae,te=-1,J=q.length,G=0,N=[],j=M?v:y,Y=[];for(T=!1,r=!1,i=!1,Ee=0;Ee<J;Ee++)Y[Ee]=H(q[Ee]);for(ce=0;ce<J;ce++){if(ae=G,N[ce]=he(q,Y,N,ce),re=240&(G=j[ae][x[N[ce]]]),G&=15,V[ce]=me=j[G][5],re>0)if(re===16){for(Ee=te;Ee<ce;Ee++)V[Ee]=1;te=-1}else te=-1;if(j[G][6])te===-1&&(te=ce);else if(te>-1){for(Ee=te;Ee<ce;Ee++)V[Ee]=me;te=-1}Y[ce]==="B"&&(V[ce]=0),ue.hiLevel|=me}i&&function(se,oe,de){for(var be=0;be<de;be++)if(se[be]==="S"){oe[be]=M;for(var Ae=be-1;Ae>=0&&se[Ae]==="WS";Ae--)oe[Ae]=M}}(Y,V,J)},fe=function(q,V,ue,re,Ee){if(!(Ee.hiLevel<q)){if(q===1&&M===1&&!r)return V.reverse(),void(ue&&ue.reverse());for(var ce,me,ae,te,J=V.length,G=0;G<J;){if(re[G]>=q){for(ae=G+1;ae<J&&re[ae]>=q;)ae++;for(te=G,me=ae-1;te<me;te++,me--)ce=V[te],V[te]=V[me],V[me]=ce,ue&&(ce=ue[te],ue[te]=ue[me],ue[me]=ce);G=ae}G++}}},Se=function(q,V,ue){var re=q.split(""),Ee={hiLevel:M};return ue||(ue=[]),Z(re,ue,Ee),function(ce,me,ae){if(ae.hiLevel!==0&&d)for(var te,J=0;J<ce.length;J++)me[J]===1&&(te=C.indexOf(ce[J]))>=0&&(ce[J]=C[te+1])}(re,ue,Ee),fe(2,re,V,ue,Ee),fe(1,re,V,ue,Ee),re.join("")};return this.__bidiEngine__.doBidiReorder=function(q,V,ue){if(function(Ee,ce){if(ce)for(var me=0;me<Ee.length;me++)ce[me]=me;l===void 0&&(l=X(Ee)),h===void 0&&(h=X(Ee))}(q,V),a||!c||h)if(a&&c&&l^h)M=l?1:0,q=ne(q,V,ue);else if(!a&&c&&h)M=l?1:0,q=Se(q,V,ue),q=ne(q,V);else if(!a||l||c||h){if(a&&!c&&l^h)q=ne(q,V),l?(M=0,q=Se(q,V,ue)):(M=1,q=Se(q,V,ue),q=ne(q,V));else if(a&&l&&!c&&h)M=1,q=Se(q,V,ue),q=ne(q,V);else if(!a&&!c&&l^h){var re=d;l?(M=1,q=Se(q,V,ue),M=0,d=!1,q=Se(q,V,ue),d=re):(M=0,q=Se(q,V,ue),q=ne(q,V),M=1,d=!1,q=Se(q,V,ue),d=re,q=ne(q,V))}}else M=0,q=Se(q,V,ue);else M=l?1:0,q=Se(q,V,ue);return q},this.__bidiEngine__.setOptions=function(q){q&&(a=q.isInputVisual,c=q.isOutputVisual,l=q.isInputRtl,h=q.isOutputRtl,d=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(n){var r=n.text,i=(n.x,n.y,n.options||{}),a=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(r)==="[object Array]"){var l=0;for(a=[],l=0;l<r.length;l+=1)Object.prototype.toString.call(r[l])==="[object Array]"?a.push([t.doBidiReorder(r[l][0]),r[l][1],r[l][2]]):a.push([t.doBidiReorder(r[l])]);n.text=a}else n.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(Pt),Pt.API.TTFFont=function(){function s(e){var t;if(this.rawData=e,t=this.contents=new qh(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new xI(this),this.registerTTF()}return s.open=function(e){return new s(e)},s.prototype.parse=function(){return this.directory=new lI(this.contents),this.head=new cI(this),this.name=new gI(this),this.cmap=new rk(this),this.toUnicode={},this.hhea=new hI(this),this.maxp=new mI(this),this.hmtx=new vI(this),this.post=new fI(this),this.os2=new dI(this),this.loca=new _I(this),this.glyf=new yI(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var e,t,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,h;for(h=[],a=0,l=(c=this.bbox).length;a<l;a++)e=c[a],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),(32768&(t=r>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},s.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},s.prototype.widthOfString=function(e,t,n){var r,i,a,l;for(a=0,i=0,l=(e=""+e).length;0<=l?i<l:i>l;i=0<=l?++i:--i)r=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return a*(t/1e3)},s.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},s}();var $o,qh=function(){function s(e){this.data=e??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(e){return this.data[this.pos++]=e},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},s.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},s.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},s.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},s.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},s.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},s.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(e){return this.writeInt16(e)},s.prototype.readLongLong=function(){var e,t,n,r,i,a,l,c;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*i+65536*a+256*l+c},s.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(e){return this.writeInt32(e)},s.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},s.prototype.write=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.writeByte(t));return i},s}(),lI=function(){var s;function e(t){var n,r,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,i=this.tableCount;0<=i?r<i:r>i;r=0<=i?++r:--r)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,r,i,a,l,c,h,d,m,y,v,x,S;for(S in v=Object.keys(t).length,c=Math.log(2),m=16*Math.floor(Math.log(v)/c),a=Math.floor(m/c),d=16*v-m,(r=new qh).writeInt(this.scalarType),r.writeShort(v),r.writeShort(m),r.writeShort(a),r.writeShort(d),i=16*v,h=r.pos+i,l=null,x=[],t)for(y=t[S],r.writeString(S),r.writeInt(s(y)),r.writeInt(h),r.writeInt(y.length),x=x.concat(y),S==="head"&&(l=h),h+=y.length;h%4;)x.push(0),h++;return r.write(x),n=2981146554-s(r.data),r.pos=l+8,r.writeUInt32(n),r.data},s=function(t){var n,r,i,a;for(t=ik.call(t);t.length%4;)t.push(0);for(i=new qh(t),r=0,n=0,a=t.length;n<a;n=n+=4)r+=i.readUInt32();return 4294967295&r},e}(),uI={}.hasOwnProperty,zl=function(s,e){for(var t in e)uI.call(e,t)&&(s[t]=e[t]);function n(){this.constructor=s}return n.prototype=e.prototype,s.prototype=new n,s.__super__=e.prototype,s};$o=function(){function s(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s}();var cI=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new qh).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),GS=function(){function s(e,t){var n,r,i,a,l,c,h,d,m,y,v,x,S,C,k,T,M;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(v=e.readUInt16(),y=v/2,e.pos+=6,i=function(){var H,X;for(X=[],c=H=0;0<=y?H<y:H>y;c=0<=y?++H:--H)X.push(e.readUInt16());return X}(),e.pos+=2,S=function(){var H,X;for(X=[],c=H=0;0<=y?H<y:H>y;c=0<=y?++H:--H)X.push(e.readUInt16());return X}(),h=function(){var H,X;for(X=[],c=H=0;0<=y?H<y:H>y;c=0<=y?++H:--H)X.push(e.readUInt16());return X}(),d=function(){var H,X;for(X=[],c=H=0;0<=y?H<y:H>y;c=0<=y?++H:--H)X.push(e.readUInt16());return X}(),r=(this.length-e.pos+this.offset)/2,l=function(){var H,X;for(X=[],c=H=0;0<=r?H<r:H>r;c=0<=r?++H:--H)X.push(e.readUInt16());return X}(),c=k=0,M=i.length;k<M;c=++k)for(C=i[c],n=T=x=S[c];x<=C?T<=C:T>=C;n=x<=C?++T:--T)d[c]===0?a=n+h[c]:(a=l[d[c]/2+(n-x)-(y-c)]||0)!==0&&(a+=h[c]),this.codeMap[n]=65535&a}e.pos=m}return s.encode=function(e,t){var n,r,i,a,l,c,h,d,m,y,v,x,S,C,k,T,M,H,X,he,ne,Z,fe,Se,q,V,ue,re,Ee,ce,me,ae,te,J,G,N,j,Y,se,oe,de,be,Ae,qe,$e,De;switch(re=new qh,a=Object.keys(e).sort(function(Be,rt){return Be-rt}),t){case"macroman":for(S=0,C=function(){var Be=[];for(x=0;x<256;++x)Be.push(0);return Be}(),T={0:0},i={},Ee=0,te=a.length;Ee<te;Ee++)T[Ae=e[r=a[Ee]]]==null&&(T[Ae]=++S),i[r]={old:e[r],new:T[e[r]]},C[r]=T[e[r]];return re.writeUInt16(1),re.writeUInt16(0),re.writeUInt32(12),re.writeUInt16(0),re.writeUInt16(262),re.writeUInt16(0),re.write(C),{charMap:i,subtable:re.data,maxGlyphID:S+1};case"unicode":for(V=[],m=[],M=0,T={},n={},k=h=null,ce=0,J=a.length;ce<J;ce++)T[X=e[r=a[ce]]]==null&&(T[X]=++M),n[r]={old:X,new:T[X]},l=T[X]-r,k!=null&&l===h||(k&&m.push(k),V.push(r),h=l),k=r;for(k&&m.push(k),m.push(65535),V.push(65535),Se=2*(fe=V.length),Z=2*Math.pow(Math.log(fe)/Math.LN2,2),y=Math.log(Z/2)/Math.LN2,ne=2*fe-Z,c=[],he=[],v=[],x=me=0,G=V.length;me<G;x=++me){if(q=V[x],d=m[x],q===65535){c.push(0),he.push(0);break}if(q-(ue=n[q].new)>=32768)for(c.push(0),he.push(2*(v.length+fe-x)),r=ae=q;q<=d?ae<=d:ae>=d;r=q<=d?++ae:--ae)v.push(n[r].new);else c.push(ue-q),he.push(0)}for(re.writeUInt16(3),re.writeUInt16(1),re.writeUInt32(12),re.writeUInt16(4),re.writeUInt16(16+8*fe+2*v.length),re.writeUInt16(0),re.writeUInt16(Se),re.writeUInt16(Z),re.writeUInt16(y),re.writeUInt16(ne),de=0,N=m.length;de<N;de++)r=m[de],re.writeUInt16(r);for(re.writeUInt16(0),be=0,j=V.length;be<j;be++)r=V[be],re.writeUInt16(r);for(qe=0,Y=c.length;qe<Y;qe++)l=c[qe],re.writeUInt16(l);for($e=0,se=he.length;$e<se;$e++)H=he[$e],re.writeUInt16(H);for(De=0,oe=v.length;De<oe;De++)S=v[De],re.writeUInt16(S);return{charMap:n,subtable:re.data,maxGlyphID:M+1}}},s}(),rk=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new GS(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,i;return n==null&&(n="macroman"),r=GS.encode(t,n),(i=new qh).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},e}(),hI=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),dI=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fI=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(r=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 196608:break;case 262144:return this.map=(function(){var l,c,h;for(h=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)h.push(t.readUInt32());return h}).call(this)}},e}(),pI=function(s,e){this.raw=s,this.length=s.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},gI=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,i,a,l,c,h,d,m,y,v;for(t.pos=this.offset,t.readShort(),n=t.readShort(),c=t.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(h={},a=m=0,y=r.length;m<y;a=++m)i=r[a],t.pos=i.offset,d=t.readString(i.length),l=new pI(d,i),h[v=i.nameID]==null&&(h[v]=[]),h[i.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e}(),mI=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),vI=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,i,a,l,c,h;for(t.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,m;for(m=[],n=d=0;0<=i?d<i:d>i;n=0<=i?++d:--d)m.push(t.readInt16());return m}(),this.widths=(function(){var d,m,y,v;for(v=[],d=0,m=(y=this.metrics).length;d<m;d++)a=y[d],v.push(a.advance);return v}).call(this),r=this.widths[this.widths.length-1],h=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)h.push(this.widths.push(r));return h},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ik=[].slice,yI=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,i,a,l,c,h,d,m,y;return t in this.cache?this.cache[t]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,l=(c=new qh(n.read(i))).readShort(),d=c.readShort(),y=c.readShort(),h=c.readShort(),m=c.readShort(),this.cache[t]=l===-1?new bI(c,d,y,h,m):new wI(c,l,d,y,h,m),this.cache[t]))},e.prototype.encode=function(t,n,r){var i,a,l,c,h;for(l=[],a=[],c=0,h=n.length;c<h;c++)i=t[n[c]],a.push(l.length),i&&(l=l.concat(i.encode(r)));return a.push(l.length),{table:l,offsets:a}},e}(),wI=function(){function s(e,t,n,r,i,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s}(),bI=function(){function s(e,t,n,r,i){var a,l;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return s.prototype.encode=function(){var e,t,n;for(t=new qh(ik.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},s}(),_I=function(s){function e(){return e.__super__.constructor.apply(this,arguments)}return zl(e,$o),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,l=0;l<r.length;++l)if(r[l]=i,a<n.length&&n[a]==l){++a,r[l]=i;var c=this.offsets[l],h=this.offsets[l+1]-c;h>0&&(i+=h)}for(var d=new Array(4*r.length),m=0;m<r.length;++m)d[4*m+3]=255&r[m],d[4*m+2]=(65280&r[m])>>8,d[4*m+1]=(16711680&r[m])>>16,d[4*m]=(4278190080&r[m])>>24;return d},e}(),xI=function(){function s(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var e,t,n,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=r[n];return e},s.prototype.glyphsFor=function(e){var t,n,r,i,a,l,c;for(r={},a=0,l=e.length;a<l;a++)r[i=e[a]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(n=r[i])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in c=this.glyphsFor(t))n=c[i],r[i]=n;return r},s.prototype.encode=function(e,t){var n,r,i,a,l,c,h,d,m,y,v,x,S,C,k;for(r in n=rk.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),v={0:0},k=n.charMap)v[(c=k[r]).old]=c.new;for(x in y=n.maxGlyphID,a)x in v||(v[x]=y++);return d=function(T){var M,H;for(M in H={},T)H[T[M]]=M;return H}(v),m=Object.keys(d).sort(function(T,M){return T-M}),S=function(){var T,M,H;for(H=[],T=0,M=m.length;T<M;T++)l=m[T],H.push(d[l]);return H}(),i=this.font.glyf.encode(a,S,v),h=this.font.loca.encode(i.offsets,S),C={cmap:this.font.cmap.raw(),glyf:i.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},s}();Pt.API.PDFObject=function(){var s;function e(){}return s=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,r,i,a;if(Array.isArray(t))return"["+function(){var l,c,h;for(h=[],l=0,c=t.length;l<c;l++)n=t[l],h.push(e.convert(n));return h}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+s(t.getUTCFullYear(),4)+s(t.getUTCMonth(),2)+s(t.getUTCDate(),2)+s(t.getUTCHours(),2)+s(t.getUTCMinutes(),2)+s(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in i=["<<"],t)a=t[r],i.push("/"+r+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+t},e}();function sk(s,e,t,n,r){n=n||{};var i=1.15,a=r.internal.scaleFactor,l=r.internal.getFontSize()/a,c=r.getLineHeightFactor?r.getLineHeightFactor():i,h=l*c,d=/\r\n|\r|\n/g,m="",y=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(m=typeof s=="string"?s.split(d):s,y=m.length||1),t+=l*(2-i),n.valign==="middle"?t-=y/2*h:n.valign==="bottom"&&(t-=y*h),n.halign==="center"||n.halign==="right"){var v=l;if(n.halign==="center"&&(v*=.5),m&&y>=1){for(var x=0;x<m.length;x++)r.text(m[x],e-r.getStringUnitWidth(m[x])*v,t),t+=h;return r}e-=r.getStringUnitWidth(s)*v}return n.halign==="justify"?r.text(s,e,t,{maxWidth:n.maxWidth||100,align:"justify"}):r.text(s,e,t),r}var VS={},ng=function(){function s(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return s.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:VS=e},s.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},s.prototype.applyStyles=function(e,t){var n,r,i;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),l=a.fontStyle,c=a.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var h=this.getFontList()[c];h&&h.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),l=h[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=s.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=s.unifyColor(e.textColor),d&&(r=this.jsPDFDocument).setTextColor.apply(r,d),d=s.unifyColor(e.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},s.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},s.prototype.rect=function(e,t,n,r,i){return this.jsPDFDocument.rect(e,t,n,r,i)},s.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},s.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},s.prototype.getDocument=function(){return this.jsPDFDocument},s.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},s.prototype.addPage=function(){return this.jsPDFDocument.addPage()},s.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},s.prototype.getGlobalOptions=function(){return VS||{}},s.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},s.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},s.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},s.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},s.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},s.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},s}(),n_=function(s,e){return n_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},n_(s,e)};function ak(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n_(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ok=function(s){ak(e,s);function e(t){var n=s.call(this)||this;return n._element=t,n}return e}(Array);function AI(s){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/s,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function SI(s){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[s]}function V2(s,e,t){t.applyStyles(e,!0);var n=Array.isArray(s)?s:[s],r=n.map(function(i){return t.getTextWidth(i)}).reduce(function(i,a){return Math.max(i,a)},0);return r}function lk(s,e,t,n){var r=e.settings.tableLineWidth,i=e.settings.tableLineColor;s.applyStyles({lineWidth:r,lineColor:i});var a=uk(r,!1);a&&s.rect(t.x,t.y,e.getWidth(s.pageSize().width),n.y-t.y,a)}function uk(s,e){var t=s>0,n=e||e===0;return t&&n?"DF":t?"S":n?"F":null}function Ly(s,e){var t,n,r,i;if(s=s||e,Array.isArray(s)){if(s.length>=4)return{top:s[0],right:s[1],bottom:s[2],left:s[3]};if(s.length===3)return{top:s[0],right:s[1],bottom:s[2],left:s[1]};if(s.length===2)return{top:s[0],right:s[1],bottom:s[0],left:s[1]};s.length===1?s=s[0]:s=e}return typeof s=="object"?(typeof s.vertical=="number"&&(s.top=s.vertical,s.bottom=s.vertical),typeof s.horizontal=="number"&&(s.right=s.horizontal,s.left=s.horizontal),{left:(t=s.left)!==null&&t!==void 0?t:e,top:(n=s.top)!==null&&n!==void 0?n:e,right:(r=s.right)!==null&&r!==void 0?r:e,bottom:(i=s.bottom)!==null&&i!==void 0?i:e}):(typeof s!="number"&&(s=e),{top:s,right:s,bottom:s,left:s})}function ck(s,e){var t=Ly(e.settings.margin,0);return s.pageSize().width-(t.left+t.right)}function EI(s,e,t,n,r){var i={},a=1.3333333333333333,l=pw(e,function(M){return r.getComputedStyle(M).backgroundColor});l!=null&&(i.fillColor=l);var c=pw(e,function(M){return r.getComputedStyle(M).color});c!=null&&(i.textColor=c);var h=CI(n,t);h&&(i.cellPadding=h);var d="borderTopColor",m=a*t,y=n.borderTopWidth;if(n.borderBottomWidth===y&&n.borderRightWidth===y&&n.borderLeftWidth===y){var v=(parseFloat(y)||0)/m;v&&(i.lineWidth=v)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/m,right:(parseFloat(n.borderRightWidth)||0)/m,bottom:(parseFloat(n.borderBottomWidth)||0)/m,left:(parseFloat(n.borderLeftWidth)||0)/m},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var x=pw(e,function(M){return r.getComputedStyle(M)[d]});x!=null&&(i.lineColor=x);var S=["left","right","center","justify"];S.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),S=["middle","bottom","top"],S.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var C=parseInt(n.fontSize||"");isNaN(C)||(i.fontSize=C/a);var k=kI(n);k&&(i.fontStyle=k);var T=(n.fontFamily||"").toLowerCase();return s.indexOf(T)!==-1&&(i.font=T),i}function kI(s){var e="";return(s.fontWeight==="bold"||s.fontWeight==="bolder"||parseInt(s.fontWeight)>=700)&&(e="bold"),(s.fontStyle==="italic"||s.fontStyle==="oblique")&&(e+="italic"),e}function pw(s,e){var t=hk(s,e);if(!t)return null;var n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var r=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function hk(s,e){var t=e(s);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?s.parentElement==null?null:hk(s.parentElement,e):t}function CI(s,e){var t=[s.paddingTop,s.paddingRight,s.paddingBottom,s.paddingLeft],n=96/(72/e),r=(parseInt(s.lineHeight)-parseInt(s.fontSize))/e/2,i=t.map(function(l){return parseInt(l||"0")/n}),a=Ly(i,0);return r>a.top&&(a.top=r),r>a.bottom&&(a.bottom=r),a}function dk(s,e,t,n,r){var i,a;n===void 0&&(n=!1),r===void 0&&(r=!1);var l;typeof e=="string"?l=t.document.querySelector(e):l=e;var c=Object.keys(s.getFontList()),h=s.scaleFactor(),d=[],m=[],y=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:m,foot:y};for(var v=0;v<l.rows.length;v++){var x=l.rows[v],S=(a=(i=x==null?void 0:x.parentElement)===null||i===void 0?void 0:i.tagName)===null||a===void 0?void 0:a.toLowerCase(),C=LI(c,h,t,x,n,r);C&&(S==="thead"?d.push(C):S==="tfoot"?y.push(C):m.push(C))}return{head:d,body:m,foot:y}}function LI(s,e,t,n,r,i){for(var a=new ok(n),l=0;l<n.cells.length;l++){var c=n.cells[l],h=t.getComputedStyle(c);if(r||h.display!=="none"){var d=void 0;i&&(d=EI(s,c,e,h,t)),a.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:PI(c)})}}var m=t.getComputedStyle(n);if(a.length>0&&(r||m.display!=="none"))return a}function PI(s){var e=s.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function NI(s,e,t){for(var n=0,r=[s,e,t];n<r.length;n++){var i=r[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Zu(s,e,t,n,r){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(s),a=1;a<arguments.length;a++){var l=arguments[a];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function TI(s,e){var t=new ng(s),n=t.getDocumentOptions(),r=t.getGlobalOptions();NI(r,n,e);var i=Zu({},r,n,e),a;typeof window<"u"&&(a=window);var l=RI(r,n,e),c=II(r,n,e),h=OI(t,i),d=FI(t,i,a);return{id:e.tableId,content:d,hooks:c,styles:l,settings:h}}function RI(s,e,t){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(c){if(c==="columnStyles"){var h=s[c],d=e[c],m=t[c];n.columnStyles=Zu({},h,d,m)}else{var y=[s,e,t],v=y.map(function(x){return x[c]||{}});n[c]=Zu({},v[0],v[1],v[2])}},i=0,a=Object.keys(n);i<a.length;i++){var l=a[i];r(l)}return n}function II(s,e,t){for(var n=[s,e,t],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,a=n;i<a.length;i++){var l=a[i];l.didParseCell&&r.didParseCell.push(l.didParseCell),l.willDrawCell&&r.willDrawCell.push(l.willDrawCell),l.didDrawCell&&r.didDrawCell.push(l.didDrawCell),l.willDrawPage&&r.willDrawPage.push(l.willDrawPage),l.didDrawPage&&r.didDrawPage.push(l.didDrawPage)}return r}function OI(s,e){var t,n,r,i,a,l,c,h,d,m,y,v,x=Ly(e.margin,40/s.scaleFactor()),S=(t=MI(s,e.startY))!==null&&t!==void 0?t:x.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(r=e.showHead)!==null&&r!==void 0?r:"everyPage";var T=(i=e.useCss)!==null&&i!==void 0?i:!1,M=e.theme||(T?"plain":"striped"),H=!!e.horizontalPageBreak,X=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:T,theme:M,startY:S,margin:x,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(h=e.rowPageBreak)!==null&&h!==void 0?h:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:k,showFoot:C,tableLineWidth:(m=e.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(y=e.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:H,horizontalPageBreakRepeat:X,horizontalPageBreakBehaviour:(v=e.horizontalPageBreakBehaviour)!==null&&v!==void 0?v:"afterAllRows"}}function MI(s,e){var t=s.getLastAutoTable(),n=s.scaleFactor(),r=s.pageNumber(),i=!1;if(t&&t.startPageNumber){var a=t.startPageNumber+t.pageNumber-1;i=a===r}return typeof e=="number"?e:(e==null||e===!1)&&i&&(t==null?void 0:t.finalY)!=null?t.finalY+20/n:null}function FI(s,e,t){var n=e.head||[],r=e.body||[],i=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(t){var l=dk(s,e.html,t,a,e.useCss)||{};n=l.head||n,r=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||DI(n,r,i);return{columns:c,head:n,body:r,foot:i}}function DI(s,e,t){var n=s[0]||e[0]||t[0]||[],r=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var a=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(a=(l==null?void 0:l.colSpan)||1);for(var c=0;c<a;c++){var h=void 0;Array.isArray(n)?h=r.length:h=i+(c>0?"_".concat(c):"");var d={dataKey:h};r.push(d)}}),r}var r_=function(){function s(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()}return s}(),jI=function(s){ak(e,s);function e(t,n,r,i,a,l){var c=s.call(this,t,n,l)||this;return c.cell=r,c.row=i,c.column=a,c.section=i.section,c}return e}(r_),BI=function(){function s(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return s.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},s.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},s.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},s.prototype.callCellHooks=function(e,t,n,r,i,a){for(var l=0,c=t;l<c.length;l++){var h=c[l],d=new jI(e,this,n,r,i,a),m=h(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],m)return!1}return!0},s.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,r=this.hooks.didDrawPage;n<r.length;n++){var i=r[n];i(new r_(e,this,t))}},s.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,r=this.hooks.willDrawPage;n<r.length;n++){var i=r[n];i(new r_(e,this,t))}},s.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(r,i){return r+i.wrappedWidth},0);return t}else{var n=this.settings.margin;return e-n.left-n.right}},s}(),fk=function(){function s(e,t,n,r,i){i===void 0&&(i=!1),this.height=0,this.raw=e,e instanceof ok&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=r,this.spansMultiplePages=i}return s.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(n,r){var i;return Math.max(n,((i=t.cells[r.index])===null||i===void 0?void 0:i.height)||0)},0)},s.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(n){var r=t.cells[n.index];return r?r.rowSpan>1:!1}).length>0},s.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},s.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(r,i){var a=n.cells[i.index];if(!a)return 0;var l=t.getLineHeight(a.styles.fontSize),c=a.padding("vertical"),h=c+l;return h>r?h:r},0)},s}(),pk=function(){function s(e,t,n){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var i=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,i=(r=e.content)!==null&&r!==void 0?r:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=a.split(l)}return s.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");n=this.x+r/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},s.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var n=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/e*t,i=n*r+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},s.prototype.padding=function(e){var t=Ly(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},s}(),zI=function(){function s(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return s.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,r=e.allRows();n<r.length;n++){var i=r[n],a=i.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(t=Math.max(t,a.styles.cellWidth))}return t},s}();function UI(s,e){qI(s,e);var t=[],n=0;e.columns.forEach(function(i){var a=i.getMaxCustomCellWidth(e);a?i.width=a:(i.width=i.wrappedWidth,t.push(i)),n+=i.width});var r=e.getWidth(s.pageSize().width)-n;r&&(r=i_(t,r,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),r&&(r=i_(t,r,function(i){return i.minWidth})),r=Math.abs(r),!e.settings.horizontalPageBreak&&r>.1/s.scaleFactor()&&(r=r<1?r:Math.round(r),console.warn("Of the table content, ".concat(r," units width could not fit page"))),$I(e),WI(e,s),HI(e)}function qI(s,e){var t=s.scaleFactor(),n=e.settings.horizontalPageBreak,r=ck(s,e);e.allRows().forEach(function(i){for(var a=0,l=e.columns;a<l.length;a++){var c=l[a],h=i.cells[c.index];if(h){var d=e.hooks.didParseCell;e.callCellHooks(s,d,h,i,c,null);var m=h.padding("horizontal");h.contentWidth=V2(h.text,h.styles,s)+m;var y=V2(h.text.join(" ").split(/[^\S\u00A0]+/),h.styles,s);if(h.minReadableWidth=y+h.padding("horizontal"),typeof h.styles.cellWidth=="number")h.minWidth=h.styles.cellWidth,h.wrappedWidth=h.styles.cellWidth;else if(h.styles.cellWidth==="wrap"||n===!0)h.contentWidth>r?(h.minWidth=r,h.wrappedWidth=r):(h.minWidth=h.contentWidth,h.wrappedWidth=h.contentWidth);else{var v=10/t;h.minWidth=h.styles.minCellWidth||v,h.wrappedWidth=h.contentWidth,h.minWidth>h.wrappedWidth&&(h.wrappedWidth=h.minWidth)}}}}),e.allRows().forEach(function(i){for(var a=0,l=e.columns;a<l.length;a++){var c=l[a],h=i.cells[c.index];if(h&&h.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,h.wrappedWidth),c.minWidth=Math.max(c.minWidth,h.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,h.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},m=d.cellWidth||d.minCellWidth;m&&typeof m=="number"&&(c.minWidth=m,c.wrappedWidth=m)}h&&(h.colSpan>1&&!c.minWidth&&(c.minWidth=h.minWidth),h.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=h.minWidth))}})}function i_(s,e,t){for(var n=e,r=s.reduce(function(v,x){return v+x.wrappedWidth},0),i=0;i<s.length;i++){var a=s[i],l=a.wrappedWidth/r,c=n*l,h=a.width+c,d=t(a),m=h<d?d:h;e-=m-a.width,a.width=m}if(e=Math.round(e*1e10)/1e10,e){var y=s.filter(function(v){return e<0?v.width>t(v):!0});y.length&&(e=i_(y,e,t))}return e}function HI(s){for(var e={},t=1,n=s.allRows(),r=0;r<n.length;r++)for(var i=n[r],a=0,l=s.columns;a<l.length;a++){var c=l[a],h=e[c.index];if(t>1)t--,delete i.cells[c.index];else if(h)h.cell.height+=i.height,t=h.cell.colSpan,delete i.cells[c.index],h.left--,h.left<=1&&delete e[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var m=n.length-r,y=d.rowSpan>m?m:d.rowSpan;e[c.index]={cell:d,left:y,row:i}}}}}function $I(s){for(var e=s.allRows(),t=0;t<e.length;t++)for(var n=e[t],r=null,i=0,a=0,l=0;l<s.columns.length;l++){var c=s.columns[l];if(a-=1,a>1&&s.columns[l+1])i+=c.width,delete n.cells[c.index];else if(r){var h=r;delete n.cells[c.index],r=null,h.width=c.width+i}else{var h=n.cells[c.index];if(!h)continue;if(a=h.colSpan,i=0,h.colSpan>1){r=h,i+=c.width;continue}h.width=c.width+i}}}function WI(s,e){for(var t={count:0,height:0},n=0,r=s.allRows();n<r.length;n++){for(var i=r[n],a=0,l=s.columns;a<l.length;a++){var c=l[a],h=i.cells[c.index];if(h){e.applyStyles(h.styles,!0);var d=h.width-h.padding("horizontal");if(h.styles.overflow==="linebreak")h.text=e.splitTextToSize(h.text,d+1/e.scaleFactor(),{fontSize:h.styles.fontSize});else if(h.styles.overflow==="ellipsize")h.text=YS(h.text,d,h.styles,e,"...");else if(h.styles.overflow==="hidden")h.text=YS(h.text,d,h.styles,e,"");else if(typeof h.styles.overflow=="function"){var m=h.styles.overflow(h.text,d);typeof m=="string"?h.text=[m]:h.text=m}h.contentHeight=h.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var y=h.contentHeight/h.rowSpan;h.rowSpan>1&&t.count*t.height<y*h.rowSpan?t={height:y,count:h.rowSpan}:t&&t.count>0&&t.height>y&&(y=t.height),y>i.height&&(i.height=y)}}t.count--}}function YS(s,e,t,n,r){return s.map(function(i){return GI(i,e,t,n,r)})}function GI(s,e,t,n,r){var i=1e4*n.scaleFactor();if(e=Math.ceil(e*i)/i,e>=V2(s,t,n))return s;for(;e<V2(s+r,t,n)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+r}function VI(s,e){var t=new ng(s),n=YI(e,t.scaleFactor()),r=new BI(e,n);return UI(t,r),t.applyStyles(t.userStyles),r}function YI(s,e){var t=s.content,n=XI(t.columns);if(t.head.length===0){var r=KS(n,"head");r&&t.head.push(r)}if(t.foot.length===0){var r=KS(n,"foot");r&&t.foot.push(r)}var i=s.settings.theme,a=s.styles;return{columns:n,head:gw("head",t.head,n,a,i,e),body:gw("body",t.body,n,a,i,e),foot:gw("foot",t.foot,n,a,i,e)}}function gw(s,e,t,n,r,i){var a={},l=e.map(function(c,h){for(var d=0,m={},y=0,v=0,x=0,S=t;x<S.length;x++){var C=S[x];if(a[C.index]==null||a[C.index].left===0)if(v===0){var k=void 0;Array.isArray(c)?k=c[C.index-y-d]:k=c[C.dataKey];var T={};typeof k=="object"&&!Array.isArray(k)&&(T=(k==null?void 0:k.styles)||{});var M=JI(s,C,h,r,n,i,T),H=new pk(k,M,s);m[C.dataKey]=H,m[C.index]=H,v=H.colSpan-1,a[C.index]={left:H.rowSpan-1,times:v}}else v--,y++;else a[C.index].left--,v=a[C.index].times,d++}return new fk(c,h,s,m)});return l}function KS(s,e){var t={};return s.forEach(function(n){if(n.raw!=null){var r=KI(e,n.raw);r!=null&&(t[n.dataKey]=r)}}),Object.keys(t).length>0?t:null}function KI(s,e){if(s==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(s==="foot"&&typeof e=="object")return e.footer;return null}function XI(s){return s.map(function(e,t){var n,r;return typeof e=="object"?r=(n=e.dataKey)!==null&&n!==void 0?n:t:r=t,new zI(r,e,t)})}function JI(s,e,t,n,r,i,a){var l=SI(n),c;s==="head"?c=r.headStyles:s==="body"?c=r.bodyStyles:s==="foot"&&(c=r.footStyles);var h=Zu({},l.table,l[s],r.styles,c),d=r.columnStyles[e.dataKey]||r.columnStyles[e.index]||{},m=s==="body"?d:{},y=s==="body"&&t%2===0?Zu({},l.alternateRow,r.alternateRowStyles):{},v=AI(i),x=Zu({},v,h,y,m);return Zu(x,a)}function QI(s,e,t){var n;t===void 0&&(t={});var r=ck(s,e),i=new Map,a=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(y){var v=e.columns.find(function(x){return x.dataKey===y||x.index===y});v&&!i.has(v.index)&&(i.set(v.index,!0),a.push(v.index),l.push(e.columns[v.index]),r-=v.wrappedWidth)});for(var h=!0,d=(n=t==null?void 0:t.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(i.has(d)){d++;continue}var m=e.columns[d].wrappedWidth;if(h||r>=m)h=!1,a.push(d),l.push(e.columns[d]),r-=m;else break;d++}return{colIndexes:a,columns:l,lastIndex:d-1}}function ZI(s,e){for(var t=[],n=0;n<e.columns.length;n++){var r=QI(s,e,{start:n});r.columns.length&&(t.push(r),n=r.lastIndex)}return t}function e8(s,e){var t=e.settings,n=t.startY,r=t.margin,i={x:r.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+r.bottom+a;if(t.pageBreak==="avoid"){var c=e.body,h=c.reduce(function(y,v){return y+v.height},0);l+=h}var d=new ng(s);(t.pageBreak==="always"||t.startY!=null&&l>d.pageSize().height)&&(mk(d),i.y=r.top),e.callWillDrawPageHooks(d,i);var m=Zu({},i);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?t8(d,e,m,i):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(y){return rc(d,e,y,i,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(y,v){var x=v===e.body.length-1;Y2(d,e,y,x,m,i,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(y){return rc(d,e,y,i,e.columns)})),lk(d,e,m,i),e.callEndPageHooks(d,i),e.finalY=i.y,s.lastAutoTable=e,d.applyStyles(d.userStyles)}function t8(s,e,t,n){var r=ZI(s,e),i=e.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(h,d){s.applyStyles(s.userStyles),d>0?f0(s,e,t,n,h.columns,!0):XS(s,e,n,h.columns),n8(s,e,t,n,h.columns),mw(s,e,n,h.columns)});else for(var a=-1,l=r[0],c=function(){var h=a;if(l){s.applyStyles(s.userStyles);var d=l.columns;a>=0?f0(s,e,t,n,d,!0):XS(s,e,n,d),h=JS(s,e,a+1,n,d),mw(s,e,n,d)}var m=h-a;r.slice(1).forEach(function(y){s.applyStyles(s.userStyles),f0(s,e,t,n,y.columns,!0),JS(s,e,a+1,n,y.columns,m),mw(s,e,n,y.columns)}),a=h};a<e.body.length-1;)c()}function XS(s,e,t,n){var r=e.settings;s.applyStyles(s.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(i){return rc(s,e,i,t,n)})}function n8(s,e,t,n,r){s.applyStyles(s.userStyles),e.body.forEach(function(i,a){var l=a===e.body.length-1;Y2(s,e,i,l,t,n,r)})}function JS(s,e,t,n,r,i){s.applyStyles(s.userStyles),i=i??e.body.length;var a=Math.min(t+i,e.body.length),l=-1;return e.body.slice(t,a).forEach(function(c,h){var d=t+h===e.body.length-1,m=gk(s,e,d,n);c.canEntireRowFit(m,r)&&(rc(s,e,c,n,r),l=t+h)}),l}function mw(s,e,t,n){var r=e.settings;s.applyStyles(s.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(i){return rc(s,e,i,t,n)})}function r8(s,e,t){var n=t.getLineHeight(s.styles.fontSize),r=s.padding("vertical"),i=Math.floor((e-r)/n);return Math.max(0,i)}function i8(s,e,t,n){var r={};s.spansMultiplePages=!0,s.height=0;for(var i=0,a=0,l=t.columns;a<l.length;a++){var c=l[a],h=s.cells[c.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var d=new pk(h.raw,h.styles,h.section);d=Zu(d,h),d.text=[];var m=r8(h,e,n);h.text.length>m&&(d.text=h.text.splice(m,h.text.length));var y=n.scaleFactor(),v=n.getLineHeightFactor();h.contentHeight=h.getContentHeight(y,v),h.contentHeight>=e&&(h.contentHeight=e,d.styles.minCellHeight-=e),h.contentHeight>s.height&&(s.height=h.contentHeight),d.contentHeight=d.getContentHeight(y,v),d.contentHeight>i&&(i=d.contentHeight),r[c.index]=d}}var x=new fk(s.raw,-1,s.section,r,!0);x.height=i;for(var S=0,C=t.columns;S<C.length;S++){var c=C[S],d=x.cells[c.index];d&&(d.height=x.height);var h=s.cells[c.index];h&&(h.height=s.height)}return x}function s8(s,e,t,n){var r=s.pageSize().height,i=n.settings.margin,a=i.top+i.bottom,l=r-a;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,s),h=c<t;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!h)return!1;var d=e.hasRowSpan(n.columns),m=e.getMaxCellHeight(n.columns)>l;return m?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Y2(s,e,t,n,r,i,a){var l=gk(s,e,n,i);if(t.canEntireRowFit(l,a))rc(s,e,t,i,a);else if(s8(s,t,l,e)){var c=i8(t,l,e,s);rc(s,e,t,i,a),f0(s,e,r,i,a),Y2(s,e,c,n,r,i,a)}else f0(s,e,r,i,a),Y2(s,e,t,n,r,i,a)}function rc(s,e,t,n,r){n.x=e.settings.margin.left;for(var i=0,a=r;i<a.length;i++){var l=a[i],c=t.cells[l.index];if(!c){n.x+=l.width;continue}s.applyStyles(c.styles),c.x=n.x,c.y=n.y;var h=e.callCellHooks(s,e.hooks.willDrawCell,c,t,l,n);if(h===!1){n.x+=l.width;continue}a8(s,c,n);var d=c.getTextPos();sk(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},s.getDocument()),e.callCellHooks(s,e.hooks.didDrawCell,c,t,l,n),n.x+=l.width}n.y+=t.height}function a8(s,e,t){var n=e.styles;if(s.getDocument().setFillColor(s.getDocument().getFillColor()),typeof n.lineWidth=="number"){var r=uk(n.lineWidth,n.fillColor);r&&s.rect(e.x,t.y,e.width,e.height,r)}else typeof n.lineWidth=="object"&&(n.fillColor&&s.rect(e.x,t.y,e.width,e.height,"F"),o8(s,e,t,n.lineWidth))}function o8(s,e,t,n){var r,i,a,l;n.top&&(r=t.x,i=t.y,a=t.x+e.width,l=t.y,n.right&&(a+=.5*n.right),n.left&&(r-=.5*n.left),c(n.top,r,i,a,l)),n.bottom&&(r=t.x,i=t.y+e.height,a=t.x+e.width,l=t.y+e.height,n.right&&(a+=.5*n.right),n.left&&(r-=.5*n.left),c(n.bottom,r,i,a,l)),n.left&&(r=t.x,i=t.y,a=t.x,l=t.y+e.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,r,i,a,l)),n.right&&(r=t.x+e.width,i=t.y,a=t.x+e.width,l=t.y+e.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,r,i,a,l));function c(h,d,m,y,v){s.getDocument().setLineWidth(h),s.getDocument().line(d,m,y,v,"S")}}function gk(s,e,t,n){var r=e.settings.margin.bottom,i=e.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&t)&&(r+=e.getFootHeight(e.columns)),s.pageSize().height-n.y-r}function f0(s,e,t,n,r,i){r===void 0&&(r=[]),i===void 0&&(i=!1),s.applyStyles(s.userStyles),e.settings.showFoot==="everyPage"&&!i&&e.foot.forEach(function(l){return rc(s,e,l,n,r)}),e.callEndPageHooks(s,n);var a=e.settings.margin;lk(s,e,t,n),mk(s),e.pageNumber++,n.x=a.left,n.y=a.top,t.y=a.top,e.callWillDrawPageHooks(s,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return rc(s,e,l,n,r)}),s.applyStyles(s.userStyles))}function mk(s){var e=s.pageNumber();s.setPage(e+1);var t=s.pageNumber();return t===e?(s.addPage(),!0):!1}function l8(s){s.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=TI(this,n),i=VI(this,r);return e8(this,i),this},s.API.lastAutoTable=!1,s.API.autoTableText=function(e,t,n,r){sk(e,t,n,r,this)},s.API.autoTableSetDefaults=function(e){return ng.setDefaults(e,this),this},s.autoTableSetDefaults=function(e,t){ng.setDefaults(e,t)},s.API.autoTableHtmlToJson=function(e,t){var n;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new ng(this),i=dk(r,e,window,t,!1),a=i.head,l=i.body,c=((n=a[0])===null||n===void 0?void 0:n.map(function(h){return h.content}))||[];return{columns:c,rows:l,data:l}}}var vw;try{if(typeof window<"u"&&window){var QS=window,ZS=QS.jsPDF||((vw=QS.jspdf)===null||vw===void 0?void 0:vw.jsPDF);ZS&&l8(ZS)}}catch(s){console.error("Could not apply autoTable plugin",s)}const u8=({questions:s,selectedAnswers:e,score:t,time:n})=>{const r=()=>{const i=new Pt;if(i.setFontSize(20),i.setTextColor(44,62,80),i.text("PrepAI Quiz Results",105,15,{align:"center"}),i.setFontSize(12),i.setTextColor(52,73,94),i.text(`Date: ${new Date().toLocaleDateString()}`,20,30),i.text(`Total Questions: ${s.length}`,20,38),t!==null){i.text(`Score: ${t}/${s.length}`,20,46),i.text(`Time Taken: ${n}`,20,54);const l=Object.keys(e).length;i.text(`Questions Attempted: ${l}/${s.length}`,20,62)}i.setFontSize(14),i.setTextColor(44,62,80),i.text("Questions & Answers",105,75,{align:"center"});let a=85;s.forEach((l,c)=>{a>270&&(i.addPage(),a=20),i.setFontSize(12),i.setTextColor(52,73,94);const h=i.splitTextToSize(`${c+1}. ${l.question}`,170);i.setFont("helvetica","bold"),i.text(h,20,a),a+=h.length*7+3,l.answers.forEach((d,m)=>{a>270&&(i.addPage(),a=20);const y=d===l.correct_answer,v=e[`question${c}`]===d;y?i.setTextColor(39,174,96):v?i.setTextColor(231,76,60):i.setTextColor(52,73,94);let x=".";x=v?".":x;const S=i.splitTextToSize(`${x}${String.fromCharCode(97+m)}. ${d}`,160);i.setCharSpace(0),i.setFont("helvetica","normal"),i.text(S,30,a),a+=S.length*7+1}),a+=5}),i.save("prepai-quiz-results.pdf")};return Q.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg transition-all shadow-lg hover:shadow-purple-500/20",children:[Q.jsx(pN,{className:"h-4 w-4"}),"Export as PDF"]})};wR.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${_R}/pdf.worker.min.js`;const c8=s=>{if(s.includes("```json")){const e=s.match(/```json\n?([\s\S]*?)\n?```/);if(e&&e[1])return e[1].trim()}return s.startsWith("```")&&s.endsWith("```")?s.slice(3,-3).trim():s.trim()},h8=()=>{const[s,e]=He.useState([]),[t,n]=He.useState(null),[r,i]=He.useState("00:00"),[a,l]=He.useState({}),[c,h]=He.useState(""),[d,m]=He.useState(10),[y,v]=He.useState("Mixed"),[x,S]=He.useState(!1),[C,k]=He.useState("idle"),[T,M]=He.useState(""),[H,X]=He.useState("file"),[he,ne]=He.useState(null),[Z,fe]=He.useState(!1),[Se,q]=He.useState(""),[V,ue]=He.useState("");He.useRef(null);const re=He.useRef(null),Ee=He.useRef(0),ce=He.useRef(null),me=()=>{re.current&&window.clearInterval(re.current),Ee.current=0,re.current=window.setInterval(()=>{Ee.current+=1;const De=Math.floor(Ee.current/60),Be=Ee.current%60;i(`${String(De).padStart(2,"0")}:${String(Be).padStart(2,"0")}`)},1e3)};He.useEffect(()=>()=>{re.current&&window.clearInterval(re.current)},[]);const ae=De=>{try{const Be=JSON.parse(De);e(Be.questions),n(null),l({}),me(),k("idle")}catch{alert("Invalid JSON format. Please check your input."),k("idle")}},te=(De,Be)=>{l(rt=>({...rt,[`question${De}`]:Be}))},J=()=>{re.current&&window.clearInterval(re.current);let De=0;s.forEach((Be,rt)=>{a[`question${rt}`]===s[rt].correct_answer&&De++}),n(De)},G=async()=>{try{const De=await navigator.clipboard.readText();H==="json"?ue(De):h(De)}catch{alert("Failed to read clipboard. Please paste manually.")}},N=()=>{e([]),n(null),l({}),h(""),ue(""),M(""),ne(null),k("idle"),ce.current&&(ce.current.value=""),re.current&&window.clearInterval(re.current),i("00:00")},j=()=>{window.open("https://aistudio.google.com/app","_blank")},Y=async De=>{M("Processing image...");const Be=await w6.createWorker();try{const rt=URL.createObjectURL(De);await Be.loadLanguage("eng"),await Be.initialize("eng");const{data:{text:Te}}=await Be.recognize(rt);return await Be.terminate(),URL.revokeObjectURL(rt),Te}catch(rt){throw console.error("Error extracting text from image:",rt),new Error("Failed to extract text from image")}},se=async De=>{M("Processing PDF...");try{const Be=await De.arrayBuffer(),rt=await bR({data:Be}).promise;let Te="";for(let ee=1;ee<=rt.numPages;ee++){const ze=(await(await rt.getPage(ee)).getTextContent()).items.map(We=>We.str).join(" ");Te+=ze+`
`}return Te}catch(Be){throw console.error("Error extracting text from PDF:",Be),new Error("Failed to extract text from PDF")}},oe=async De=>{var rt;const Be=(rt=De.target.files)==null?void 0:rt[0];if(Be)try{let Te="";if(Be.type==="text/plain")Te=await Be.text();else if(Be.type.startsWith("image/"))Te=await Y(Be);else if(Be.type==="application/pdf")Te=await se(Be);else{alert("Unsupported file type. Please upload a text file, image, or PDF.");return}h(Te),M("Text extracted successfully!")}catch(Te){console.error("Error processing file:",Te),M("Error processing file. Please try again.")}},de=()=>{if(!V){alert("Please paste JSON content first!");return}k("analyzing"),setTimeout(()=>{ae(V)},1e3)},be=async()=>{if(!c){alert("Please paste or upload content first!");return}S(!0),k("analyzing");try{const Be=new JN(Se||"AIzaSyB5f7IXBzgiNXdocPDw9mF3RsMx7g6Y_NU").getGenerativeModel({model:"gemini-1.5-flash"});setTimeout(()=>{k("generating")},2e3);const rt=`generate ${d} multiple choice questions from the following content.

difficulty level - ${y}

requirements:
- generate exactly ${d} questions
- don't generate duplicate questions
- only use information from the provided content
- each question must have exactly 4 answer options
- ensure one and only one correct answer per question
- output must be valid JSON format

question types to include:
- "what", "how", "why" questions
- fill in the blank questions
- which statement is correct/incorrect
- definition based questions

output format:
{
  "questions": [
    {
      "question": "What is photosynthesis?",
      "answers": [
        "Process of breathing",
        "Process of making food in plants",
        "Process of digestion",
        "Process of excretion"
      ],
      "correct_answer": "Process of making food in plants"
    }
  ]
}


content:
${c}`;console.log("Sending request to Gemini API...");const ee=(await Be.generateContent(rt)).response.text();console.log("Received raw response:",ee);const Ke=c8(ee);console.log("Cleaned response:",Ke);try{JSON.parse(Ke)}catch{throw console.error("Invalid JSON response:",Ke),new Error("Invalid JSON response from AI")}ne({prompt:rt,response:Ke,timestamp:new Date().toLocaleString()}),ae(Ke)}catch(De){const Be=De instanceof Error?De.message:"Unknown error";console.error("Detailed error:",De),alert(`Failed to generate questions: ${Be}`),k("idle")}finally{S(!1)}},Ae=({type:De,label:Be,icon:rt})=>Q.jsxs("button",{onClick:()=>X(De),className:`flex-1 flex items-center justify-center gap-1 text-xs sm:text-sm py-2 px-2 sm:px-4 transition-all border-b-2 ${H===De?"text-blue-400 border-blue-400":"text-gray-400 border-transparent hover:text-gray-300 hover:border-gray-600"}`,children:[Q.jsx(rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),Be]}),qe=()=>C==="idle"?null:Q.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:Q.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl shadow-xl flex flex-col items-center gap-4",children:[C==="analyzing"&&Q.jsxs(Q.Fragment,{children:[Q.jsx(_N,{className:"h-12 w-12 text-blue-400 animate-pulse"}),Q.jsx("p",{className:"text-lg text-gray-200",children:"Analyzing content..."})]}),C==="generating"&&Q.jsxs(Q.Fragment,{children:[Q.jsx(xN,{className:"h-12 w-12 text-purple-400 animate-pulse"}),Q.jsx("p",{className:"text-lg text-gray-200",children:"Generating questions..."})]})]})}),$e=Object.keys(a).length;return Q.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-gray-100 p-4 md:p-8",children:[Q.jsxs("div",{className:"max-w-4xl mx-auto",children:[Q.jsx(xR,{}),Q.jsxs("div",{className:"space-y-6",children:[Q.jsx(AR,{onReset:N,onOpenAiStudio:j}),Q.jsx(SR,{apiKey:Se,onChange:q}),Q.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700",children:[Q.jsxs("div",{className:"flex border-b border-gray-700",children:[Q.jsx(Ae,{type:"file",label:"Upload File",icon:PA}),Q.jsx(Ae,{type:"text",label:"Paste Text",icon:AN}),Q.jsx(Ae,{type:"json",label:"Paste JSON",icon:CA})]}),Q.jsxs("div",{className:"p-4 md:p-6 space-y-4",children:[H==="file"&&Q.jsx("div",{className:"flex items-center gap-4",children:Q.jsxs("label",{className:"flex-1",children:[Q.jsxs("div",{className:"flex items-center gap-2 bg-gray-700/50 p-3 rounded-lg cursor-pointer hover:bg-gray-700/70 transition-all",children:[Q.jsx(PA,{className:"h-5 w-5 text-blue-400"}),Q.jsx("span",{className:"text-sm text-gray-300",children:"Upload File (Text, Image, or PDF)"})]}),Q.jsx("input",{type:"file",ref:ce,onChange:oe,accept:".txt,.pdf,image/*",className:"hidden"})]})}),H==="text"&&Q.jsxs("div",{className:"space-y-2",children:[Q.jsx("div",{className:"flex items-center gap-2",children:Q.jsxs("button",{onClick:G,className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg transition-all text-sm",children:[Q.jsx(kA,{className:"h-4 w-4"}),"Paste from Clipboard"]})}),Q.jsx("textarea",{value:c,onChange:De=>h(De.target.value),placeholder:"Enter or paste your text here...",className:"w-full h-32 bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500"})]}),H==="json"&&Q.jsxs("div",{className:"space-y-2",children:[Q.jsx("div",{className:"flex items-center gap-2",children:Q.jsxs("button",{onClick:G,className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg transition-all text-sm",children:[Q.jsx(kA,{className:"h-4 w-4"}),"Paste from Clipboard"]})}),Q.jsx("textarea",{value:V,onChange:De=>ue(De.target.value),placeholder:'Paste JSON in format: {"questions": }',className:"w-full h-32 bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500 font-mono"})]}),T&&Q.jsxs("div",{className:"text-sm text-blue-400 flex items-center gap-2",children:[Q.jsx(y0,{className:"h-4 w-4 animate-spin"}),T]}),H!=="json"&&Q.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Q.jsxs("div",{children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Questions"}),Q.jsx("select",{value:d,onChange:De=>m(Number(De.target.value)),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500",children:[5,10,20,30].map(De=>Q.jsxs("option",{value:De,children:[De," Questions"]},De))})]}),Q.jsxs("div",{children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty Level"}),Q.jsx("select",{value:y,onChange:De=>v(De.target.value),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500",children:["Mixed","Easy","Medium","Hard"].map(De=>Q.jsx("option",{value:De,children:De},De))})]}),Q.jsx("div",{className:"flex items-end",children:Q.jsxs("button",{onClick:be,disabled:x||!c,className:"w-full flex items-center justify-center gap-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all",children:[x?Q.jsx(y0,{className:"h-4 w-4 animate-spin"}):Q.jsx(my,{className:"h-4 w-4"}),"Generate Questions"]})})]}),H==="json"&&Q.jsxs("button",{onClick:de,disabled:!V,className:"w-full flex items-center justify-center gap-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all",children:[Q.jsx(CA,{className:"h-4 w-4"}),"Generate Quiz from JSON"]})]})]}),s.length>0&&Q.jsxs("div",{className:"space-y-8",children:[Q.jsx("div",{className:"space-y-6",children:s.map((De,Be)=>{const rt=a[`question${Be}`]!==void 0;return Q.jsxs("div",{className:`bg-gray-800/50 p-4 md:p-6 rounded-lg shadow-lg hover:shadow-xl transition-all border ${rt&&t===null?"border-gray-200/50":"border-gray-700/50"}`,children:[Q.jsxs("p",{className:"text-base md:text-lg font-semibold mb-4 text-gray-100",children:[Be+1,". ",De.question]}),Q.jsx("div",{className:"space-y-2 md:space-y-3",children:De.answers.map((Te,ee)=>{const Ke=a[`question${Be}`]===Te,Ze=t!==null&&Te===De.correct_answer,ze=t!==null&&Ke&&!Ze;return Q.jsxs("label",{className:`flex items-center space-x-3 p-2 md:p-3 rounded-lg cursor-pointer transition-all text-sm md:text-base
                                ${Ke&&t===null?"bg-blue-500/10 border border-blue-500/50":""}
                                ${Ke&&t!==null?"bg-blue-500/10 border border-blue-500/50":"hover:bg-gray-700/30"}
                                ${Ze?"bg-green-500/10 border-green-500/50":""}
                                ${ze?"bg-red-500/10 border-red-500/50":""}`,children:[Q.jsx("input",{type:"radio",name:`question${Be}`,value:Te,checked:Ke,onChange:()=>te(Be,Te),className:"form-radio h-4 w-4 text-blue-500",disabled:t!==null}),Q.jsx("span",{className:`flex-1 ${Ze?"text-green-400":ze?"text-red-400":Ke?"text-white-400":"text-gray-300"}`,children:Te}),t!==null&&(Ze?Q.jsx(hN,{className:"h-4 w-4 text-green-400 flex-shrink-0"}):ze?Q.jsx(EN,{className:"h-4 w-4 text-red-400 flex-shrink-0"}):null)]},ee)})}),t!==null&&Q.jsx("div",{className:"mt-3 text-sm md:text-base",children:Q.jsxs("p",{className:"text-green-400",children:["Ans:- ",De.correct_answer]})})]},Be)})}),Q.jsxs("div",{className:"flex justify-between items-center",children:[Q.jsxs("div",{className:"flex gap-2",children:[Q.jsxs("button",{onClick:J,className:"flex items-center gap-1 md:gap-2 bg-green-500 hover:bg-green-600 text-white px-4 md:px-6 py-2 md:py-3 rounded-lg transition-all shadow-lg hover:shadow-green-500/20 text-sm md:text-base",disabled:t!==null,children:[Q.jsx(dN,{className:"h-4 w-4 md:h-5 md:w-5"}),"Submit Answers"]}),s.length>0&&Q.jsx(u8,{questions:s,selectedAnswers:a,score:t,time:r})]}),Q.jsx("div",{className:"fixed bottom-4 md:bottom-6 right-4 md:right-6 bg-gray-800/90 backdrop-blur-sm text-white px-4 md:px-6 py-2 md:py-3 rounded-lg shadow-lg border border-gray-700/50",children:Q.jsx("p",{className:"text-base md:text-xl font-mono text-blue-400",children:r})})]}),t!==null&&Q.jsx(ER,{score:t,totalQuestions:s.length,attemptedQuestions:$e,time:r})]})]})]}),Q.jsx(qe,{})]})},d8=({onToggleForm:s})=>{const[e,t]=He.useState(""),[n,r]=He.useState(""),[i,a]=He.useState(!1),[l,c]=He.useState(null),{signIn:h}=Z1(),d=J1(),m=async y=>{y.preventDefault(),a(!0),c(null);try{const{error:v}=await h(e,n);if(v)throw v;d("/tool")}catch(v){c(v.message||"Failed to sign in")}finally{a(!1)}};return Q.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full",children:[Q.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-white",children:"Log In"}),l&&Q.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-400 p-3 rounded-lg mb-4 text-sm",children:l}),Q.jsxs("form",{onSubmit:m,className:"space-y-4",children:[Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),Q.jsx("input",{id:"email",type:"email",value:e,onChange:y=>t(y.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"your@email.com"})]}),Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),Q.jsx("input",{id:"password",type:"password",value:n,onChange:y=>r(y.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),Q.jsxs("button",{type:"submit",disabled:i,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[i?Q.jsx(y0,{className:"h-4 w-4 animate-spin"}):Q.jsx(Pw,{className:"h-4 w-4"}),"Log In"]})]}),Q.jsxs("div",{className:"mt-4 text-center text-sm text-gray-400",children:["Don't have an account?"," ",Q.jsx("button",{onClick:s,className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Sign Up"})]})]})},f8=({onToggleForm:s})=>{const[e,t]=He.useState(""),[n,r]=He.useState(""),[i,a]=He.useState(""),[l,c]=He.useState(!1),[h,d]=He.useState(null),[m,y]=He.useState(null),{signUp:v}=Z1(),x=async S=>{if(S.preventDefault(),c(!0),d(null),y(null),n!==i){d("Passwords do not match"),c(!1);return}try{const{error:C}=await v(e,n);if(C)throw C;y("Registration successful! Please check your email for verification.")}catch(C){d(C.message||"Failed to sign up")}finally{c(!1)}};return Q.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full",children:[Q.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-white",children:"Sign Up"}),h&&Q.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-400 p-3 rounded-lg mb-4 text-sm",children:h}),m&&Q.jsx("div",{className:"bg-green-500/10 border border-green-500/50 text-green-400 p-3 rounded-lg mb-4 text-sm",children:m}),Q.jsxs("form",{onSubmit:x,className:"space-y-4",children:[Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),Q.jsx("input",{id:"email",type:"email",value:e,onChange:S=>t(S.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"your@email.com"})]}),Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),Q.jsx("input",{id:"password",type:"password",value:n,onChange:S=>r(S.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm Password"}),Q.jsx("input",{id:"confirmPassword",type:"password",value:i,onChange:S=>a(S.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),Q.jsxs("button",{type:"submit",disabled:l,className:"w-full bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[l?Q.jsx(y0,{className:"h-4 w-4 animate-spin"}):Q.jsx(SN,{className:"h-4 w-4"}),"Sign Up"]})]}),Q.jsxs("div",{className:"mt-4 text-center text-sm text-gray-400",children:["Already have an account?"," ",Q.jsx("button",{onClick:s,className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Log In"})]})]})},p8=()=>{const[s,e]=He.useState(!0);return Q.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 flex flex-col items-center justify-center p-4",children:[Q.jsxs("div",{className:"mb-8 text-center",children:[Q.jsx("div",{className:"bg-blue-500/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:Q.jsx(my,{className:"h-8 w-8 text-blue-400"})}),Q.jsx("h1",{className:"text-2xl font-bold mb-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PrepAI Tool"}),Q.jsx("p",{className:"text-sm text-gray-400",children:"Sign in to access AI-powered practice questions"})]}),s?Q.jsx(d8,{onToggleForm:()=>e(!1)}):Q.jsx(f8,{onToggleForm:()=>e(!0)})]})};function g8(){const[s,e]=He.useState(!1);return Q.jsx(oN,{children:Q.jsx(aL,{basename:"/prepai",children:Q.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[Q.jsx(CN,{}),Q.jsxs(ZC,{children:[Q.jsx($m,{path:"/",element:Q.jsx(NN,{})}),Q.jsx($m,{path:"/auth",element:Q.jsx(p8,{})}),Q.jsx($m,{path:"/tool",element:Q.jsx(kN,{children:Q.jsx(h8,{})})}),Q.jsx($m,{path:"*",element:Q.jsx(f3,{to:"/",replace:!0})})]})]})})})}lC.createRoot(document.getElementById("root")).render(Q.jsx(t3.StrictMode,{children:Q.jsx(g8,{})}));export{Ln as _,v8 as c,s_ as g};
