var XC=Object.defineProperty;var PA=l=>{throw TypeError(l)};var YC=(l,e,t)=>e in l?XC(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var ke=(l,e,t)=>YC(l,typeof e!="symbol"?e+"":e,t),Ky=(l,e,t)=>e.has(l)||PA("Cannot "+t);var u=(l,e,t)=>(Ky(l,e,"read from private field"),t?t.call(l):e.get(l)),E=(l,e,t)=>e.has(l)?PA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,t),b=(l,e,t,n)=>(Ky(l,e,"write to private field"),n?n.call(l,t):e.set(l,t),t),k=(l,e,t)=>(Ky(l,e,"access private method"),t);var Cn=(l,e,t,n)=>({set _(i){b(l,e,i,t)},get _(){return u(l,e,n)}});function JC(l,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in l)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(l,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function hw(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function QC(l){if(l.__esModule)return l;var e=l.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(l).forEach(function(n){var i=Object.getOwnPropertyDescriptor(l,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return l[n]}})}),t}var Xy={exports:{}},eh={},Yy={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function ZC(){if(RA)return Ue;RA=1;var l=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function v(R){return R===null||typeof R!="object"?null:(R=m&&R[m]||R["@@iterator"],typeof R=="function"?R:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,S={};function C(R,U,W){this.props=R,this.context=U,this.refs=S,this.updater=W||_}C.prototype.isReactComponent={},C.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},C.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function T(){}T.prototype=C.prototype;function I(R,U,W){this.props=R,this.context=U,this.refs=S,this.updater=W||_}var O=I.prototype=new T;O.constructor=I,A(O,C.prototype),O.isPureReactComponent=!0;var N=Array.isArray,j=Object.prototype.hasOwnProperty,G={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function Z(R,U,W){var ne,_e={},le=null,ae=null;if(U!=null)for(ne in U.ref!==void 0&&(ae=U.ref),U.key!==void 0&&(le=""+U.key),U)j.call(U,ne)&&!V.hasOwnProperty(ne)&&(_e[ne]=U[ne]);var be=arguments.length-2;if(be===1)_e.children=W;else if(1<be){for(var He=Array(be),lt=0;lt<be;lt++)He[lt]=arguments[lt+2];_e.children=He}if(R&&R.defaultProps)for(ne in be=R.defaultProps,be)_e[ne]===void 0&&(_e[ne]=be[ne]);return{$$typeof:l,type:R,key:le,ref:ae,props:_e,_owner:G.current}}function ie(R,U){return{$$typeof:l,type:R.type,key:U,ref:R.ref,props:R.props,_owner:R._owner}}function we(R){return typeof R=="object"&&R!==null&&R.$$typeof===l}function ce(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(W){return U[W]})}var Le=/\/+/g;function Ie(R,U){return typeof R=="object"&&R!==null&&R.key!=null?ce(""+R.key):U.toString(36)}function Ae(R,U,W,ne,_e){var le=typeof R;(le==="undefined"||le==="boolean")&&(R=null);var ae=!1;if(R===null)ae=!0;else switch(le){case"string":case"number":ae=!0;break;case"object":switch(R.$$typeof){case l:case e:ae=!0}}if(ae)return ae=R,_e=_e(ae),R=ne===""?"."+Ie(ae,0):ne,N(_e)?(W="",R!=null&&(W=R.replace(Le,"$&/")+"/"),Ae(_e,U,W,"",function(lt){return lt})):_e!=null&&(we(_e)&&(_e=ie(_e,W+(!_e.key||ae&&ae.key===_e.key?"":(""+_e.key).replace(Le,"$&/")+"/")+R)),U.push(_e)),1;if(ae=0,ne=ne===""?".":ne+":",N(R))for(var be=0;be<R.length;be++){le=R[be];var He=ne+Ie(le,be);ae+=Ae(le,U,W,He,_e)}else if(He=v(R),typeof He=="function")for(R=He.call(R),be=0;!(le=R.next()).done;)le=le.value,He=ne+Ie(le,be++),ae+=Ae(le,U,W,He,_e);else if(le==="object")throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return ae}function Ne(R,U,W){if(R==null)return R;var ne=[],_e=0;return Ae(R,ne,"","",function(le){return U.call(W,le,_e++)}),ne}function Q(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(W){(R._status===0||R._status===-1)&&(R._status=1,R._result=W)},function(W){(R._status===0||R._status===-1)&&(R._status=2,R._result=W)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var te={current:null},K={transition:null},z={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:K,ReactCurrentOwner:G};function F(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:Ne,forEach:function(R,U,W){Ne(R,function(){U.apply(this,arguments)},W)},count:function(R){var U=0;return Ne(R,function(){U++}),U},toArray:function(R){return Ne(R,function(U){return U})||[]},only:function(R){if(!we(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ue.Component=C,Ue.Fragment=t,Ue.Profiler=i,Ue.PureComponent=I,Ue.StrictMode=n,Ue.Suspense=d,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,Ue.act=F,Ue.cloneElement=function(R,U,W){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ne=A({},R.props),_e=R.key,le=R.ref,ae=R._owner;if(U!=null){if(U.ref!==void 0&&(le=U.ref,ae=G.current),U.key!==void 0&&(_e=""+U.key),R.type&&R.type.defaultProps)var be=R.type.defaultProps;for(He in U)j.call(U,He)&&!V.hasOwnProperty(He)&&(ne[He]=U[He]===void 0&&be!==void 0?be[He]:U[He])}var He=arguments.length-2;if(He===1)ne.children=W;else if(1<He){be=Array(He);for(var lt=0;lt<He;lt++)be[lt]=arguments[lt+2];ne.children=be}return{$$typeof:l,type:R.type,key:_e,ref:le,props:ne,_owner:ae}},Ue.createContext=function(R){return R={$$typeof:o,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:a,_context:R},R.Consumer=R},Ue.createElement=Z,Ue.createFactory=function(R){var U=Z.bind(null,R);return U.type=R,U},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(R){return{$$typeof:c,render:R}},Ue.isValidElement=we,Ue.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:Q}},Ue.memo=function(R,U){return{$$typeof:f,type:R,compare:U===void 0?null:U}},Ue.startTransition=function(R){var U=K.transition;K.transition={};try{R()}finally{K.transition=U}},Ue.unstable_act=F,Ue.useCallback=function(R,U){return te.current.useCallback(R,U)},Ue.useContext=function(R){return te.current.useContext(R)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(R){return te.current.useDeferredValue(R)},Ue.useEffect=function(R,U){return te.current.useEffect(R,U)},Ue.useId=function(){return te.current.useId()},Ue.useImperativeHandle=function(R,U,W){return te.current.useImperativeHandle(R,U,W)},Ue.useInsertionEffect=function(R,U){return te.current.useInsertionEffect(R,U)},Ue.useLayoutEffect=function(R,U){return te.current.useLayoutEffect(R,U)},Ue.useMemo=function(R,U){return te.current.useMemo(R,U)},Ue.useReducer=function(R,U,W){return te.current.useReducer(R,U,W)},Ue.useRef=function(R){return te.current.useRef(R)},Ue.useState=function(R){return te.current.useState(R)},Ue.useSyncExternalStore=function(R,U,W){return te.current.useSyncExternalStore(R,U,W)},Ue.useTransition=function(){return te.current.useTransition()},Ue.version="18.3.1",Ue}var LA;function dw(){return LA||(LA=1,Yy.exports=ZC()),Yy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IA;function eT(){if(IA)return eh;IA=1;var l=dw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,f){var g,m={},v=null,_=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(_=d.ref);for(g in d)n.call(d,g)&&!a.hasOwnProperty(g)&&(m[g]=d[g]);if(c&&c.defaultProps)for(g in d=c.defaultProps,d)m[g]===void 0&&(m[g]=d[g]);return{$$typeof:e,type:c,key:v,ref:_,props:m,_owner:i.current}}return eh.Fragment=t,eh.jsx=o,eh.jsxs=o,eh}var NA;function tT(){return NA||(NA=1,Xy.exports=eT()),Xy.exports}var P=tT(),q=dw();const mx=hw(q),nT=JC({__proto__:null,default:mx},[q]);var Rp={},Jy={exports:{}},Bn={},Qy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function sT(){return MA||(MA=1,function(l){function e(K,z){var F=K.length;K.push(z);e:for(;0<F;){var R=F-1>>>1,U=K[R];if(0<i(U,z))K[R]=z,K[F]=U,F=R;else break e}}function t(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var z=K[0],F=K.pop();if(F!==z){K[0]=F;e:for(var R=0,U=K.length,W=U>>>1;R<W;){var ne=2*(R+1)-1,_e=K[ne],le=ne+1,ae=K[le];if(0>i(_e,F))le<U&&0>i(ae,_e)?(K[R]=ae,K[le]=F,R=le):(K[R]=_e,K[ne]=F,R=ne);else if(le<U&&0>i(ae,F))K[R]=ae,K[le]=F,R=le;else break e}}return z}function i(K,z){var F=K.sortIndex-z.sortIndex;return F!==0?F:K.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;l.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();l.unstable_now=function(){return o.now()-c}}var d=[],f=[],g=1,m=null,v=3,_=!1,A=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(K){for(var z=t(f);z!==null;){if(z.callback===null)n(f);else if(z.startTime<=K)n(f),z.sortIndex=z.expirationTime,e(d,z);else break;z=t(f)}}function N(K){if(S=!1,O(K),!A)if(t(d)!==null)A=!0,Q(j);else{var z=t(f);z!==null&&te(N,z.startTime-K)}}function j(K,z){A=!1,S&&(S=!1,T(Z),Z=-1),_=!0;var F=v;try{for(O(z),m=t(d);m!==null&&(!(m.expirationTime>z)||K&&!ce());){var R=m.callback;if(typeof R=="function"){m.callback=null,v=m.priorityLevel;var U=R(m.expirationTime<=z);z=l.unstable_now(),typeof U=="function"?m.callback=U:m===t(d)&&n(d),O(z)}else n(d);m=t(d)}if(m!==null)var W=!0;else{var ne=t(f);ne!==null&&te(N,ne.startTime-z),W=!1}return W}finally{m=null,v=F,_=!1}}var G=!1,V=null,Z=-1,ie=5,we=-1;function ce(){return!(l.unstable_now()-we<ie)}function Le(){if(V!==null){var K=l.unstable_now();we=K;var z=!0;try{z=V(!0,K)}finally{z?Ie():(G=!1,V=null)}}else G=!1}var Ie;if(typeof I=="function")Ie=function(){I(Le)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ne=Ae.port2;Ae.port1.onmessage=Le,Ie=function(){Ne.postMessage(null)}}else Ie=function(){C(Le,0)};function Q(K){V=K,G||(G=!0,Ie())}function te(K,z){Z=C(function(){K(l.unstable_now())},z)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(K){K.callback=null},l.unstable_continueExecution=function(){A||_||(A=!0,Q(j))},l.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<K?Math.floor(1e3/K):5},l.unstable_getCurrentPriorityLevel=function(){return v},l.unstable_getFirstCallbackNode=function(){return t(d)},l.unstable_next=function(K){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var F=v;v=z;try{return K()}finally{v=F}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(K,z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var F=v;v=K;try{return z()}finally{v=F}},l.unstable_scheduleCallback=function(K,z,F){var R=l.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?R+F:R):F=R,K){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=F+U,K={id:g++,callback:z,priorityLevel:K,startTime:F,expirationTime:U,sortIndex:-1},F>R?(K.sortIndex=F,e(f,K),t(d)===null&&K===t(f)&&(S?(T(Z),Z=-1):S=!0,te(N,F-R))):(K.sortIndex=U,e(d,K),A||_||(A=!0,Q(j))),K},l.unstable_shouldYield=ce,l.unstable_wrapCallback=function(K){var z=v;return function(){var F=v;v=z;try{return K.apply(this,arguments)}finally{v=F}}}}(Zy)),Zy}var OA;function iT(){return OA||(OA=1,Qy.exports=sT()),Qy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA;function rT(){if(DA)return Bn;DA=1;var l=dw(),e=iT();function t(s){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,r){o(s,r),o(s+"Capture",r)}function o(s,r){for(i[s]=r,s=0;s<r.length;s++)n.add(r[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},m={};function v(s){return d.call(m,s)?!0:d.call(g,s)?!1:f.test(s)?m[s]=!0:(g[s]=!0,!1)}function _(s,r,h,p){if(h!==null&&h.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function A(s,r,h,p){if(r===null||typeof r>"u"||_(s,r,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function S(s,r,h,p,y,w,x){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=h,this.propertyName=s,this.type=r,this.sanitizeURL=w,this.removeEmptyString=x}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){C[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var r=s[0];C[r]=new S(r,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){C[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){C[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){C[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){C[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){C[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){C[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){C[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function I(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var r=s.replace(T,I);C[r]=new S(r,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var r=s.replace(T,I);C[r]=new S(r,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var r=s.replace(T,I);C[r]=new S(r,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){C[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){C[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function O(s,r,h,p){var y=C.hasOwnProperty(r)?C[r]:null;(y!==null?y.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(A(r,h,y,p)&&(h=null),p||y===null?v(r)&&(h===null?s.removeAttribute(r):s.setAttribute(r,""+h)):y.mustUseProperty?s[y.propertyName]=h===null?y.type===3?!1:"":h:(r=y.attributeName,p=y.attributeNamespace,h===null?s.removeAttribute(r):(y=y.type,h=y===3||y===4&&h===!0?"":""+h,p?s.setAttributeNS(p,r,h):s.setAttribute(r,h))))}var N=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),G=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),ce=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),K=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=K&&s[K]||s["@@iterator"],typeof s=="function"?s:null)}var F=Object.assign,R;function U(s){if(R===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);R=r&&r[1]||""}return`
`+R+s}var W=!1;function ne(s,r){if(!s||W)return"";W=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(H){var p=H}Reflect.construct(s,[],r)}else{try{r.call()}catch(H){p=H}s.call(r.prototype)}else{try{throw Error()}catch(H){p=H}s()}}catch(H){if(H&&p&&typeof H.stack=="string"){for(var y=H.stack.split(`
`),w=p.stack.split(`
`),x=y.length-1,L=w.length-1;1<=x&&0<=L&&y[x]!==w[L];)L--;for(;1<=x&&0<=L;x--,L--)if(y[x]!==w[L]){if(x!==1||L!==1)do if(x--,L--,0>L||y[x]!==w[L]){var M=`
`+y[x].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=x&&0<=L);break}}}finally{W=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?U(s):""}function _e(s){switch(s.tag){case 5:return U(s.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return s=ne(s.type,!1),s;case 11:return s=ne(s.type.render,!1),s;case 1:return s=ne(s.type,!0),s;default:return""}}function le(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case V:return"Fragment";case G:return"Portal";case ie:return"Profiler";case Z:return"StrictMode";case Ie:return"Suspense";case Ae:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ce:return(s.displayName||"Context")+".Consumer";case we:return(s._context.displayName||"Context")+".Provider";case Le:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ne:return r=s.displayName||null,r!==null?r:le(s.type)||"Memo";case Q:r=s._payload,s=s._init;try{return le(s(r))}catch{}}return null}function ae(s){var r=s.type;switch(s.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=r.render,s=s.displayName||s.name||"",r.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(r);case 8:return r===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function be(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function He(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lt(s){var r=He(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),p=""+s[r];if(!s.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,w=h.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(x){p=""+x,w.call(this,x)}}),Object.defineProperty(s,r,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(x){p=""+x},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function pe(s){s._valueTracker||(s._valueTracker=lt(s))}function Oe(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var h=r.getValue(),p="";return s&&(p=He(s)?s.checked?"true":"false":s.value),s=p,s!==h?(r.setValue(s),!0):!1}function We(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function xt(s,r){var h=r.checked;return F({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function xn(s,r){var h=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;h=be(r.value!=null?r.value:h),s._wrapperState={initialChecked:p,initialValue:h,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Se(s,r){r=r.checked,r!=null&&O(s,"checked",r,!1)}function Te(s,r){Se(s,r);var h=be(r.value),p=r.type;if(h!=null)p==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}r.hasOwnProperty("value")?It(s,r.type,h):r.hasOwnProperty("defaultValue")&&It(s,r.type,be(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(s.defaultChecked=!!r.defaultChecked)}function bt(s,r,h){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+s._wrapperState.initialValue,h||r===s.value||(s.value=r),s.defaultValue=r}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function It(s,r,h){(r!=="number"||We(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var Et=Array.isArray;function un(s,r,h,p){if(s=s.options,r){r={};for(var y=0;y<h.length;y++)r["$"+h[y]]=!0;for(h=0;h<s.length;h++)y=r.hasOwnProperty("$"+s[h].value),s[h].selected!==y&&(s[h].selected=y),y&&p&&(s[h].defaultSelected=!0)}else{for(h=""+be(h),r=null,y=0;y<s.length;y++){if(s[y].value===h){s[y].selected=!0,p&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Ar(s,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return F({},r,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function fl(s,r){var h=r.value;if(h==null){if(h=r.children,r=r.defaultValue,h!=null){if(r!=null)throw Error(t(92));if(Et(h)){if(1<h.length)throw Error(t(93));h=h[0]}r=h}r==null&&(r=""),h=r}s._wrapperState={initialValue:be(h)}}function bf(s,r){var h=be(r.value),p=be(r.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),r.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),p!=null&&(s.defaultValue=""+p)}function Bw(s){var r=s.textContent;r===s._wrapperState.initialValue&&r!==""&&r!==null&&(s.value=r)}function zw(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rm(s,r){return s==null||s==="http://www.w3.org/1999/xhtml"?zw(r):s==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Af,Hw=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,h,p,y){MSApp.execUnsafeLocalFunction(function(){return s(r,h,p,y)})}:s}(function(s,r){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=r;else{for(Af=Af||document.createElement("div"),Af.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Af.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;r.firstChild;)s.appendChild(r.firstChild)}});function mu(s,r){if(r){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=r;return}}s.textContent=r}var yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZE=["Webkit","ms","Moz","O"];Object.keys(yu).forEach(function(s){ZE.forEach(function(r){r=r+s.charAt(0).toUpperCase()+s.substring(1),yu[r]=yu[s]})});function Gw(s,r,h){return r==null||typeof r=="boolean"||r===""?"":h||typeof r!="number"||r===0||yu.hasOwnProperty(s)&&yu[s]?(""+r).trim():r+"px"}function Vw(s,r){s=s.style;for(var h in r)if(r.hasOwnProperty(h)){var p=h.indexOf("--")===0,y=Gw(h,r[h],p);h==="float"&&(h="cssFloat"),p?s.setProperty(h,y):s[h]=y}}var ek=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function am(s,r){if(r){if(ek[s]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function om(s,r){if(s.indexOf("-")===-1)return typeof r.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lm=null;function cm(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var um=null,pl=null,gl=null;function Ww(s){if(s=$u(s)){if(typeof um!="function")throw Error(t(280));var r=s.stateNode;r&&(r=Vf(r),um(s.stateNode,s.type,r))}}function qw(s){pl?gl?gl.push(s):gl=[s]:pl=s}function Kw(){if(pl){var s=pl,r=gl;if(gl=pl=null,Ww(s),r)for(s=0;s<r.length;s++)Ww(r[s])}}function Xw(s,r){return s(r)}function Yw(){}var hm=!1;function Jw(s,r,h){if(hm)return s(r,h);hm=!0;try{return Xw(s,r,h)}finally{hm=!1,(pl!==null||gl!==null)&&(Yw(),Kw())}}function vu(s,r){var h=s.stateNode;if(h===null)return null;var p=Vf(h);if(p===null)return null;h=p[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(t(231,r,typeof h));return h}var dm=!1;if(c)try{var wu={};Object.defineProperty(wu,"passive",{get:function(){dm=!0}}),window.addEventListener("test",wu,wu),window.removeEventListener("test",wu,wu)}catch{dm=!1}function tk(s,r,h,p,y,w,x,L,M){var H=Array.prototype.slice.call(arguments,3);try{r.apply(h,H)}catch(Y){this.onError(Y)}}var _u=!1,Sf=null,xf=!1,fm=null,nk={onError:function(s){_u=!0,Sf=s}};function sk(s,r,h,p,y,w,x,L,M){_u=!1,Sf=null,tk.apply(nk,arguments)}function ik(s,r,h,p,y,w,x,L,M){if(sk.apply(this,arguments),_u){if(_u){var H=Sf;_u=!1,Sf=null}else throw Error(t(198));xf||(xf=!0,fm=H)}}function Na(s){var r=s,h=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(h=r.return),s=r.return;while(s)}return r.tag===3?h:null}function Qw(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function Zw(s){if(Na(s)!==s)throw Error(t(188))}function rk(s){var r=s.alternate;if(!r){if(r=Na(s),r===null)throw Error(t(188));return r!==s?null:s}for(var h=s,p=r;;){var y=h.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){h=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===h)return Zw(y),s;if(w===p)return Zw(y),r;w=w.sibling}throw Error(t(188))}if(h.return!==p.return)h=y,p=w;else{for(var x=!1,L=y.child;L;){if(L===h){x=!0,h=y,p=w;break}if(L===p){x=!0,p=y,h=w;break}L=L.sibling}if(!x){for(L=w.child;L;){if(L===h){x=!0,h=w,p=y;break}if(L===p){x=!0,p=w,h=y;break}L=L.sibling}if(!x)throw Error(t(189))}}if(h.alternate!==p)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?s:r}function e_(s){return s=rk(s),s!==null?t_(s):null}function t_(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var r=t_(s);if(r!==null)return r;s=s.sibling}return null}var n_=e.unstable_scheduleCallback,s_=e.unstable_cancelCallback,ak=e.unstable_shouldYield,ok=e.unstable_requestPaint,kt=e.unstable_now,lk=e.unstable_getCurrentPriorityLevel,pm=e.unstable_ImmediatePriority,i_=e.unstable_UserBlockingPriority,Ef=e.unstable_NormalPriority,ck=e.unstable_LowPriority,r_=e.unstable_IdlePriority,kf=null,ri=null;function uk(s){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(kf,s,void 0,(s.current.flags&128)===128)}catch{}}var Ms=Math.clz32?Math.clz32:fk,hk=Math.log,dk=Math.LN2;function fk(s){return s>>>=0,s===0?32:31-(hk(s)/dk|0)|0}var Cf=64,Tf=4194304;function bu(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Pf(s,r){var h=s.pendingLanes;if(h===0)return 0;var p=0,y=s.suspendedLanes,w=s.pingedLanes,x=h&268435455;if(x!==0){var L=x&~y;L!==0?p=bu(L):(w&=x,w!==0&&(p=bu(w)))}else x=h&~y,x!==0?p=bu(x):w!==0&&(p=bu(w));if(p===0)return 0;if(r!==0&&r!==p&&(r&y)===0&&(y=p&-p,w=r&-r,y>=w||y===16&&(w&4194240)!==0))return r;if((p&4)!==0&&(p|=h&16),r=s.entangledLanes,r!==0)for(s=s.entanglements,r&=p;0<r;)h=31-Ms(r),y=1<<h,p|=s[h],r&=~y;return p}function pk(s,r){switch(s){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gk(s,r){for(var h=s.suspendedLanes,p=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes;0<w;){var x=31-Ms(w),L=1<<x,M=y[x];M===-1?((L&h)===0||(L&p)!==0)&&(y[x]=pk(L,r)):M<=r&&(s.expiredLanes|=L),w&=~L}}function gm(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function a_(){var s=Cf;return Cf<<=1,(Cf&4194240)===0&&(Cf=64),s}function mm(s){for(var r=[],h=0;31>h;h++)r.push(s);return r}function Au(s,r,h){s.pendingLanes|=r,r!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,r=31-Ms(r),s[r]=h}function mk(s,r){var h=s.pendingLanes&~r;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=r,s.mutableReadLanes&=r,s.entangledLanes&=r,r=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<h;){var y=31-Ms(h),w=1<<y;r[y]=0,p[y]=-1,s[y]=-1,h&=~w}}function ym(s,r){var h=s.entangledLanes|=r;for(s=s.entanglements;h;){var p=31-Ms(h),y=1<<p;y&r|s[p]&r&&(s[p]|=r),h&=~y}}var Qe=0;function o_(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var l_,vm,c_,u_,h_,wm=!1,Rf=[],Sr=null,xr=null,Er=null,Su=new Map,xu=new Map,kr=[],yk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d_(s,r){switch(s){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Su.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(r.pointerId)}}function Eu(s,r,h,p,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:r,domEventName:h,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},r!==null&&(r=$u(r),r!==null&&vm(r)),s):(s.eventSystemFlags|=p,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function vk(s,r,h,p,y){switch(r){case"focusin":return Sr=Eu(Sr,s,r,h,p,y),!0;case"dragenter":return xr=Eu(xr,s,r,h,p,y),!0;case"mouseover":return Er=Eu(Er,s,r,h,p,y),!0;case"pointerover":var w=y.pointerId;return Su.set(w,Eu(Su.get(w)||null,s,r,h,p,y)),!0;case"gotpointercapture":return w=y.pointerId,xu.set(w,Eu(xu.get(w)||null,s,r,h,p,y)),!0}return!1}function f_(s){var r=Ma(s.target);if(r!==null){var h=Na(r);if(h!==null){if(r=h.tag,r===13){if(r=Qw(h),r!==null){s.blockedOn=r,h_(s.priority,function(){c_(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Lf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var h=bm(s.domEventName,s.eventSystemFlags,r[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var p=new h.constructor(h.type,h);lm=p,h.target.dispatchEvent(p),lm=null}else return r=$u(h),r!==null&&vm(r),s.blockedOn=h,!1;r.shift()}return!0}function p_(s,r,h){Lf(s)&&h.delete(r)}function wk(){wm=!1,Sr!==null&&Lf(Sr)&&(Sr=null),xr!==null&&Lf(xr)&&(xr=null),Er!==null&&Lf(Er)&&(Er=null),Su.forEach(p_),xu.forEach(p_)}function ku(s,r){s.blockedOn===r&&(s.blockedOn=null,wm||(wm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wk)))}function Cu(s){function r(y){return ku(y,s)}if(0<Rf.length){ku(Rf[0],s);for(var h=1;h<Rf.length;h++){var p=Rf[h];p.blockedOn===s&&(p.blockedOn=null)}}for(Sr!==null&&ku(Sr,s),xr!==null&&ku(xr,s),Er!==null&&ku(Er,s),Su.forEach(r),xu.forEach(r),h=0;h<kr.length;h++)p=kr[h],p.blockedOn===s&&(p.blockedOn=null);for(;0<kr.length&&(h=kr[0],h.blockedOn===null);)f_(h),h.blockedOn===null&&kr.shift()}var ml=N.ReactCurrentBatchConfig,If=!0;function _k(s,r,h,p){var y=Qe,w=ml.transition;ml.transition=null;try{Qe=1,_m(s,r,h,p)}finally{Qe=y,ml.transition=w}}function bk(s,r,h,p){var y=Qe,w=ml.transition;ml.transition=null;try{Qe=4,_m(s,r,h,p)}finally{Qe=y,ml.transition=w}}function _m(s,r,h,p){if(If){var y=bm(s,r,h,p);if(y===null)jm(s,r,p,Nf,h),d_(s,p);else if(vk(y,s,r,h,p))p.stopPropagation();else if(d_(s,p),r&4&&-1<yk.indexOf(s)){for(;y!==null;){var w=$u(y);if(w!==null&&l_(w),w=bm(s,r,h,p),w===null&&jm(s,r,p,Nf,h),w===y)break;y=w}y!==null&&p.stopPropagation()}else jm(s,r,p,null,h)}}var Nf=null;function bm(s,r,h,p){if(Nf=null,s=cm(p),s=Ma(s),s!==null)if(r=Na(s),r===null)s=null;else if(h=r.tag,h===13){if(s=Qw(r),s!==null)return s;s=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null);return Nf=s,null}function g_(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lk()){case pm:return 1;case i_:return 4;case Ef:case ck:return 16;case r_:return 536870912;default:return 16}default:return 16}}var Cr=null,Am=null,Mf=null;function m_(){if(Mf)return Mf;var s,r=Am,h=r.length,p,y="value"in Cr?Cr.value:Cr.textContent,w=y.length;for(s=0;s<h&&r[s]===y[s];s++);var x=h-s;for(p=1;p<=x&&r[h-p]===y[w-p];p++);return Mf=y.slice(s,1<p?1-p:void 0)}function Of(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Df(){return!0}function y_(){return!1}function Yn(s){function r(h,p,y,w,x){this._reactName=h,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=x,this.currentTarget=null;for(var L in s)s.hasOwnProperty(L)&&(h=s[L],this[L]=h?h(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Df:y_,this.isPropagationStopped=y_,this}return F(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Df)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Df)},persist:function(){},isPersistent:Df}),r}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sm=Yn(yl),Tu=F({},yl,{view:0,detail:0}),Ak=Yn(Tu),xm,Em,Pu,Ff=F({},Tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cm,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pu&&(Pu&&s.type==="mousemove"?(xm=s.screenX-Pu.screenX,Em=s.screenY-Pu.screenY):Em=xm=0,Pu=s),xm)},movementY:function(s){return"movementY"in s?s.movementY:Em}}),v_=Yn(Ff),Sk=F({},Ff,{dataTransfer:0}),xk=Yn(Sk),Ek=F({},Tu,{relatedTarget:0}),km=Yn(Ek),kk=F({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),Ck=Yn(kk),Tk=F({},yl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Pk=Yn(Tk),Rk=F({},yl,{data:0}),w_=Yn(Rk),Lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mk(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Nk[s])?!!r[s]:!1}function Cm(){return Mk}var Ok=F({},Tu,{key:function(s){if(s.key){var r=Lk[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Of(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ik[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cm,charCode:function(s){return s.type==="keypress"?Of(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Of(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Dk=Yn(Ok),Fk=F({},Ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),__=Yn(Fk),jk=F({},Tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cm}),$k=Yn(jk),Uk=F({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bk=Yn(Uk),zk=F({},Ff,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Hk=Yn(zk),Gk=[9,13,27,32],Tm=c&&"CompositionEvent"in window,Ru=null;c&&"documentMode"in document&&(Ru=document.documentMode);var Vk=c&&"TextEvent"in window&&!Ru,b_=c&&(!Tm||Ru&&8<Ru&&11>=Ru),A_=" ",S_=!1;function x_(s,r){switch(s){case"keyup":return Gk.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var vl=!1;function Wk(s,r){switch(s){case"compositionend":return E_(r);case"keypress":return r.which!==32?null:(S_=!0,A_);case"textInput":return s=r.data,s===A_&&S_?null:s;default:return null}}function qk(s,r){if(vl)return s==="compositionend"||!Tm&&x_(s,r)?(s=m_(),Mf=Am=Cr=null,vl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return b_&&r.locale!=="ko"?null:r.data;default:return null}}var Kk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k_(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Kk[s.type]:r==="textarea"}function C_(s,r,h,p){qw(p),r=zf(r,"onChange"),0<r.length&&(h=new Sm("onChange","change",null,h,p),s.push({event:h,listeners:r}))}var Lu=null,Iu=null;function Xk(s){V_(s,0)}function jf(s){var r=Sl(s);if(Oe(r))return s}function Yk(s,r){if(s==="change")return r}var T_=!1;if(c){var Pm;if(c){var Rm="oninput"in document;if(!Rm){var P_=document.createElement("div");P_.setAttribute("oninput","return;"),Rm=typeof P_.oninput=="function"}Pm=Rm}else Pm=!1;T_=Pm&&(!document.documentMode||9<document.documentMode)}function R_(){Lu&&(Lu.detachEvent("onpropertychange",L_),Iu=Lu=null)}function L_(s){if(s.propertyName==="value"&&jf(Iu)){var r=[];C_(r,Iu,s,cm(s)),Jw(Xk,r)}}function Jk(s,r,h){s==="focusin"?(R_(),Lu=r,Iu=h,Lu.attachEvent("onpropertychange",L_)):s==="focusout"&&R_()}function Qk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return jf(Iu)}function Zk(s,r){if(s==="click")return jf(r)}function eC(s,r){if(s==="input"||s==="change")return jf(r)}function tC(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Os=typeof Object.is=="function"?Object.is:tC;function Nu(s,r){if(Os(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var h=Object.keys(s),p=Object.keys(r);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var y=h[p];if(!d.call(r,y)||!Os(s[y],r[y]))return!1}return!0}function I_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function N_(s,r){var h=I_(s);s=0;for(var p;h;){if(h.nodeType===3){if(p=s+h.textContent.length,s<=r&&p>=r)return{node:h,offset:r-s};s=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=I_(h)}}function M_(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?M_(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function O_(){for(var s=window,r=We();r instanceof s.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)s=r.contentWindow;else break;r=We(s.document)}return r}function Lm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}function nC(s){var r=O_(),h=s.focusedElem,p=s.selectionRange;if(r!==h&&h&&h.ownerDocument&&M_(h.ownerDocument.documentElement,h)){if(p!==null&&Lm(h)){if(r=p.start,s=p.end,s===void 0&&(s=r),"selectionStart"in h)h.selectionStart=r,h.selectionEnd=Math.min(s,h.value.length);else if(s=(r=h.ownerDocument||document)&&r.defaultView||window,s.getSelection){s=s.getSelection();var y=h.textContent.length,w=Math.min(p.start,y);p=p.end===void 0?w:Math.min(p.end,y),!s.extend&&w>p&&(y=p,p=w,w=y),y=N_(h,w);var x=N_(h,p);y&&x&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==x.node||s.focusOffset!==x.offset)&&(r=r.createRange(),r.setStart(y.node,y.offset),s.removeAllRanges(),w>p?(s.addRange(r),s.extend(x.node,x.offset)):(r.setEnd(x.node,x.offset),s.addRange(r)))}}for(r=[],s=h;s=s.parentNode;)s.nodeType===1&&r.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<r.length;h++)s=r[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var sC=c&&"documentMode"in document&&11>=document.documentMode,wl=null,Im=null,Mu=null,Nm=!1;function D_(s,r,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Nm||wl==null||wl!==We(p)||(p=wl,"selectionStart"in p&&Lm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Mu&&Nu(Mu,p)||(Mu=p,p=zf(Im,"onSelect"),0<p.length&&(r=new Sm("onSelect","select",null,r,h),s.push({event:r,listeners:p}),r.target=wl)))}function $f(s,r){var h={};return h[s.toLowerCase()]=r.toLowerCase(),h["Webkit"+s]="webkit"+r,h["Moz"+s]="moz"+r,h}var _l={animationend:$f("Animation","AnimationEnd"),animationiteration:$f("Animation","AnimationIteration"),animationstart:$f("Animation","AnimationStart"),transitionend:$f("Transition","TransitionEnd")},Mm={},F_={};c&&(F_=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function Uf(s){if(Mm[s])return Mm[s];if(!_l[s])return s;var r=_l[s],h;for(h in r)if(r.hasOwnProperty(h)&&h in F_)return Mm[s]=r[h];return s}var j_=Uf("animationend"),$_=Uf("animationiteration"),U_=Uf("animationstart"),B_=Uf("transitionend"),z_=new Map,H_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(s,r){z_.set(s,r),a(r,[s])}for(var Om=0;Om<H_.length;Om++){var Dm=H_[Om],iC=Dm.toLowerCase(),rC=Dm[0].toUpperCase()+Dm.slice(1);Tr(iC,"on"+rC)}Tr(j_,"onAnimationEnd"),Tr($_,"onAnimationIteration"),Tr(U_,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(B_,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ou));function G_(s,r,h){var p=s.type||"unknown-event";s.currentTarget=h,ik(p,r,void 0,s),s.currentTarget=null}function V_(s,r){r=(r&4)!==0;for(var h=0;h<s.length;h++){var p=s[h],y=p.event;p=p.listeners;e:{var w=void 0;if(r)for(var x=p.length-1;0<=x;x--){var L=p[x],M=L.instance,H=L.currentTarget;if(L=L.listener,M!==w&&y.isPropagationStopped())break e;G_(y,L,H),w=M}else for(x=0;x<p.length;x++){if(L=p[x],M=L.instance,H=L.currentTarget,L=L.listener,M!==w&&y.isPropagationStopped())break e;G_(y,L,H),w=M}}}if(xf)throw s=fm,xf=!1,fm=null,s}function ct(s,r){var h=r[Gm];h===void 0&&(h=r[Gm]=new Set);var p=s+"__bubble";h.has(p)||(W_(r,s,2,!1),h.add(p))}function Fm(s,r,h){var p=0;r&&(p|=4),W_(h,s,p,r)}var Bf="_reactListening"+Math.random().toString(36).slice(2);function Du(s){if(!s[Bf]){s[Bf]=!0,n.forEach(function(h){h!=="selectionchange"&&(aC.has(h)||Fm(h,!1,s),Fm(h,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Bf]||(r[Bf]=!0,Fm("selectionchange",!1,r))}}function W_(s,r,h,p){switch(g_(r)){case 1:var y=_k;break;case 4:y=bk;break;default:y=_m}h=y.bind(null,r,h,s),y=void 0,!dm||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),p?y!==void 0?s.addEventListener(r,h,{capture:!0,passive:y}):s.addEventListener(r,h,!0):y!==void 0?s.addEventListener(r,h,{passive:y}):s.addEventListener(r,h,!1)}function jm(s,r,h,p,y){var w=p;if((r&1)===0&&(r&2)===0&&p!==null)e:for(;;){if(p===null)return;var x=p.tag;if(x===3||x===4){var L=p.stateNode.containerInfo;if(L===y||L.nodeType===8&&L.parentNode===y)break;if(x===4)for(x=p.return;x!==null;){var M=x.tag;if((M===3||M===4)&&(M=x.stateNode.containerInfo,M===y||M.nodeType===8&&M.parentNode===y))return;x=x.return}for(;L!==null;){if(x=Ma(L),x===null)return;if(M=x.tag,M===5||M===6){p=w=x;continue e}L=L.parentNode}}p=p.return}Jw(function(){var H=w,Y=cm(h),J=[];e:{var X=z_.get(s);if(X!==void 0){var re=Sm,fe=s;switch(s){case"keypress":if(Of(h)===0)break e;case"keydown":case"keyup":re=Dk;break;case"focusin":fe="focus",re=km;break;case"focusout":fe="blur",re=km;break;case"beforeblur":case"afterblur":re=km;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=v_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=xk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=$k;break;case j_:case $_:case U_:re=Ck;break;case B_:re=Bk;break;case"scroll":re=Ak;break;case"wheel":re=Hk;break;case"copy":case"cut":case"paste":re=Pk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=__}var ge=(r&4)!==0,Ct=!ge&&s==="scroll",$=ge?X!==null?X+"Capture":null:X;ge=[];for(var D=H,B;D!==null;){B=D;var ee=B.stateNode;if(B.tag===5&&ee!==null&&(B=ee,$!==null&&(ee=vu(D,$),ee!=null&&ge.push(Fu(D,ee,B)))),Ct)break;D=D.return}0<ge.length&&(X=new re(X,fe,null,h,Y),J.push({event:X,listeners:ge}))}}if((r&7)===0){e:{if(X=s==="mouseover"||s==="pointerover",re=s==="mouseout"||s==="pointerout",X&&h!==lm&&(fe=h.relatedTarget||h.fromElement)&&(Ma(fe)||fe[Ii]))break e;if((re||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,re?(fe=h.relatedTarget||h.toElement,re=H,fe=fe?Ma(fe):null,fe!==null&&(Ct=Na(fe),fe!==Ct||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(re=null,fe=H),re!==fe)){if(ge=v_,ee="onMouseLeave",$="onMouseEnter",D="mouse",(s==="pointerout"||s==="pointerover")&&(ge=__,ee="onPointerLeave",$="onPointerEnter",D="pointer"),Ct=re==null?X:Sl(re),B=fe==null?X:Sl(fe),X=new ge(ee,D+"leave",re,h,Y),X.target=Ct,X.relatedTarget=B,ee=null,Ma(Y)===H&&(ge=new ge($,D+"enter",fe,h,Y),ge.target=B,ge.relatedTarget=Ct,ee=ge),Ct=ee,re&&fe)t:{for(ge=re,$=fe,D=0,B=ge;B;B=bl(B))D++;for(B=0,ee=$;ee;ee=bl(ee))B++;for(;0<D-B;)ge=bl(ge),D--;for(;0<B-D;)$=bl($),B--;for(;D--;){if(ge===$||$!==null&&ge===$.alternate)break t;ge=bl(ge),$=bl($)}ge=null}else ge=null;re!==null&&q_(J,X,re,ge,!1),fe!==null&&Ct!==null&&q_(J,Ct,fe,ge,!0)}}e:{if(X=H?Sl(H):window,re=X.nodeName&&X.nodeName.toLowerCase(),re==="select"||re==="input"&&X.type==="file")var me=Yk;else if(k_(X))if(T_)me=eC;else{me=Qk;var xe=Jk}else(re=X.nodeName)&&re.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(me=Zk);if(me&&(me=me(s,H))){C_(J,me,h,Y);break e}xe&&xe(s,X,H),s==="focusout"&&(xe=X._wrapperState)&&xe.controlled&&X.type==="number"&&It(X,"number",X.value)}switch(xe=H?Sl(H):window,s){case"focusin":(k_(xe)||xe.contentEditable==="true")&&(wl=xe,Im=H,Mu=null);break;case"focusout":Mu=Im=wl=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,D_(J,h,Y);break;case"selectionchange":if(sC)break;case"keydown":case"keyup":D_(J,h,Y)}var Ee;if(Tm)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else vl?x_(s,h)&&(Pe="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Pe="onCompositionStart");Pe&&(b_&&h.locale!=="ko"&&(vl||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&vl&&(Ee=m_()):(Cr=Y,Am="value"in Cr?Cr.value:Cr.textContent,vl=!0)),xe=zf(H,Pe),0<xe.length&&(Pe=new w_(Pe,s,null,h,Y),J.push({event:Pe,listeners:xe}),Ee?Pe.data=Ee:(Ee=E_(h),Ee!==null&&(Pe.data=Ee)))),(Ee=Vk?Wk(s,h):qk(s,h))&&(H=zf(H,"onBeforeInput"),0<H.length&&(Y=new w_("onBeforeInput","beforeinput",null,h,Y),J.push({event:Y,listeners:H}),Y.data=Ee))}V_(J,r)})}function Fu(s,r,h){return{instance:s,listener:r,currentTarget:h}}function zf(s,r){for(var h=r+"Capture",p=[];s!==null;){var y=s,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=vu(s,h),w!=null&&p.unshift(Fu(s,w,y)),w=vu(s,r),w!=null&&p.push(Fu(s,w,y))),s=s.return}return p}function bl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function q_(s,r,h,p,y){for(var w=r._reactName,x=[];h!==null&&h!==p;){var L=h,M=L.alternate,H=L.stateNode;if(M!==null&&M===p)break;L.tag===5&&H!==null&&(L=H,y?(M=vu(h,w),M!=null&&x.unshift(Fu(h,M,L))):y||(M=vu(h,w),M!=null&&x.push(Fu(h,M,L)))),h=h.return}x.length!==0&&s.push({event:r,listeners:x})}var oC=/\r\n?/g,lC=/\u0000|\uFFFD/g;function K_(s){return(typeof s=="string"?s:""+s).replace(oC,`
`).replace(lC,"")}function Hf(s,r,h){if(r=K_(r),K_(s)!==r&&h)throw Error(t(425))}function Gf(){}var $m=null,Um=null;function Bm(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,cC=typeof clearTimeout=="function"?clearTimeout:void 0,X_=typeof Promise=="function"?Promise:void 0,uC=typeof queueMicrotask=="function"?queueMicrotask:typeof X_<"u"?function(s){return X_.resolve(null).then(s).catch(hC)}:zm;function hC(s){setTimeout(function(){throw s})}function Hm(s,r){var h=r,p=0;do{var y=h.nextSibling;if(s.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(p===0){s.removeChild(y),Cu(r);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=y}while(h);Cu(r)}function Pr(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return s}function Y_(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(r===0)return s;r--}else h==="/$"&&r++}s=s.previousSibling}return null}var Al=Math.random().toString(36).slice(2),ai="__reactFiber$"+Al,ju="__reactProps$"+Al,Ii="__reactContainer$"+Al,Gm="__reactEvents$"+Al,dC="__reactListeners$"+Al,fC="__reactHandles$"+Al;function Ma(s){var r=s[ai];if(r)return r;for(var h=s.parentNode;h;){if(r=h[Ii]||h[ai]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(s=Y_(s);s!==null;){if(h=s[ai])return h;s=Y_(s)}return r}s=h,h=s.parentNode}return null}function $u(s){return s=s[ai]||s[Ii],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Sl(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Vf(s){return s[ju]||null}var Vm=[],xl=-1;function Rr(s){return{current:s}}function ut(s){0>xl||(s.current=Vm[xl],Vm[xl]=null,xl--)}function rt(s,r){xl++,Vm[xl]=s.current,s.current=r}var Lr={},hn=Rr(Lr),Dn=Rr(!1),Oa=Lr;function El(s,r){var h=s.type.contextTypes;if(!h)return Lr;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in h)y[w]=r[w];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=y),y}function Fn(s){return s=s.childContextTypes,s!=null}function Wf(){ut(Dn),ut(hn)}function J_(s,r,h){if(hn.current!==Lr)throw Error(t(168));rt(hn,r),rt(Dn,h)}function Q_(s,r,h){var p=s.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var y in p)if(!(y in r))throw Error(t(108,ae(s)||"Unknown",y));return F({},h,p)}function qf(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Lr,Oa=hn.current,rt(hn,s),rt(Dn,Dn.current),!0}function Z_(s,r,h){var p=s.stateNode;if(!p)throw Error(t(169));h?(s=Q_(s,r,Oa),p.__reactInternalMemoizedMergedChildContext=s,ut(Dn),ut(hn),rt(hn,s)):ut(Dn),rt(Dn,h)}var Ni=null,Kf=!1,Wm=!1;function eb(s){Ni===null?Ni=[s]:Ni.push(s)}function pC(s){Kf=!0,eb(s)}function Ir(){if(!Wm&&Ni!==null){Wm=!0;var s=0,r=Qe;try{var h=Ni;for(Qe=1;s<h.length;s++){var p=h[s];do p=p(!0);while(p!==null)}Ni=null,Kf=!1}catch(y){throw Ni!==null&&(Ni=Ni.slice(s+1)),n_(pm,Ir),y}finally{Qe=r,Wm=!1}}return null}var kl=[],Cl=0,Xf=null,Yf=0,ys=[],vs=0,Da=null,Mi=1,Oi="";function Fa(s,r){kl[Cl++]=Yf,kl[Cl++]=Xf,Xf=s,Yf=r}function tb(s,r,h){ys[vs++]=Mi,ys[vs++]=Oi,ys[vs++]=Da,Da=s;var p=Mi;s=Oi;var y=32-Ms(p)-1;p&=~(1<<y),h+=1;var w=32-Ms(r)+y;if(30<w){var x=y-y%5;w=(p&(1<<x)-1).toString(32),p>>=x,y-=x,Mi=1<<32-Ms(r)+y|h<<y|p,Oi=w+s}else Mi=1<<w|h<<y|p,Oi=s}function qm(s){s.return!==null&&(Fa(s,1),tb(s,1,0))}function Km(s){for(;s===Xf;)Xf=kl[--Cl],kl[Cl]=null,Yf=kl[--Cl],kl[Cl]=null;for(;s===Da;)Da=ys[--vs],ys[vs]=null,Oi=ys[--vs],ys[vs]=null,Mi=ys[--vs],ys[vs]=null}var Jn=null,Qn=null,dt=!1,Ds=null;function nb(s,r){var h=As(5,null,null,0);h.elementType="DELETED",h.stateNode=r,h.return=s,r=s.deletions,r===null?(s.deletions=[h],s.flags|=16):r.push(h)}function sb(s,r){switch(s.tag){case 5:var h=s.type;return r=r.nodeType!==1||h.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(s.stateNode=r,Jn=s,Qn=Pr(r.firstChild),!0):!1;case 6:return r=s.pendingProps===""||r.nodeType!==3?null:r,r!==null?(s.stateNode=r,Jn=s,Qn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(h=Da!==null?{id:Mi,overflow:Oi}:null,s.memoizedState={dehydrated:r,treeContext:h,retryLane:1073741824},h=As(18,null,null,0),h.stateNode=r,h.return=s,s.child=h,Jn=s,Qn=null,!0):!1;default:return!1}}function Xm(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ym(s){if(dt){var r=Qn;if(r){var h=r;if(!sb(s,r)){if(Xm(s))throw Error(t(418));r=Pr(h.nextSibling);var p=Jn;r&&sb(s,r)?nb(p,h):(s.flags=s.flags&-4097|2,dt=!1,Jn=s)}}else{if(Xm(s))throw Error(t(418));s.flags=s.flags&-4097|2,dt=!1,Jn=s}}}function ib(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Jn=s}function Jf(s){if(s!==Jn)return!1;if(!dt)return ib(s),dt=!0,!1;var r;if((r=s.tag!==3)&&!(r=s.tag!==5)&&(r=s.type,r=r!=="head"&&r!=="body"&&!Bm(s.type,s.memoizedProps)),r&&(r=Qn)){if(Xm(s))throw rb(),Error(t(418));for(;r;)nb(s,r),r=Pr(r.nextSibling)}if(ib(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(r===0){Qn=Pr(s.nextSibling);break e}r--}else h!=="$"&&h!=="$!"&&h!=="$?"||r++}s=s.nextSibling}Qn=null}}else Qn=Jn?Pr(s.stateNode.nextSibling):null;return!0}function rb(){for(var s=Qn;s;)s=Pr(s.nextSibling)}function Tl(){Qn=Jn=null,dt=!1}function Jm(s){Ds===null?Ds=[s]:Ds.push(s)}var gC=N.ReactCurrentBatchConfig;function Uu(s,r,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var p=h.stateNode}if(!p)throw Error(t(147,s));var y=p,w=""+s;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===w?r.ref:(r=function(x){var L=y.refs;x===null?delete L[w]:L[w]=x},r._stringRef=w,r)}if(typeof s!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,s))}return s}function Qf(s,r){throw s=Object.prototype.toString.call(r),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s))}function ab(s){var r=s._init;return r(s._payload)}function ob(s){function r($,D){if(s){var B=$.deletions;B===null?($.deletions=[D],$.flags|=16):B.push(D)}}function h($,D){if(!s)return null;for(;D!==null;)r($,D),D=D.sibling;return null}function p($,D){for($=new Map;D!==null;)D.key!==null?$.set(D.key,D):$.set(D.index,D),D=D.sibling;return $}function y($,D){return $=Ur($,D),$.index=0,$.sibling=null,$}function w($,D,B){return $.index=B,s?(B=$.alternate,B!==null?(B=B.index,B<D?($.flags|=2,D):B):($.flags|=2,D)):($.flags|=1048576,D)}function x($){return s&&$.alternate===null&&($.flags|=2),$}function L($,D,B,ee){return D===null||D.tag!==6?(D=zy(B,$.mode,ee),D.return=$,D):(D=y(D,B),D.return=$,D)}function M($,D,B,ee){var me=B.type;return me===V?Y($,D,B.props.children,ee,B.key):D!==null&&(D.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Q&&ab(me)===D.type)?(ee=y(D,B.props),ee.ref=Uu($,D,B),ee.return=$,ee):(ee=Ap(B.type,B.key,B.props,null,$.mode,ee),ee.ref=Uu($,D,B),ee.return=$,ee)}function H($,D,B,ee){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=Hy(B,$.mode,ee),D.return=$,D):(D=y(D,B.children||[]),D.return=$,D)}function Y($,D,B,ee,me){return D===null||D.tag!==7?(D=Va(B,$.mode,ee,me),D.return=$,D):(D=y(D,B),D.return=$,D)}function J($,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=zy(""+D,$.mode,B),D.return=$,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case j:return B=Ap(D.type,D.key,D.props,null,$.mode,B),B.ref=Uu($,null,D),B.return=$,B;case G:return D=Hy(D,$.mode,B),D.return=$,D;case Q:var ee=D._init;return J($,ee(D._payload),B)}if(Et(D)||z(D))return D=Va(D,$.mode,B,null),D.return=$,D;Qf($,D)}return null}function X($,D,B,ee){var me=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return me!==null?null:L($,D,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case j:return B.key===me?M($,D,B,ee):null;case G:return B.key===me?H($,D,B,ee):null;case Q:return me=B._init,X($,D,me(B._payload),ee)}if(Et(B)||z(B))return me!==null?null:Y($,D,B,ee,null);Qf($,B)}return null}function re($,D,B,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return $=$.get(B)||null,L(D,$,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case j:return $=$.get(ee.key===null?B:ee.key)||null,M(D,$,ee,me);case G:return $=$.get(ee.key===null?B:ee.key)||null,H(D,$,ee,me);case Q:var xe=ee._init;return re($,D,B,xe(ee._payload),me)}if(Et(ee)||z(ee))return $=$.get(B)||null,Y(D,$,ee,me,null);Qf(D,ee)}return null}function fe($,D,B,ee){for(var me=null,xe=null,Ee=D,Pe=D=0,Wt=null;Ee!==null&&Pe<B.length;Pe++){Ee.index>Pe?(Wt=Ee,Ee=null):Wt=Ee.sibling;var Xe=X($,Ee,B[Pe],ee);if(Xe===null){Ee===null&&(Ee=Wt);break}s&&Ee&&Xe.alternate===null&&r($,Ee),D=w(Xe,D,Pe),xe===null?me=Xe:xe.sibling=Xe,xe=Xe,Ee=Wt}if(Pe===B.length)return h($,Ee),dt&&Fa($,Pe),me;if(Ee===null){for(;Pe<B.length;Pe++)Ee=J($,B[Pe],ee),Ee!==null&&(D=w(Ee,D,Pe),xe===null?me=Ee:xe.sibling=Ee,xe=Ee);return dt&&Fa($,Pe),me}for(Ee=p($,Ee);Pe<B.length;Pe++)Wt=re(Ee,$,Pe,B[Pe],ee),Wt!==null&&(s&&Wt.alternate!==null&&Ee.delete(Wt.key===null?Pe:Wt.key),D=w(Wt,D,Pe),xe===null?me=Wt:xe.sibling=Wt,xe=Wt);return s&&Ee.forEach(function(Br){return r($,Br)}),dt&&Fa($,Pe),me}function ge($,D,B,ee){var me=z(B);if(typeof me!="function")throw Error(t(150));if(B=me.call(B),B==null)throw Error(t(151));for(var xe=me=null,Ee=D,Pe=D=0,Wt=null,Xe=B.next();Ee!==null&&!Xe.done;Pe++,Xe=B.next()){Ee.index>Pe?(Wt=Ee,Ee=null):Wt=Ee.sibling;var Br=X($,Ee,Xe.value,ee);if(Br===null){Ee===null&&(Ee=Wt);break}s&&Ee&&Br.alternate===null&&r($,Ee),D=w(Br,D,Pe),xe===null?me=Br:xe.sibling=Br,xe=Br,Ee=Wt}if(Xe.done)return h($,Ee),dt&&Fa($,Pe),me;if(Ee===null){for(;!Xe.done;Pe++,Xe=B.next())Xe=J($,Xe.value,ee),Xe!==null&&(D=w(Xe,D,Pe),xe===null?me=Xe:xe.sibling=Xe,xe=Xe);return dt&&Fa($,Pe),me}for(Ee=p($,Ee);!Xe.done;Pe++,Xe=B.next())Xe=re(Ee,$,Pe,Xe.value,ee),Xe!==null&&(s&&Xe.alternate!==null&&Ee.delete(Xe.key===null?Pe:Xe.key),D=w(Xe,D,Pe),xe===null?me=Xe:xe.sibling=Xe,xe=Xe);return s&&Ee.forEach(function(KC){return r($,KC)}),dt&&Fa($,Pe),me}function Ct($,D,B,ee){if(typeof B=="object"&&B!==null&&B.type===V&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case j:e:{for(var me=B.key,xe=D;xe!==null;){if(xe.key===me){if(me=B.type,me===V){if(xe.tag===7){h($,xe.sibling),D=y(xe,B.props.children),D.return=$,$=D;break e}}else if(xe.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Q&&ab(me)===xe.type){h($,xe.sibling),D=y(xe,B.props),D.ref=Uu($,xe,B),D.return=$,$=D;break e}h($,xe);break}else r($,xe);xe=xe.sibling}B.type===V?(D=Va(B.props.children,$.mode,ee,B.key),D.return=$,$=D):(ee=Ap(B.type,B.key,B.props,null,$.mode,ee),ee.ref=Uu($,D,B),ee.return=$,$=ee)}return x($);case G:e:{for(xe=B.key;D!==null;){if(D.key===xe)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){h($,D.sibling),D=y(D,B.children||[]),D.return=$,$=D;break e}else{h($,D);break}else r($,D);D=D.sibling}D=Hy(B,$.mode,ee),D.return=$,$=D}return x($);case Q:return xe=B._init,Ct($,D,xe(B._payload),ee)}if(Et(B))return fe($,D,B,ee);if(z(B))return ge($,D,B,ee);Qf($,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(h($,D.sibling),D=y(D,B),D.return=$,$=D):(h($,D),D=zy(B,$.mode,ee),D.return=$,$=D),x($)):h($,D)}return Ct}var Pl=ob(!0),lb=ob(!1),Zf=Rr(null),ep=null,Rl=null,Qm=null;function Zm(){Qm=Rl=ep=null}function ey(s){var r=Zf.current;ut(Zf),s._currentValue=r}function ty(s,r,h){for(;s!==null;){var p=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),s===h)break;s=s.return}}function Ll(s,r){ep=s,Qm=Rl=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&r)!==0&&(jn=!0),s.firstContext=null)}function ws(s){var r=s._currentValue;if(Qm!==s)if(s={context:s,memoizedValue:r,next:null},Rl===null){if(ep===null)throw Error(t(308));Rl=s,ep.dependencies={lanes:0,firstContext:s}}else Rl=Rl.next=s;return r}var ja=null;function ny(s){ja===null?ja=[s]:ja.push(s)}function cb(s,r,h,p){var y=r.interleaved;return y===null?(h.next=h,ny(r)):(h.next=y.next,y.next=h),r.interleaved=h,Di(s,p)}function Di(s,r){s.lanes|=r;var h=s.alternate;for(h!==null&&(h.lanes|=r),h=s,s=s.return;s!==null;)s.childLanes|=r,h=s.alternate,h!==null&&(h.childLanes|=r),h=s,s=s.return;return h.tag===3?h.stateNode:null}var Nr=!1;function sy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ub(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Fi(s,r){return{eventTime:s,lane:r,tag:0,payload:null,callback:null,next:null}}function Mr(s,r,h){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(qe&2)!==0){var y=p.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),p.pending=r,Di(s,h)}return y=p.interleaved,y===null?(r.next=r,ny(p)):(r.next=y.next,y.next=r),p.interleaved=r,Di(s,h)}function tp(s,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194240)!==0)){var p=r.lanes;p&=s.pendingLanes,h|=p,r.lanes=h,ym(s,h)}}function hb(s,r){var h=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var y=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var x={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?y=w=x:w=w.next=x,h=h.next}while(h!==null);w===null?y=w=r:w=w.next=r}else y=w=r;h={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,effects:p.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=r:s.next=r,h.lastBaseUpdate=r}function np(s,r,h,p){var y=s.updateQueue;Nr=!1;var w=y.firstBaseUpdate,x=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var M=L,H=M.next;M.next=null,x===null?w=H:x.next=H,x=M;var Y=s.alternate;Y!==null&&(Y=Y.updateQueue,L=Y.lastBaseUpdate,L!==x&&(L===null?Y.firstBaseUpdate=H:L.next=H,Y.lastBaseUpdate=M))}if(w!==null){var J=y.baseState;x=0,Y=H=M=null,L=w;do{var X=L.lane,re=L.eventTime;if((p&X)===X){Y!==null&&(Y=Y.next={eventTime:re,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var fe=s,ge=L;switch(X=r,re=h,ge.tag){case 1:if(fe=ge.payload,typeof fe=="function"){J=fe.call(re,J,X);break e}J=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ge.payload,X=typeof fe=="function"?fe.call(re,J,X):fe,X==null)break e;J=F({},J,X);break e;case 2:Nr=!0}}L.callback!==null&&L.lane!==0&&(s.flags|=64,X=y.effects,X===null?y.effects=[L]:X.push(L))}else re={eventTime:re,lane:X,tag:L.tag,payload:L.payload,callback:L.callback,next:null},Y===null?(H=Y=re,M=J):Y=Y.next=re,x|=X;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;X=L,L=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);if(Y===null&&(M=J),y.baseState=M,y.firstBaseUpdate=H,y.lastBaseUpdate=Y,r=y.shared.interleaved,r!==null){y=r;do x|=y.lane,y=y.next;while(y!==r)}else w===null&&(y.shared.lanes=0);Ba|=x,s.lanes=x,s.memoizedState=J}}function db(s,r,h){if(s=r.effects,r.effects=null,s!==null)for(r=0;r<s.length;r++){var p=s[r],y=p.callback;if(y!==null){if(p.callback=null,p=h,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Bu={},oi=Rr(Bu),zu=Rr(Bu),Hu=Rr(Bu);function $a(s){if(s===Bu)throw Error(t(174));return s}function iy(s,r){switch(rt(Hu,r),rt(zu,s),rt(oi,Bu),s=r.nodeType,s){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:rm(null,"");break;default:s=s===8?r.parentNode:r,r=s.namespaceURI||null,s=s.tagName,r=rm(r,s)}ut(oi),rt(oi,r)}function Il(){ut(oi),ut(zu),ut(Hu)}function fb(s){$a(Hu.current);var r=$a(oi.current),h=rm(r,s.type);r!==h&&(rt(zu,s),rt(oi,h))}function ry(s){zu.current===s&&(ut(oi),ut(zu))}var mt=Rr(0);function sp(s){for(var r=s;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ay=[];function oy(){for(var s=0;s<ay.length;s++)ay[s]._workInProgressVersionPrimary=null;ay.length=0}var ip=N.ReactCurrentDispatcher,ly=N.ReactCurrentBatchConfig,Ua=0,yt=null,Ft=null,Gt=null,rp=!1,Gu=!1,Vu=0,mC=0;function dn(){throw Error(t(321))}function cy(s,r){if(r===null)return!1;for(var h=0;h<r.length&&h<s.length;h++)if(!Os(s[h],r[h]))return!1;return!0}function uy(s,r,h,p,y,w){if(Ua=w,yt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ip.current=s===null||s.memoizedState===null?_C:bC,s=h(p,y),Gu){w=0;do{if(Gu=!1,Vu=0,25<=w)throw Error(t(301));w+=1,Gt=Ft=null,r.updateQueue=null,ip.current=AC,s=h(p,y)}while(Gu)}if(ip.current=lp,r=Ft!==null&&Ft.next!==null,Ua=0,Gt=Ft=yt=null,rp=!1,r)throw Error(t(300));return s}function hy(){var s=Vu!==0;return Vu=0,s}function li(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?yt.memoizedState=Gt=s:Gt=Gt.next=s,Gt}function _s(){if(Ft===null){var s=yt.alternate;s=s!==null?s.memoizedState:null}else s=Ft.next;var r=Gt===null?yt.memoizedState:Gt.next;if(r!==null)Gt=r,Ft=s;else{if(s===null)throw Error(t(310));Ft=s,s={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Gt===null?yt.memoizedState=Gt=s:Gt=Gt.next=s}return Gt}function Wu(s,r){return typeof r=="function"?r(s):r}function dy(s){var r=_s(),h=r.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=s;var p=Ft,y=p.baseQueue,w=h.pending;if(w!==null){if(y!==null){var x=y.next;y.next=w.next,w.next=x}p.baseQueue=y=w,h.pending=null}if(y!==null){w=y.next,p=p.baseState;var L=x=null,M=null,H=w;do{var Y=H.lane;if((Ua&Y)===Y)M!==null&&(M=M.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),p=H.hasEagerState?H.eagerState:s(p,H.action);else{var J={lane:Y,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};M===null?(L=M=J,x=p):M=M.next=J,yt.lanes|=Y,Ba|=Y}H=H.next}while(H!==null&&H!==w);M===null?x=p:M.next=L,Os(p,r.memoizedState)||(jn=!0),r.memoizedState=p,r.baseState=x,r.baseQueue=M,h.lastRenderedState=p}if(s=h.interleaved,s!==null){y=s;do w=y.lane,yt.lanes|=w,Ba|=w,y=y.next;while(y!==s)}else y===null&&(h.lanes=0);return[r.memoizedState,h.dispatch]}function fy(s){var r=_s(),h=r.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=s;var p=h.dispatch,y=h.pending,w=r.memoizedState;if(y!==null){h.pending=null;var x=y=y.next;do w=s(w,x.action),x=x.next;while(x!==y);Os(w,r.memoizedState)||(jn=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),h.lastRenderedState=w}return[w,p]}function pb(){}function gb(s,r){var h=yt,p=_s(),y=r(),w=!Os(p.memoizedState,y);if(w&&(p.memoizedState=y,jn=!0),p=p.queue,py(vb.bind(null,h,p,s),[s]),p.getSnapshot!==r||w||Gt!==null&&Gt.memoizedState.tag&1){if(h.flags|=2048,qu(9,yb.bind(null,h,p,y,r),void 0,null),Vt===null)throw Error(t(349));(Ua&30)!==0||mb(h,r,y)}return y}function mb(s,r,h){s.flags|=16384,s={getSnapshot:r,value:h},r=yt.updateQueue,r===null?(r={lastEffect:null,stores:null},yt.updateQueue=r,r.stores=[s]):(h=r.stores,h===null?r.stores=[s]:h.push(s))}function yb(s,r,h,p){r.value=h,r.getSnapshot=p,wb(r)&&_b(s)}function vb(s,r,h){return h(function(){wb(r)&&_b(s)})}function wb(s){var r=s.getSnapshot;s=s.value;try{var h=r();return!Os(s,h)}catch{return!0}}function _b(s){var r=Di(s,1);r!==null&&Us(r,s,1,-1)}function bb(s){var r=li();return typeof s=="function"&&(s=s()),r.memoizedState=r.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:s},r.queue=s,s=s.dispatch=wC.bind(null,yt,s),[r.memoizedState,s]}function qu(s,r,h,p){return s={tag:s,create:r,destroy:h,deps:p,next:null},r=yt.updateQueue,r===null?(r={lastEffect:null,stores:null},yt.updateQueue=r,r.lastEffect=s.next=s):(h=r.lastEffect,h===null?r.lastEffect=s.next=s:(p=h.next,h.next=s,s.next=p,r.lastEffect=s)),s}function Ab(){return _s().memoizedState}function ap(s,r,h,p){var y=li();yt.flags|=s,y.memoizedState=qu(1|r,h,void 0,p===void 0?null:p)}function op(s,r,h,p){var y=_s();p=p===void 0?null:p;var w=void 0;if(Ft!==null){var x=Ft.memoizedState;if(w=x.destroy,p!==null&&cy(p,x.deps)){y.memoizedState=qu(r,h,w,p);return}}yt.flags|=s,y.memoizedState=qu(1|r,h,w,p)}function Sb(s,r){return ap(8390656,8,s,r)}function py(s,r){return op(2048,8,s,r)}function xb(s,r){return op(4,2,s,r)}function Eb(s,r){return op(4,4,s,r)}function kb(s,r){if(typeof r=="function")return s=s(),r(s),function(){r(null)};if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Cb(s,r,h){return h=h!=null?h.concat([s]):null,op(4,4,kb.bind(null,r,s),h)}function gy(){}function Tb(s,r){var h=_s();r=r===void 0?null:r;var p=h.memoizedState;return p!==null&&r!==null&&cy(r,p[1])?p[0]:(h.memoizedState=[s,r],s)}function Pb(s,r){var h=_s();r=r===void 0?null:r;var p=h.memoizedState;return p!==null&&r!==null&&cy(r,p[1])?p[0]:(s=s(),h.memoizedState=[s,r],s)}function Rb(s,r,h){return(Ua&21)===0?(s.baseState&&(s.baseState=!1,jn=!0),s.memoizedState=h):(Os(h,r)||(h=a_(),yt.lanes|=h,Ba|=h,s.baseState=!0),r)}function yC(s,r){var h=Qe;Qe=h!==0&&4>h?h:4,s(!0);var p=ly.transition;ly.transition={};try{s(!1),r()}finally{Qe=h,ly.transition=p}}function Lb(){return _s().memoizedState}function vC(s,r,h){var p=jr(s);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},Ib(s))Nb(r,h);else if(h=cb(s,r,h,p),h!==null){var y=kn();Us(h,s,p,y),Mb(h,r,p)}}function wC(s,r,h){var p=jr(s),y={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(Ib(s))Nb(r,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var x=r.lastRenderedState,L=w(x,h);if(y.hasEagerState=!0,y.eagerState=L,Os(L,x)){var M=r.interleaved;M===null?(y.next=y,ny(r)):(y.next=M.next,M.next=y),r.interleaved=y;return}}catch{}finally{}h=cb(s,r,y,p),h!==null&&(y=kn(),Us(h,s,p,y),Mb(h,r,p))}}function Ib(s){var r=s.alternate;return s===yt||r!==null&&r===yt}function Nb(s,r){Gu=rp=!0;var h=s.pending;h===null?r.next=r:(r.next=h.next,h.next=r),s.pending=r}function Mb(s,r,h){if((h&4194240)!==0){var p=r.lanes;p&=s.pendingLanes,h|=p,r.lanes=h,ym(s,h)}}var lp={readContext:ws,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},_C={readContext:ws,useCallback:function(s,r){return li().memoizedState=[s,r===void 0?null:r],s},useContext:ws,useEffect:Sb,useImperativeHandle:function(s,r,h){return h=h!=null?h.concat([s]):null,ap(4194308,4,kb.bind(null,r,s),h)},useLayoutEffect:function(s,r){return ap(4194308,4,s,r)},useInsertionEffect:function(s,r){return ap(4,2,s,r)},useMemo:function(s,r){var h=li();return r=r===void 0?null:r,s=s(),h.memoizedState=[s,r],s},useReducer:function(s,r,h){var p=li();return r=h!==void 0?h(r):r,p.memoizedState=p.baseState=r,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:r},p.queue=s,s=s.dispatch=vC.bind(null,yt,s),[p.memoizedState,s]},useRef:function(s){var r=li();return s={current:s},r.memoizedState=s},useState:bb,useDebugValue:gy,useDeferredValue:function(s){return li().memoizedState=s},useTransition:function(){var s=bb(!1),r=s[0];return s=yC.bind(null,s[1]),li().memoizedState=s,[r,s]},useMutableSource:function(){},useSyncExternalStore:function(s,r,h){var p=yt,y=li();if(dt){if(h===void 0)throw Error(t(407));h=h()}else{if(h=r(),Vt===null)throw Error(t(349));(Ua&30)!==0||mb(p,r,h)}y.memoizedState=h;var w={value:h,getSnapshot:r};return y.queue=w,Sb(vb.bind(null,p,w,s),[s]),p.flags|=2048,qu(9,yb.bind(null,p,w,h,r),void 0,null),h},useId:function(){var s=li(),r=Vt.identifierPrefix;if(dt){var h=Oi,p=Mi;h=(p&~(1<<32-Ms(p)-1)).toString(32)+h,r=":"+r+"R"+h,h=Vu++,0<h&&(r+="H"+h.toString(32)),r+=":"}else h=mC++,r=":"+r+"r"+h.toString(32)+":";return s.memoizedState=r},unstable_isNewReconciler:!1},bC={readContext:ws,useCallback:Tb,useContext:ws,useEffect:py,useImperativeHandle:Cb,useInsertionEffect:xb,useLayoutEffect:Eb,useMemo:Pb,useReducer:dy,useRef:Ab,useState:function(){return dy(Wu)},useDebugValue:gy,useDeferredValue:function(s){var r=_s();return Rb(r,Ft.memoizedState,s)},useTransition:function(){var s=dy(Wu)[0],r=_s().memoizedState;return[s,r]},useMutableSource:pb,useSyncExternalStore:gb,useId:Lb,unstable_isNewReconciler:!1},AC={readContext:ws,useCallback:Tb,useContext:ws,useEffect:py,useImperativeHandle:Cb,useInsertionEffect:xb,useLayoutEffect:Eb,useMemo:Pb,useReducer:fy,useRef:Ab,useState:function(){return fy(Wu)},useDebugValue:gy,useDeferredValue:function(s){var r=_s();return Ft===null?r.memoizedState=s:Rb(r,Ft.memoizedState,s)},useTransition:function(){var s=fy(Wu)[0],r=_s().memoizedState;return[s,r]},useMutableSource:pb,useSyncExternalStore:gb,useId:Lb,unstable_isNewReconciler:!1};function Fs(s,r){if(s&&s.defaultProps){r=F({},r),s=s.defaultProps;for(var h in s)r[h]===void 0&&(r[h]=s[h]);return r}return r}function my(s,r,h,p){r=s.memoizedState,h=h(p,r),h=h==null?r:F({},r,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var cp={isMounted:function(s){return(s=s._reactInternals)?Na(s)===s:!1},enqueueSetState:function(s,r,h){s=s._reactInternals;var p=kn(),y=jr(s),w=Fi(p,y);w.payload=r,h!=null&&(w.callback=h),r=Mr(s,w,y),r!==null&&(Us(r,s,y,p),tp(r,s,y))},enqueueReplaceState:function(s,r,h){s=s._reactInternals;var p=kn(),y=jr(s),w=Fi(p,y);w.tag=1,w.payload=r,h!=null&&(w.callback=h),r=Mr(s,w,y),r!==null&&(Us(r,s,y,p),tp(r,s,y))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var h=kn(),p=jr(s),y=Fi(h,p);y.tag=2,r!=null&&(y.callback=r),r=Mr(s,y,p),r!==null&&(Us(r,s,p,h),tp(r,s,p))}};function Ob(s,r,h,p,y,w,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,w,x):r.prototype&&r.prototype.isPureReactComponent?!Nu(h,p)||!Nu(y,w):!0}function Db(s,r,h){var p=!1,y=Lr,w=r.contextType;return typeof w=="object"&&w!==null?w=ws(w):(y=Fn(r)?Oa:hn.current,p=r.contextTypes,w=(p=p!=null)?El(s,y):Lr),r=new r(h,w),s.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=cp,s.stateNode=r,r._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=w),r}function Fb(s,r,h,p){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,p),r.state!==s&&cp.enqueueReplaceState(r,r.state,null)}function yy(s,r,h,p){var y=s.stateNode;y.props=h,y.state=s.memoizedState,y.refs={},sy(s);var w=r.contextType;typeof w=="object"&&w!==null?y.context=ws(w):(w=Fn(r)?Oa:hn.current,y.context=El(s,w)),y.state=s.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(my(s,r,w,h),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(r=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),r!==y.state&&cp.enqueueReplaceState(y,y.state,null),np(s,h,y,p),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function Nl(s,r){try{var h="",p=r;do h+=_e(p),p=p.return;while(p);var y=h}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:r,stack:y,digest:null}}function vy(s,r,h){return{value:s,source:null,stack:h??null,digest:r??null}}function wy(s,r){try{console.error(r.value)}catch(h){setTimeout(function(){throw h})}}var SC=typeof WeakMap=="function"?WeakMap:Map;function jb(s,r,h){h=Fi(-1,h),h.tag=3,h.payload={element:null};var p=r.value;return h.callback=function(){mp||(mp=!0,My=p),wy(s,r)},h}function $b(s,r,h){h=Fi(-1,h),h.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var y=r.value;h.payload=function(){return p(y)},h.callback=function(){wy(s,r)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){wy(s,r),typeof p!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})}),h}function Ub(s,r,h){var p=s.pingCache;if(p===null){p=s.pingCache=new SC;var y=new Set;p.set(r,y)}else y=p.get(r),y===void 0&&(y=new Set,p.set(r,y));y.has(h)||(y.add(h),s=FC.bind(null,s,r,h),r.then(s,s))}function Bb(s){do{var r;if((r=s.tag===13)&&(r=s.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return s;s=s.return}while(s!==null);return null}function zb(s,r,h,p,y){return(s.mode&1)===0?(s===r?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(r=Fi(-1,1),r.tag=2,Mr(h,r,1))),h.lanes|=1),s):(s.flags|=65536,s.lanes=y,s)}var xC=N.ReactCurrentOwner,jn=!1;function En(s,r,h,p){r.child=s===null?lb(r,null,h,p):Pl(r,s.child,h,p)}function Hb(s,r,h,p,y){h=h.render;var w=r.ref;return Ll(r,y),p=uy(s,r,h,p,w,y),h=hy(),s!==null&&!jn?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~y,ji(s,r,y)):(dt&&h&&qm(r),r.flags|=1,En(s,r,p,y),r.child)}function Gb(s,r,h,p,y){if(s===null){var w=h.type;return typeof w=="function"&&!By(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(r.tag=15,r.type=w,Vb(s,r,w,p,y)):(s=Ap(h.type,null,p,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(w=s.child,(s.lanes&y)===0){var x=w.memoizedProps;if(h=h.compare,h=h!==null?h:Nu,h(x,p)&&s.ref===r.ref)return ji(s,r,y)}return r.flags|=1,s=Ur(w,p),s.ref=r.ref,s.return=r,r.child=s}function Vb(s,r,h,p,y){if(s!==null){var w=s.memoizedProps;if(Nu(w,p)&&s.ref===r.ref)if(jn=!1,r.pendingProps=p=w,(s.lanes&y)!==0)(s.flags&131072)!==0&&(jn=!0);else return r.lanes=s.lanes,ji(s,r,y)}return _y(s,r,h,p,y)}function Wb(s,r,h){var p=r.pendingProps,y=p.children,w=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ol,Zn),Zn|=h;else{if((h&1073741824)===0)return s=w!==null?w.baseLanes|h:h,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:s,cachePool:null,transitions:null},r.updateQueue=null,rt(Ol,Zn),Zn|=s,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:h,rt(Ol,Zn),Zn|=p}else w!==null?(p=w.baseLanes|h,r.memoizedState=null):p=h,rt(Ol,Zn),Zn|=p;return En(s,r,y,h),r.child}function qb(s,r){var h=r.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(r.flags|=512,r.flags|=2097152)}function _y(s,r,h,p,y){var w=Fn(h)?Oa:hn.current;return w=El(r,w),Ll(r,y),h=uy(s,r,h,p,w,y),p=hy(),s!==null&&!jn?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~y,ji(s,r,y)):(dt&&p&&qm(r),r.flags|=1,En(s,r,h,y),r.child)}function Kb(s,r,h,p,y){if(Fn(h)){var w=!0;qf(r)}else w=!1;if(Ll(r,y),r.stateNode===null)hp(s,r),Db(r,h,p),yy(r,h,p,y),p=!0;else if(s===null){var x=r.stateNode,L=r.memoizedProps;x.props=L;var M=x.context,H=h.contextType;typeof H=="object"&&H!==null?H=ws(H):(H=Fn(h)?Oa:hn.current,H=El(r,H));var Y=h.getDerivedStateFromProps,J=typeof Y=="function"||typeof x.getSnapshotBeforeUpdate=="function";J||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(L!==p||M!==H)&&Fb(r,x,p,H),Nr=!1;var X=r.memoizedState;x.state=X,np(r,p,x,y),M=r.memoizedState,L!==p||X!==M||Dn.current||Nr?(typeof Y=="function"&&(my(r,h,Y,p),M=r.memoizedState),(L=Nr||Ob(r,h,L,p,X,M,H))?(J||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=M),x.props=p,x.state=M,x.context=H,p=L):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{x=r.stateNode,ub(s,r),L=r.memoizedProps,H=r.type===r.elementType?L:Fs(r.type,L),x.props=H,J=r.pendingProps,X=x.context,M=h.contextType,typeof M=="object"&&M!==null?M=ws(M):(M=Fn(h)?Oa:hn.current,M=El(r,M));var re=h.getDerivedStateFromProps;(Y=typeof re=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(L!==J||X!==M)&&Fb(r,x,p,M),Nr=!1,X=r.memoizedState,x.state=X,np(r,p,x,y);var fe=r.memoizedState;L!==J||X!==fe||Dn.current||Nr?(typeof re=="function"&&(my(r,h,re,p),fe=r.memoizedState),(H=Nr||Ob(r,h,H,p,X,fe,M)||!1)?(Y||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,fe,M),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,fe,M)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||L===s.memoizedProps&&X===s.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&X===s.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=fe),x.props=p,x.state=fe,x.context=M,p=H):(typeof x.componentDidUpdate!="function"||L===s.memoizedProps&&X===s.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&X===s.memoizedState||(r.flags|=1024),p=!1)}return by(s,r,h,p,w,y)}function by(s,r,h,p,y,w){qb(s,r);var x=(r.flags&128)!==0;if(!p&&!x)return y&&Z_(r,h,!1),ji(s,r,w);p=r.stateNode,xC.current=r;var L=x&&typeof h.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,s!==null&&x?(r.child=Pl(r,s.child,null,w),r.child=Pl(r,null,L,w)):En(s,r,L,w),r.memoizedState=p.state,y&&Z_(r,h,!0),r.child}function Xb(s){var r=s.stateNode;r.pendingContext?J_(s,r.pendingContext,r.pendingContext!==r.context):r.context&&J_(s,r.context,!1),iy(s,r.containerInfo)}function Yb(s,r,h,p,y){return Tl(),Jm(y),r.flags|=256,En(s,r,h,p),r.child}var Ay={dehydrated:null,treeContext:null,retryLane:0};function Sy(s){return{baseLanes:s,cachePool:null,transitions:null}}function Jb(s,r,h){var p=r.pendingProps,y=mt.current,w=!1,x=(r.flags&128)!==0,L;if((L=x)||(L=s!==null&&s.memoizedState===null?!1:(y&2)!==0),L?(w=!0,r.flags&=-129):(s===null||s.memoizedState!==null)&&(y|=1),rt(mt,y&1),s===null)return Ym(r),s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((r.mode&1)===0?r.lanes=1:s.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(x=p.children,s=p.fallback,w?(p=r.mode,w=r.child,x={mode:"hidden",children:x},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=x):w=Sp(x,p,0,null),s=Va(s,p,h,null),w.return=r,s.return=r,w.sibling=s,r.child=w,r.child.memoizedState=Sy(h),r.memoizedState=Ay,s):xy(r,x));if(y=s.memoizedState,y!==null&&(L=y.dehydrated,L!==null))return EC(s,r,x,p,L,y,h);if(w){w=p.fallback,x=r.mode,y=s.child,L=y.sibling;var M={mode:"hidden",children:p.children};return(x&1)===0&&r.child!==y?(p=r.child,p.childLanes=0,p.pendingProps=M,r.deletions=null):(p=Ur(y,M),p.subtreeFlags=y.subtreeFlags&14680064),L!==null?w=Ur(L,w):(w=Va(w,x,h,null),w.flags|=2),w.return=r,p.return=r,p.sibling=w,r.child=p,p=w,w=r.child,x=s.child.memoizedState,x=x===null?Sy(h):{baseLanes:x.baseLanes|h,cachePool:null,transitions:x.transitions},w.memoizedState=x,w.childLanes=s.childLanes&~h,r.memoizedState=Ay,p}return w=s.child,s=w.sibling,p=Ur(w,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=h),p.return=r,p.sibling=null,s!==null&&(h=r.deletions,h===null?(r.deletions=[s],r.flags|=16):h.push(s)),r.child=p,r.memoizedState=null,p}function xy(s,r){return r=Sp({mode:"visible",children:r},s.mode,0,null),r.return=s,s.child=r}function up(s,r,h,p){return p!==null&&Jm(p),Pl(r,s.child,null,h),s=xy(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function EC(s,r,h,p,y,w,x){if(h)return r.flags&256?(r.flags&=-257,p=vy(Error(t(422))),up(s,r,x,p)):r.memoizedState!==null?(r.child=s.child,r.flags|=128,null):(w=p.fallback,y=r.mode,p=Sp({mode:"visible",children:p.children},y,0,null),w=Va(w,y,x,null),w.flags|=2,p.return=r,w.return=r,p.sibling=w,r.child=p,(r.mode&1)!==0&&Pl(r,s.child,null,x),r.child.memoizedState=Sy(x),r.memoizedState=Ay,w);if((r.mode&1)===0)return up(s,r,x,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var L=p.dgst;return p=L,w=Error(t(419)),p=vy(w,p,void 0),up(s,r,x,p)}if(L=(x&s.childLanes)!==0,jn||L){if(p=Vt,p!==null){switch(x&-x){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|x))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,Di(s,y),Us(p,s,y,-1))}return Uy(),p=vy(Error(t(421))),up(s,r,x,p)}return y.data==="$?"?(r.flags|=128,r.child=s.child,r=jC.bind(null,s),y._reactRetry=r,null):(s=w.treeContext,Qn=Pr(y.nextSibling),Jn=r,dt=!0,Ds=null,s!==null&&(ys[vs++]=Mi,ys[vs++]=Oi,ys[vs++]=Da,Mi=s.id,Oi=s.overflow,Da=r),r=xy(r,p.children),r.flags|=4096,r)}function Qb(s,r,h){s.lanes|=r;var p=s.alternate;p!==null&&(p.lanes|=r),ty(s.return,r,h)}function Ey(s,r,h,p,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:y}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=h,w.tailMode=y)}function Zb(s,r,h){var p=r.pendingProps,y=p.revealOrder,w=p.tail;if(En(s,r,p.children,h),p=mt.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Qb(s,h,r);else if(s.tag===19)Qb(s,h,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(rt(mt,p),(r.mode&1)===0)r.memoizedState=null;else switch(y){case"forwards":for(h=r.child,y=null;h!==null;)s=h.alternate,s!==null&&sp(s)===null&&(y=h),h=h.sibling;h=y,h===null?(y=r.child,r.child=null):(y=h.sibling,h.sibling=null),Ey(r,!1,y,h,w);break;case"backwards":for(h=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&sp(s)===null){r.child=y;break}s=y.sibling,y.sibling=h,h=y,y=s}Ey(r,!0,h,null,w);break;case"together":Ey(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function hp(s,r){(r.mode&1)===0&&s!==null&&(s.alternate=null,r.alternate=null,r.flags|=2)}function ji(s,r,h){if(s!==null&&(r.dependencies=s.dependencies),Ba|=r.lanes,(h&r.childLanes)===0)return null;if(s!==null&&r.child!==s.child)throw Error(t(153));if(r.child!==null){for(s=r.child,h=Ur(s,s.pendingProps),r.child=h,h.return=r;s.sibling!==null;)s=s.sibling,h=h.sibling=Ur(s,s.pendingProps),h.return=r;h.sibling=null}return r.child}function kC(s,r,h){switch(r.tag){case 3:Xb(r),Tl();break;case 5:fb(r);break;case 1:Fn(r.type)&&qf(r);break;case 4:iy(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,y=r.memoizedProps.value;rt(Zf,p._currentValue),p._currentValue=y;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(rt(mt,mt.current&1),r.flags|=128,null):(h&r.child.childLanes)!==0?Jb(s,r,h):(rt(mt,mt.current&1),s=ji(s,r,h),s!==null?s.sibling:null);rt(mt,mt.current&1);break;case 19:if(p=(h&r.childLanes)!==0,(s.flags&128)!==0){if(p)return Zb(s,r,h);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),rt(mt,mt.current),p)break;return null;case 22:case 23:return r.lanes=0,Wb(s,r,h)}return ji(s,r,h)}var eA,ky,tA,nA;eA=function(s,r){for(var h=r.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break;for(;h.sibling===null;){if(h.return===null||h.return===r)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},ky=function(){},tA=function(s,r,h,p){var y=s.memoizedProps;if(y!==p){s=r.stateNode,$a(oi.current);var w=null;switch(h){case"input":y=xt(s,y),p=xt(s,p),w=[];break;case"select":y=F({},y,{value:void 0}),p=F({},p,{value:void 0}),w=[];break;case"textarea":y=Ar(s,y),p=Ar(s,p),w=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Gf)}am(h,p);var x;h=null;for(H in y)if(!p.hasOwnProperty(H)&&y.hasOwnProperty(H)&&y[H]!=null)if(H==="style"){var L=y[H];for(x in L)L.hasOwnProperty(x)&&(h||(h={}),h[x]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(i.hasOwnProperty(H)?w||(w=[]):(w=w||[]).push(H,null));for(H in p){var M=p[H];if(L=y!=null?y[H]:void 0,p.hasOwnProperty(H)&&M!==L&&(M!=null||L!=null))if(H==="style")if(L){for(x in L)!L.hasOwnProperty(x)||M&&M.hasOwnProperty(x)||(h||(h={}),h[x]="");for(x in M)M.hasOwnProperty(x)&&L[x]!==M[x]&&(h||(h={}),h[x]=M[x])}else h||(w||(w=[]),w.push(H,h)),h=M;else H==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,L=L?L.__html:void 0,M!=null&&L!==M&&(w=w||[]).push(H,M)):H==="children"?typeof M!="string"&&typeof M!="number"||(w=w||[]).push(H,""+M):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(i.hasOwnProperty(H)?(M!=null&&H==="onScroll"&&ct("scroll",s),w||L===M||(w=[])):(w=w||[]).push(H,M))}h&&(w=w||[]).push("style",h);var H=w;(r.updateQueue=H)&&(r.flags|=4)}},nA=function(s,r,h,p){h!==p&&(r.flags|=4)};function Ku(s,r){if(!dt)switch(s.tailMode){case"hidden":r=s.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function fn(s){var r=s.alternate!==null&&s.alternate.child===s.child,h=0,p=0;if(r)for(var y=s.child;y!==null;)h|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)h|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=p,s.childLanes=h,r}function CC(s,r,h){var p=r.pendingProps;switch(Km(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(r),null;case 1:return Fn(r.type)&&Wf(),fn(r),null;case 3:return p=r.stateNode,Il(),ut(Dn),ut(hn),oy(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Jf(r)?r.flags|=4:s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ds!==null&&(Fy(Ds),Ds=null))),ky(s,r),fn(r),null;case 5:ry(r);var y=$a(Hu.current);if(h=r.type,s!==null&&r.stateNode!=null)tA(s,r,h,p,y),s.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(t(166));return fn(r),null}if(s=$a(oi.current),Jf(r)){p=r.stateNode,h=r.type;var w=r.memoizedProps;switch(p[ai]=r,p[ju]=w,s=(r.mode&1)!==0,h){case"dialog":ct("cancel",p),ct("close",p);break;case"iframe":case"object":case"embed":ct("load",p);break;case"video":case"audio":for(y=0;y<Ou.length;y++)ct(Ou[y],p);break;case"source":ct("error",p);break;case"img":case"image":case"link":ct("error",p),ct("load",p);break;case"details":ct("toggle",p);break;case"input":xn(p,w),ct("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},ct("invalid",p);break;case"textarea":fl(p,w),ct("invalid",p)}am(h,w),y=null;for(var x in w)if(w.hasOwnProperty(x)){var L=w[x];x==="children"?typeof L=="string"?p.textContent!==L&&(w.suppressHydrationWarning!==!0&&Hf(p.textContent,L,s),y=["children",L]):typeof L=="number"&&p.textContent!==""+L&&(w.suppressHydrationWarning!==!0&&Hf(p.textContent,L,s),y=["children",""+L]):i.hasOwnProperty(x)&&L!=null&&x==="onScroll"&&ct("scroll",p)}switch(h){case"input":pe(p),bt(p,w,!0);break;case"textarea":pe(p),Bw(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Gf)}p=y,r.updateQueue=p,p!==null&&(r.flags|=4)}else{x=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=zw(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=x.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=x.createElement(h,{is:p.is}):(s=x.createElement(h),h==="select"&&(x=s,p.multiple?x.multiple=!0:p.size&&(x.size=p.size))):s=x.createElementNS(s,h),s[ai]=r,s[ju]=p,eA(s,r,!1,!1),r.stateNode=s;e:{switch(x=om(h,p),h){case"dialog":ct("cancel",s),ct("close",s),y=p;break;case"iframe":case"object":case"embed":ct("load",s),y=p;break;case"video":case"audio":for(y=0;y<Ou.length;y++)ct(Ou[y],s);y=p;break;case"source":ct("error",s),y=p;break;case"img":case"image":case"link":ct("error",s),ct("load",s),y=p;break;case"details":ct("toggle",s),y=p;break;case"input":xn(s,p),y=xt(s,p),ct("invalid",s);break;case"option":y=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},y=F({},p,{value:void 0}),ct("invalid",s);break;case"textarea":fl(s,p),y=Ar(s,p),ct("invalid",s);break;default:y=p}am(h,y),L=y;for(w in L)if(L.hasOwnProperty(w)){var M=L[w];w==="style"?Vw(s,M):w==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&Hw(s,M)):w==="children"?typeof M=="string"?(h!=="textarea"||M!=="")&&mu(s,M):typeof M=="number"&&mu(s,""+M):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?M!=null&&w==="onScroll"&&ct("scroll",s):M!=null&&O(s,w,M,x))}switch(h){case"input":pe(s),bt(s,p,!1);break;case"textarea":pe(s),Bw(s);break;case"option":p.value!=null&&s.setAttribute("value",""+be(p.value));break;case"select":s.multiple=!!p.multiple,w=p.value,w!=null?un(s,!!p.multiple,w,!1):p.defaultValue!=null&&un(s,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=Gf)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return fn(r),null;case 6:if(s&&r.stateNode!=null)nA(s,r,s.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(t(166));if(h=$a(Hu.current),$a(oi.current),Jf(r)){if(p=r.stateNode,h=r.memoizedProps,p[ai]=r,(w=p.nodeValue!==h)&&(s=Jn,s!==null))switch(s.tag){case 3:Hf(p.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Hf(p.nodeValue,h,(s.mode&1)!==0)}w&&(r.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[ai]=r,r.stateNode=p}return fn(r),null;case 13:if(ut(mt),p=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(dt&&Qn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)rb(),Tl(),r.flags|=98560,w=!1;else if(w=Jf(r),p!==null&&p.dehydrated!==null){if(s===null){if(!w)throw Error(t(318));if(w=r.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[ai]=r}else Tl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;fn(r),w=!1}else Ds!==null&&(Fy(Ds),Ds=null),w=!0;if(!w)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=h,r):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(s===null||(mt.current&1)!==0?jt===0&&(jt=3):Uy())),r.updateQueue!==null&&(r.flags|=4),fn(r),null);case 4:return Il(),ky(s,r),s===null&&Du(r.stateNode.containerInfo),fn(r),null;case 10:return ey(r.type._context),fn(r),null;case 17:return Fn(r.type)&&Wf(),fn(r),null;case 19:if(ut(mt),w=r.memoizedState,w===null)return fn(r),null;if(p=(r.flags&128)!==0,x=w.rendering,x===null)if(p)Ku(w,!1);else{if(jt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(x=sp(s),x!==null){for(r.flags|=128,Ku(w,!1),p=x.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=h,h=r.child;h!==null;)w=h,s=p,w.flags&=14680066,x=w.alternate,x===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=x.childLanes,w.lanes=x.lanes,w.child=x.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=x.memoizedProps,w.memoizedState=x.memoizedState,w.updateQueue=x.updateQueue,w.type=x.type,s=x.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return rt(mt,mt.current&1|2),r.child}s=s.sibling}w.tail!==null&&kt()>Dl&&(r.flags|=128,p=!0,Ku(w,!1),r.lanes=4194304)}else{if(!p)if(s=sp(x),s!==null){if(r.flags|=128,p=!0,h=s.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),Ku(w,!0),w.tail===null&&w.tailMode==="hidden"&&!x.alternate&&!dt)return fn(r),null}else 2*kt()-w.renderingStartTime>Dl&&h!==1073741824&&(r.flags|=128,p=!0,Ku(w,!1),r.lanes=4194304);w.isBackwards?(x.sibling=r.child,r.child=x):(h=w.last,h!==null?h.sibling=x:r.child=x,w.last=x)}return w.tail!==null?(r=w.tail,w.rendering=r,w.tail=r.sibling,w.renderingStartTime=kt(),r.sibling=null,h=mt.current,rt(mt,p?h&1|2:h&1),r):(fn(r),null);case 22:case 23:return $y(),p=r.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(Zn&1073741824)!==0&&(fn(r),r.subtreeFlags&6&&(r.flags|=8192)):fn(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function TC(s,r){switch(Km(r),r.tag){case 1:return Fn(r.type)&&Wf(),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Il(),ut(Dn),ut(hn),oy(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 5:return ry(r),null;case 13:if(ut(mt),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Tl()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ut(mt),null;case 4:return Il(),null;case 10:return ey(r.type._context),null;case 22:case 23:return $y(),null;case 24:return null;default:return null}}var dp=!1,pn=!1,PC=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Ml(s,r){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){At(s,r,p)}else h.current=null}function Cy(s,r,h){try{h()}catch(p){At(s,r,p)}}var sA=!1;function RC(s,r){if($m=If,s=O_(),Lm(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break e}var x=0,L=-1,M=-1,H=0,Y=0,J=s,X=null;t:for(;;){for(var re;J!==h||y!==0&&J.nodeType!==3||(L=x+y),J!==w||p!==0&&J.nodeType!==3||(M=x+p),J.nodeType===3&&(x+=J.nodeValue.length),(re=J.firstChild)!==null;)X=J,J=re;for(;;){if(J===s)break t;if(X===h&&++H===y&&(L=x),X===w&&++Y===p&&(M=x),(re=J.nextSibling)!==null)break;J=X,X=J.parentNode}J=re}h=L===-1||M===-1?null:{start:L,end:M}}else h=null}h=h||{start:0,end:0}}else h=null;for(Um={focusedElem:s,selectionRange:h},If=!1,ue=r;ue!==null;)if(r=ue,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,ue=s;else for(;ue!==null;){r=ue;try{var fe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var ge=fe.memoizedProps,Ct=fe.memoizedState,$=r.stateNode,D=$.getSnapshotBeforeUpdate(r.elementType===r.type?ge:Fs(r.type,ge),Ct);$.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=r.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){At(r,r.return,ee)}if(s=r.sibling,s!==null){s.return=r.return,ue=s;break}ue=r.return}return fe=sA,sA=!1,fe}function Xu(s,r,h){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&s)===s){var w=y.destroy;y.destroy=void 0,w!==void 0&&Cy(r,h,w)}y=y.next}while(y!==p)}}function fp(s,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var h=r=r.next;do{if((h.tag&s)===s){var p=h.create;h.destroy=p()}h=h.next}while(h!==r)}}function Ty(s){var r=s.ref;if(r!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof r=="function"?r(s):r.current=s}}function iA(s){var r=s.alternate;r!==null&&(s.alternate=null,iA(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&(delete r[ai],delete r[ju],delete r[Gm],delete r[dC],delete r[fC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function rA(s){return s.tag===5||s.tag===3||s.tag===4}function aA(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Py(s,r,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,r?h.nodeType===8?h.parentNode.insertBefore(s,r):h.insertBefore(s,r):(h.nodeType===8?(r=h.parentNode,r.insertBefore(s,h)):(r=h,r.appendChild(s)),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=Gf));else if(p!==4&&(s=s.child,s!==null))for(Py(s,r,h),s=s.sibling;s!==null;)Py(s,r,h),s=s.sibling}function Ry(s,r,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,r?h.insertBefore(s,r):h.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(Ry(s,r,h),s=s.sibling;s!==null;)Ry(s,r,h),s=s.sibling}var tn=null,js=!1;function Or(s,r,h){for(h=h.child;h!==null;)oA(s,r,h),h=h.sibling}function oA(s,r,h){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(kf,h)}catch{}switch(h.tag){case 5:pn||Ml(h,r);case 6:var p=tn,y=js;tn=null,Or(s,r,h),tn=p,js=y,tn!==null&&(js?(s=tn,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):tn.removeChild(h.stateNode));break;case 18:tn!==null&&(js?(s=tn,h=h.stateNode,s.nodeType===8?Hm(s.parentNode,h):s.nodeType===1&&Hm(s,h),Cu(s)):Hm(tn,h.stateNode));break;case 4:p=tn,y=js,tn=h.stateNode.containerInfo,js=!0,Or(s,r,h),tn=p,js=y;break;case 0:case 11:case 14:case 15:if(!pn&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var w=y,x=w.destroy;w=w.tag,x!==void 0&&((w&2)!==0||(w&4)!==0)&&Cy(h,r,x),y=y.next}while(y!==p)}Or(s,r,h);break;case 1:if(!pn&&(Ml(h,r),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(L){At(h,r,L)}Or(s,r,h);break;case 21:Or(s,r,h);break;case 22:h.mode&1?(pn=(p=pn)||h.memoizedState!==null,Or(s,r,h),pn=p):Or(s,r,h);break;default:Or(s,r,h)}}function lA(s){var r=s.updateQueue;if(r!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new PC),r.forEach(function(p){var y=$C.bind(null,s,p);h.has(p)||(h.add(p),p.then(y,y))})}}function $s(s,r){var h=r.deletions;if(h!==null)for(var p=0;p<h.length;p++){var y=h[p];try{var w=s,x=r,L=x;e:for(;L!==null;){switch(L.tag){case 5:tn=L.stateNode,js=!1;break e;case 3:tn=L.stateNode.containerInfo,js=!0;break e;case 4:tn=L.stateNode.containerInfo,js=!0;break e}L=L.return}if(tn===null)throw Error(t(160));oA(w,x,y),tn=null,js=!1;var M=y.alternate;M!==null&&(M.return=null),y.return=null}catch(H){At(y,r,H)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)cA(r,s),r=r.sibling}function cA(s,r){var h=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if($s(r,s),ci(s),p&4){try{Xu(3,s,s.return),fp(3,s)}catch(ge){At(s,s.return,ge)}try{Xu(5,s,s.return)}catch(ge){At(s,s.return,ge)}}break;case 1:$s(r,s),ci(s),p&512&&h!==null&&Ml(h,h.return);break;case 5:if($s(r,s),ci(s),p&512&&h!==null&&Ml(h,h.return),s.flags&32){var y=s.stateNode;try{mu(y,"")}catch(ge){At(s,s.return,ge)}}if(p&4&&(y=s.stateNode,y!=null)){var w=s.memoizedProps,x=h!==null?h.memoizedProps:w,L=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{L==="input"&&w.type==="radio"&&w.name!=null&&Se(y,w),om(L,x);var H=om(L,w);for(x=0;x<M.length;x+=2){var Y=M[x],J=M[x+1];Y==="style"?Vw(y,J):Y==="dangerouslySetInnerHTML"?Hw(y,J):Y==="children"?mu(y,J):O(y,Y,J,H)}switch(L){case"input":Te(y,w);break;case"textarea":bf(y,w);break;case"select":var X=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var re=w.value;re!=null?un(y,!!w.multiple,re,!1):X!==!!w.multiple&&(w.defaultValue!=null?un(y,!!w.multiple,w.defaultValue,!0):un(y,!!w.multiple,w.multiple?[]:"",!1))}y[ju]=w}catch(ge){At(s,s.return,ge)}}break;case 6:if($s(r,s),ci(s),p&4){if(s.stateNode===null)throw Error(t(162));y=s.stateNode,w=s.memoizedProps;try{y.nodeValue=w}catch(ge){At(s,s.return,ge)}}break;case 3:if($s(r,s),ci(s),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Cu(r.containerInfo)}catch(ge){At(s,s.return,ge)}break;case 4:$s(r,s),ci(s);break;case 13:$s(r,s),ci(s),y=s.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Ny=kt())),p&4&&lA(s);break;case 22:if(Y=h!==null&&h.memoizedState!==null,s.mode&1?(pn=(H=pn)||Y,$s(r,s),pn=H):$s(r,s),ci(s),p&8192){if(H=s.memoizedState!==null,(s.stateNode.isHidden=H)&&!Y&&(s.mode&1)!==0)for(ue=s,Y=s.child;Y!==null;){for(J=ue=Y;ue!==null;){switch(X=ue,re=X.child,X.tag){case 0:case 11:case 14:case 15:Xu(4,X,X.return);break;case 1:Ml(X,X.return);var fe=X.stateNode;if(typeof fe.componentWillUnmount=="function"){p=X,h=X.return;try{r=p,fe.props=r.memoizedProps,fe.state=r.memoizedState,fe.componentWillUnmount()}catch(ge){At(p,h,ge)}}break;case 5:Ml(X,X.return);break;case 22:if(X.memoizedState!==null){dA(J);continue}}re!==null?(re.return=X,ue=re):dA(J)}Y=Y.sibling}e:for(Y=null,J=s;;){if(J.tag===5){if(Y===null){Y=J;try{y=J.stateNode,H?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(L=J.stateNode,M=J.memoizedProps.style,x=M!=null&&M.hasOwnProperty("display")?M.display:null,L.style.display=Gw("display",x))}catch(ge){At(s,s.return,ge)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=H?"":J.memoizedProps}catch(ge){At(s,s.return,ge)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===s)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===s)break e;for(;J.sibling===null;){if(J.return===null||J.return===s)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:$s(r,s),ci(s),p&4&&lA(s);break;case 21:break;default:$s(r,s),ci(s)}}function ci(s){var r=s.flags;if(r&2){try{e:{for(var h=s.return;h!==null;){if(rA(h)){var p=h;break e}h=h.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(mu(y,""),p.flags&=-33);var w=aA(s);Ry(s,w,y);break;case 3:case 4:var x=p.stateNode.containerInfo,L=aA(s);Py(s,L,x);break;default:throw Error(t(161))}}catch(M){At(s,s.return,M)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function LC(s,r,h){ue=s,uA(s)}function uA(s,r,h){for(var p=(s.mode&1)!==0;ue!==null;){var y=ue,w=y.child;if(y.tag===22&&p){var x=y.memoizedState!==null||dp;if(!x){var L=y.alternate,M=L!==null&&L.memoizedState!==null||pn;L=dp;var H=pn;if(dp=x,(pn=M)&&!H)for(ue=y;ue!==null;)x=ue,M=x.child,x.tag===22&&x.memoizedState!==null?fA(y):M!==null?(M.return=x,ue=M):fA(y);for(;w!==null;)ue=w,uA(w),w=w.sibling;ue=y,dp=L,pn=H}hA(s)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,ue=w):hA(s)}}function hA(s){for(;ue!==null;){var r=ue;if((r.flags&8772)!==0){var h=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:pn||fp(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!pn)if(h===null)p.componentDidMount();else{var y=r.elementType===r.type?h.memoizedProps:Fs(r.type,h.memoizedProps);p.componentDidUpdate(y,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=r.updateQueue;w!==null&&db(r,w,p);break;case 3:var x=r.updateQueue;if(x!==null){if(h=null,r.child!==null)switch(r.child.tag){case 5:h=r.child.stateNode;break;case 1:h=r.child.stateNode}db(r,x,h)}break;case 5:var L=r.stateNode;if(h===null&&r.flags&4){h=L;var M=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&h.focus();break;case"img":M.src&&(h.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var H=r.alternate;if(H!==null){var Y=H.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&Cu(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}pn||r.flags&512&&Ty(r)}catch(X){At(r,r.return,X)}}if(r===s){ue=null;break}if(h=r.sibling,h!==null){h.return=r.return,ue=h;break}ue=r.return}}function dA(s){for(;ue!==null;){var r=ue;if(r===s){ue=null;break}var h=r.sibling;if(h!==null){h.return=r.return,ue=h;break}ue=r.return}}function fA(s){for(;ue!==null;){var r=ue;try{switch(r.tag){case 0:case 11:case 15:var h=r.return;try{fp(4,r)}catch(M){At(r,h,M)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var y=r.return;try{p.componentDidMount()}catch(M){At(r,y,M)}}var w=r.return;try{Ty(r)}catch(M){At(r,w,M)}break;case 5:var x=r.return;try{Ty(r)}catch(M){At(r,x,M)}}}catch(M){At(r,r.return,M)}if(r===s){ue=null;break}var L=r.sibling;if(L!==null){L.return=r.return,ue=L;break}ue=r.return}}var IC=Math.ceil,pp=N.ReactCurrentDispatcher,Ly=N.ReactCurrentOwner,bs=N.ReactCurrentBatchConfig,qe=0,Vt=null,Nt=null,nn=0,Zn=0,Ol=Rr(0),jt=0,Yu=null,Ba=0,gp=0,Iy=0,Ju=null,$n=null,Ny=0,Dl=1/0,$i=null,mp=!1,My=null,Dr=null,yp=!1,Fr=null,vp=0,Qu=0,Oy=null,wp=-1,_p=0;function kn(){return(qe&6)!==0?kt():wp!==-1?wp:wp=kt()}function jr(s){return(s.mode&1)===0?1:(qe&2)!==0&&nn!==0?nn&-nn:gC.transition!==null?(_p===0&&(_p=a_()),_p):(s=Qe,s!==0||(s=window.event,s=s===void 0?16:g_(s.type)),s)}function Us(s,r,h,p){if(50<Qu)throw Qu=0,Oy=null,Error(t(185));Au(s,h,p),((qe&2)===0||s!==Vt)&&(s===Vt&&((qe&2)===0&&(gp|=h),jt===4&&$r(s,nn)),Un(s,p),h===1&&qe===0&&(r.mode&1)===0&&(Dl=kt()+500,Kf&&Ir()))}function Un(s,r){var h=s.callbackNode;gk(s,r);var p=Pf(s,s===Vt?nn:0);if(p===0)h!==null&&s_(h),s.callbackNode=null,s.callbackPriority=0;else if(r=p&-p,s.callbackPriority!==r){if(h!=null&&s_(h),r===1)s.tag===0?pC(gA.bind(null,s)):eb(gA.bind(null,s)),uC(function(){(qe&6)===0&&Ir()}),h=null;else{switch(o_(p)){case 1:h=pm;break;case 4:h=i_;break;case 16:h=Ef;break;case 536870912:h=r_;break;default:h=Ef}h=SA(h,pA.bind(null,s))}s.callbackPriority=r,s.callbackNode=h}}function pA(s,r){if(wp=-1,_p=0,(qe&6)!==0)throw Error(t(327));var h=s.callbackNode;if(Fl()&&s.callbackNode!==h)return null;var p=Pf(s,s===Vt?nn:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||r)r=bp(s,p);else{r=p;var y=qe;qe|=2;var w=yA();(Vt!==s||nn!==r)&&($i=null,Dl=kt()+500,Ha(s,r));do try{OC();break}catch(L){mA(s,L)}while(!0);Zm(),pp.current=w,qe=y,Nt!==null?r=0:(Vt=null,nn=0,r=jt)}if(r!==0){if(r===2&&(y=gm(s),y!==0&&(p=y,r=Dy(s,y))),r===1)throw h=Yu,Ha(s,0),$r(s,p),Un(s,kt()),h;if(r===6)$r(s,p);else{if(y=s.current.alternate,(p&30)===0&&!NC(y)&&(r=bp(s,p),r===2&&(w=gm(s),w!==0&&(p=w,r=Dy(s,w))),r===1))throw h=Yu,Ha(s,0),$r(s,p),Un(s,kt()),h;switch(s.finishedWork=y,s.finishedLanes=p,r){case 0:case 1:throw Error(t(345));case 2:Ga(s,$n,$i);break;case 3:if($r(s,p),(p&130023424)===p&&(r=Ny+500-kt(),10<r)){if(Pf(s,0)!==0)break;if(y=s.suspendedLanes,(y&p)!==p){kn(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=zm(Ga.bind(null,s,$n,$i),r);break}Ga(s,$n,$i);break;case 4:if($r(s,p),(p&4194240)===p)break;for(r=s.eventTimes,y=-1;0<p;){var x=31-Ms(p);w=1<<x,x=r[x],x>y&&(y=x),p&=~w}if(p=y,p=kt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*IC(p/1960))-p,10<p){s.timeoutHandle=zm(Ga.bind(null,s,$n,$i),p);break}Ga(s,$n,$i);break;case 5:Ga(s,$n,$i);break;default:throw Error(t(329))}}}return Un(s,kt()),s.callbackNode===h?pA.bind(null,s):null}function Dy(s,r){var h=Ju;return s.current.memoizedState.isDehydrated&&(Ha(s,r).flags|=256),s=bp(s,r),s!==2&&(r=$n,$n=h,r!==null&&Fy(r)),s}function Fy(s){$n===null?$n=s:$n.push.apply($n,s)}function NC(s){for(var r=s;;){if(r.flags&16384){var h=r.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var y=h[p],w=y.getSnapshot;y=y.value;try{if(!Os(w(),y))return!1}catch{return!1}}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function $r(s,r){for(r&=~Iy,r&=~gp,s.suspendedLanes|=r,s.pingedLanes&=~r,s=s.expirationTimes;0<r;){var h=31-Ms(r),p=1<<h;s[h]=-1,r&=~p}}function gA(s){if((qe&6)!==0)throw Error(t(327));Fl();var r=Pf(s,0);if((r&1)===0)return Un(s,kt()),null;var h=bp(s,r);if(s.tag!==0&&h===2){var p=gm(s);p!==0&&(r=p,h=Dy(s,p))}if(h===1)throw h=Yu,Ha(s,0),$r(s,r),Un(s,kt()),h;if(h===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=r,Ga(s,$n,$i),Un(s,kt()),null}function jy(s,r){var h=qe;qe|=1;try{return s(r)}finally{qe=h,qe===0&&(Dl=kt()+500,Kf&&Ir())}}function za(s){Fr!==null&&Fr.tag===0&&(qe&6)===0&&Fl();var r=qe;qe|=1;var h=bs.transition,p=Qe;try{if(bs.transition=null,Qe=1,s)return s()}finally{Qe=p,bs.transition=h,qe=r,(qe&6)===0&&Ir()}}function $y(){Zn=Ol.current,ut(Ol)}function Ha(s,r){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,cC(h)),Nt!==null)for(h=Nt.return;h!==null;){var p=h;switch(Km(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Wf();break;case 3:Il(),ut(Dn),ut(hn),oy();break;case 5:ry(p);break;case 4:Il();break;case 13:ut(mt);break;case 19:ut(mt);break;case 10:ey(p.type._context);break;case 22:case 23:$y()}h=h.return}if(Vt=s,Nt=s=Ur(s.current,null),nn=Zn=r,jt=0,Yu=null,Iy=gp=Ba=0,$n=Ju=null,ja!==null){for(r=0;r<ja.length;r++)if(h=ja[r],p=h.interleaved,p!==null){h.interleaved=null;var y=p.next,w=h.pending;if(w!==null){var x=w.next;w.next=y,p.next=x}h.pending=p}ja=null}return s}function mA(s,r){do{var h=Nt;try{if(Zm(),ip.current=lp,rp){for(var p=yt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}rp=!1}if(Ua=0,Gt=Ft=yt=null,Gu=!1,Vu=0,Ly.current=null,h===null||h.return===null){jt=1,Yu=r,Nt=null;break}e:{var w=s,x=h.return,L=h,M=r;if(r=nn,L.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var H=M,Y=L,J=Y.tag;if((Y.mode&1)===0&&(J===0||J===11||J===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var re=Bb(x);if(re!==null){re.flags&=-257,zb(re,x,L,w,r),re.mode&1&&Ub(w,H,r),r=re,M=H;var fe=r.updateQueue;if(fe===null){var ge=new Set;ge.add(M),r.updateQueue=ge}else fe.add(M);break e}else{if((r&1)===0){Ub(w,H,r),Uy();break e}M=Error(t(426))}}else if(dt&&L.mode&1){var Ct=Bb(x);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),zb(Ct,x,L,w,r),Jm(Nl(M,L));break e}}w=M=Nl(M,L),jt!==4&&(jt=2),Ju===null?Ju=[w]:Ju.push(w),w=x;do{switch(w.tag){case 3:w.flags|=65536,r&=-r,w.lanes|=r;var $=jb(w,M,r);hb(w,$);break e;case 1:L=M;var D=w.type,B=w.stateNode;if((w.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Dr===null||!Dr.has(B)))){w.flags|=65536,r&=-r,w.lanes|=r;var ee=$b(w,L,r);hb(w,ee);break e}}w=w.return}while(w!==null)}wA(h)}catch(me){r=me,Nt===h&&h!==null&&(Nt=h=h.return);continue}break}while(!0)}function yA(){var s=pp.current;return pp.current=lp,s===null?lp:s}function Uy(){(jt===0||jt===3||jt===2)&&(jt=4),Vt===null||(Ba&268435455)===0&&(gp&268435455)===0||$r(Vt,nn)}function bp(s,r){var h=qe;qe|=2;var p=yA();(Vt!==s||nn!==r)&&($i=null,Ha(s,r));do try{MC();break}catch(y){mA(s,y)}while(!0);if(Zm(),qe=h,pp.current=p,Nt!==null)throw Error(t(261));return Vt=null,nn=0,jt}function MC(){for(;Nt!==null;)vA(Nt)}function OC(){for(;Nt!==null&&!ak();)vA(Nt)}function vA(s){var r=AA(s.alternate,s,Zn);s.memoizedProps=s.pendingProps,r===null?wA(s):Nt=r,Ly.current=null}function wA(s){var r=s;do{var h=r.alternate;if(s=r.return,(r.flags&32768)===0){if(h=CC(h,r,Zn),h!==null){Nt=h;return}}else{if(h=TC(h,r),h!==null){h.flags&=32767,Nt=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{jt=6,Nt=null;return}}if(r=r.sibling,r!==null){Nt=r;return}Nt=r=s}while(r!==null);jt===0&&(jt=5)}function Ga(s,r,h){var p=Qe,y=bs.transition;try{bs.transition=null,Qe=1,DC(s,r,h,p)}finally{bs.transition=y,Qe=p}return null}function DC(s,r,h,p){do Fl();while(Fr!==null);if((qe&6)!==0)throw Error(t(327));h=s.finishedWork;var y=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var w=h.lanes|h.childLanes;if(mk(s,w),s===Vt&&(Nt=Vt=null,nn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||yp||(yp=!0,SA(Ef,function(){return Fl(),null})),w=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||w){w=bs.transition,bs.transition=null;var x=Qe;Qe=1;var L=qe;qe|=4,Ly.current=null,RC(s,h),cA(h,s),nC(Um),If=!!$m,Um=$m=null,s.current=h,LC(h),ok(),qe=L,Qe=x,bs.transition=w}else s.current=h;if(yp&&(yp=!1,Fr=s,vp=y),w=s.pendingLanes,w===0&&(Dr=null),uk(h.stateNode),Un(s,kt()),r!==null)for(p=s.onRecoverableError,h=0;h<r.length;h++)y=r[h],p(y.value,{componentStack:y.stack,digest:y.digest});if(mp)throw mp=!1,s=My,My=null,s;return(vp&1)!==0&&s.tag!==0&&Fl(),w=s.pendingLanes,(w&1)!==0?s===Oy?Qu++:(Qu=0,Oy=s):Qu=0,Ir(),null}function Fl(){if(Fr!==null){var s=o_(vp),r=bs.transition,h=Qe;try{if(bs.transition=null,Qe=16>s?16:s,Fr===null)var p=!1;else{if(s=Fr,Fr=null,vp=0,(qe&6)!==0)throw Error(t(331));var y=qe;for(qe|=4,ue=s.current;ue!==null;){var w=ue,x=w.child;if((ue.flags&16)!==0){var L=w.deletions;if(L!==null){for(var M=0;M<L.length;M++){var H=L[M];for(ue=H;ue!==null;){var Y=ue;switch(Y.tag){case 0:case 11:case 15:Xu(8,Y,w)}var J=Y.child;if(J!==null)J.return=Y,ue=J;else for(;ue!==null;){Y=ue;var X=Y.sibling,re=Y.return;if(iA(Y),Y===H){ue=null;break}if(X!==null){X.return=re,ue=X;break}ue=re}}}var fe=w.alternate;if(fe!==null){var ge=fe.child;if(ge!==null){fe.child=null;do{var Ct=ge.sibling;ge.sibling=null,ge=Ct}while(ge!==null)}}ue=w}}if((w.subtreeFlags&2064)!==0&&x!==null)x.return=w,ue=x;else e:for(;ue!==null;){if(w=ue,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Xu(9,w,w.return)}var $=w.sibling;if($!==null){$.return=w.return,ue=$;break e}ue=w.return}}var D=s.current;for(ue=D;ue!==null;){x=ue;var B=x.child;if((x.subtreeFlags&2064)!==0&&B!==null)B.return=x,ue=B;else e:for(x=D;ue!==null;){if(L=ue,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:fp(9,L)}}catch(me){At(L,L.return,me)}if(L===x){ue=null;break e}var ee=L.sibling;if(ee!==null){ee.return=L.return,ue=ee;break e}ue=L.return}}if(qe=y,Ir(),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(kf,s)}catch{}p=!0}return p}finally{Qe=h,bs.transition=r}}return!1}function _A(s,r,h){r=Nl(h,r),r=jb(s,r,1),s=Mr(s,r,1),r=kn(),s!==null&&(Au(s,1,r),Un(s,r))}function At(s,r,h){if(s.tag===3)_A(s,s,h);else for(;r!==null;){if(r.tag===3){_A(r,s,h);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Dr===null||!Dr.has(p))){s=Nl(h,s),s=$b(r,s,1),r=Mr(r,s,1),s=kn(),r!==null&&(Au(r,1,s),Un(r,s));break}}r=r.return}}function FC(s,r,h){var p=s.pingCache;p!==null&&p.delete(r),r=kn(),s.pingedLanes|=s.suspendedLanes&h,Vt===s&&(nn&h)===h&&(jt===4||jt===3&&(nn&130023424)===nn&&500>kt()-Ny?Ha(s,0):Iy|=h),Un(s,r)}function bA(s,r){r===0&&((s.mode&1)===0?r=1:(r=Tf,Tf<<=1,(Tf&130023424)===0&&(Tf=4194304)));var h=kn();s=Di(s,r),s!==null&&(Au(s,r,h),Un(s,h))}function jC(s){var r=s.memoizedState,h=0;r!==null&&(h=r.retryLane),bA(s,h)}function $C(s,r){var h=0;switch(s.tag){case 13:var p=s.stateNode,y=s.memoizedState;y!==null&&(h=y.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(r),bA(s,h)}var AA;AA=function(s,r,h){if(s!==null)if(s.memoizedProps!==r.pendingProps||Dn.current)jn=!0;else{if((s.lanes&h)===0&&(r.flags&128)===0)return jn=!1,kC(s,r,h);jn=(s.flags&131072)!==0}else jn=!1,dt&&(r.flags&1048576)!==0&&tb(r,Yf,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;hp(s,r),s=r.pendingProps;var y=El(r,hn.current);Ll(r,h),y=uy(null,r,p,s,y,h);var w=hy();return r.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Fn(p)?(w=!0,qf(r)):w=!1,r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,sy(r),y.updater=cp,r.stateNode=y,y._reactInternals=r,yy(r,p,s,h),r=by(null,r,p,!0,w,h)):(r.tag=0,dt&&w&&qm(r),En(null,r,y,h),r=r.child),r;case 16:p=r.elementType;e:{switch(hp(s,r),s=r.pendingProps,y=p._init,p=y(p._payload),r.type=p,y=r.tag=BC(p),s=Fs(p,s),y){case 0:r=_y(null,r,p,s,h);break e;case 1:r=Kb(null,r,p,s,h);break e;case 11:r=Hb(null,r,p,s,h);break e;case 14:r=Gb(null,r,p,Fs(p.type,s),h);break e}throw Error(t(306,p,""))}return r;case 0:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Fs(p,y),_y(s,r,p,y,h);case 1:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Fs(p,y),Kb(s,r,p,y,h);case 3:e:{if(Xb(r),s===null)throw Error(t(387));p=r.pendingProps,w=r.memoizedState,y=w.element,ub(s,r),np(r,p,null,h);var x=r.memoizedState;if(p=x.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){y=Nl(Error(t(423)),r),r=Yb(s,r,p,h,y);break e}else if(p!==y){y=Nl(Error(t(424)),r),r=Yb(s,r,p,h,y);break e}else for(Qn=Pr(r.stateNode.containerInfo.firstChild),Jn=r,dt=!0,Ds=null,h=lb(r,null,p,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Tl(),p===y){r=ji(s,r,h);break e}En(s,r,p,h)}r=r.child}return r;case 5:return fb(r),s===null&&Ym(r),p=r.type,y=r.pendingProps,w=s!==null?s.memoizedProps:null,x=y.children,Bm(p,y)?x=null:w!==null&&Bm(p,w)&&(r.flags|=32),qb(s,r),En(s,r,x,h),r.child;case 6:return s===null&&Ym(r),null;case 13:return Jb(s,r,h);case 4:return iy(r,r.stateNode.containerInfo),p=r.pendingProps,s===null?r.child=Pl(r,null,p,h):En(s,r,p,h),r.child;case 11:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Fs(p,y),Hb(s,r,p,y,h);case 7:return En(s,r,r.pendingProps,h),r.child;case 8:return En(s,r,r.pendingProps.children,h),r.child;case 12:return En(s,r,r.pendingProps.children,h),r.child;case 10:e:{if(p=r.type._context,y=r.pendingProps,w=r.memoizedProps,x=y.value,rt(Zf,p._currentValue),p._currentValue=x,w!==null)if(Os(w.value,x)){if(w.children===y.children&&!Dn.current){r=ji(s,r,h);break e}}else for(w=r.child,w!==null&&(w.return=r);w!==null;){var L=w.dependencies;if(L!==null){x=w.child;for(var M=L.firstContext;M!==null;){if(M.context===p){if(w.tag===1){M=Fi(-1,h&-h),M.tag=2;var H=w.updateQueue;if(H!==null){H=H.shared;var Y=H.pending;Y===null?M.next=M:(M.next=Y.next,Y.next=M),H.pending=M}}w.lanes|=h,M=w.alternate,M!==null&&(M.lanes|=h),ty(w.return,h,r),L.lanes|=h;break}M=M.next}}else if(w.tag===10)x=w.type===r.type?null:w.child;else if(w.tag===18){if(x=w.return,x===null)throw Error(t(341));x.lanes|=h,L=x.alternate,L!==null&&(L.lanes|=h),ty(x,h,r),x=w.sibling}else x=w.child;if(x!==null)x.return=w;else for(x=w;x!==null;){if(x===r){x=null;break}if(w=x.sibling,w!==null){w.return=x.return,x=w;break}x=x.return}w=x}En(s,r,y.children,h),r=r.child}return r;case 9:return y=r.type,p=r.pendingProps.children,Ll(r,h),y=ws(y),p=p(y),r.flags|=1,En(s,r,p,h),r.child;case 14:return p=r.type,y=Fs(p,r.pendingProps),y=Fs(p.type,y),Gb(s,r,p,y,h);case 15:return Vb(s,r,r.type,r.pendingProps,h);case 17:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Fs(p,y),hp(s,r),r.tag=1,Fn(p)?(s=!0,qf(r)):s=!1,Ll(r,h),Db(r,p,y),yy(r,p,y,h),by(null,r,p,!0,s,h);case 19:return Zb(s,r,h);case 22:return Wb(s,r,h)}throw Error(t(156,r.tag))};function SA(s,r){return n_(s,r)}function UC(s,r,h,p){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(s,r,h,p){return new UC(s,r,h,p)}function By(s){return s=s.prototype,!(!s||!s.isReactComponent)}function BC(s){if(typeof s=="function")return By(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Le)return 11;if(s===Ne)return 14}return 2}function Ur(s,r){var h=s.alternate;return h===null?(h=As(s.tag,r,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=r,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,r=s.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function Ap(s,r,h,p,y,w){var x=2;if(p=s,typeof s=="function")By(s)&&(x=1);else if(typeof s=="string")x=5;else e:switch(s){case V:return Va(h.children,y,w,r);case Z:x=8,y|=8;break;case ie:return s=As(12,h,r,y|2),s.elementType=ie,s.lanes=w,s;case Ie:return s=As(13,h,r,y),s.elementType=Ie,s.lanes=w,s;case Ae:return s=As(19,h,r,y),s.elementType=Ae,s.lanes=w,s;case te:return Sp(h,y,w,r);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case we:x=10;break e;case ce:x=9;break e;case Le:x=11;break e;case Ne:x=14;break e;case Q:x=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return r=As(x,h,r,y),r.elementType=s,r.type=p,r.lanes=w,r}function Va(s,r,h,p){return s=As(7,s,p,r),s.lanes=h,s}function Sp(s,r,h,p){return s=As(22,s,p,r),s.elementType=te,s.lanes=h,s.stateNode={isHidden:!1},s}function zy(s,r,h){return s=As(6,s,null,r),s.lanes=h,s}function Hy(s,r,h){return r=As(4,s.children!==null?s.children:[],s.key,r),r.lanes=h,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}function zC(s,r,h,p,y){this.tag=r,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mm(0),this.expirationTimes=mm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mm(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Gy(s,r,h,p,y,w,x,L,M){return s=new zC(s,r,h,L,M),r===1?(r=1,w===!0&&(r|=8)):r=0,w=As(3,null,null,r),s.current=w,w.stateNode=s,w.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},sy(w),s}function HC(s,r,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:p==null?null:""+p,children:s,containerInfo:r,implementation:h}}function xA(s){if(!s)return Lr;s=s._reactInternals;e:{if(Na(s)!==s||s.tag!==1)throw Error(t(170));var r=s;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Fn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(s.tag===1){var h=s.type;if(Fn(h))return Q_(s,h,r)}return r}function EA(s,r,h,p,y,w,x,L,M){return s=Gy(h,p,!0,s,y,w,x,L,M),s.context=xA(null),h=s.current,p=kn(),y=jr(h),w=Fi(p,y),w.callback=r??null,Mr(h,w,y),s.current.lanes=y,Au(s,y,p),Un(s,p),s}function xp(s,r,h,p){var y=r.current,w=kn(),x=jr(y);return h=xA(h),r.context===null?r.context=h:r.pendingContext=h,r=Fi(w,x),r.payload={element:s},p=p===void 0?null:p,p!==null&&(r.callback=p),s=Mr(y,r,x),s!==null&&(Us(s,y,x,w),tp(s,y,x)),x}function Ep(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function kA(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<r?h:r}}function Vy(s,r){kA(s,r),(s=s.alternate)&&kA(s,r)}function GC(){return null}var CA=typeof reportError=="function"?reportError:function(s){console.error(s)};function Wy(s){this._internalRoot=s}kp.prototype.render=Wy.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(t(409));xp(s,r,null,null)},kp.prototype.unmount=Wy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;za(function(){xp(null,s,null,null)}),r[Ii]=null}};function kp(s){this._internalRoot=s}kp.prototype.unstable_scheduleHydration=function(s){if(s){var r=u_();s={blockedOn:null,target:s,priority:r};for(var h=0;h<kr.length&&r!==0&&r<kr[h].priority;h++);kr.splice(h,0,s),h===0&&f_(s)}};function qy(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Cp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function TA(){}function VC(s,r,h,p,y){if(y){if(typeof p=="function"){var w=p;p=function(){var H=Ep(x);w.call(H)}}var x=EA(r,p,s,0,null,!1,!1,"",TA);return s._reactRootContainer=x,s[Ii]=x.current,Du(s.nodeType===8?s.parentNode:s),za(),x}for(;y=s.lastChild;)s.removeChild(y);if(typeof p=="function"){var L=p;p=function(){var H=Ep(M);L.call(H)}}var M=Gy(s,0,!1,null,null,!1,!1,"",TA);return s._reactRootContainer=M,s[Ii]=M.current,Du(s.nodeType===8?s.parentNode:s),za(function(){xp(r,M,h,p)}),M}function Tp(s,r,h,p,y){var w=h._reactRootContainer;if(w){var x=w;if(typeof y=="function"){var L=y;y=function(){var M=Ep(x);L.call(M)}}xp(r,x,s,y)}else x=VC(h,r,s,y,p);return Ep(x)}l_=function(s){switch(s.tag){case 3:var r=s.stateNode;if(r.current.memoizedState.isDehydrated){var h=bu(r.pendingLanes);h!==0&&(ym(r,h|1),Un(r,kt()),(qe&6)===0&&(Dl=kt()+500,Ir()))}break;case 13:za(function(){var p=Di(s,1);if(p!==null){var y=kn();Us(p,s,1,y)}}),Vy(s,1)}},vm=function(s){if(s.tag===13){var r=Di(s,134217728);if(r!==null){var h=kn();Us(r,s,134217728,h)}Vy(s,134217728)}},c_=function(s){if(s.tag===13){var r=jr(s),h=Di(s,r);if(h!==null){var p=kn();Us(h,s,r,p)}Vy(s,r)}},u_=function(){return Qe},h_=function(s,r){var h=Qe;try{return Qe=s,r()}finally{Qe=h}},um=function(s,r,h){switch(r){case"input":if(Te(s,h),r=h.name,h.type==="radio"&&r!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<h.length;r++){var p=h[r];if(p!==s&&p.form===s.form){var y=Vf(p);if(!y)throw Error(t(90));Oe(p),Te(p,y)}}}break;case"textarea":bf(s,h);break;case"select":r=h.value,r!=null&&un(s,!!h.multiple,r,!1)}},Xw=jy,Yw=za;var WC={usingClientEntryPoint:!1,Events:[$u,Sl,Vf,qw,Kw,jy]},Zu={findFiberByHostInstance:Ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qC={bundleType:Zu.bundleType,version:Zu.version,rendererPackageName:Zu.rendererPackageName,rendererConfig:Zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=e_(s),s===null?null:s.stateNode},findFiberByHostInstance:Zu.findFiberByHostInstance||GC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pp.isDisabled&&Pp.supportsFiber)try{kf=Pp.inject(qC),ri=Pp}catch{}}return Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WC,Bn.createPortal=function(s,r){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qy(r))throw Error(t(200));return HC(s,r,null,h)},Bn.createRoot=function(s,r){if(!qy(s))throw Error(t(299));var h=!1,p="",y=CA;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),r=Gy(s,1,!1,null,null,h,!1,p,y),s[Ii]=r.current,Du(s.nodeType===8?s.parentNode:s),new Wy(r)},Bn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=e_(r),s=s===null?null:s.stateNode,s},Bn.flushSync=function(s){return za(s)},Bn.hydrate=function(s,r,h){if(!Cp(r))throw Error(t(200));return Tp(null,s,r,!0,h)},Bn.hydrateRoot=function(s,r,h){if(!qy(s))throw Error(t(405));var p=h!=null&&h.hydratedSources||null,y=!1,w="",x=CA;if(h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(x=h.onRecoverableError)),r=EA(r,null,s,1,h??null,y,!1,w,x),s[Ii]=r.current,Du(s),p)for(s=0;s<p.length;s++)h=p[s],y=h._getVersion,y=y(h._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[h,y]:r.mutableSourceEagerHydrationData.push(h,y);return new kp(r)},Bn.render=function(s,r,h){if(!Cp(r))throw Error(t(200));return Tp(null,s,r,!1,h)},Bn.unmountComponentAtNode=function(s){if(!Cp(s))throw Error(t(40));return s._reactRootContainer?(za(function(){Tp(null,null,s,!1,function(){s._reactRootContainer=null,s[Ii]=null})}),!0):!1},Bn.unstable_batchedUpdates=jy,Bn.unstable_renderSubtreeIntoContainer=function(s,r,h,p){if(!Cp(h))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Tp(s,r,h,!1,p)},Bn.version="18.3.1-next-f1338f8080-20240426",Bn}var FA;function yx(){if(FA)return Jy.exports;FA=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),Jy.exports=rT(),Jy.exports}var jA;function aT(){if(jA)return Rp;jA=1;var l=yx();return Rp.createRoot=l.createRoot,Rp.hydrateRoot=l.hydrateRoot,Rp}var oT=aT();const lT=hw(oT);yx();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ih(){return Ih=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(l[n]=t[n])}return l},Ih.apply(this,arguments)}var xa;(function(l){l.Pop="POP",l.Push="PUSH",l.Replace="REPLACE"})(xa||(xa={}));const $A="popstate";function cT(l){l===void 0&&(l={});function e(n,i){let{pathname:a,search:o,hash:c}=n.location;return jv("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:mg(i)}return hT(e,t,null,l)}function Rt(l,e){if(l===!1||l===null||typeof l>"u")throw new Error(e)}function vx(l,e){if(!l){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uT(){return Math.random().toString(36).substr(2,8)}function UA(l,e){return{usr:l.state,key:l.key,idx:e}}function jv(l,e,t,n){return t===void 0&&(t=null),Ih({pathname:typeof l=="string"?l:l.pathname,search:"",hash:""},typeof e=="string"?fu(e):e,{state:t,key:e&&e.key||n||uT()})}function mg(l){let{pathname:e="/",search:t="",hash:n=""}=l;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function fu(l){let e={};if(l){let t=l.indexOf("#");t>=0&&(e.hash=l.substr(t),l=l.substr(0,t));let n=l.indexOf("?");n>=0&&(e.search=l.substr(n),l=l.substr(0,n)),l&&(e.pathname=l)}return e}function hT(l,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,c=xa.Pop,d=null,f=g();f==null&&(f=0,o.replaceState(Ih({},o.state,{idx:f}),""));function g(){return(o.state||{idx:null}).idx}function m(){c=xa.Pop;let C=g(),T=C==null?null:C-f;f=C,d&&d({action:c,location:S.location,delta:T})}function v(C,T){c=xa.Push;let I=jv(S.location,C,T);f=g()+1;let O=UA(I,f),N=S.createHref(I);try{o.pushState(O,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(N)}a&&d&&d({action:c,location:S.location,delta:1})}function _(C,T){c=xa.Replace;let I=jv(S.location,C,T);f=g();let O=UA(I,f),N=S.createHref(I);o.replaceState(O,"",N),a&&d&&d({action:c,location:S.location,delta:0})}function A(C){let T=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof C=="string"?C:mg(C);return I=I.replace(/ $/,"%20"),Rt(T,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,T)}let S={get action(){return c},get location(){return l(i,o)},listen(C){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener($A,m),d=C,()=>{i.removeEventListener($A,m),d=null}},createHref(C){return e(i,C)},createURL:A,encodeLocation(C){let T=A(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:_,go(C){return o.go(C)}};return S}var BA;(function(l){l.data="data",l.deferred="deferred",l.redirect="redirect",l.error="error"})(BA||(BA={}));function dT(l,e,t){return t===void 0&&(t="/"),fT(l,e,t)}function fT(l,e,t,n){let i=typeof e=="string"?fu(e):e,a=fw(i.pathname||"/",t);if(a==null)return null;let o=wx(l);pT(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let f=kT(a);c=ST(o[d],f)}return c}function wx(l,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(a,o,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};d.relativePath.startsWith("/")&&(Rt(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let f=Ea([n,d.relativePath]),g=t.concat(d);a.children&&a.children.length>0&&(Rt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),wx(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:bT(f,a.index),routesMeta:g})};return l.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let d of _x(a.path))i(a,o,d)}),e}function _x(l){let e=l.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=_x(n.join("/")),c=[];return c.push(...o.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...o),c.map(d=>l.startsWith("/")&&d===""?"/":d)}function pT(l){l.sort((e,t)=>e.score!==t.score?t.score-e.score:AT(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const gT=/^:[\w-]+$/,mT=3,yT=2,vT=1,wT=10,_T=-2,zA=l=>l==="*";function bT(l,e){let t=l.split("/"),n=t.length;return t.some(zA)&&(n+=_T),e&&(n+=yT),t.filter(i=>!zA(i)).reduce((i,a)=>i+(gT.test(a)?mT:a===""?vT:wT),n)}function AT(l,e){return l.length===e.length&&l.slice(0,-1).every((n,i)=>n===e[i])?l[l.length-1]-e[e.length-1]:0}function ST(l,e,t){let{routesMeta:n}=l,i={},a="/",o=[];for(let c=0;c<n.length;++c){let d=n[c],f=c===n.length-1,g=a==="/"?e:e.slice(a.length)||"/",m=xT({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Ea([a,m.pathname]),pathnameBase:RT(Ea([a,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(a=Ea([a,m.pathnameBase]))}return o}function xT(l,e){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[t,n]=ET(l.path,l.caseSensitive,l.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((f,g,m)=>{let{paramName:v,isOptional:_}=g;if(v==="*"){let S=c[m]||"";o=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const A=c[m];return _&&!A?f[v]=void 0:f[v]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:l}}function ET(l,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),vx(l==="*"||!l.endsWith("*")||l.endsWith("/*"),'Route path "'+l+'" will be treated as if it were '+('"'+l.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+l.replace(/\*$/,"/*")+'".'));let n=[],i="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(n.push({paramName:"*"}),i+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":l!==""&&l!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function kT(l){try{return l.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vx(!1,'The URL path "'+l+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),l}}function fw(l,e){if(e==="/")return l;if(!l.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=l.charAt(t);return n&&n!=="/"?null:l.slice(t)||"/"}function CT(l,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof l=="string"?fu(l):l;return{pathname:t?t.startsWith("/")?t:TT(t,e):e,search:LT(n),hash:IT(i)}}function TT(l,e){let t=e.replace(/\/+$/,"").split("/");return l.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ev(l,e,t,n){return"Cannot include a '"+l+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PT(l){return l.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pw(l,e){let t=PT(l);return e?t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function gw(l,e,t,n){n===void 0&&(n=!1);let i;typeof l=="string"?i=fu(l):(i=Ih({},l),Rt(!i.pathname||!i.pathname.includes("?"),ev("?","pathname","search",i)),Rt(!i.pathname||!i.pathname.includes("#"),ev("#","pathname","hash",i)),Rt(!i.search||!i.search.includes("#"),ev("#","search","hash",i)));let a=l===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let m=e.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}c=m>=0?e[m]:"/"}let d=CT(i,c),f=o&&o!=="/"&&o.endsWith("/"),g=(a||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}const Ea=l=>l.join("/").replace(/\/\/+/g,"/"),RT=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),LT=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,IT=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function NT(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}const bx=["post","put","patch","delete"];new Set(bx);const MT=["get",...bx];new Set(MT);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nh(){return Nh=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(l[n]=t[n])}return l},Nh.apply(this,arguments)}const mw=q.createContext(null),OT=q.createContext(null),Ra=q.createContext(null),qg=q.createContext(null),La=q.createContext({outlet:null,matches:[],isDataRoute:!1}),Ax=q.createContext(null);function DT(l,e){let{relative:t}=e===void 0?{}:e;pu()||Rt(!1);let{basename:n,navigator:i}=q.useContext(Ra),{hash:a,pathname:o,search:c}=xx(l,{relative:t}),d=o;return n!=="/"&&(d=o==="/"?n:Ea([n,o])),i.createHref({pathname:d,search:c,hash:a})}function pu(){return q.useContext(qg)!=null}function ff(){return pu()||Rt(!1),q.useContext(qg).location}function Sx(l){q.useContext(Ra).static||q.useLayoutEffect(l)}function Kg(){let{isDataRoute:l}=q.useContext(La);return l?XT():FT()}function FT(){pu()||Rt(!1);let l=q.useContext(mw),{basename:e,future:t,navigator:n}=q.useContext(Ra),{matches:i}=q.useContext(La),{pathname:a}=ff(),o=JSON.stringify(pw(i,t.v7_relativeSplatPath)),c=q.useRef(!1);return Sx(()=>{c.current=!0}),q.useCallback(function(f,g){if(g===void 0&&(g={}),!c.current)return;if(typeof f=="number"){n.go(f);return}let m=gw(f,JSON.parse(o),a,g.relative==="path");l==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ea([e,m.pathname])),(g.replace?n.replace:n.push)(m,g.state,g)},[e,n,o,a,l])}function xx(l,e){let{relative:t}=e===void 0?{}:e,{future:n}=q.useContext(Ra),{matches:i}=q.useContext(La),{pathname:a}=ff(),o=JSON.stringify(pw(i,n.v7_relativeSplatPath));return q.useMemo(()=>gw(l,JSON.parse(o),a,t==="path"),[l,o,a,t])}function jT(l,e){return $T(l,e)}function $T(l,e,t,n){pu()||Rt(!1);let{navigator:i,static:a}=q.useContext(Ra),{matches:o}=q.useContext(La),c=o[o.length-1],d=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let g=ff(),m;if(e){var v;let T=typeof e=="string"?fu(e):e;f==="/"||(v=T.pathname)!=null&&v.startsWith(f)||Rt(!1),m=T}else m=g;let _=m.pathname||"/",A=_;if(f!=="/"){let T=f.replace(/^\//,"").split("/");A="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=dT(l,{pathname:A}),C=GT(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:Ea([f,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:Ea([f,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,t,n);return e&&C?q.createElement(qg.Provider,{value:{location:Nh({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:xa.Pop}},C):C}function UT(){let l=KT(),e=NT(l)?l.status+" "+l.statusText:l instanceof Error?l.message:JSON.stringify(l),t=l instanceof Error?l.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:i},t):null,null)}const BT=q.createElement(UT,null);class zT extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?q.createElement(La.Provider,{value:this.props.routeContext},q.createElement(Ax.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HT(l){let{routeContext:e,match:t,children:n}=l,i=q.useContext(mw);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(La.Provider,{value:e},n)}function GT(l,e,t,n){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),l==null){var a;if(!t)return null;if(t.errors)l=t.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)l=t.matches;else return null}let o=l,c=(i=t)==null?void 0:i.errors;if(c!=null){let g=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);g>=0||Rt(!1),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,f=-1;if(t&&n&&n.v7_partialHydration)for(let g=0;g<o.length;g++){let m=o[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=g),m.route.id){let{loaderData:v,errors:_}=t,A=m.route.loader&&v[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||A){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((g,m,v)=>{let _,A=!1,S=null,C=null;t&&(_=c&&m.route.id?c[m.route.id]:void 0,S=m.route.errorElement||BT,d&&(f<0&&v===0?(YT("route-fallback"),A=!0,C=null):f===v&&(A=!0,C=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,v+1)),I=()=>{let O;return _?O=S:A?O=C:m.route.Component?O=q.createElement(m.route.Component,null):m.route.element?O=m.route.element:O=g,q.createElement(HT,{match:m,routeContext:{outlet:g,matches:T,isDataRoute:t!=null},children:O})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?q.createElement(zT,{location:t.location,revalidation:t.revalidation,component:S,error:_,children:I(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):I()},null)}var Ex=function(l){return l.UseBlocker="useBlocker",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l}(Ex||{}),kx=function(l){return l.UseBlocker="useBlocker",l.UseLoaderData="useLoaderData",l.UseActionData="useActionData",l.UseRouteError="useRouteError",l.UseNavigation="useNavigation",l.UseRouteLoaderData="useRouteLoaderData",l.UseMatches="useMatches",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l.UseRouteId="useRouteId",l}(kx||{});function VT(l){let e=q.useContext(mw);return e||Rt(!1),e}function WT(l){let e=q.useContext(OT);return e||Rt(!1),e}function qT(l){let e=q.useContext(La);return e||Rt(!1),e}function Cx(l){let e=qT(),t=e.matches[e.matches.length-1];return t.route.id||Rt(!1),t.route.id}function KT(){var l;let e=q.useContext(Ax),t=WT(),n=Cx();return e!==void 0?e:(l=t.errors)==null?void 0:l[n]}function XT(){let{router:l}=VT(Ex.UseNavigateStable),e=Cx(kx.UseNavigateStable),t=q.useRef(!1);return Sx(()=>{t.current=!0}),q.useCallback(function(i,a){a===void 0&&(a={}),t.current&&(typeof i=="number"?l.navigate(i):l.navigate(i,Nh({fromRouteId:e},a)))},[l,e])}const HA={};function YT(l,e,t){HA[l]||(HA[l]=!0)}function JT(l,e){l==null||l.v7_startTransition,l==null||l.v7_relativeSplatPath}function Tx(l){let{to:e,replace:t,state:n,relative:i}=l;pu()||Rt(!1);let{future:a,static:o}=q.useContext(Ra),{matches:c}=q.useContext(La),{pathname:d}=ff(),f=Kg(),g=gw(e,pw(c,a.v7_relativeSplatPath),d,i==="path"),m=JSON.stringify(g);return q.useEffect(()=>f(JSON.parse(m),{replace:t,state:n,relative:i}),[f,m,i,t,n]),null}function ch(l){Rt(!1)}function QT(l){let{basename:e="/",children:t=null,location:n,navigationType:i=xa.Pop,navigator:a,static:o=!1,future:c}=l;pu()&&Rt(!1);let d=e.replace(/^\/*/,"/"),f=q.useMemo(()=>({basename:d,navigator:a,static:o,future:Nh({v7_relativeSplatPath:!1},c)}),[d,c,a,o]);typeof n=="string"&&(n=fu(n));let{pathname:g="/",search:m="",hash:v="",state:_=null,key:A="default"}=n,S=q.useMemo(()=>{let C=fw(g,d);return C==null?null:{location:{pathname:C,search:m,hash:v,state:_,key:A},navigationType:i}},[d,g,m,v,_,A,i]);return S==null?null:q.createElement(Ra.Provider,{value:f},q.createElement(qg.Provider,{children:t,value:S}))}function ZT(l){let{children:e,location:t}=l;return jT($v(e),t)}new Promise(()=>{});function $v(l,e){e===void 0&&(e=[]);let t=[];return q.Children.forEach(l,(n,i)=>{if(!q.isValidElement(n))return;let a=[...e,i];if(n.type===q.Fragment){t.push.apply(t,$v(n.props.children,a));return}n.type!==ch&&Rt(!1),!n.props.index||!n.props.children||Rt(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=$v(n.props.children,a)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uv(){return Uv=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(l[n]=t[n])}return l},Uv.apply(this,arguments)}function eP(l,e){if(l==null)return{};var t={},n=Object.keys(l),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(t[i]=l[i]);return t}function tP(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function nP(l,e){return l.button===0&&(!e||e==="_self")&&!tP(l)}const sP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iP="6";try{window.__reactRouterVersion=iP}catch{}const rP="startTransition",GA=nT[rP];function aP(l){let{basename:e,children:t,future:n,window:i}=l,a=q.useRef();a.current==null&&(a.current=cT({window:i,v5Compat:!0}));let o=a.current,[c,d]=q.useState({action:o.action,location:o.location}),{v7_startTransition:f}=n||{},g=q.useCallback(m=>{f&&GA?GA(()=>d(m)):d(m)},[d,f]);return q.useLayoutEffect(()=>o.listen(g),[o,g]),q.useEffect(()=>JT(n),[n]),q.createElement(QT,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:o,future:n})}const oP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jl=q.forwardRef(function(e,t){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:c,target:d,to:f,preventScrollReset:g,viewTransition:m}=e,v=eP(e,sP),{basename:_}=q.useContext(Ra),A,S=!1;if(typeof f=="string"&&lP.test(f)&&(A=f,oP))try{let O=new URL(window.location.href),N=f.startsWith("//")?new URL(O.protocol+f):new URL(f),j=fw(N.pathname,_);N.origin===O.origin&&j!=null?f=j+N.search+N.hash:S=!0}catch{}let C=DT(f,{relative:i}),T=cP(f,{replace:o,state:c,target:d,preventScrollReset:g,relative:i,viewTransition:m});function I(O){n&&n(O),O.defaultPrevented||T(O)}return q.createElement("a",Uv({},v,{href:A||C,onClick:S||a?n:I,ref:t,target:d}))});var VA;(function(l){l.UseScrollRestoration="useScrollRestoration",l.UseSubmit="useSubmit",l.UseSubmitFetcher="useSubmitFetcher",l.UseFetcher="useFetcher",l.useViewTransitionState="useViewTransitionState"})(VA||(VA={}));var WA;(function(l){l.UseFetcher="useFetcher",l.UseFetchers="useFetchers",l.UseScrollRestoration="useScrollRestoration"})(WA||(WA={}));function cP(l,e){let{target:t,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,d=Kg(),f=ff(),g=xx(l,{relative:o});return q.useCallback(m=>{if(nP(m,t)){m.preventDefault();let v=n!==void 0?n:mg(f)===mg(g);d(l,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[f,d,g,n,i,t,l,a,o,c])}const uP="modulepreload",hP=function(l){return"/your-repo-name/"+l},qA={},hu=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(d=>{if(d=hP(d),d in qA)return;qA[d]=!0;const f=d.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":uP,f||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((v,_)=>{m.addEventListener("load",v),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},dP=l=>{let e;return l?e=l:typeof fetch>"u"?e=(...t)=>hu(async()=>{const{default:n}=await Promise.resolve().then(()=>gu);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class yw extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class fP extends yw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pP extends yw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gP extends yw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bv;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Bv||(Bv={}));var mP=function(l,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(g){try{f(n.next(g))}catch(m){o(m)}}function d(g){try{f(n.throw(g))}catch(m){o(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((n=n.apply(l,e||[])).next())})};class yP{constructor(e,{headers:t={},customFetch:n,region:i=Bv.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=dP(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return mP(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=t;let c={},{region:d}=t;d||(d=this.region),d&&d!=="any"&&(c["x-region"]=d);let f;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(c["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(c["Content-Type"]="application/json",f=JSON.stringify(o)));const g=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:f}).catch(A=>{throw new fP(A)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new pP(g);if(!g.ok)throw new gP(g);let v=((n=g.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield g.json():v==="application/octet-stream"?_=yield g.blob():v==="text/event-stream"?_=g:v==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null}}catch(i){return{data:null,error:i}}})}}var qt={},$l={},Ul={},Bl={},zl={},Hl={},vP=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},du=vP();const wP=du.fetch,Px=du.fetch.bind(du),Rx=du.Headers,_P=du.Request,bP=du.Response,gu=Object.freeze(Object.defineProperty({__proto__:null,Headers:Rx,Request:_P,Response:bP,default:Px,fetch:wP},Symbol.toStringTag,{value:"Module"})),AP=QC(gu);var Lp={},KA;function Lx(){if(KA)return Lp;KA=1,Object.defineProperty(Lp,"__esModule",{value:!0});class l extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Lp.default=l,Lp}var XA;function Ix(){if(XA)return Hl;XA=1;var l=Hl&&Hl.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Hl,"__esModule",{value:!0});const e=l(AP),t=l(Lx());class n{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=Object.assign({},this.headers),this.headers[a]=o,this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,m,v;let _=null,A=null,S=null,C=f.status,T=f.statusText;if(f.ok){if(this.method!=="HEAD"){const j=await f.text();j===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?A=j:A=JSON.parse(j))}const O=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),N=(m=f.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");O&&N&&N.length>1&&(S=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(A)&&(A.length>1?(_={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,S=null,C=406,T="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{const O=await f.text();try{_=JSON.parse(O),Array.isArray(_)&&f.status===404&&(A=[],_=null,C=200,T="OK")}catch{f.status===404&&O===""?(C=204,T="No Content"):_={message:O}}if(_&&this.isMaybeSingle&&(!((v=_==null?void 0:_.details)===null||v===void 0)&&v.includes("0 rows"))&&(_=null,C=200,T="OK"),_&&this.shouldThrowOnError)throw new t.default(_)}return{error:_,data:A,count:S,status:C,statusText:T}});return this.shouldThrowOnError||(d=d.catch(f=>{var g,m,v;return{error:{message:`${(g=f==null?void 0:f.name)!==null&&g!==void 0?g:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(m=f==null?void 0:f.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,o)}returns(){return this}overrideTypes(){return this}}return Hl.default=n,Hl}var YA;function Nx(){if(YA)return zl;YA=1;var l=zl&&zl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(zl,"__esModule",{value:!0});const e=l(Ix());class t extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(f,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var g;const m=[i?"analyze":null,a?"verbose":null,o?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${v}"; options=${m};`,f==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return zl.default=t,zl}var JA;function vw(){if(JA)return Bl;JA=1;var l=Bl&&Bl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Bl,"__esModule",{value:!0});const e=l(Nx());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${d}fts${f}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}}return Bl.default=t,Bl}var QA;function Mx(){if(QA)return Ul;QA=1;var l=Ul&&Ul.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ul,"__esModule",{value:!0});const e=l(vw());class t{constructor(i,{headers:a={},schema:o,fetch:c}){this.url=i,this.headers=a,this.schema=o,this.fetch=c}select(i,{head:a=!1,count:o}={}){const c=a?"HEAD":"GET";let d=!1;const f=(i??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:a,defaultToNull:o=!0}={}){const c="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),a&&d.push(`count=${a}`),o||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(i)){const f=i.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(f.length>0){const g=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:c,defaultToNull:d=!0}={}){const f="POST",g=[`resolution=${o?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&g.push(this.headers.Prefer),c&&g.push(`count=${c}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(i)){const m=i.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(m.length>0){const v=[...new Set(m)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:a}={}){const o="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),this.headers.Prefer=c.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const a="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ul.default=t,Ul}var th={},nh={},ZA;function SP(){return ZA||(ZA=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.version=void 0,nh.version="0.0.0-automated"),nh}var eS;function xP(){if(eS)return th;eS=1,Object.defineProperty(th,"__esModule",{value:!0}),th.DEFAULT_HEADERS=void 0;const l=SP();return th.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${l.version}`},th}var tS;function EP(){if(tS)return $l;tS=1;var l=$l&&$l.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty($l,"__esModule",{value:!0});const e=l(Mx()),t=l(vw()),n=xP();class i{constructor(o,{headers:c={},schema:d,fetch:f}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),c),this.schemaName=d,this.fetch=f}from(o){const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:d=!1,get:f=!1,count:g}={}){let m;const v=new URL(`${this.url}/rpc/${o}`);let _;d||f?(m=d?"HEAD":"GET",Object.entries(c).filter(([S,C])=>C!==void 0).map(([S,C])=>[S,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([S,C])=>{v.searchParams.append(S,C)})):(m="POST",_=c);const A=Object.assign({},this.headers);return g&&(A.Prefer=`count=${g}`),new t.default({method:m,url:v,headers:A,schema:this.schemaName,body:_,fetch:this.fetch,allowEmpty:!1})}}return $l.default=i,$l}var nS;function kP(){if(nS)return qt;nS=1;var l=qt&&qt.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.PostgrestError=qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const e=l(EP());qt.PostgrestClient=e.default;const t=l(Mx());qt.PostgrestQueryBuilder=t.default;const n=l(vw());qt.PostgrestFilterBuilder=n.default;const i=l(Nx());qt.PostgrestTransformBuilder=i.default;const a=l(Ix());qt.PostgrestBuilder=a.default;const o=l(Lx());return qt.PostgrestError=o.default,qt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},qt}var CP=kP();const TP=hw(CP),{PostgrestClient:PP,PostgrestQueryBuilder:OM,PostgrestFilterBuilder:DM,PostgrestTransformBuilder:FM,PostgrestBuilder:jM,PostgrestError:$M}=TP,RP="2.11.2",LP={"X-Client-Info":`realtime-js/${RP}`},IP="1.0.0",Ox=1e4,NP=1e3;var sc;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(sc||(sc={}));var es;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(es||(es={}));var ti;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(ti||(ti={}));var zv;(function(l){l.websocket="websocket"})(zv||(zv={}));var Ja;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Ja||(Ja={}));class MP{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),a=t.getUint8(2);let o=this.HEADER_LENGTH+2;const c=n.decode(e.slice(o,o+i));o=o+i;const d=n.decode(e.slice(o,o+a));o=o+a;const f=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:d,payload:f}}}let Dx=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var at;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(at||(at={}));const sS=(l,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=OP(o,l,e,i),a),{})},OP=(l,e,t,n)=>{const i=e.find(c=>c.name===l),a=i==null?void 0:i.type,o=t[l];return a&&!n.includes(a)?Fx(a,o):Hv(o)},Fx=(l,e)=>{if(l.charAt(0)==="_"){const t=l.slice(1,l.length);return $P(e,t)}switch(l){case at.bool:return DP(e);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return FP(e);case at.json:case at.jsonb:return jP(e);case at.timestamp:return UP(e);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return Hv(e);default:return Hv(e)}},Hv=l=>l,DP=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},FP=l=>{if(typeof l=="string"){const e=parseFloat(l);if(!Number.isNaN(e))return e}return l},jP=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(e){return console.log(`JSON parse error: ${e}`),l}return l},$P=(l,e)=>{if(typeof l!="string")return l;const t=l.length-1,n=l[t];if(l[0]==="{"&&n==="}"){let a;const o=l.slice(1,t);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(c=>Fx(e,c))}return l},UP=l=>typeof l=="string"?l.replace(" ","T"):l,jx=l=>{let e=l;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class tv{constructor(e,t,n={},i=Ox){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var iS;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(iS||(iS={}));class Ch{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ch.syncState(this.state,i,a,o),this.pendingDiffs.forEach(d=>{this.state=Ch.syncDiff(this.state,d,a,o)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ch.syncDiff(this.state,i,a,o),c())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const a=this.cloneDeep(e),o=this.transformState(t),c={},d={};return this.map(a,(f,g)=>{o[f]||(d[f]=g)}),this.map(o,(f,g)=>{const m=a[f];if(m){const v=g.map(C=>C.presence_ref),_=m.map(C=>C.presence_ref),A=g.filter(C=>_.indexOf(C.presence_ref)<0),S=m.filter(C=>v.indexOf(C.presence_ref)<0);A.length>0&&(c[f]=A),S.length>0&&(d[f]=S)}else c[f]=g}),this.syncDiff(a,{joins:c,leaves:d},n,i)}static syncDiff(e,t,n,i){const{joins:a,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(c,d)=>{var f;const g=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),g.length>0){const m=e[c].map(_=>_.presence_ref),v=g.filter(_=>m.indexOf(_.presence_ref)<0);e[c].unshift(...v)}n(c,g,d)}),this.map(o,(c,d)=>{let f=e[c];if(!f)return;const g=d.map(m=>m.presence_ref);f=f.filter(m=>g.indexOf(m.presence_ref)<0),e[c]=f,i(c,f,d),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rS;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(rS||(rS={}));var aS;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(aS||(aS={}));var Hi;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Hi||(Hi={}));class ww{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=es.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new tv(this,ti.join,this.params,this.timeout),this.rejoinTimer=new Dx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=es.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=es.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=es.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=es.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ti.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Ch(this),this.broadcastEndpointURL=jx(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:c}}=this.params;this._onError(g=>e==null?void 0:e(Hi.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Hi.CLOSED));const d={},f={broadcast:a,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&i!==void 0?i:[],private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var m;if(this.socket.setAuth(),g===void 0){e==null||e(Hi.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,A=[];for(let S=0;S<_;S++){const C=v[S],{filter:{event:T,schema:I,table:O,filter:N}}=C,j=g&&g[S];if(j&&j.event===T&&j.schema===I&&j.table===O&&j.filter===N)A.push(Object.assign(Object.assign({},C),{id:j.id}));else{this.unsubscribe(),e==null||e(Hi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(Hi.SUBSCRIBED);return}}).receive("error",g=>{e==null||e(Hi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Hi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,c,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=es.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ti.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new tv(this,ti.leave,{},e);i.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new tv(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,a;const o=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:g}=ti;if(n&&[c,d,f,g].indexOf(o)>=0&&n!==this._joinRef())return;let v=this._onMessage(o,t,n);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(_=>{var A,S,C;return((A=_.filter)===null||A===void 0?void 0:A.event)==="*"||((C=(S=_.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(_=>_.callback(v,n)):(a=this.bindings[o])===null||a===void 0||a.filter(_=>{var A,S,C,T,I,O;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in _){const N=_.id,j=(A=_.filter)===null||A===void 0?void 0:A.event;return N&&((S=t.ids)===null||S===void 0?void 0:S.includes(N))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const N=(I=(T=_==null?void 0:_.filter)===null||T===void 0?void 0:T.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return N==="*"||N===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===o}).map(_=>{if(typeof v=="object"&&"ids"in v){const A=v.data,{schema:S,table:C,commit_timestamp:T,type:I,errors:O}=A;v=Object.assign(Object.assign({},{schema:S,table:C,commit_timestamp:T,eventType:I,new:{},old:{},errors:O}),this._getPayloadRecords(A))}_.callback(v,n)})}_isClosed(){return this.state===es.closed}_isJoined(){return this.state===es.joined}_isJoining(){return this.state===es.joining}_isLeaving(){return this.state===es.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&ww.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ti.close,{},e)}_onError(e){this._on(ti.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=es.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=sS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=sS(e.columns,e.old_record)),t}}const BP=()=>{},zP=typeof WebSocket<"u",HP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class GP{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=LP,this.params={},this.timeout=Ox,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=BP,this.conn=null,this.sendBuffer=[],this.serializer=new MP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...c)=>hu(async()=>{const{default:d}=await Promise.resolve().then(()=>gu);return{default:d}},void 0).then(({default:d})=>d(...c)):o=fetch,(...c)=>o(...c)},this.endPoint=`${e}/${zv.websocket}`,this.httpEndpoint=jx(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,o)=>o(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Dx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(zP){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new VP(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),hu(async()=>{const{default:e}=await import("./browser-BQ0duRRb.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:IP}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case sc.connecting:return Ja.Connecting;case sc.open:return Ja.Open;case sc.closing:return Ja.Closing;default:return Ja.Closed}}isConnected(){return this.connectionState()===Ja.Open}channel(e,t={config:{}}){const n=new ww(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(ti.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(NP,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:a,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,a),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(c=>c(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ti.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([HP],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class VP{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=sc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class _w extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function en(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class WP extends _w{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Gv extends _w{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qP=function(l,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(g){try{f(n.next(g))}catch(m){o(m)}}function d(g){try{f(n.throw(g))}catch(m){o(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((n=n.apply(l,e||[])).next())})};const $x=l=>{let e;return l?e=l:typeof fetch>"u"?e=(...t)=>hu(async()=>{const{default:n}=await Promise.resolve().then(()=>gu);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},KP=()=>qP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield hu(()=>Promise.resolve().then(()=>gu),void 0)).Response:Response}),Vv=l=>{if(Array.isArray(l))return l.map(t=>Vv(t));if(typeof l=="function"||l!==Object(l))return l;const e={};return Object.entries(l).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Vv(n)}),e};var ul=function(l,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(g){try{f(n.next(g))}catch(m){o(m)}}function d(g){try{f(n.throw(g))}catch(m){o(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((n=n.apply(l,e||[])).next())})};const nv=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),XP=(l,e,t)=>ul(void 0,void 0,void 0,function*(){const n=yield KP();l instanceof n&&!(t!=null&&t.noResolveJson)?l.json().then(i=>{e(new WP(nv(i),l.status||500))}).catch(i=>{e(new Gv(nv(i),i))}):e(new Gv(nv(l),l))}),YP=(l,e,t,n)=>{const i={method:l,headers:(e==null?void 0:e.headers)||{}};return l==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),t))};function pf(l,e,t,n,i,a){return ul(this,void 0,void 0,function*(){return new Promise((o,c)=>{l(t,YP(e,n,i,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>XP(d,c,n))})})}function yg(l,e,t,n){return ul(this,void 0,void 0,function*(){return pf(l,"GET",e,t,n)})}function Vr(l,e,t,n,i){return ul(this,void 0,void 0,function*(){return pf(l,"POST",e,n,i,t)})}function JP(l,e,t,n,i){return ul(this,void 0,void 0,function*(){return pf(l,"PUT",e,n,i,t)})}function QP(l,e,t,n){return ul(this,void 0,void 0,function*(){return pf(l,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Ux(l,e,t,n,i){return ul(this,void 0,void 0,function*(){return pf(l,"DELETE",e,n,i,t)})}var zn=function(l,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(g){try{f(n.next(g))}catch(m){o(m)}}function d(g){try{f(n.throw(g))}catch(m){o(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((n=n.apply(l,e||[])).next())})};const ZP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eR{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=$x(i)}uploadOrUpdate(e,t,n,i){return zn(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},oS),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const f=this._removeEmptyFolders(t),g=this._getFinalPath(f),m=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:a,headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{})),v=yield m.json();return m.ok?{data:{path:f,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(a){if(en(a))return{data:null,error:a};throw a}})}upload(e,t,n){return zn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return zn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:oS.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const m=yield this.fetch(c.toString(),{method:"PUT",body:d,headers:g}),v=yield m.json();return m.ok?{data:{path:a,fullPath:v.Key},error:null}:{data:null,error:v}}catch(d){if(en(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return zn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const a=yield Vr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),c=o.searchParams.get("token");if(!c)throw new _w("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}})}update(e,t,n){return zn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return zn(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}copy(e,t,n){return zn(this,void 0,void 0,function*(){try{return{data:{path:(yield Vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return zn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Vr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return zn(this,void 0,void 0,function*(){try{const i=yield Vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}download(e,t){return zn(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield yg(this.fetch,`${this.url}/${i}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(en(c))return{data:null,error:c};throw c}})}info(e){return zn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield yg(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Vv(n),error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}})}exists(e){return zn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield QP(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(en(n)&&n instanceof Gv){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&i.push(d);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${f}`)}}}remove(e){return zn(this,void 0,void 0,function*(){try{return{data:yield Ux(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}list(e,t,n){return zn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},ZP),t),{prefix:e||""});return{data:yield Vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const tR="2.7.1",nR={"X-Client-Info":`storage-js/${tR}`};var Gl=function(l,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(g){try{f(n.next(g))}catch(m){o(m)}}function d(g){try{f(n.throw(g))}catch(m){o(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((n=n.apply(l,e||[])).next())})};class sR{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},nR),t),this.fetch=$x(n)}listBuckets(){return Gl(this,void 0,void 0,function*(){try{return{data:yield yg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}getBucket(e){return Gl(this,void 0,void 0,function*(){try{return{data:yield yg(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Gl(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Gl(this,void 0,void 0,function*(){try{return{data:yield JP(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Gl(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Gl(this,void 0,void 0,function*(){try{return{data:yield Ux(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}}class iR extends sR{constructor(e,t={},n){super(e,t,n)}from(e){return new eR(this.url,this.headers,e,this.fetch)}}const rR="2.49.1";let uh="";typeof Deno<"u"?uh="deno":typeof document<"u"?uh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?uh="react-native":uh="node";const aR={"X-Client-Info":`supabase-js-${uh}/${rR}`},oR={headers:aR},lR={schema:"public"},cR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uR={};var hR=function(l,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(g){try{f(n.next(g))}catch(m){o(m)}}function d(g){try{f(n.throw(g))}catch(m){o(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((n=n.apply(l,e||[])).next())})};const dR=l=>{let e;return l?e=l:typeof fetch>"u"?e=Px:e=fetch,(...t)=>e(...t)},fR=()=>typeof Headers>"u"?Rx:Headers,pR=(l,e,t)=>{const n=dR(t),i=fR();return(a,o)=>hR(void 0,void 0,void 0,function*(){var c;const d=(c=yield e())!==null&&c!==void 0?c:l;let f=new i(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",l),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},o),{headers:f}))})};var gR=function(l,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(g){try{f(n.next(g))}catch(m){o(m)}}function d(g){try{f(n.throw(g))}catch(m){o(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((n=n.apply(l,e||[])).next())})};function mR(l){return l.replace(/\/$/,"")}function yR(l,e){const{db:t,auth:n,realtime:i,global:a}=l,{db:o,auth:c,realtime:d,global:f}=e,g={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign({},f),a),accessToken:()=>gR(this,void 0,void 0,function*(){return""})};return l.accessToken?g.accessToken=l.accessToken:delete g.accessToken,g}const Bx="2.68.0",ql=30*1e3,Wv=3,sv=Wv*ql,vR="http://localhost:9999",wR="supabase.auth.token",_R={"X-Client-Info":`gotrue-js/${Bx}`},qv="X-Supabase-Api-Version",zx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function bR(l){return Math.round(Date.now()/1e3)+l}function AR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const e=Math.random()*16|0;return(l=="x"?e:e&3|8).toString(16)})}const di=()=>typeof window<"u"&&typeof document<"u",Wa={tested:!1,writable:!1},Th=()=>{if(!di())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wa.tested)return Wa.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Wa.tested=!0,Wa.writable=!0}catch{Wa.tested=!0,Wa.writable=!1}return Wa.writable};function SR(l){const e={},t=new URL(l);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const Hx=l=>{let e;return l?e=l:typeof fetch>"u"?e=(...t)=>hu(async()=>{const{default:n}=await Promise.resolve().then(()=>gu);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},xR=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",Gx=async(l,e,t)=>{await l.setItem(e,JSON.stringify(t))},Ip=async(l,e)=>{const t=await l.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Np=async(l,e)=>{await l.removeItem(e)};function ER(l){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,i,a,o,c,d,f,g=0;for(l=l.replace("-","+").replace("_","/");g<l.length;)o=e.indexOf(l.charAt(g++)),c=e.indexOf(l.charAt(g++)),d=e.indexOf(l.charAt(g++)),f=e.indexOf(l.charAt(g++)),n=o<<2|c>>4,i=(c&15)<<4|d>>2,a=(d&3)<<6|f,t=t+String.fromCharCode(n),d!=64&&i!=0&&(t=t+String.fromCharCode(i)),f!=64&&a!=0&&(t=t+String.fromCharCode(a));return t}class Xg{constructor(){this.promise=new Xg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Xg.promiseConstructor=Promise;function lS(l){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=l.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(ER(n))}async function kR(l){return await new Promise(e=>{setTimeout(()=>e(null),l)})}function CR(l,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await l(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function TR(l){return("0"+l.toString(16)).substr(-2)}function PR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,TR).join("")}async function RR(l){const t=new TextEncoder().encode(l),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}function LR(l){return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function IR(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const t=await RR(l);return LR(t)}async function Vl(l,e,t=!1){const n=PR();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await Gx(l,`${e}-code-verifier`,i);const a=await IR(n);return[a,n===a?"plain":"s256"]}const NR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MR(l){const e=l.headers.get(qv);if(!e||!e.match(NR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class bw extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function $e(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class OR extends bw{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function DR(l){return $e(l)&&l.name==="AuthApiError"}class Vx extends bw{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class hl extends bw{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class zr extends hl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function FR(l){return $e(l)&&l.name==="AuthSessionMissingError"}class iv extends hl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mp extends hl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Op extends hl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jR(l){return $e(l)&&l.name==="AuthImplicitGrantRedirectError"}class cS extends hl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kv extends hl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function rv(l){return $e(l)&&l.name==="AuthRetryableFetchError"}class uS extends hl{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var $R=function(l,e){var t={};for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&e.indexOf(n)<0&&(t[n]=l[n]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(l);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(l,n[i])&&(t[n[i]]=l[n[i]]);return t};const qa=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),UR=[502,503,504];async function hS(l){var e;if(!xR(l))throw new Kv(qa(l),0);if(UR.includes(l.status))throw new Kv(qa(l),l.status);let t;try{t=await l.json()}catch(a){throw new Vx(qa(a),a)}let n;const i=MR(l);if(i&&i.getTime()>=zx["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new uS(qa(t),l.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new zr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new uS(qa(t),l.status,t.weak_password.reasons);throw new OR(qa(t),l.status||500,n)}const BR=(l,e,t,n)=>{const i={method:l,headers:(e==null?void 0:e.headers)||{}};return l==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function Ge(l,e,t,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[qv]||(a[qv]=zx["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await zR(l,e,t+c,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function zR(l,e,t,n,i,a){const o=BR(e,n,i,a);let c;try{c=await l(t,Object.assign({},o))}catch(d){throw console.error(d),new Kv(qa(d),0)}if(c.ok||await hS(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(d){await hS(d)}}function Hr(l){var e;let t=null;WR(l)&&(t=Object.assign({},l),l.expires_at||(t.expires_at=bR(l.expires_in)));const n=(e=l.user)!==null&&e!==void 0?e:l;return{data:{session:t,user:n},error:null}}function dS(l){const e=Hr(l);return!e.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=l.weak_password),e}function Wr(l){var e;return{data:{user:(e=l.user)!==null&&e!==void 0?e:l},error:null}}function HR(l){return{data:l,error:null}}function GR(l){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:a}=l,o=$R(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:a},d=Object.assign({},o);return{data:{properties:c,user:d},error:null}}function VR(l){return l}function WR(l){return l.access_token&&l.refresh_token&&l.expires_in}var qR=function(l,e){var t={};for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&e.indexOf(n)<0&&(t[n]=l[n]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(l);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(l,n[i])&&(t[n[i]]=l[n[i]]);return t};class KR{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Hx(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Wr})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=qR(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:GR,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if($e(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wr})}catch(t){if($e(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,a,o,c,d;try{const f={nextPage:null,lastPage:0,total:0},g=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:VR});if(g.error)throw g.error;const m=await g.json(),v=(o=g.headers.get("x-total-count"))!==null&&o!==void 0?o:0,_=(d=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(A=>{const S=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(A.split(";")[1].split("=")[1]);f[`${C}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if($e(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wr})}catch(t){if($e(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Wr})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Wr})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if($e(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}}}const XR={getItem:l=>Th()?globalThis.localStorage.getItem(l):null,setItem:(l,e)=>{Th()&&globalThis.localStorage.setItem(l,e)},removeItem:l=>{Th()&&globalThis.localStorage.removeItem(l)}};function fS(l={}){return{getItem:e=>l[e]||null,setItem:(e,t)=>{l[e]=t},removeItem:e=>{delete l[e]}}}function YR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Wl={debug:!!(globalThis&&Th()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class JR extends Wx{}async function QR(l,e,t){Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,i.name);try{return await t()}finally{Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,i.name)}}else{if(e===0)throw Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new JR(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Wl.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}YR();const ZR={url:vR,storageKey:wR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_R,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pS(l,e,t){return await t()}class Mh{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mh.nextInstanceID,Mh.nextInstanceID+=1,this.instanceID>0&&di()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},ZR),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new KR({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Hx(i.fetch),this.lock=i.lock||pS,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:di()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=QR:this.lock=pS,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Th()?this.storage=XR:(this.memoryStorage={},this.storage=fS(this.memoryStorage)):(this.memoryStorage={},this.storage=fS(this.memoryStorage)),di()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=SR(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),di()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),jR(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return $e(t)?{error:t}:{error:new Vx("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Hr}),{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,i;try{let a;if("email"in e){const{email:g,password:m,options:v}=e;let _=null,A=null;this.flowType==="pkce"&&([_,A]=await Vl(this.storage,this.storageKey)),a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:m,data:(t=v==null?void 0:v.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:_,code_challenge_method:A},xform:Hr})}else if("phone"in e){const{phone:g,password:m,options:v}=e;a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Hr})}else throw new Mp("You must provide either an email or phone number and a password");const{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:o,options:c}=e;t=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:dS})}else if("phone"in e){const{phone:a,password:o,options:c}=e;t=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:dS})}else throw new Mp("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new iv}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Ip(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:a,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Hr});if(await Np(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new iv}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if($e(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:a,nonce:o}=e,c=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Hr}),{data:d,error:f}=c;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new iv}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,a,o;try{if("email"in e){const{email:c,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Vl(this.storage,this.storageKey));const{error:m}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:g}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new Mp("You must provide either an email or phone number.")}catch(c){if($e(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,n;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:c}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Hr});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,f=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if($e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Vl(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:HR})}catch(a){if($e(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new zr;const{error:i}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await Ge(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:c}=await Ge(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new Mp("You must provide either an email or phone number and a type")}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ip(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<sv:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,g)=>(!o&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,g))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wr}):await this._useSession(async t=>{var n,i,a;const{data:o,error:c}=t;if(c)throw c;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zr}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Wr})})}catch(t){if($e(t))return FR(t)&&(await this._removeSession(),await Np(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new zr;const o=i.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Vl(this.storage,this.storageKey));const{data:f,error:g}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:o.access_token,xform:Wr});if(g)throw g;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return lS(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new zr;const t=Date.now()/1e3;let n=t,i=!0,a=null;const o=lS(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if($e(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:c}=t;if(c)throw c;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new zr;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!di())throw new Op("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Op(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new cS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Op("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new cS("No code detected.");const{data:I,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:c,expires_at:d,token_type:f}=e;if(!a||!c||!o||!f)throw new Op("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(c);let v=g+m;d&&(v=parseInt(d));const _=v-g;_*1e3<=ql&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${m}s`);const A=v-m;g-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,v,g):g-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,v,g);const{data:S,error:C}=await this._getUser(a);if(C)throw C;const T={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:v,refresh_token:o,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(n){if($e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ip(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:a}=t;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(DR(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Np(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=AR(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:a},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Vl(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if($e(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async a=>{var o,c,d,f,g;const{data:m,error:v}=a;if(v)throw v;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",_,{headers:this.headers,jwt:(g=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return di()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if($e(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:a,error:o}=t;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if($e(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await CR(async i=>(i>0&&await kR(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Hr})),(i,a)=>{const o=200*Math.pow(2,i);return a&&rv(a)&&Date.now()+o-n<ql})}catch(n){if(this._debug(t,"error",n),$e(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),di()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Ip(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<sv;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${sv}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),rv(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new zr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Xg;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new zr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),$e(a)){const o={session:null,error:a};return rv(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){a.push(d)}});if(await Promise.all(o),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Gx(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Np(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&di()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ql);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/ql);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ql}ms, refresh threshold is ${Wv} ticks`),i<=Wv&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!di()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Vl(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:a}=t;return a?{data:null,error:a}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if($e(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:a,error:o}=t;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if($e(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:c}=await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(t){if($e(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:a}=t;return a?{data:null,error:a}:await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if($e(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const g=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}}Mh.nextInstanceID=0;const eL=Mh;class tL extends eL{constructor(e){super(e)}}var nL=function(l,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(g){try{f(n.next(g))}catch(m){o(m)}}function d(g){try{f(n.throw(g))}catch(m){o(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((n=n.apply(l,e||[])).next())})};class sL{constructor(e,t,n){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=mR(e);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:lR,realtime:uR,auth:Object.assign(Object.assign({},cR),{storageKey:d}),global:oR},g=yR(n??{},f);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=g.auth)!==null&&o!==void 0?o:{},this.headers,g.global.fetch),this.fetch=pR(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new PP(`${c}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new yP(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new iR(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return nL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:a,flowType:o,lock:c,debug:d},f,g){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tL({url:this.authUrl,headers:Object.assign(Object.assign({},m),f),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:c,debug:d,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new GP(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iL=(l,e,t)=>new sL(l,e,t),rL="https://snwhlbvdgvgmedfgxhla.supabase.co",aL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNud2hsYnZkZ3ZnbWVkZmd4aGxhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1OTE0NDIsImV4cCI6MjA1NjE2NzQ0Mn0.5kymebrzYnfagTnyQkbZYR9IMo7F67mI2SoJrjORjlI",sh=iL(rL,aL),qx=q.createContext(void 0),oL=({children:l})=>{const[e,t]=q.useState(null),[n,i]=q.useState(null),[a,o]=q.useState(!0);q.useEffect(()=>{sh.auth.getSession().then(({data:{session:v}})=>{t(v),i((v==null?void 0:v.user)??null),o(!1)});const{data:{subscription:m}}=sh.auth.onAuthStateChange((v,_)=>{t(_),i((_==null?void 0:_.user)??null),o(!1)});return()=>{m.unsubscribe()}},[]);const g={session:e,user:n,loading:a,signIn:async(m,v)=>{const{data:_,error:A}=await sh.auth.signInWithPassword({email:m,password:v});return{data:_.session,error:A}},signUp:async(m,v)=>{const{data:_,error:A}=await sh.auth.signUp({email:m,password:v});return{data:_,error:A}},signOut:async()=>{await sh.auth.signOut()}};return P.jsx(qx.Provider,{value:g,children:l})},gf=()=>{const l=q.useContext(qx);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),st=(l,e)=>{const t=q.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:c="",children:d,...f},g)=>q.createElement("svg",{ref:g,...lL,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${cL(l)}`,c].join(" "),...f},[...e.map(([m,v])=>q.createElement(m,v)),...Array.isArray(d)?d:[d]]));return t.displayName=`${l}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=st("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=st("BrainCog",[["path",{d:"M12 5a3 3 0 1 0-5.997.142 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588 4 4 0 0 0 7.636 2.106 3.2 3.2 0 0 0 .164-.546c.028-.13.306-.13.335 0a3.2 3.2 0 0 0 .163.546 4 4 0 0 0 7.636-2.106 4 4 0 0 0 .556-6.588 4 4 0 0 0-2.526-5.77A3 3 0 1 0 12 5",key:"1kgmhc"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m15.7 10.4-.9.4",key:"ayzo6p"}],["path",{d:"m9.2 13.2-.9.4",key:"1uzb3g"}],["path",{d:"m13.6 15.7-.4-.9",key:"11ifqf"}],["path",{d:"m10.8 9.2-.4-.9",key:"1pmk2v"}],["path",{d:"m15.7 13.5-.9-.4",key:"7ng02m"}],["path",{d:"m9.2 10.9-.9-.4",key:"1x66zd"}],["path",{d:"m10.5 15.7.4-.9",key:"3js94g"}],["path",{d:"m13.1 9.2.4-.9",key:"18n7mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=st("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=st("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=st("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=st("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=st("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=st("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=st("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=st("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=st("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=st("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=st("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=st("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=st("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=st("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=st("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=st("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=st("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=st("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=st("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=st("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=st("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=st("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=st("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=st("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=st("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=st("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),TL=({children:l})=>{const{user:e,loading:t}=gf();return t?P.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 flex items-center justify-center",children:P.jsxs("div",{className:"flex flex-col items-center gap-4",children:[P.jsx(Oh,{className:"h-12 w-12 text-blue-400 animate-spin"}),P.jsx("p",{className:"text-gray-300",children:"Loading..."})]})}):e?P.jsx(P.Fragment,{children:l}):P.jsx(Tx,{to:"/auth",replace:!0})},PL=()=>{const[l,e]=q.useState(!1),{user:t,signOut:n}=gf(),i=Kg(),a=async()=>{await n(),i("/"),i("#features"),i("#demo")};return P.jsxs("nav",{className:"bg-gray-800/80 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-700/50",children:[P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:P.jsxs("div",{className:"flex items-center justify-between h-16",children:[P.jsx("div",{className:"flex items-center",children:P.jsx(jl,{to:"/",className:"flex items-center",children:P.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PrepAI"})})}),P.jsx("div",{className:"hidden md:block",children:P.jsxs("div",{className:"flex items-center space-x-4",children:[t&&P.jsx(jl,{to:"/tool",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md",children:"AI Tool"}),t?P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("span",{className:"text-gray-400 text-sm",children:t.email}),P.jsxs("button",{onClick:a,className:"flex items-center gap-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 px-3 py-2 rounded-md transition-colors",children:[P.jsx(yS,{className:"h-4 w-4"}),"Sign Out"]})]}):P.jsxs(jl,{to:"/auth",className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-md transition-colors",children:[P.jsx(Xv,{className:"h-4 w-4"}),"Sign In"]})]})}),P.jsx("div",{className:"md:hidden",children:P.jsx("button",{onClick:()=>e(!l),className:"text-gray-400 hover:text-white",children:l?P.jsx(Kx,{className:"h-6 w-6"}):P.jsx(wL,{className:"h-6 w-6"})})})]})}),l&&P.jsx("div",{className:"md:hidden bg-gray-800 border-t border-gray-700",children:P.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[P.jsx(jl,{to:"/",className:"text-gray-300 hover:text-white block px-3 py-2 rounded-md",onClick:()=>e(!1),children:"Home"}),t&&P.jsx(jl,{to:"/tool",className:"text-gray-300 hover:text-white block px-3 py-2 rounded-md",onClick:()=>e(!1),children:"AI Tool"}),t?P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:t.email}),P.jsxs("button",{onClick:()=>{a(),e(!1)},className:"flex items-center gap-1 w-full text-left text-red-400 px-3 py-2 rounded-md",children:[P.jsx(yS,{className:"h-4 w-4"}),"Sign Out"]})]}):P.jsxs(jl,{to:"/auth",className:"flex items-center gap-1 text-blue-400 px-3 py-2 rounded-md",onClick:()=>e(!1),children:[P.jsx(Xv,{className:"h-4 w-4"}),"Sign In"]})]})})]})},RL=({isOpen:l,onClose:e})=>{if(!l)return null;const t=()=>{window.open("https://chat.whatsapp.com/H2EeBvKtjjI7Y6BzubcHTP"),e()};return P.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:P.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[P.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),P.jsxs("div",{className:"relative bg-gray-800 rounded-2xl p-8 max-w-md w-full",children:[P.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:P.jsx(Kx,{className:"h-6 w-6"})}),P.jsxs("div",{className:"text-center mb-8",children:[P.jsx(Yv,{className:"h-12 w-12 mx-auto mb-4 text-blue-400"}),P.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Join Our Study Group"}),P.jsx("p",{className:"text-gray-400",children:"Get access to Free Demo Class and Premium Study Materials"})]}),P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[P.jsx("h3",{className:"font-semibold mb-2",children:"Benefits of Joining:"}),P.jsxs("ul",{className:"text-gray-300 text-sm space-y-2",children:[P.jsx("li",{children:"• Free Demo Class"}),P.jsx("li",{children:"• Access to Premium Study Materials (Only ₹50)"}),P.jsx("li",{children:"• Latest Update of AI Tools for Exam Preparation"})]})]}),P.jsxs("button",{onClick:t,className:"w-full bg-green-500 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-3 hover:bg-green-600 transition-all",children:["Join WhatsApp Group",P.jsx(Yv,{className:"h-5 w-5"})]})]}),P.jsx("div",{className:"mt-6 text-center text-sm text-gray-400",children:"By joining, you agree to our community guidelines and terms of service"})]})]})})},LL=()=>{const[l,e]=q.useState(()=>{const a=localStorage.getItem("timerEndTime");if(a){const o=parseInt(a),c=new Date().getTime(),d=o-c;if(d>0)return{hours:Math.floor(d/36e5),minutes:Math.floor(d%36e5/6e4),seconds:Math.floor(d%6e4/1e3)}}return{hours:0,minutes:30,seconds:0}}),[t,n]=q.useState("");q.useEffect(()=>{const a=()=>{const m=new Date().getTime()+30*60*1e3;return localStorage.setItem("timerEndTime",m.toString()),m};localStorage.getItem("timerEndTime")||a();const o=g=>{const m=new Date(g),v=m.getHours(),_=m.getMinutes(),A=v>=12?"PM":"AM",S=v%12||12,C=_.toString().padStart(2,"0");return`${S}:${C} ${A}`},c=()=>{const g=new Date().getTime(),v=parseInt(localStorage.getItem("timerEndTime")||"0")-g;if(v<=0){const _=a();n(o(_));return}e({hours:Math.floor(v/(1e3*60*60)),minutes:Math.floor(v%(1e3*60*60)/(1e3*60)),seconds:Math.floor(v%(1e3*60)/1e3)})},d=parseInt(localStorage.getItem("timerEndTime")||"0");n(o(d)),c();const f=setInterval(c,1e3);return()=>clearInterval(f)},[]);const i=({value:a,label:o})=>P.jsxs("div",{className:"flex flex-col items-center bg-gray-700/50 px-3 py-1 rounded",children:[P.jsx("span",{className:"font-mono text-xl font-bold text-purple-400",children:a.toString().padStart(2,"0")}),P.jsx("span",{className:"text-xs text-gray-400",children:o})]});return P.jsxs("div",{className:"flex flex-col items-center gap-2 bg-gray-800/50 px-6 py-3 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[P.jsx(mL,{className:"h-5 w-5 text-purple-400"}),P.jsx("span",{children:"Offer ends in"})]}),P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(i,{value:l.hours,label:"HRS"}),P.jsx("span",{className:"text-purple-400 font-bold",children:":"}),P.jsx(i,{value:l.minutes,label:"MIN"}),P.jsx("span",{className:"text-purple-400 font-bold",children:":"}),P.jsx(i,{value:l.seconds,label:"SEC"})]}),P.jsxs("div",{className:"text-sm text-gray-400",children:["Ends at ",t]})]})},IL=()=>P.jsx("a",{href:"https://chat.whatsapp.com/H2EeBvKtjjI7Y6BzubcHTP",target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg transition-all hover:scale-110 z-50 flex items-center justify-center","aria-label":"Join WhatsApp Group",children:P.jsx(_L,{className:"h-6 w-6"})});function NL(){const[l,e]=q.useState(!1),t=Kg(),{user:n}=gf(),i=()=>{t(n?"/tool":"/auth")};return P.jsxs("div",{children:[P.jsx(IL,{}),P.jsxs("section",{className:"relative overflow-hidden",children:[P.jsx("div",{}),P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16",children:P.jsxs("div",{className:"text-center",children:[P.jsx(Yg,{className:"h-16 w-16 mx-auto mb-6 text-blue-400"}),P.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400 mb-6",children:"AI-Powered Exam Preparation"}),P.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-8",children:"Revolutionize your government exam preparation with cutting-edge AI tools and expert guidance"}),P.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[P.jsxs("button",{onClick:()=>e(!0),className:"bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2 mx-auto sm:mx-0",children:["Join Study Group",P.jsx(Yv,{className:"h-5 w-5"})]}),P.jsxs("button",{onClick:i,className:"bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2 mx-auto sm:mx-0",children:[n?"Access AI Tool":"Sign In to Use AI Tool",P.jsx(av,{className:"h-5 w-5"})]})]})]})})]}),P.jsx("section",{className:"py-16 bg-gray-800/50",id:"features",children:P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:P.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[P.jsx(ov,{icon:P.jsx(bL,{className:"h-8 w-8 text-blue-400"}),title:"Free Demo Content",description:"Get a free demo on using AI tools for exam prep"}),P.jsx(ov,{icon:P.jsx(vL,{className:"h-8 w-8 text-purple-400"}),title:"Premium Access",description:"Unlock comprehensive study materials and AI tools for ₹50"}),P.jsx(ov,{icon:P.jsx(uL,{className:"h-8 w-8 text-green-400"}),title:"Smart MCQ Practice",description:"Generate unlimited questions from your content with AI."})]})})}),P.jsx("section",{className:"py-16",id:"demo",children:P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:P.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8",children:[P.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",children:"Join Our Free Demo"}),P.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-xl overflow-hidden",children:P.jsx("iframe",{className:"w-full h-[400px]",src:"https://www.youtube.com/embed/oEC7gEIeUa8",title:"Introduction to AI-Powered Exam Preparation",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),P.jsxs("button",{onClick:i,className:"bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2 mx-auto sm:mx-0 my-5",children:[n?"Access AI Tool":"Sign In to Use AI Tool",P.jsx(av,{className:"h-5 w-5"})]})]})})}),P.jsx("section",{className:"py-16 bg-gradient-to-b from-gray-800/50 to-gray-900",id:"pricing",children:P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[P.jsxs("div",{className:"text-center mb-12",children:[P.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Premium Content Preview"}),P.jsx("p",{className:"text-gray-400 mb-4",children:"Get a glimpse of what awaits in our premium section"}),P.jsxs("div",{className:"flex flex-col items-center gap-4",children:[P.jsxs("div",{className:"flex items-center justify-center gap-3 text-2xl",children:[P.jsx("span",{className:"text-gray-400 line-through",children:"₹1,500"}),P.jsx("span",{className:"text-green-400 font-bold",children:"₹50 only"})]}),P.jsx(LL,{})]})]}),P.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[P.jsx("img",{src:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?auto=format&fit=crop&q=80",alt:"Premium Content",className:"w-full h-[300px] object-cover"}),P.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:P.jsxs("button",{onClick:()=>e(!0),className:"bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2",children:["Join Group to Access ",P.jsx(av,{className:"h-5 w-5"})]})})]})]})}),P.jsx(RL,{isOpen:l,onClose:()=>e(!1)})]})}function ov({icon:l,title:e,description:t}){return P.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl hover:bg-gray-700 transition-all",children:[P.jsx("div",{className:"mb-4",children:l}),P.jsx("h3",{className:"text-xl font-semibold mb-2",children:e}),P.jsx("p",{className:"text-gray-400",children:t})]})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wS;(function(l){l.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",l.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",l.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",l.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",l.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(wS||(wS={}));var _S;(function(l){l.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE"})(_S||(_S={}));var bS;(function(l){l.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",l.NEGLIGIBLE="NEGLIGIBLE",l.LOW="LOW",l.MEDIUM="MEDIUM",l.HIGH="HIGH"})(bS||(bS={}));var AS;(function(l){l.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",l.SAFETY="SAFETY",l.OTHER="OTHER"})(AS||(AS={}));var vg;(function(l){l.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.OTHER="OTHER"})(vg||(vg={}));var SS;(function(l){l.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",l.RETRIEVAL_QUERY="RETRIEVAL_QUERY",l.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",l.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",l.CLASSIFICATION="CLASSIFICATION",l.CLUSTERING="CLUSTERING"})(SS||(SS={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class xS extends Dh{constructor(e,t){super(e),this.response=t}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML="https://generativelanguage.googleapis.com",OL="v1",DL="0.2.1",FL="genai-js";var rl;(function(l){l.GENERATE_CONTENT="generateContent",l.STREAM_GENERATE_CONTENT="streamGenerateContent",l.COUNT_TOKENS="countTokens",l.EMBED_CONTENT="embedContent",l.BATCH_EMBED_CONTENTS="batchEmbedContents"})(rl||(rl={}));class mf{constructor(e,t,n,i){this.model=e,this.task=t,this.apiKey=n,this.stream=i}toString(){let e=`${ML}/${OL}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}function jL(){return`${FL}/${DL}`}async function yf(l,e,t){let n;try{if(n=await fetch(l.toString(),Object.assign(Object.assign({},$L(t)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":jL(),"x-goog-api-key":l.apiKey},body:e})),!n.ok){let i="";try{const a=await n.json();i=a.error.message,a.error.details&&(i+=` ${JSON.stringify(a.error.details)}`)}catch{}throw new Error(`[${n.status} ${n.statusText}] ${i}`)}}catch(i){const a=new Dh(`Error fetching from ${l.toString()}: ${i.message}`);throw a.stack=i.stack,a}return n}function $L(l){const e={};if((l==null?void 0:l.timeout)>=0){const t=new AbortController,n=t.signal;setTimeout(()=>t.abort(),l.timeout),e.signal=n}return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(l){return l.text=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Xx(l.candidates[0]))throw new xS(`${wg(l)}`,l);return UL(l)}else if(l.promptFeedback)throw new xS(`Text not available. ${wg(l)}`,l);return""},l}function UL(l){var e,t,n,i;return!((i=(n=(t=(e=l.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0?void 0:t.parts)===null||n===void 0?void 0:n[0])===null||i===void 0)&&i.text?l.candidates[0].content.parts[0].text:""}const BL=[vg.RECITATION,vg.SAFETY];function Xx(l){return!!l.finishReason&&BL.includes(l.finishReason)}function wg(l){var e,t,n;let i="";if((!l.candidates||l.candidates.length===0)&&l.promptFeedback)i+="Response was blocked",!((e=l.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${l.promptFeedback.blockReason}`),!((t=l.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${l.promptFeedback.blockReasonMessage}`);else if(!((n=l.candidates)===null||n===void 0)&&n[0]){const a=l.candidates[0];Xx(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function Fh(l){return this instanceof Fh?(this.v=l,this):new Fh(l)}function zL(l,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(l,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(v){n[v]&&(i[v]=function(_){return new Promise(function(A,S){a.push([v,_,A,S])>1||c(v,_)})})}function c(v,_){try{d(n[v](_))}catch(A){m(a[0][3],A)}}function d(v){v.value instanceof Fh?Promise.resolve(v.value.v).then(f,g):m(a[0][2],v)}function f(v){c("next",v)}function g(v){c("throw",v)}function m(v,_){v(_),a.shift(),a.length&&c(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function HL(l){const e=l.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=WL(e),[n,i]=t.tee();return{stream:VL(n),response:GL(i)}}async function GL(l){const e=[],t=l.getReader();for(;;){const{done:n,value:i}=await t.read();if(n)return Aw(qL(e));e.push(i)}}function VL(l){return zL(this,arguments,function*(){const t=l.getReader();for(;;){const{value:n,done:i}=yield Fh(t.read());if(i)break;yield yield Fh(Aw(n))}})}function WL(l){const e=l.getReader();return new ReadableStream({start(n){let i="";return a();function a(){return e.read().then(({value:o,done:c})=>{if(c){if(i.trim()){n.error(new Dh("Failed to parse stream"));return}n.close();return}i+=o;let d=i.match(ES),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Dh(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),i=i.substring(d[0].length),d=i.match(ES)}return a()})}}})}function qL(l){const e=l[l.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of l)if(n.candidates)for(const i of n.candidates){const a=i.index;if(t.candidates||(t.candidates=[]),t.candidates[a]||(t.candidates[a]={index:i.index}),t.candidates[a].citationMetadata=i.citationMetadata,t.candidates[a].finishReason=i.finishReason,t.candidates[a].finishMessage=i.finishMessage,t.candidates[a].safetyRatings=i.safetyRatings,i.content&&i.content.parts){t.candidates[a].content||(t.candidates[a].content={role:i.content.role||"user",parts:[{text:""}]});for(const o of i.content.parts)o.text&&(t.candidates[a].content.parts[0].text+=o.text)}}return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(l,e,t,n){const i=new mf(e,rl.STREAM_GENERATE_CONTENT,l,!0),a=await yf(i,JSON.stringify(t),n);return HL(a)}async function Jx(l,e,t,n){const i=new mf(e,rl.GENERATE_CONTENT,l,!1),o=await(await yf(i,JSON.stringify(t),n)).json();return{response:Aw(o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(l,e){let t=[];if(typeof l=="string")t=[{text:l}];else for(const n of l)typeof n=="string"?t.push({text:n}):t.push(n);return{role:e,parts:t}}function lv(l){return l.contents?l:{contents:[Ph(l,"user")]}}function KL(l){return typeof l=="string"||Array.isArray(l)?{content:Ph(l,"user")}:l}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="SILENT_ERROR";class XL{constructor(e,t,n,i){this.model=t,this.params=n,this.requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(this._history=n.history.map(a=>{if(!a.role)throw new Error("Missing role for history item: "+JSON.stringify(a));return Ph(a.parts,a.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var t,n;await this._sendPromise;const i=Ph(e,"user"),a={safetySettings:(t=this.params)===null||t===void 0?void 0:t.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,contents:[...this._history,i]};let o;return this._sendPromise=this._sendPromise.then(()=>Jx(this._apiKey,this.model,a,this.requestOptions)).then(c=>{var d;if(c.response.candidates&&c.response.candidates.length>0){this._history.push(i);const f=Object.assign({parts:[],role:"model"},(d=c.response.candidates)===null||d===void 0?void 0:d[0].content);this._history.push(f)}else{const f=wg(c.response);f&&console.warn(`sendMessage() was unsuccessful. ${f}. Inspect response object for details.`)}o=c}),await this._sendPromise,o}async sendMessageStream(e){var t,n;await this._sendPromise;const i=Ph(e,"user"),a={safetySettings:(t=this.params)===null||t===void 0?void 0:t.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,contents:[...this._history,i]},o=Yx(this._apiKey,this.model,a,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>o).catch(c=>{throw new Error(kS)}).then(c=>c.response).then(c=>{if(c.candidates&&c.candidates.length>0){this._history.push(i);const d=Object.assign({},c.candidates[0].content);d.role||(d.role="model"),this._history.push(d)}else{const d=wg(c);d&&console.warn(`sendMessageStream() was unsuccessful. ${d}. Inspect response object for details.`)}}).catch(c=>{c.message!==kS&&console.error(c)}),o}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(l,e,t,n){const i=new mf(e,rl.COUNT_TOKENS,l,!1);return(await yf(i,JSON.stringify(Object.assign(Object.assign({},t),{model:e})),n)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(l,e,t,n){const i=new mf(e,rl.EMBED_CONTENT,l,!1);return(await yf(i,JSON.stringify(t),n)).json()}async function QL(l,e,t,n){const i=new mf(e,rl.BATCH_EMBED_CONTENTS,l,!1),a=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await yf(i,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,t,n){this.apiKey=e,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.requestOptions=n||{}}async generateContent(e){const t=lv(e);return Jx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)}async generateContentStream(e){const t=lv(e);return Yx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)}startChat(e){return new XL(this.apiKey,this.model,e,this.requestOptions)}async countTokens(e){const t=lv(e);return YL(this.apiKey,this.model,t)}async embedContent(e){const t=KL(e);return JL(this.apiKey,this.model,t)}async batchEmbedContents(e){return QL(this.apiKey,this.model,e,this.requestOptions)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Dh("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ZL(this.apiKey,e,t)}}var cv={exports:{}},CS;function tI(){return CS||(CS=1,function(l){var e=function(t){var n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(z,F,R){z[F]=R.value},o,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",g=c.toStringTag||"@@toStringTag";function m(z,F,R){return Object.defineProperty(z,F,{value:R,enumerable:!0,configurable:!0,writable:!0}),z[F]}try{m({},"")}catch{m=function(F,R,U){return F[R]=U}}function v(z,F,R,U){var W=F&&F.prototype instanceof O?F:O,ne=Object.create(W.prototype),_e=new Q(U||[]);return a(ne,"_invoke",{value:Le(z,R,_e)}),ne}t.wrap=v;function _(z,F,R){try{return{type:"normal",arg:z.call(F,R)}}catch(U){return{type:"throw",arg:U}}}var A="suspendedStart",S="suspendedYield",C="executing",T="completed",I={};function O(){}function N(){}function j(){}var G={};m(G,d,function(){return this});var V=Object.getPrototypeOf,Z=V&&V(V(te([])));Z&&Z!==n&&i.call(Z,d)&&(G=Z);var ie=j.prototype=O.prototype=Object.create(G);N.prototype=j,a(ie,"constructor",{value:j,configurable:!0}),a(j,"constructor",{value:N,configurable:!0}),N.displayName=m(j,g,"GeneratorFunction");function we(z){["next","throw","return"].forEach(function(F){m(z,F,function(R){return this._invoke(F,R)})})}t.isGeneratorFunction=function(z){var F=typeof z=="function"&&z.constructor;return F?F===N||(F.displayName||F.name)==="GeneratorFunction":!1},t.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,j):(z.__proto__=j,m(z,g,"GeneratorFunction")),z.prototype=Object.create(ie),z},t.awrap=function(z){return{__await:z}};function ce(z,F){function R(ne,_e,le,ae){var be=_(z[ne],z,_e);if(be.type==="throw")ae(be.arg);else{var He=be.arg,lt=He.value;return lt&&typeof lt=="object"&&i.call(lt,"__await")?F.resolve(lt.__await).then(function(pe){R("next",pe,le,ae)},function(pe){R("throw",pe,le,ae)}):F.resolve(lt).then(function(pe){He.value=pe,le(He)},function(pe){return R("throw",pe,le,ae)})}}var U;function W(ne,_e){function le(){return new F(function(ae,be){R(ne,_e,ae,be)})}return U=U?U.then(le,le):le()}a(this,"_invoke",{value:W})}we(ce.prototype),m(ce.prototype,f,function(){return this}),t.AsyncIterator=ce,t.async=function(z,F,R,U,W){W===void 0&&(W=Promise);var ne=new ce(v(z,F,R,U),W);return t.isGeneratorFunction(F)?ne:ne.next().then(function(_e){return _e.done?_e.value:ne.next()})};function Le(z,F,R){var U=A;return function(ne,_e){if(U===C)throw new Error("Generator is already running");if(U===T){if(ne==="throw")throw _e;return K()}for(R.method=ne,R.arg=_e;;){var le=R.delegate;if(le){var ae=Ie(le,R);if(ae){if(ae===I)continue;return ae}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if(U===A)throw U=T,R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);U=C;var be=_(z,F,R);if(be.type==="normal"){if(U=R.done?T:S,be.arg===I)continue;return{value:be.arg,done:R.done}}else be.type==="throw"&&(U=T,R.method="throw",R.arg=be.arg)}}}function Ie(z,F){var R=F.method,U=z.iterator[R];if(U===o)return F.delegate=null,R==="throw"&&z.iterator.return&&(F.method="return",F.arg=o,Ie(z,F),F.method==="throw")||R!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+R+"' method")),I;var W=_(U,z.iterator,F.arg);if(W.type==="throw")return F.method="throw",F.arg=W.arg,F.delegate=null,I;var ne=W.arg;if(!ne)return F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,I;if(ne.done)F[z.resultName]=ne.value,F.next=z.nextLoc,F.method!=="return"&&(F.method="next",F.arg=o);else return ne;return F.delegate=null,I}we(ie),m(ie,g,"Generator"),m(ie,d,function(){return this}),m(ie,"toString",function(){return"[object Generator]"});function Ae(z){var F={tryLoc:z[0]};1 in z&&(F.catchLoc=z[1]),2 in z&&(F.finallyLoc=z[2],F.afterLoc=z[3]),this.tryEntries.push(F)}function Ne(z){var F=z.completion||{};F.type="normal",delete F.arg,z.completion=F}function Q(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(Ae,this),this.reset(!0)}t.keys=function(z){var F=Object(z),R=[];for(var U in F)R.push(U);return R.reverse(),function W(){for(;R.length;){var ne=R.pop();if(ne in F)return W.value=ne,W.done=!1,W}return W.done=!0,W}};function te(z){if(z){var F=z[d];if(F)return F.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var R=-1,U=function W(){for(;++R<z.length;)if(i.call(z,R))return W.value=z[R],W.done=!1,W;return W.value=o,W.done=!0,W};return U.next=U}}return{next:K}}t.values=te;function K(){return{value:o,done:!0}}return Q.prototype={constructor:Q,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(Ne),!z)for(var F in this)F.charAt(0)==="t"&&i.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=o)},stop:function(){this.done=!0;var z=this.tryEntries[0],F=z.completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var F=this;function R(ae,be){return ne.type="throw",ne.arg=z,F.next=ae,be&&(F.method="next",F.arg=o),!!be}for(var U=this.tryEntries.length-1;U>=0;--U){var W=this.tryEntries[U],ne=W.completion;if(W.tryLoc==="root")return R("end");if(W.tryLoc<=this.prev){var _e=i.call(W,"catchLoc"),le=i.call(W,"finallyLoc");if(_e&&le){if(this.prev<W.catchLoc)return R(W.catchLoc,!0);if(this.prev<W.finallyLoc)return R(W.finallyLoc)}else if(_e){if(this.prev<W.catchLoc)return R(W.catchLoc,!0)}else if(le){if(this.prev<W.finallyLoc)return R(W.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(z,F){for(var R=this.tryEntries.length-1;R>=0;--R){var U=this.tryEntries[R];if(U.tryLoc<=this.prev&&i.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var W=U;break}}W&&(z==="break"||z==="continue")&&W.tryLoc<=F&&F<=W.finallyLoc&&(W=null);var ne=W?W.completion:{};return ne.type=z,ne.arg=F,W?(this.method="next",this.next=W.finallyLoc,I):this.complete(ne)},complete:function(z,F){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&F&&(this.next=F),I},finish:function(z){for(var F=this.tryEntries.length-1;F>=0;--F){var R=this.tryEntries[F];if(R.finallyLoc===z)return this.complete(R.completion,R.afterLoc),Ne(R),I}},catch:function(z){for(var F=this.tryEntries.length-1;F>=0;--F){var R=this.tryEntries[F];if(R.tryLoc===z){var U=R.completion;if(U.type==="throw"){var W=U.arg;Ne(R)}return W}}throw new Error("illegal catch attempt")},delegateYield:function(z,F,R){return this.delegate={iterator:te(z),resultName:F,nextLoc:R},this.method==="next"&&(this.arg=o),I}},t}(l.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(cv)),cv.exports}var uv,TS;function Sw(){return TS||(TS=1,uv=(l,e)=>`${l}-${e}-${Math.random().toString(16).slice(3,8)}`),uv}var hv,PS;function Qx(){if(PS)return hv;PS=1;const l=Sw();let e=0;return hv=({id:t,action:n,payload:i={}})=>{let a=t;return typeof a>"u"&&(a=l("Job",e),e+=1),{id:a,action:n,payload:i}},hv}var ih={},RS;function xw(){if(RS)return ih;RS=1;let l=!1;return ih.logging=l,ih.setLogging=e=>{l=e},ih.log=(...e)=>l?console.log.apply(this,e):null,ih}var dv,LS;function nI(){if(LS)return dv;LS=1;const l=Qx(),{log:e}=xw(),t=Sw();let n=0;return dv=()=>{const i=t("Scheduler",n),a={},o={};let c=[];n+=1;const d=()=>c.length,f=()=>Object.keys(a).length,g=()=>{if(c.length!==0){const S=Object.keys(a);for(let C=0;C<S.length;C+=1)if(typeof o[S[C]]>"u"){c[0](a[S[C]]);break}}},m=(S,C)=>new Promise((T,I)=>{const O=l({action:S,payload:C});c.push(async N=>{c.shift(),o[N.id]=O;try{T(await N[S].apply(this,[...C,O.id]))}catch(j){I(j)}finally{delete o[N.id],g()}}),e(`[${i}]: Add ${O.id} to JobQueue`),e(`[${i}]: JobQueue length=${c.length}`),g()});return{addWorker:S=>(a[S.id]=S,e(`[${i}]: Add ${S.id}`),e(`[${i}]: Number of workers=${f()}`),g(),S.id),addJob:async(S,...C)=>{if(f()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return m(S,C)},terminate:async()=>{Object.keys(a).forEach(async S=>{await a[S].terminate()}),c=[]},getQueueLen:d,getNumWorkers:f}},dv}function sI(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fv,IS;function iI(){if(IS)return fv;IS=1;function l(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return fv=l,fv}var pv,NS;function rI(){if(NS)return pv;NS=1;const l=iI();return pv=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":l()?t.type="electron":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof sI=="function"&&(t.type="node"),typeof e>"u"?t:t[e]},pv}var gv,MS;function aI(){if(MS)return gv;MS=1;const e=rI()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return gv=t=>{const n={...t};return["corePath","workerPath","langPath"].forEach(i=>{t[i]&&(n[i]=e(n[i]))}),n},gv}var mv,OS;function oI(){return OS||(OS=1,mv=l=>{const e=[],t=[],n=[],i=[],a=[];return l.blocks&&l.blocks.forEach(o=>{o.paragraphs.forEach(c=>{c.lines.forEach(d=>{d.words.forEach(f=>{f.symbols.forEach(g=>{a.push({...g,page:l,block:o,paragraph:c,line:d,word:f})}),i.push({...f,page:l,block:o,paragraph:c,line:d})}),n.push({...d,page:l,block:o,paragraph:c})}),t.push({...c,page:l,block:o})}),e.push({...o,page:l})}),{...l,blocks:e,paragraphs:t,lines:n,words:i,symbols:a}}),mv}var yv,DS;function Zx(){return DS||(DS=1,yv={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),yv}const lI="5.1.1",cI={version:lI};var vv,FS;function uI(){return FS||(FS=1,vv={workerBlobURL:!0,logger:()=>{}}),vv}var wv,jS;function hI(){if(jS)return wv;jS=1;const l=cI.version;return wv={...uI(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${l}/dist/worker.min.js`},wv}var _v,$S;function dI(){return $S||($S=1,_v=({workerPath:l,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const n=new Blob([`importScripts("${l}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(l);return t}),_v}var bv,US;function fI(){return US||(US=1,bv=l=>{l.terminate()}),bv}var Av,BS;function pI(){return BS||(BS=1,Av=(l,e)=>{l.onmessage=({data:t})=>{e(t)}}),Av}var Sv,zS;function gI(){return zS||(zS=1,Sv=async(l,e)=>{l.postMessage(e)}),Sv}var xv,HS;function mI(){if(HS)return xv;HS=1;const l=t=>new Promise((n,i)=>{const a=new FileReader;a.onload=()=>{n(a.result)},a.onerror=({target:{error:{code:o}}})=>{i(Error(`File could not be read! Code=${o}`))},a.readAsArrayBuffer(t)}),e=async t=>{let n=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?n=atob(t.split(",")[1]).split("").map(i=>i.charCodeAt(0)):n=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(n=await e(t.src)),t.tagName==="VIDEO"&&(n=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(i=>{t.toBlob(async a=>{n=await l(a),i()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const i=await t.convertToBlob();n=await l(i)}else(t instanceof File||t instanceof Blob)&&(n=await l(t));return new Uint8Array(n)};return xv=e,xv}var Ev,GS;function yI(){if(GS)return Ev;GS=1;const l=hI(),e=dI(),t=fI(),n=pI(),i=gI(),a=mI();return Ev={defaultOptions:l,spawnWorker:e,terminateWorker:t,onMessage:n,send:i,loadImage:a},Ev}var kv,VS;function e1(){if(VS)return kv;VS=1;const l=aI(),e=oI(),t=Qx(),{log:n}=xw(),i=Sw(),a=Zx(),{defaultOptions:o,spawnWorker:c,terminateWorker:d,onMessage:f,loadImage:g,send:m}=yI();let v=0;return kv=async(_="eng",A=a.LSTM_ONLY,S={},C={})=>{const T=i("Worker",v),{logger:I,errorHandler:O,...N}=l({...o,...S}),j={},G={},V=typeof _=="string"?_.split("+"):_;let Z=A,ie=C;const we=[a.DEFAULT,a.LSTM_ONLY].includes(A)&&!N.legacyCore;let ce,Le;const Ie=new Promise((Se,Te)=>{Le=Se,ce=Te}),Ae=Se=>{ce(Se.message)};let Ne=c(N);Ne.onerror=Ae,v+=1;const Q=(Se,Te)=>{j[Se]=Te},te=(Se,Te)=>{G[Se]=Te},K=({id:Se,action:Te,payload:bt})=>new Promise((It,Et)=>{n(`[${T}]: Start ${Se}, action=${Te}`);const un=`${Te}-${Se}`;Q(un,It),te(un,Et),m(Ne,{workerId:T,jobId:Se,action:Te,payload:bt})}),z=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),F=Se=>K(t({id:Se,action:"load",payload:{options:{lstmOnly:we,corePath:N.corePath,logging:N.logging}}})),R=(Se,Te,bt)=>K(t({id:bt,action:"FS",payload:{method:"writeFile",args:[Se,Te]}})),U=(Se,Te)=>K(t({id:Te,action:"FS",payload:{method:"readFile",args:[Se,{encoding:"utf8"}]}})),W=(Se,Te)=>K(t({id:Te,action:"FS",payload:{method:"unlink",args:[Se]}})),ne=(Se,Te,bt)=>K(t({id:bt,action:"FS",payload:{method:Se,args:Te}})),_e=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),le=(Se,Te)=>K(t({id:Te,action:"loadLanguage",payload:{langs:Se,options:{langPath:N.langPath,dataPath:N.dataPath,cachePath:N.cachePath,cacheMethod:N.cacheMethod,gzip:N.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(Z)&&!N.legacyLang}}})),ae=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),be=(Se,Te,bt,It)=>K(t({id:It,action:"initialize",payload:{langs:Se,oem:Te,config:bt}})),He=(Se="eng",Te,bt,It)=>{if(we&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(Te))throw Error("Legacy model requested but code missing.");const Et=Te||Z;Z=Et;const un=bt||ie;ie=un;const fl=(typeof Se=="string"?Se.split("+"):Se).filter(bf=>!V.includes(bf));return V.push(...fl),fl.length>0?le(fl,It).then(()=>be(Se,Et,un,It)):be(Se,Et,un,It)},lt=(Se={},Te)=>K(t({id:Te,action:"setParameters",payload:{params:Se}})),pe=async(Se,Te={},bt={blocks:!0,text:!0,hocr:!0,tsv:!0},It)=>K(t({id:It,action:"recognize",payload:{image:await g(Se),options:Te,output:bt}})),Oe=(Se="Tesseract OCR Result",Te=!1,bt)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),K(t({id:bt,action:"getPDF",payload:{title:Se,textonly:Te}}))),We=async(Se,Te)=>{if(we)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return K(t({id:Te,action:"detect",payload:{image:await g(Se)}}))},xt=async()=>(Ne!==null&&(d(Ne),Ne=null),Promise.resolve());f(Ne,({workerId:Se,jobId:Te,status:bt,action:It,data:Et})=>{const un=`${It}-${Te}`;if(bt==="resolve"){n(`[${Se}]: Complete ${Te}`);let Ar=Et;It==="recognize"?Ar=e(Et):It==="getPDF"&&(Ar=Array.from({...Et,length:Object.keys(Et).length})),j[un]({jobId:Te,data:Ar})}else if(bt==="reject")if(G[un](Et),It==="load"&&ce(Et),O)O(Et);else throw Error(Et);else bt==="progress"&&I({...Et,userJobId:Te})});const xn={id:T,worker:Ne,setResolve:Q,setReject:te,load:z,writeText:R,readText:U,removeFile:W,FS:ne,loadLanguage:_e,initialize:ae,reinitialize:He,setParameters:lt,recognize:pe,getPDF:Oe,detect:We,terminate:xt};return F().then(()=>le(_)).then(()=>be(_,A,C)).then(()=>Le(xn)).catch(()=>{}),Ie},kv}var Cv,WS;function vI(){if(WS)return Cv;WS=1;const l=e1();return Cv={recognize:async(n,i,a)=>{const o=await l(i,1,a);return o.recognize(n).finally(async()=>{await o.terminate()})},detect:async(n,i)=>{const a=await l("osd",0,i);return a.detect(n).finally(async()=>{await a.terminate()})}},Cv}var Tv,qS;function wI(){return qS||(qS=1,Tv={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Tv}var Pv,KS;function _I(){return KS||(KS=1,Pv={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Pv}var Rv,XS;function bI(){if(XS)return Rv;XS=1,tI();const l=nI(),e=e1(),t=vI(),n=wI(),i=Zx(),a=_I(),{setLogging:o}=xw();return Rv={languages:n,OEM:i,PSM:a,createScheduler:l,createWorker:e,setLogging:o,...t},Rv}var AI=bI(),Rh={};Rh.d=(l,e)=>{for(var t in e)Rh.o(e,t)&&!Rh.o(l,t)&&Object.defineProperty(l,t,{enumerable:!0,get:e[t]})};Rh.o=(l,e)=>Object.prototype.hasOwnProperty.call(l,e);var Re=globalThis.pdfjsLib={};Rh.d(Re,{AbortException:()=>Ca,AnnotationEditorLayer:()=>rw,AnnotationEditorParamsType:()=>Ve,AnnotationEditorType:()=>De,AnnotationEditorUIManager:()=>ol,AnnotationLayer:()=>yM,AnnotationMode:()=>qr,ColorPicker:()=>Eg,DOMSVGFactory:()=>Nw,DrawLayer:()=>lw,FeatureTest:()=>Nn,GlobalWorkerOptions:()=>yr,ImageKind:()=>Up,InvalidPDFException:()=>Qv,MissingPDFException:()=>jh,OPS:()=>zs,OutputScale:()=>e0,PDFDataRangeTransport:()=>nE,PDFDateString:()=>Pw,PDFWorker:()=>rc,PasswordResponses:()=>kI,PermissionFlag:()=>EI,PixelsPerInch:()=>Ta,RenderingCancelledException:()=>Cw,TextLayer:()=>$h,TouchManager:()=>Sg,UnexpectedResponseException:()=>_g,Util:()=>ve,VerbosityLevel:()=>Jg,XfaLayer:()=>iE,build:()=>JN,createValidAbsoluteUrl:()=>RI,fetchData:()=>tm,getDocument:()=>zN,getFilenameFromUrl:()=>$I,getPdfFilenameFromUrl:()=>UI,getXfaPageViewport:()=>BI,isDataScheme:()=>nm,isPdfFile:()=>Tw,noContextMenu:()=>si,normalizeUnicode:()=>DI,setLayerDimensions:()=>al,shadow:()=>ze,stopEvent:()=>gs,version:()=>YN});const Sn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),t1=[1,0,0,1,0,0],Jv=[.001,0,0,.001,0,0],SI=1e7,Lv=1.35,fs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},qr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xI="pdfjs_internal_editor_",De={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ve={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},EI={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},gn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Up={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},rh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Jg={ERRORS:0,WARNINGS:1,INFOS:5},zs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},kI={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Qg=Jg.WARNINGS;function CI(l){Number.isInteger(l)&&(Qg=l)}function TI(){return Qg}function Zg(l){Qg>=Jg.INFOS&&console.log(`Info: ${l}`)}function Fe(l){Qg>=Jg.WARNINGS&&console.log(`Warning: ${l}`)}function it(l){throw new Error(l)}function Ot(l,e){l||it(e)}function PI(l){switch(l==null?void 0:l.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function RI(l,e=null,t=null){if(!l)return null;try{if(t&&typeof l=="string"){if(t.addDefaultProtocol&&l.startsWith("www.")){const i=l.match(/\./g);(i==null?void 0:i.length)>=2&&(l=`http://${l}`)}if(t.tryConvertEncoding)try{l=OI(l)}catch{}}const n=e?new URL(l,e):new URL(l);if(PI(n))return n}catch{}return null}function ze(l,e,t,n=!1){return Object.defineProperty(l,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Ia=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class YS extends Ia{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Iv extends Ia{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Qv extends Ia{constructor(e){super(e,"InvalidPDFException")}}class jh extends Ia{constructor(e){super(e,"MissingPDFException")}}class _g extends Ia{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class LI extends Ia{constructor(e){super(e,"FormatError")}}class Ca extends Ia{constructor(e){super(e,"AbortException")}}function n1(l){(typeof l!="object"||(l==null?void 0:l.length)===void 0)&&it("Invalid argument for bytesToString");const e=l.length,t=8192;if(e<t)return String.fromCharCode.apply(null,l);const n=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),o=l.subarray(i,a);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function em(l){typeof l!="string"&&it("Invalid argument for stringToBytes");const e=l.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=l.charCodeAt(n)&255;return t}function II(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function Ew(l){const e=Object.create(null);for(const[t,n]of l)e[t]=n;return e}function NI(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function MI(){try{return new Function(""),!0}catch{return!1}}class Nn{static get isLittleEndian(){return ze(this,"isLittleEndian",NI())}static get isEvalSupported(){return ze(this,"isEvalSupported",MI())}static get isOffscreenCanvasSupported(){return ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ze(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ze(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ze(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ze(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Nv=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));var vr,Bp,Zv;class ve{static makeHexColor(e,t,n){return`#${Nv[e]}${Nv[t]}${Nv[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[n,i]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,a=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[i,a]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],a[0],o[0]),Math.min(n[1],i[1],a[1],o[1]),Math.max(n[0],i[0],a[0],o[0]),Math.max(n[1],i[1],a[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],c=(n+o)/2,d=Math.sqrt((n+o)**2-4*(n*o-a*i))/2,f=c+d||1,g=c-d||1;return[Math.sqrt(f),Math.sqrt(g)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>o?null:[n,a,i,o]}static bezierBoundingBox(e,t,n,i,a,o,c,d,f){return f?(f[0]=Math.min(f[0],e,c),f[1]=Math.min(f[1],t,d),f[2]=Math.max(f[2],e,c),f[3]=Math.max(f[3],t,d)):f=[Math.min(e,c),Math.min(t,d),Math.max(e,c),Math.max(t,d)],k(this,vr,Zv).call(this,e,n,a,c,t,i,o,d,3*(-e+3*(n-a)+c),6*(e-2*n+a),3*(n-e),f),k(this,vr,Zv).call(this,e,n,a,c,t,i,o,d,3*(-t+3*(i-o)+d),6*(t-2*i+o),3*(i-t),f),f}}vr=new WeakSet,Bp=function(e,t,n,i,a,o,c,d,f,g){if(f<=0||f>=1)return;const m=1-f,v=f*f,_=v*f,A=m*(m*(m*e+3*f*t)+3*v*n)+_*i,S=m*(m*(m*a+3*f*o)+3*v*c)+_*d;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],S)},Zv=function(e,t,n,i,a,o,c,d,f,g,m,v){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&k(this,vr,Bp).call(this,e,t,n,i,a,o,c,d,-m/g,v);return}const _=g**2-4*m*f;if(_<0)return;const A=Math.sqrt(_),S=2*f;k(this,vr,Bp).call(this,e,t,n,i,a,o,c,d,(-g+A)/S,v),k(this,vr,Bp).call(this,e,t,n,i,a,o,c,d,(-g-A)/S,v)},E(ve,vr);function OI(l){return decodeURIComponent(escape(l))}let Mv=null,JS=null;function DI(l){return Mv||(Mv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,JS=new Map([["ﬅ","ſt"]])),l.replaceAll(Mv,(e,t,n)=>t?t.normalize("NFKC"):JS.get(n))}function FI(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const l=new Uint8Array(32);return crypto.getRandomValues(l),n1(l)}const kw="pdfjs_internal_id_";function jI(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa(n1(l))}typeof Promise.try!="function"&&(Promise.try=function(l,...e){return new Promise(t=>{t(l(...e))})});const Ui="http://www.w3.org/2000/svg",Qa=class Qa{};ke(Qa,"CSS",96),ke(Qa,"PDF",72),ke(Qa,"PDF_TO_CSS_UNITS",Qa.CSS/Qa.PDF);let Ta=Qa;async function tm(l,e="text"){if(hh(l,document.baseURI)){const t=await fetch(l);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",l,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class vf{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:a=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=o,n*=t;const d=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let g,m,v,_;switch(i%=360,i<0&&(i+=360),i){case 180:g=-1,m=0,v=0,_=1;break;case 90:g=0,m=1,v=1,_=0;break;case 270:g=0,m=-1,v=-1,_=0;break;case 0:g=1,m=0,v=0,_=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,_=-_);let A,S,C,T;g===0?(A=Math.abs(f-e[1])*n+a,S=Math.abs(d-e[0])*n+o,C=(e[3]-e[1])*n,T=(e[2]-e[0])*n):(A=Math.abs(d-e[0])*n+a,S=Math.abs(f-e[1])*n+o,C=(e[2]-e[0])*n,T=(e[3]-e[1])*n),this.transform=[g*n,m*n,v*n,_*n,A-g*n*d-v*n*f,S-m*n*d-_*n*f],this.width=C,this.height=T}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(i=>i*e);return ze(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new vf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){return ve.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ve.applyTransform([e[0],e[1]],this.transform),n=ve.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return ve.applyInverseTransform([e,t],this.transform)}}class Cw extends Ia{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function nm(l){const e=l.length;let t=0;for(;t<e&&l[t].trim()==="";)t++;return l.substring(t,t+5).toLowerCase()==="data:"}function Tw(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function $I(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function UI(l,e="document.pdf"){if(typeof l!="string")return e;if(nm(l))return Fe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(l);let a=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||e}class QS{constructor(){ke(this,"started",Object.create(null));ke(this,"times",[])}time(e){e in this.started&&Fe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Fe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-i}ms
`);return e.join("")}}function hh(l,e){try{const{protocol:t}=e?new URL(l,e):new URL(l);return t==="http:"||t==="https:"}catch{return!1}}function si(l){l.preventDefault()}function gs(l){l.preventDefault(),l.stopPropagation()}var Bh;class Pw{static toDateObject(e){if(!e||typeof e!="string")return null;u(this,Bh)||b(this,Bh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Bh).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const f=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(o+=g,c+=m):f==="+"&&(o-=g,c-=m),new Date(Date.UTC(n,i,a,o,c,d))}}Bh=new WeakMap,E(Pw,Bh);function BI(l,{scale:e=1,rotation:t=0}){const{width:n,height:i}=l.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new vf({viewBox:a,userUnit:1,scale:e,rotation:t})}function Rw(l){if(l.startsWith("#")){const e=parseInt(l.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(e=>parseInt(e)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Fe(`Not a valid color format: "${l}"`),[0,0,0])}function zI(l){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of l.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;l.set(t,Rw(n))}e.remove()}function pt(l){const{a:e,b:t,c:n,d:i,e:a,f:o}=l.getTransform();return[e,t,n,i,a,o]}function ui(l){const{a:e,b:t,c:n,d:i,e:a,f:o}=l.getTransform().invertSelf();return[e,t,n,i,a,o]}function al(l,e,t=!1,n=!0){if(e instanceof vf){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:o}=l,c=Nn.isCSSRoundSupported,d=`var(--scale-factor) * ${i}px`,f=`var(--scale-factor) * ${a}px`,g=c?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,m=c?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!t||e.rotation%180===0?(o.width=g,o.height=m):(o.width=m,o.height=g)}n&&l.setAttribute("data-main-rotation",e.rotation)}class e0{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Kr,eo,Hs,to,zh,Hh,Tg,s1,Mn,i1,r1,zp,a1,n0;const Gi=class Gi{constructor(e){E(this,Mn);E(this,Kr,null);E(this,eo,null);E(this,Hs);E(this,to,null);E(this,zh,null);b(this,Hs,e),u(Gi,Hh)||b(Gi,Hh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=b(this,Kr,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,Hs)._uiManager._signal;e.addEventListener("contextmenu",si,{signal:t}),e.addEventListener("pointerdown",k(Gi,Tg,s1),{signal:t});const n=b(this,to,document.createElement("div"));n.className="buttons",e.append(n);const i=u(this,Hs).toolbarPosition;if(i){const{style:a}=e,o=u(this,Hs)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return k(this,Mn,a1).call(this),e}get div(){return u(this,Kr)}hide(){var e;u(this,Kr).classList.add("hidden"),(e=u(this,eo))==null||e.hideDropdown()}show(){var e;u(this,Kr).classList.remove("hidden"),(e=u(this,zh))==null||e.shown()}async addAltText(e){const t=await e.render();k(this,Mn,zp).call(this,t),u(this,to).prepend(t,u(this,Mn,n0)),b(this,zh,e)}addColorPicker(e){b(this,eo,e);const t=e.renderButton();k(this,Mn,zp).call(this,t),u(this,to).prepend(t,u(this,Mn,n0))}remove(){var e;u(this,Kr).remove(),(e=u(this,eo))==null||e.destroy(),b(this,eo,null)}};Kr=new WeakMap,eo=new WeakMap,Hs=new WeakMap,to=new WeakMap,zh=new WeakMap,Hh=new WeakMap,Tg=new WeakSet,s1=function(e){e.stopPropagation()},Mn=new WeakSet,i1=function(e){u(this,Hs)._focusEventsAllowed=!1,gs(e)},r1=function(e){u(this,Hs)._focusEventsAllowed=!0,gs(e)},zp=function(e){const t=u(this,Hs)._uiManager._signal;e.addEventListener("focusin",k(this,Mn,i1).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,Mn,r1).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",si,{signal:t})},a1=function(){const{editorType:e,_uiManager:t}=u(this,Hs),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(Gi,Hh)[e]),k(this,Mn,zp).call(this,n),n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),u(this,to).append(n)},n0=function(){const e=document.createElement("div");return e.className="divider",e},E(Gi,Tg),E(Gi,Hh,null);let t0=Gi;var Gh,no,so,Pa,o1,l1,c1;class HI{constructor(e){E(this,Pa);E(this,Gh,null);E(this,no,null);E(this,so);b(this,so,e)}show(e,t,n){const[i,a]=k(this,Pa,l1).call(this,t,n),{style:o}=u(this,no)||b(this,no,k(this,Pa,o1).call(this));e.append(u(this,no)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,no).remove()}}Gh=new WeakMap,no=new WeakMap,so=new WeakMap,Pa=new WeakSet,o1=function(){const e=b(this,no,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",si,{signal:u(this,so)._signal});const t=b(this,Gh,document.createElement("div"));return t.className="buttons",e.append(t),k(this,Pa,c1).call(this),e},l1=function(e,t){let n=0,i=0;for(const a of e){const o=a.y+a.height;if(o<n)continue;const c=a.x+(t?a.width:0);if(o>n){i=c,n=o;continue}t?c>i&&(i=c):c<i&&(i=c)}return[t?1-i:i,n]},c1=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,so)._signal;e.addEventListener("contextmenu",si,{signal:n}),e.addEventListener("click",()=>{u(this,so).highlightSelection("floating_button")},{signal:n}),u(this,Gh).append(e)};function bg(l,e,t){for(const n of t)e.addEventListener(n,l[n].bind(l))}var Pg;class GI{constructor(){E(this,Pg,0)}get id(){return`${xI}${Cn(this,Pg)._++}`}}Pg=new WeakMap;var ac,Vh,vn,oc,Hp;const Ow=class Ow{constructor(){E(this,oc);E(this,ac,FI());E(this,Vh,0);E(this,vn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ze(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:a}=e;return k(this,oc,Hp).call(this,`${t}_${n}_${i}_${a}`,e)}async getFromUrl(e){return k(this,oc,Hp).call(this,e,e)}async getFromBlob(e,t){const n=await t;return k(this,oc,Hp).call(this,e,n)}async getFromId(e){u(this,vn)||b(this,vn,new Map);const t=u(this,vn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,vn)||b(this,vn,new Map);let n=u(this,vn).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${u(this,ac)}_${Cn(this,Vh)._++}`,refCounter:1,isSvg:!1},u(this,vn).set(e,n),u(this,vn).set(n.id,n),n}getSvgUrl(e){const t=u(this,vn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;u(this,vn)||b(this,vn,new Map);const t=u(this,vn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=a.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,ac)}_`)}};ac=new WeakMap,Vh=new WeakMap,vn=new WeakMap,oc=new WeakSet,Hp=async function(e,t){u(this,vn)||b(this,vn,new Map);let n=u(this,vn).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,ac)}_${Cn(this,Vh)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await tm(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=Ow._isSVGFittingCanvas,o=new FileReader,c=new Image,d=new Promise((f,g)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,f()},o.onload=async()=>{const m=n.svgUrl=o.result;c.src=await a?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=o.onerror=g});o.readAsDataURL(i),await d}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Fe(i),n=null}return u(this,vn).set(e,n),n&&u(this,vn).set(n.id,n),n};let s0=Ow;var Tt,Xr,Wh,vt;class VI{constructor(e=128){E(this,Tt,[]);E(this,Xr,!1);E(this,Wh);E(this,vt,-1);b(this,Wh,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(i&&e(),u(this,Xr))return;const d={cmd:e,undo:t,post:n,type:a};if(u(this,vt)===-1){u(this,Tt).length>0&&(u(this,Tt).length=0),b(this,vt,0),u(this,Tt).push(d);return}if(o&&u(this,Tt)[u(this,vt)].type===a){c&&(d.undo=u(this,Tt)[u(this,vt)].undo),u(this,Tt)[u(this,vt)]=d;return}const f=u(this,vt)+1;f===u(this,Wh)?u(this,Tt).splice(0,1):(b(this,vt,f),f<u(this,Tt).length&&u(this,Tt).splice(f)),u(this,Tt).push(d)}undo(){if(u(this,vt)===-1)return;b(this,Xr,!0);const{undo:e,post:t}=u(this,Tt)[u(this,vt)];e(),t==null||t(),b(this,Xr,!1),b(this,vt,u(this,vt)-1)}redo(){if(u(this,vt)<u(this,Tt).length-1){b(this,vt,u(this,vt)+1),b(this,Xr,!0);const{cmd:e,post:t}=u(this,Tt)[u(this,vt)];e(),t==null||t(),b(this,Xr,!1)}}hasSomethingToUndo(){return u(this,vt)!==-1}hasSomethingToRedo(){return u(this,vt)<u(this,Tt).length-1}cleanType(e){if(u(this,vt)!==-1){for(let t=u(this,vt);t>=0;t--)if(u(this,Tt)[t].type!==e){u(this,Tt).splice(t+1,u(this,vt)-t),b(this,vt,t);return}u(this,Tt).length=0,b(this,vt,-1)}}destroy(){b(this,Tt,null)}}Tt=new WeakMap,Xr=new WeakMap,Wh=new WeakMap,vt=new WeakMap;var Rg,u1;class wf{constructor(e){E(this,Rg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Nn.platform;for(const[n,i,a={}]of e)for(const o of n){const c=o.startsWith("mac+");t&&c?(this.callbacks.set(o.slice(4),{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1))):!t&&!c&&(this.callbacks.set(o,{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(k(this,Rg,u1).call(this,t));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:o=[],checker:c=null}}=n;c&&!c(e,t)||(i.bind(e,...o,t)(),a||gs(t))}}Rg=new WeakSet,u1=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Lg=class Lg{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return zI(e),ze(this,"_colors",e)}convert(e){const t=Rw(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((a,o)=>a===t[o]))return Lg._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?ve.makeHexColor(...t):e}};ke(Lg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let i0=Lg;var lc,ts,Bt,sn,cc,Wi,uc,xs,Yr,io,hc,ro,pi,Gs,ao,qh,Kh,dc,Xh,gi,Jr,fc,Qr,mi,Ig,Zr,Yh,ea,oo,Jh,Qh,Kt,Ze,qi,lo,Zh,ed,ta,yi,Ki,td,Es,se,Gp,r0,h1,d1,Vp,f1,p1,g1,a0,m1,o0,l0,y1,Tn,Bi,v1,w1,c0,_1,dh,u0;const tc=class tc{constructor(e,t,n,i,a,o,c,d,f,g,m,v,_){E(this,se);E(this,lc,new AbortController);E(this,ts,null);E(this,Bt,new Map);E(this,sn,new Map);E(this,cc,null);E(this,Wi,null);E(this,uc,null);E(this,xs,new VI);E(this,Yr,null);E(this,io,null);E(this,hc,0);E(this,ro,new Set);E(this,pi,null);E(this,Gs,null);E(this,ao,new Set);ke(this,"_editorUndoBar",null);E(this,qh,!1);E(this,Kh,!1);E(this,dc,!1);E(this,Xh,null);E(this,gi,null);E(this,Jr,null);E(this,fc,null);E(this,Qr,!1);E(this,mi,null);E(this,Ig,new GI);E(this,Zr,!1);E(this,Yh,!1);E(this,ea,null);E(this,oo,null);E(this,Jh,null);E(this,Qh,null);E(this,Kt,De.NONE);E(this,Ze,new Set);E(this,qi,null);E(this,lo,null);E(this,Zh,null);E(this,ed,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,ta,[0,0]);E(this,yi,null);E(this,Ki,null);E(this,td,null);E(this,Es,null);const A=this._signal=u(this,lc).signal;b(this,Ki,e),b(this,td,t),b(this,cc,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:A}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),i._on("setpreference",this.onSetPreference.bind(this),{signal:A}),i._on("switchannotationeditorparams",S=>this.updateParams(S.type,S.value),{signal:A}),k(this,se,f1).call(this),k(this,se,y1).call(this),k(this,se,a0).call(this),b(this,Wi,a.annotationStorage),b(this,Xh,a.filterFactory),b(this,lo,o),b(this,fc,c||null),b(this,qh,d),b(this,Kh,f),b(this,dc,g),b(this,Qh,m||null),this.viewParameters={realScale:Ta.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=_!==!1}static get _keyboardManager(){const e=tc.prototype,t=o=>u(o,Ki).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return ze(this,"_keyboardManager",new wf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&u(o,Ki).contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&u(o,Ki).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,n,i,a;(e=u(this,Es))==null||e.resolve(),b(this,Es,null),(t=u(this,lc))==null||t.abort(),b(this,lc,null),this._signal=null;for(const o of u(this,sn).values())o.destroy();u(this,sn).clear(),u(this,Bt).clear(),u(this,ao).clear(),b(this,ts,null),u(this,Ze).clear(),u(this,xs).destroy(),(n=u(this,cc))==null||n.destroy(),(i=u(this,mi))==null||i.hide(),b(this,mi,null),u(this,gi)&&(clearTimeout(u(this,gi)),b(this,gi,null)),u(this,yi)&&(clearTimeout(u(this,yi)),b(this,yi,null)),(a=this._editorUndoBar)==null||a.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Qh)}get useNewAltTextFlow(){return u(this,Kh)}get useNewAltTextWhenAddingImage(){return u(this,dc)}get hcmFilter(){return ze(this,"hcmFilter",u(this,lo)?u(this,Xh).addHCMFilter(u(this,lo).foreground,u(this,lo).background):"none")}get direction(){return ze(this,"direction",getComputedStyle(u(this,Ki)).direction)}get highlightColors(){return ze(this,"highlightColors",u(this,fc)?new Map(u(this,fc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,io,e)}setMainHighlightColorPicker(e){b(this,Jh,e)}editAltText(e,t=!1){var n;(n=u(this,cc))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,dc,t);break}}onPageChanging({pageNumber:e}){b(this,hc,e-1)}focusMainContainer(){u(this,Ki).focus()}findParent(e,t){for(const n of u(this,sn).values()){const{x:i,y:a,width:o,height:c}=n.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=a&&t<=a+c)return n}return null}disableUserSelect(e=!1){u(this,td).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,ao).add(e)}removeShouldRescale(e){u(this,ao).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Ta.PDF_TO_CSS_UNITS;for(const n of u(this,ao))n.onScaleChanging();(t=u(this,io))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:o}=t,c=t.toString(),f=k(this,se,Gp).call(this,t).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;t.empty();const m=k(this,se,r0).call(this,f),v=u(this,Kt)===De.NONE,_=()=>{m==null||m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:o,text:c}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(De.HIGHLIGHT,_);return}_()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,Wi)&&!u(this,Wi).has(e.id)&&u(this,Wi).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,Qr)&&(b(this,Qr,!1),k(this,se,Vp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Ze))if(t.div.contains(e)){b(this,oo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,oo))return;const[e,t]=u(this,oo);b(this,oo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,se,a0).call(this),k(this,se,o0).call(this)}removeEditListeners(){k(this,se,m1).call(this),k(this,se,l0).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,Gs))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,Gs))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,ts))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of u(this,Ze)){const a=i.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const o of u(this,Gs))if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Fe(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const d of n){const f=await i.deserialize(d);if(!f)return;a.push(f)}const o=()=>{for(const d of a)k(this,se,c0).call(this,d);k(this,se,u0).call(this,a)},c=()=>{for(const d of a)d.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(a){Fe(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Kt)!==De.NONE&&!this.isEditorHandlingKeyboard&&tc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Qr)&&(b(this,Qr,!1),k(this,se,Vp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,se,p1).call(this),k(this,se,o0).call(this),k(this,se,Tn).call(this,{isEditing:u(this,Kt)!==De.NONE,isEmpty:k(this,se,dh).call(this),hasSomethingToUndo:u(this,xs).hasSomethingToUndo(),hasSomethingToRedo:u(this,xs).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,se,g1).call(this),k(this,se,l0).call(this),k(this,se,Tn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Gs)){b(this,Gs,e);for(const t of u(this,Gs))k(this,se,Bi).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,Ig).id}get currentLayer(){return u(this,sn).get(u(this,hc))}getLayer(e){return u(this,sn).get(e)}get currentPageIndex(){return u(this,hc)}addLayer(e){u(this,sn).set(e.pageIndex,e),u(this,Zr)?e.enable():e.disable()}removeLayer(e){u(this,sn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var i;if(u(this,Kt)!==e&&!(u(this,Es)&&(await u(this,Es).promise,!u(this,Es)))){if(b(this,Es,Promise.withResolvers()),b(this,Kt,e),e===De.NONE){this.setEditingState(!1),k(this,se,w1).call(this),(i=this._editorUndoBar)==null||i.hide(),u(this,Es).resolve();return}this.setEditingState(!0),await k(this,se,v1).call(this),this.unselectAll();for(const a of u(this,sn).values())a.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),u(this,Es).resolve();return}for(const a of u(this,Bt).values())a.annotationElementId===t?(this.setSelected(a),a.enterInEditMode()):a.unselect();u(this,Es).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==u(this,Kt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(u(this,Gs)){switch(e){case Ve.CREATE:this.currentLayer.addNewEditor();return;case Ve.HIGHLIGHT_DEFAULT_COLOR:(n=u(this,Jh))==null||n.updateColor(t);break;case Ve.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Zh)||b(this,Zh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of u(this,Ze))i.updateParams(e,t);for(const i of u(this,Gs))i.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var a;for(const o of u(this,Bt).values())o.editorType===e&&o.show(t);(((a=u(this,Zh))==null?void 0:a.get(Ve.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,se,Bi).call(this,[[Ve.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Yh)!==e){b(this,Yh,e);for(const t of u(this,sn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of u(this,Bt).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return u(this,Bt).get(e)}addEditor(e){u(this,Bt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(u(this,gi)&&clearTimeout(u(this,gi)),b(this,gi,setTimeout(()=>{this.focusMainContainer(),b(this,gi,null)},0))),u(this,Bt).delete(e.id),this.unselect(e),(!e.annotationElementId||!u(this,ro).has(e.annotationElementId))&&((t=u(this,Wi))==null||t.remove(e.id))}addDeletedAnnotationElement(e){u(this,ro).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,ro).has(e)}removeDeletedAnnotationElement(e){u(this,ro).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,ts)!==e&&(b(this,ts,e),e&&k(this,se,Bi).call(this,e.propertiesToUpdate))}updateUI(e){u(this,se,_1)===e&&k(this,se,Bi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,se,Bi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,Ze).has(e)){u(this,Ze).delete(e),e.unselect(),k(this,se,Tn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Ze).add(e),e.select(),k(this,se,Bi).call(this,e.propertiesToUpdate),k(this,se,Tn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=u(this,io))==null||t.commitOrRemove();for(const n of u(this,Ze))n!==e&&n.unselect();u(this,Ze).clear(),u(this,Ze).add(e),e.select(),k(this,se,Bi).call(this,e.propertiesToUpdate),k(this,se,Tn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Ze).has(e)}get firstSelectedEditor(){return u(this,Ze).values().next().value}unselect(e){e.unselect(),u(this,Ze).delete(e),k(this,se,Tn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Ze).size!==0}get isEnterHandled(){return u(this,Ze).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,xs).undo(),k(this,se,Tn).call(this,{hasSomethingToUndo:u(this,xs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,se,dh).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,xs).redo(),k(this,se,Tn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,xs).hasSomethingToRedo(),isEmpty:k(this,se,dh).call(this)})}addCommands(e){u(this,xs).add(e),k(this,se,Tn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,se,dh).call(this)})}cleanUndoStack(e){u(this,xs).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,Ze)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const c of t)c.remove()},i=()=>{for(const o of t)k(this,se,c0).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=u(this,ts))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,ts)||this.hasSelection}selectAll(){for(const e of u(this,Ze))e.commit();k(this,se,u0).call(this,u(this,Bt).values())}unselectAll(){var e;if(!(u(this,ts)&&(u(this,ts).commitOrRemove(),u(this,Kt)!==De.NONE))&&!((e=u(this,io))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,Ze))t.unselect();u(this,Ze).clear(),k(this,se,Tn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,ta)[0]+=e,u(this,ta)[1]+=t;const[i,a]=u(this,ta),o=[...u(this,Ze)],c=1e3;u(this,yi)&&clearTimeout(u(this,yi)),b(this,yi,setTimeout(()=>{b(this,yi,null),u(this,ta)[0]=u(this,ta)[1]=0,this.addCommands({cmd:()=>{for(const d of o)u(this,Bt).has(d.id)&&d.translateInPage(i,a)},undo:()=>{for(const d of o)u(this,Bt).has(d.id)&&d.translateInPage(-i,-a)},mustExec:!1})},c));for(const d of o)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,pi,new Map);for(const e of u(this,Ze))u(this,pi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,pi))return!1;this.disableUserSelect(!1);const e=u(this,pi);b(this,pi,null);let t=!1;for(const[{x:i,y:a,pageIndex:o},c]of e)c.newX=i,c.newY=a,c.newPageIndex=o,t||(t=i!==c.savedX||a!==c.savedY||o!==c.savedPageIndex);if(!t)return!1;const n=(i,a,o,c)=>{if(u(this,Bt).has(i.id)){const d=u(this,sn).get(c);d?i._setParentAndPosition(d,a,o):(i.pageIndex=c,i.x=a,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:o,newPageIndex:c}]of e)n(i,a,o,c)},undo:()=>{for(const[i,{savedX:a,savedY:o,savedPageIndex:c}]of e)n(i,a,o,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,pi))for(const n of u(this,pi).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Ze).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,ts)===e}getActive(){return u(this,ts)}getMode(){return u(this,Kt)}get imageManager(){return ze(this,"imageManager",new s0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,g=t.rangeCount;f<g;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:o}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(f,g,m,v)=>({x:(g-i)/o,y:1-(f+m-n)/a,width:v/o,height:m/a});break;case"180":c=(f,g,m,v)=>({x:1-(f+m-n)/a,y:1-(g+v-i)/o,width:m/a,height:v/o});break;case"270":c=(f,g,m,v)=>({x:1-(g+v-i)/o,y:(f-n)/a,width:v/o,height:m/a});break;default:c=(f,g,m,v)=>({x:(f-n)/a,y:(g-i)/o,width:m/a,height:v/o});break}const d=[];for(let f=0,g=t.rangeCount;f<g;f++){const m=t.getRangeAt(f);if(!m.collapsed)for(const{x:v,y:_,width:A,height:S}of m.getClientRects())A===0||S===0||d.push(c(v,_,A,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,uc)||b(this,uc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,uc))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=u(this,uc))==null?void 0:i.get(e.data.id);if(!t)return;const n=u(this,Wi).getRawValue(t);n&&(u(this,Kt)===De.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};lc=new WeakMap,ts=new WeakMap,Bt=new WeakMap,sn=new WeakMap,cc=new WeakMap,Wi=new WeakMap,uc=new WeakMap,xs=new WeakMap,Yr=new WeakMap,io=new WeakMap,hc=new WeakMap,ro=new WeakMap,pi=new WeakMap,Gs=new WeakMap,ao=new WeakMap,qh=new WeakMap,Kh=new WeakMap,dc=new WeakMap,Xh=new WeakMap,gi=new WeakMap,Jr=new WeakMap,fc=new WeakMap,Qr=new WeakMap,mi=new WeakMap,Ig=new WeakMap,Zr=new WeakMap,Yh=new WeakMap,ea=new WeakMap,oo=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,Kt=new WeakMap,Ze=new WeakMap,qi=new WeakMap,lo=new WeakMap,Zh=new WeakMap,ed=new WeakMap,ta=new WeakMap,yi=new WeakMap,Ki=new WeakMap,td=new WeakMap,Es=new WeakMap,se=new WeakSet,Gp=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},r0=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,sn).values())if(n.hasTextLayer(e))return n;return null},h1=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=k(this,se,Gp).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(u(this,mi)||b(this,mi,new HI(this)),u(this,mi).show(n,i,this.direction==="ltr"))},d1=function(){var a,o,c;const e=document.getSelection();if(!e||e.isCollapsed){u(this,qi)&&((a=u(this,mi))==null||a.hide(),b(this,qi,null),k(this,se,Tn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,qi))return;const i=k(this,se,Gp).call(this,e).closest(".textLayer");if(!i){u(this,qi)&&((o=u(this,mi))==null||o.hide(),b(this,qi,null),k(this,se,Tn).call(this,{hasSelectedText:!1}));return}if((c=u(this,mi))==null||c.hide(),b(this,qi,t),k(this,se,Tn).call(this,{hasSelectedText:!0}),!(u(this,Kt)!==De.HIGHLIGHT&&u(this,Kt)!==De.NONE)&&(u(this,Kt)===De.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,Qr,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=u(this,Kt)===De.HIGHLIGHT?k(this,se,r0).call(this,i):null;d==null||d.toggleDrawing();const f=new AbortController,g=this.combinedSignal(f),m=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&k(this,se,Vp).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:g}),window.addEventListener("blur",m,{signal:g})}},Vp=function(e=""){u(this,Kt)===De.HIGHLIGHT?this.highlightSelection(e):u(this,qh)&&k(this,se,h1).call(this)},f1=function(){document.addEventListener("selectionchange",k(this,se,d1).bind(this),{signal:this._signal})},p1=function(){if(u(this,Jr))return;b(this,Jr,new AbortController);const e=this.combinedSignal(u(this,Jr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},g1=function(){var e;(e=u(this,Jr))==null||e.abort(),b(this,Jr,null)},a0=function(){if(u(this,ea))return;b(this,ea,new AbortController);const e=this.combinedSignal(u(this,ea));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},m1=function(){var e;(e=u(this,ea))==null||e.abort(),b(this,ea,null)},o0=function(){if(u(this,Yr))return;b(this,Yr,new AbortController);const e=this.combinedSignal(u(this,Yr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},l0=function(){var e;(e=u(this,Yr))==null||e.abort(),b(this,Yr,null)},y1=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Tn=function(e){Object.entries(e).some(([n,i])=>u(this,ed)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,ed),e)}),u(this,Kt)===De.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,se,Bi).call(this,[[Ve.HIGHLIGHT_FREE,!0]]))},Bi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},v1=async function(){if(!u(this,Zr)){b(this,Zr,!0);const e=[];for(const t of u(this,sn).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Bt).values())t.enable()}},w1=function(){if(this.unselectAll(),u(this,Zr)){b(this,Zr,!1);for(const e of u(this,sn).values())e.disable();for(const e of u(this,Bt).values())e.disable()}},c0=function(e){const t=u(this,sn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},_1=function(){let e=null;for(e of u(this,Ze));return e},dh=function(){if(u(this,Bt).size===0)return!0;if(u(this,Bt).size===1)for(const e of u(this,Bt).values())return e.isEmpty();return!1},u0=function(e){for(const t of u(this,Ze))t.unselect();u(this,Ze).clear();for(const t of e)t.isEmpty()||(u(this,Ze).add(t),t.select());k(this,se,Tn).call(this,{hasSelectedEditor:this.hasSelection})},ke(tc,"TRANSLATE_SMALL",1),ke(tc,"TRANSLATE_BIG",10);let ol=tc;var Xt,vi,Vs,pc,wi,ns,gc,_i,Wn,Xi,co,bi,na,ni,fh,Wp;const Pn=class Pn{constructor(e){E(this,ni);E(this,Xt,null);E(this,vi,!1);E(this,Vs,null);E(this,pc,null);E(this,wi,null);E(this,ns,null);E(this,gc,!1);E(this,_i,null);E(this,Wn,null);E(this,Xi,null);E(this,co,null);E(this,bi,!1);b(this,Wn,e),b(this,bi,e._uiManager.useNewAltTextFlow),u(Pn,na)||b(Pn,na,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Pn._l10n??(Pn._l10n=e)}async render(){const e=b(this,Vs,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,pc,document.createElement("span"));e.append(t),u(this,bi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Pn,na).missing),t.setAttribute("data-l10n-id",u(Pn,na)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,Wn)._uiManager._signal;e.addEventListener("contextmenu",si,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),u(this,Wn)._uiManager.editAltText(u(this,Wn)),u(this,bi)&&u(this,Wn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,ni,fh)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(b(this,gc,!0),i(a))},{signal:n}),await k(this,ni,Wp).call(this),e}finish(){u(this,Vs)&&(u(this,Vs).focus({focusVisible:u(this,gc)}),b(this,gc,!1))}isEmpty(){return u(this,bi)?u(this,Xt)===null:!u(this,Xt)&&!u(this,vi)}hasData(){return u(this,bi)?u(this,Xt)!==null||!!u(this,Xi):this.isEmpty()}get guessedText(){return u(this,Xi)}async setGuessedText(e){u(this,Xt)===null&&(b(this,Xi,e),b(this,co,await Pn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,ni,Wp).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,bi)||u(this,Xt)){(t=u(this,_i))==null||t.remove(),b(this,_i,null);return}if(!u(this,_i)){const n=b(this,_i,document.createElement("div"));n.className="noAltTextBadge",u(this,Wn).div.append(n)}u(this,_i).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Xt);return!e&&u(this,Xi)===t&&(t=u(this,co)),{altText:t,decorative:u(this,vi),guessedText:u(this,Xi),textWithDisclaimer:u(this,co)}}get data(){return{altText:u(this,Xt),decorative:u(this,vi)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(b(this,Xi,n),b(this,co,i)),!(u(this,Xt)===e&&u(this,vi)===t)&&(a||(b(this,Xt,e),b(this,vi,t)),k(this,ni,Wp).call(this))}toggle(e=!1){u(this,Vs)&&(!e&&u(this,ns)&&(clearTimeout(u(this,ns)),b(this,ns,null)),u(this,Vs).disabled=!e)}shown(){u(this,Wn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,ni,fh)}})}destroy(){var e,t;(e=u(this,Vs))==null||e.remove(),b(this,Vs,null),b(this,pc,null),b(this,wi,null),(t=u(this,_i))==null||t.remove(),b(this,_i,null)}};Xt=new WeakMap,vi=new WeakMap,Vs=new WeakMap,pc=new WeakMap,wi=new WeakMap,ns=new WeakMap,gc=new WeakMap,_i=new WeakMap,Wn=new WeakMap,Xi=new WeakMap,co=new WeakMap,bi=new WeakMap,na=new WeakMap,ni=new WeakSet,fh=function(){return u(this,Xt)&&"added"||u(this,Xt)===null&&this.guessedText&&"review"||"missing"},Wp=async function(){var i,a,o;const e=u(this,Vs);if(!e)return;if(u(this,bi)){if(e.classList.toggle("done",!!u(this,Xt)),e.setAttribute("data-l10n-id",u(Pn,na)[u(this,ni,fh)]),(i=u(this,pc))==null||i.setAttribute("data-l10n-id",u(Pn,na)[`${u(this,ni,fh)}-label`]),!u(this,Xt)){(a=u(this,wi))==null||a.remove();return}}else{if(!u(this,Xt)&&!u(this,vi)){e.classList.remove("done"),(o=u(this,wi))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,wi);if(!t){b(this,wi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,Wn).id}`;const c=100,d=u(this,Wn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(u(this,ns)),b(this,ns,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,ns,setTimeout(()=>{b(this,ns,null),u(this,wi).classList.add("show"),u(this,Wn)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:d}),e.addEventListener("mouseleave",()=>{var f;u(this,ns)&&(clearTimeout(u(this,ns)),b(this,ns,null)),(f=u(this,wi))==null||f.classList.remove("show")},{signal:d})}u(this,vi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Xt)),t.parentNode||e.append(t);const n=u(this,Wn).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},E(Pn,na,null),ke(Pn,"_l10n",null);let Ag=Pn;var nd,uo,sd,id,rd,ad,od,mc,Yi,ho,sa,_r,b1,A1,h0;const Dw=class Dw{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:o=null,signal:c}){E(this,_r);E(this,nd);E(this,uo,!1);E(this,sd,null);E(this,id);E(this,rd);E(this,ad);E(this,od);E(this,mc);E(this,Yi,null);E(this,ho);E(this,sa,null);b(this,nd,e),b(this,sd,n),b(this,id,t),b(this,rd,i),b(this,ad,a),b(this,od,o),b(this,ho,new AbortController),b(this,mc,AbortSignal.any([c,u(this,ho).signal])),e.addEventListener("touchstart",k(this,_r,b1).bind(this),{passive:!1,signal:u(this,mc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ze(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=u(this,ho))==null||e.abort(),b(this,ho,null)}};nd=new WeakMap,uo=new WeakMap,sd=new WeakMap,id=new WeakMap,rd=new WeakMap,ad=new WeakMap,od=new WeakMap,mc=new WeakMap,Yi=new WeakMap,ho=new WeakMap,sa=new WeakMap,_r=new WeakSet,b1=function(e){var i,a,o;if((i=u(this,id))!=null&&i.call(this)||e.touches.length<2)return;if(!u(this,sa)){b(this,sa,new AbortController);const c=AbortSignal.any([u(this,mc),u(this,sa).signal]),d=u(this,nd),f={signal:c,passive:!1};d.addEventListener("touchmove",k(this,_r,A1).bind(this),f),d.addEventListener("touchend",k(this,_r,h0).bind(this),f),d.addEventListener("touchcancel",k(this,_r,h0).bind(this),f),(a=u(this,rd))==null||a.call(this)}if(gs(e),e.touches.length!==2||(o=u(this,sd))!=null&&o.call(this)){b(this,Yi,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),b(this,Yi,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},A1=function(e){var N;if(!u(this,Yi)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:a}=t,{screenX:o,screenY:c}=n,d=u(this,Yi),{touch0X:f,touch0Y:g,touch1X:m,touch1Y:v}=d,_=m-f,A=v-g,S=o-i,C=c-a,T=Math.hypot(S,C)||1,I=Math.hypot(_,A)||1;if(!u(this,uo)&&Math.abs(I-T)<=Dw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=i,d.touch0Y=a,d.touch1X=o,d.touch1Y=c,e.preventDefault(),!u(this,uo)){b(this,uo,!0);return}const O=[(i+o)/2,(a+c)/2];(N=u(this,ad))==null||N.call(this,O,I,T)},h0=function(e){var t;u(this,sa).abort(),b(this,sa,null),(t=u(this,od))==null||t.call(this),u(this,Yi)&&(e.preventDefault(),b(this,Yi,null),b(this,uo,!1))};let Sg=Dw;var fo,Ws,ht,yc,ia,ld,po,rn,go,Ji,ra,cd,mo,ss,ud,yo,Qi,Ai,vc,wc,ks,vo,hd,Ng,Ce,d0,dd,f0,qp,S1,x1,p0,Kp,g0,E1,k1,C1,m0,T1,y0,P1,R1,L1,v0,ph;const je=class je{constructor(e){E(this,Ce);E(this,fo,null);E(this,Ws,null);E(this,ht,null);E(this,yc,!1);E(this,ia,null);E(this,ld,"");E(this,po,!1);E(this,rn,null);E(this,go,null);E(this,Ji,null);E(this,ra,null);E(this,cd,"");E(this,mo,!1);E(this,ss,null);E(this,ud,!1);E(this,yo,!1);E(this,Qi,!1);E(this,Ai,null);E(this,vc,0);E(this,wc,0);E(this,ks,null);E(this,vo,null);ke(this,"_editToolbar",null);ke(this,"_initialOptions",Object.create(null));ke(this,"_initialData",null);ke(this,"_isVisible",!0);ke(this,"_uiManager",null);ke(this,"_focusEventsAllowed",!0);E(this,hd,!1);E(this,Ng,je._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,o];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=je.prototype._resizeWithKeyboard,t=ol.TRANSLATE_SMALL,n=ol.TRANSLATE_BIG;return ze(this,"_resizerKeyboardManager",new wf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],je.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new WI({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(je._l10n??(je._l10n=e),je._l10nResizer||(je._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),je._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);je._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){it("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,hd)}set _isDraggable(e){var t;b(this,hd,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Ng)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,Ce,ph).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,mo)?b(this,mo,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[a,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(t+i)/o,this.fixAndSetPosition()}translate(e,t){k(this,Ce,d0).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,ss)||b(this,ss,[this.x,this.y,this.width,this.height]),k(this,Ce,d0).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){u(this,ss)||b(this,ss,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[d,f]=this.getBaseTranslation();o+=d,c+=f;const{style:g}=n;g.left=`${(100*o).toFixed(2)}%`,g.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,ss)&&(u(this,ss)[0]!==this.x||u(this,ss)[1]!==this.y)}get _hasBeenResized(){return!!u(this,ss)&&(u(this,ss)[2]!==this.width||u(this,ss)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=je,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:a,y:o,width:c,height:d}=this;if(c*=n,d*=i,a*=n,o*=i,this._mustFixPosition)switch(e){case 0:a=Math.max(0,Math.min(n-c,a)),o=Math.max(0,Math.min(i-d,o));break;case 90:a=Math.max(0,Math.min(n-d,a)),o=Math.min(i,Math.max(c,o));break;case 180:a=Math.min(n,Math.max(c,a)),o=Math.min(i,Math.max(d,o));break;case 270:a=Math.min(n,Math.max(d,a)),o=Math.max(0,Math.min(i-c,o));break}this.x=a/=n,this.y=o/=i;const[f,g]=this.getBaseTranslation();a+=f,o+=g,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return k(n=je,dd,f0).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return k(n=je,dd,f0).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/n).toFixed(2)}%`,u(this,po)||(a.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),a=!u(this,po)&&t.endsWith("%");if(i&&a)return;const[o,c]=this.parentDimensions;i||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!u(this,po)&&!a&&(e.height=`${(100*parseFloat(t)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,ht))==null||e.finish()}async addEditToolbar(){return this._editToolbar||u(this,yo)?this._editToolbar:(this._editToolbar=new t0(this),this.div.append(this._editToolbar.render()),u(this,ht)&&await this._editToolbar.addAltText(u(this,ht)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,ht))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,ht)||(Ag.initialize(je._l10n),b(this,ht,new Ag(this)),u(this,fo)&&(u(this,ht).data=u(this,fo),b(this,fo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,ht))==null?void 0:e.data}set altTextData(e){u(this,ht)&&(u(this,ht).data=e)}get guessedAltText(){var e;return(e=u(this,ht))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,ht))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,ht))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,ht)&&!u(this,ht).isEmpty()}hasAltTextData(){var e;return((e=u(this,ht))==null?void 0:e.hasData())??!1}render(){var a;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,yc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),k(this,Ce,y0).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),bg(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,vo)||b(this,vo,new Sg({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,Ce,E1).bind(this),onPinching:k(this,Ce,k1).bind(this),onPinchEnd:k(this,Ce,C1).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),this.div}pointerdown(e){const{isMac:t}=Nn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,mo,!0),this._isDraggable){k(this,Ce,T1).call(this,e);return}k(this,Ce,m0).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Ai)&&clearTimeout(u(this,Ai)),b(this,Ai,setTimeout(()=>{var e;b(this,Ai,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[a,o]=this.pageDimensions,[c,d]=this.pageTranslation,f=e/i,g=t/i,m=this.x*a,v=this.y*o,_=this.width*a,A=this.height*o;switch(n){case 0:return[m+f+c,o-v-g-A+d,m+f+_+c,o-v-g+d];case 90:return[m+g+c,o-v+f+d,m+g+A+c,o-v+f+_+d];case 180:return[m-f-_+c,o-v+g+d,m-f+c,o-v+g+A+d];case 270:return[m-g-A+c,o-v-f-_+d,m-g+c,o-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,a,o]=e,c=a-n,d=o-i;switch(this.rotation){case 0:return[n,t-o,c,d];case 90:return[n,t-i,d,c];case 180:return[a,t-i,c,d];case 270:return[a,t-o,d,c];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){b(this,yo,!0)}disableEditMode(){b(this,yo,!1)}isInEditMode(){return u(this,yo)}shouldGetKeyboardEvents(){return u(this,Qi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return t<o&&i>0&&e<a&&n>0}rebuild(){k(this,Ce,y0).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){it("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation,b(i,fo,e.accessibilityData);const[a,o]=i.pageDimensions,[c,d,f,g]=i.getRectInCurrentCoords(e.rect,o);return i.x=c/a,i.y=d/o,i.width=f/a,i.height=g/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,ra))==null||e.abort(),b(this,ra,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Ai)&&(clearTimeout(u(this,Ai)),b(this,Ai,null)),k(this,Ce,ph).call(this),this.removeEditToolbar(),u(this,ks)){for(const n of u(this,ks).values())clearTimeout(n);b(this,ks,null)}this.parent=null,(t=u(this,vo))==null||t.destroy(),b(this,vo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,Ce,S1).call(this),u(this,rn).classList.remove("hidden"),bg(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,Ji,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,rn).children;if(!u(this,Ws)){b(this,Ws,Array.from(t));const o=k(this,Ce,P1).bind(this),c=k(this,Ce,R1).bind(this),d=this._uiManager._signal;for(const f of u(this,Ws)){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",o,{signal:d}),f.addEventListener("blur",c,{signal:d}),f.addEventListener("focus",k(this,Ce,L1).bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",je._l10nResizer[g])}}const n=u(this,Ws)[0];let i=0;for(const o of t){if(o===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(u(this,Ws).length/4);if(a!==i){if(a<i)for(let c=0;c<i-a;c++)u(this,rn).append(u(this,rn).firstChild);else if(a>i)for(let c=0;c<a-i;c++)u(this,rn).firstChild.before(u(this,rn).lastChild);let o=0;for(const c of t){const f=u(this,Ws)[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",je._l10nResizer[f])}}k(this,Ce,v0).call(this,0),b(this,Qi,!0),u(this,rn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Qi)&&k(this,Ce,g0).call(this,u(this,cd),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,Ce,ph).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,ht))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,i,a;(e=u(this,rn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=u(this,ht))==null||a.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,ud)}set isEditing(e){b(this,ud,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){b(this,po,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,ks)||b(this,ks,new Map);const{action:n}=e;let i=u(this,ks).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),u(this,ks).delete(n),u(this,ks).size===0&&b(this,ks,null)},je._telemetryTimeout),u(this,ks).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,yc,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,yc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};fo=new WeakMap,Ws=new WeakMap,ht=new WeakMap,yc=new WeakMap,ia=new WeakMap,ld=new WeakMap,po=new WeakMap,rn=new WeakMap,go=new WeakMap,Ji=new WeakMap,ra=new WeakMap,cd=new WeakMap,mo=new WeakMap,ss=new WeakMap,ud=new WeakMap,yo=new WeakMap,Qi=new WeakMap,Ai=new WeakMap,vc=new WeakMap,wc=new WeakMap,ks=new WeakMap,vo=new WeakMap,hd=new WeakMap,Ng=new WeakMap,Ce=new WeakSet,d0=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},dd=new WeakSet,f0=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},qp=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},S1=function(){if(u(this,rn))return;b(this,rn,document.createElement("div")),u(this,rn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");u(this,rn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",k(this,Ce,x1).bind(this,n),{signal:t}),i.addEventListener("contextmenu",si,{signal:t}),i.tabIndex=-1}this.div.prepend(u(this,rn))},x1=function(e,t){var g;t.preventDefault();const{isMac:n}=Nn.platform;if(t.button!==0||t.ctrlKey&&n)return;(g=u(this,ht))==null||g.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,b(this,go,[t.screenX,t.screenY]);const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,Ce,g0).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",gs,{passive:!1,signal:o}),window.addEventListener("contextmenu",si,{signal:o}),b(this,Ji,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var m;a.abort(),this.parent.togglePointerEvents(!0),(m=u(this,ht))==null||m.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=d,k(this,Ce,Kp).call(this)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})},p0=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[a,o]=this.parentDimensions;this.setDims(a*n,o*i),this.fixAndSetPosition(),this._onResized()},Kp=function(){if(!u(this,Ji))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=u(this,Ji);b(this,Ji,null);const a=this.x,o=this.y,c=this.width,d=this.height;a===e&&o===t&&c===n&&d===i||this.addCommands({cmd:k(this,Ce,p0).bind(this,a,o,c,d),undo:k(this,Ce,p0).bind(this,e,t,n,i),mustExec:!0})},g0=function(e,t){const[n,i]=this.parentDimensions,a=this.x,o=this.y,c=this.width,d=this.height,f=je.MIN_SIZE/n,g=je.MIN_SIZE/i,m=k(this,Ce,qp).call(this,this.rotation),v=(Q,te)=>[m[0]*Q+m[2]*te,m[1]*Q+m[3]*te],_=k(this,Ce,qp).call(this,360-this.rotation),A=(Q,te)=>[_[0]*Q+_[2]*te,_[1]*Q+_[3]*te];let S,C,T=!1,I=!1;switch(e){case"topLeft":T=!0,S=(Q,te)=>[0,0],C=(Q,te)=>[Q,te];break;case"topMiddle":S=(Q,te)=>[Q/2,0],C=(Q,te)=>[Q/2,te];break;case"topRight":T=!0,S=(Q,te)=>[Q,0],C=(Q,te)=>[0,te];break;case"middleRight":I=!0,S=(Q,te)=>[Q,te/2],C=(Q,te)=>[0,te/2];break;case"bottomRight":T=!0,S=(Q,te)=>[Q,te],C=(Q,te)=>[0,0];break;case"bottomMiddle":S=(Q,te)=>[Q/2,te],C=(Q,te)=>[Q/2,0];break;case"bottomLeft":T=!0,S=(Q,te)=>[0,te],C=(Q,te)=>[Q,0];break;case"middleLeft":I=!0,S=(Q,te)=>[0,te/2],C=(Q,te)=>[Q,te/2];break}const O=S(c,d),N=C(c,d);let j=v(...N);const G=je._round(a+j[0]),V=je._round(o+j[1]);let Z=1,ie=1,we,ce;if(t.fromKeyboard)({deltaX:we,deltaY:ce}=t);else{const{screenX:Q,screenY:te}=t,[K,z]=u(this,go);[we,ce]=this.screenToPageTranslation(Q-K,te-z),u(this,go)[0]=Q,u(this,go)[1]=te}if([we,ce]=A(we/n,ce/i),T){const Q=Math.hypot(c,d);Z=ie=Math.max(Math.min(Math.hypot(N[0]-O[0]-we,N[1]-O[1]-ce)/Q,1/c,1/d),f/c,g/d)}else I?Z=Math.max(f,Math.min(1,Math.abs(N[0]-O[0]-we)))/c:ie=Math.max(g,Math.min(1,Math.abs(N[1]-O[1]-ce)))/d;const Le=je._round(c*Z),Ie=je._round(d*ie);j=v(...C(Le,Ie));const Ae=G-j[0],Ne=V-j[1];u(this,ss)||b(this,ss,[this.x,this.y,this.width,this.height]),this.width=Le,this.height=Ie,this.x=Ae,this.y=Ne,this.setDims(n*Le,i*Ie),this.fixAndSetPosition(),this._onResizing()},E1=function(){var e;b(this,Ji,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,ht))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},k1=function(e,t,n){let a=.7*(n/t)+1-.7;if(a===1)return;const o=k(this,Ce,qp).call(this,this.rotation),c=(G,V)=>[o[0]*G+o[2]*V,o[1]*G+o[3]*V],[d,f]=this.parentDimensions,g=this.x,m=this.y,v=this.width,_=this.height,A=je.MIN_SIZE/d,S=je.MIN_SIZE/f;a=Math.max(Math.min(a,1/v,1/_),A/v,S/_);const C=je._round(v*a),T=je._round(_*a);if(C===v&&T===_)return;u(this,ss)||b(this,ss,[g,m,v,_]);const I=c(v/2,_/2),O=je._round(g+I[0]),N=je._round(m+I[1]),j=c(C/2,T/2);this.x=O-j[0],this.y=N-j[1],this.width=C,this.height=T,this.setDims(d*C,f*T),this.fixAndSetPosition(),this._onResizing()},C1=function(){var e;(e=u(this,ht))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,Ce,Kp).call(this)},m0=function(e){const{isMac:t}=Nn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},T1=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:a},c=f=>{i.abort(),b(this,ia,null),b(this,mo,!1),this._uiManager.endDragSession()||k(this,Ce,m0).call(this,f),n&&this._onStopDragging()};t&&(b(this,vc,e.clientX),b(this,wc,e.clientY),b(this,ia,e.pointerId),b(this,ld,e.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:g,clientY:m,pointerId:v}=f;if(v!==u(this,ia)){gs(f);return}const[_,A]=this.screenToPageTranslation(g-u(this,vc),m-u(this,wc));b(this,vc,g),b(this,wc,m),this._uiManager.dragSelectedEditors(_,A)},o),window.addEventListener("touchmove",gs,o),window.addEventListener("pointerdown",f=>{f.pointerType===u(this,ld)&&(u(this,vo)||f.isPrimary)&&c(f),gs(f)},o));const d=f=>{if(!u(this,ia)||u(this,ia)===f.pointerId){c(f);return}gs(f)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},y0=function(){if(u(this,ra)||!this.div)return;b(this,ra,new AbortController);const e=this._uiManager.combinedSignal(u(this,ra));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},P1=function(e){je._resizerKeyboardManager.exec(this,e)},R1=function(e){var t;u(this,Qi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,rn)&&k(this,Ce,ph).call(this)},L1=function(e){b(this,cd,u(this,Qi)?e:"")},v0=function(e){if(u(this,Ws))for(const t of u(this,Ws))t.tabIndex=e},ph=function(){b(this,Qi,!1),k(this,Ce,v0).call(this,-1),k(this,Ce,Kp).call(this)},E(je,dd),ke(je,"_l10n",null),ke(je,"_l10nResizer",null),ke(je,"_borderLineWidth",-1),ke(je,"_colorManager",new i0),ke(je,"_zIndex",1),ke(je,"_telemetryTimeout",1e3);let _t=je;class WI extends _t{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ZS=3285377520,Ss=4294901760,hi=65535;class I1{constructor(e){this.h1=e?e&4294967295:ZS,this.h2=e?e&4294967295:ZS}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let S=0,C=e.length;S<C;S++){const T=e.charCodeAt(S);T<=255?t[n++]=T:(t[n++]=T>>>8,t[n++]=T&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,o=new Uint32Array(t.buffer,0,i);let c=0,d=0,f=this.h1,g=this.h2;const m=3432918353,v=461845907,_=m&hi,A=v&hi;for(let S=0;S<i;S++)S&1?(c=o[S],c=c*m&Ss|c*_&hi,c=c<<15|c>>>17,c=c*v&Ss|c*A&hi,f^=c,f=f<<13|f>>>19,f=f*5+3864292196):(d=o[S],d=d*m&Ss|d*_&hi,d=d<<15|d>>>17,d=d*v&Ss|d*A&hi,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(c=0,a){case 3:c^=t[i*4+2]<<16;case 2:c^=t[i*4+1]<<8;case 1:c^=t[i*4],c=c*m&Ss|c*_&hi,c=c<<15|c>>>17,c=c*v&Ss|c*A&hi,i&1?f^=c:g^=c}this.h1=f,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ss|e*36045&hi,t=t*4283543511&Ss|((t<<16|e>>>16)*2950163797&Ss)>>>16,e^=t>>>1,e=e*444984403&Ss|e*60499&hi,t=t*3301882366&Ss|((t<<16|e>>>16)*3120437893&Ss)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const w0=Object.freeze({map:null,hash:"",transfer:void 0});var wo,_o,Yt,Mg,N1;class Lw{constructor(){E(this,Mg);E(this,wo,!1);E(this,_o,null);E(this,Yt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,Yt).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,Yt).get(e)}remove(e){if(u(this,Yt).delete(e),u(this,Yt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,Yt).values())if(t instanceof _t)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,Yt).get(e);let i=!1;if(n!==void 0)for(const[a,o]of Object.entries(t))n[a]!==o&&(i=!0,n[a]=o);else i=!0,u(this,Yt).set(e,t);i&&k(this,Mg,N1).call(this),t instanceof _t&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,Yt).has(e)}getAll(){return u(this,Yt).size>0?Ew(u(this,Yt)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return u(this,Yt).size}resetModified(){u(this,wo)&&(b(this,wo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new M1(this)}get serializable(){if(u(this,Yt).size===0)return w0;const e=new Map,t=new I1,n=[],i=Object.create(null);let a=!1;for(const[o,c]of u(this,Yt)){const d=c instanceof _t?c.serialize(!1,i):c;d&&(e.set(o,d),t.update(`${o}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:w0}get editorStats(){let e=null;const t=new Map;for(const n of u(this,Yt).values()){if(!(n instanceof _t))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:a}=i;t.has(a)||t.set(a,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const o=e[a]||(e[a]=new Map);for(const[c,d]of Object.entries(i)){if(c==="type")continue;let f=o.get(c);f||(f=new Map,o.set(c,f));const g=f.get(d)??0;f.set(d,g+1)}}for(const[n,i]of t)e[n]=i.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){b(this,_o,null)}get modifiedIds(){if(u(this,_o))return u(this,_o);const e=[];for(const t of u(this,Yt).values())!(t instanceof _t)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return b(this,_o,{ids:new Set(e),hash:e.join(",")})}}wo=new WeakMap,_o=new WeakMap,Yt=new WeakMap,Mg=new WeakSet,N1=function(){u(this,wo)||(b(this,wo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var fd;class M1 extends Lw{constructor(t){super();E(this,fd);const{map:n,hash:i,transfer:a}=t.serializable,o=structuredClone(n,a?{transfer:a}:null);b(this,fd,{map:o,hash:i,transfer:a})}get print(){it("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,fd)}get modifiedIds(){return ze(this,"modifiedIds",{ids:new Set,hash:""})}}fd=new WeakMap;var _c;class qI{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,_c,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,_c).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||u(this,_c).has(e.loadedName))){if(Ot(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:a}=e,o=new FontFace(n,i,a);this.addNativeFontFace(o);try{await o.load(),u(this,_c).add(n),t==null||t(e)}catch{Fe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}it("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Fe(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Sn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ze(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ot(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(N,j){return N.charCodeAt(j)<<24|N.charCodeAt(j+1)<<16|N.charCodeAt(j+2)<<8|N.charCodeAt(j+3)&255}function i(N,j,G,V){const Z=N.substring(0,j),ie=N.substring(j+G);return Z+V+ie}let a,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let f=0;function g(N,j){if(++f>30){Fe("Load test font never loaded."),j();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(g.bind(null,N,j))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,m.length,m);const A=16,S=1482184792;let C=n(v,A);for(a=0,o=m.length-3;a<o;a+=4)C=C-S+n(m,a)|0;a<m.length&&(C=C-S+n(m+"XXX",a)|0),v=i(v,A,4,II(C));const T=`url(data:font/opentype;base64,${btoa(v)});`,I=`@font-face {font-family:"${m}";src:${T}}`;this.insertRule(I);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const N of[e.loadedName,m]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=N,O.append(j)}this._document.body.append(O),g(m,()=>{O.remove(),t.complete()})}}_c=new WeakMap;class KI{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const a in e)this[a]=e[a];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${jI(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(o){Fe(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}}const Dp={DATA:1,ERROR:2},Mt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ex(){}function Gn(l){if(l instanceof Ca||l instanceof Qv||l instanceof jh||l instanceof YS||l instanceof _g||l instanceof Iv)return l;switch(l instanceof Error||typeof l=="object"&&l!==null||it('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new Ca(l.message);case"InvalidPDFException":return new Qv(l.message);case"MissingPDFException":return new jh(l.message);case"PasswordException":return new YS(l.message,l.code);case"UnexpectedResponseException":return new _g(l.message,l.status);case"UnknownErrorException":return new Iv(l.message,l.details)}return new Iv(l.message,l.toString())}var bc,Ns,O1,D1,F1,Xp;class gh{constructor(e,t,n){E(this,Ns);E(this,bc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",k(this,Ns,O1).bind(this),{signal:u(this,bc).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,o=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:c,action:e,streamId:a,data:t,desiredSize:f.desiredSize},i),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[a].pullCall=g,d.postMessage({sourceName:o,targetName:c,stream:Mt.PULL,streamId:a,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Ot(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[a].cancelCall=g,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:o,targetName:c,stream:Mt.CANCEL,streamId:a,reason:Gn(f)}),g.promise}},n)}destroy(){var e;(e=u(this,bc))==null||e.abort(),b(this,bc,null)}}bc=new WeakMap,Ns=new WeakSet,O1=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,Ns,F1).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Dp.DATA)i.resolve(e.data);else if(e.callback===Dp.ERROR)i.reject(Gn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(o){a.postMessage({sourceName:n,targetName:i,callback:Dp.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:n,targetName:i,callback:Dp.ERROR,callbackId:e.callbackId,reason:Gn(o)})});return}if(e.streamId){k(this,Ns,D1).call(this,e);return}t(e.data)},D1=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,o=this,c=this.actionHandler[e.action],d={enqueue(f,g=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=g,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Mt.ENQUEUE,streamId:t,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Mt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(f){Ot(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Mt.ERROR,streamId:t,reason:Gn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(c,e.data,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Mt.START_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Mt.START_COMPLETE,streamId:t,reason:Gn(f)})})},F1=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,o=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case Mt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Gn(e.reason));break;case Mt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Gn(e.reason));break;case Mt.PULL:if(!c){a.postMessage({sourceName:n,targetName:i,stream:Mt.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||ex).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Mt.PULL_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Mt.PULL_COMPLETE,streamId:t,reason:Gn(f)})});break;case Mt.ENQUEUE:if(Ot(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Mt.CLOSE:if(Ot(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),k(this,Ns,Xp).call(this,o,t);break;case Mt.ERROR:Ot(o,"error should have stream controller"),o.controller.error(Gn(e.reason)),k(this,Ns,Xp).call(this,o,t);break;case Mt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Gn(e.reason)),k(this,Ns,Xp).call(this,o,t);break;case Mt.CANCEL:if(!c)break;const d=Gn(e.reason);Promise.try(c.onCancel||ex,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Mt.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Mt.CANCEL_COMPLETE,streamId:t,reason:Gn(f)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Xp=async function(e,t){var n,i,a;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var pd;class j1{constructor({enableHWA:e=!1}){E(this,pd,!1);b(this,pd,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,pd)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){it("Abstract method `_createCanvas` called.")}}pd=new WeakMap;class XI extends j1{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class $1{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){it("Abstract method `_fetch` called.")}}class U1 extends $1{async _fetch(e){const t=await tm(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):em(t)}}class B1{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,a){return"none"}destroy(e=!1){}}var bo,Ac,Zi,er,wn,Ao,So,oe,mn,mh,Kl,Yp,Xl,z1,_0,Yl,yh,vh,b0,wh;class YI extends B1{constructor({docId:t,ownerDocument:n=globalThis.document}){super();E(this,oe);E(this,bo);E(this,Ac);E(this,Zi);E(this,er);E(this,wn);E(this,Ao);E(this,So,0);b(this,er,t),b(this,wn,n)}addFilter(t){if(!t)return"none";let n=u(this,oe,mn).get(t);if(n)return n;const[i,a,o]=k(this,oe,Yp).call(this,t),c=t.length===1?i:`${i}${a}${o}`;if(n=u(this,oe,mn).get(c),n)return u(this,oe,mn).set(t,n),n;const d=`g_${u(this,er)}_transfer_map_${Cn(this,So)._++}`,f=k(this,oe,Xl).call(this,d);u(this,oe,mn).set(t,f),u(this,oe,mn).set(c,f);const g=k(this,oe,Yl).call(this,d);return k(this,oe,vh).call(this,i,a,o,g),f}addHCMFilter(t,n){var A;const i=`${t}-${n}`,a="base";let o=u(this,oe,mh).get(a);if((o==null?void 0:o.key)===i||(o?((A=o.filter)==null||A.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},u(this,oe,mh).set(a,o)),!t||!n))return o.url;const c=k(this,oe,wh).call(this,t);t=ve.makeHexColor(...c);const d=k(this,oe,wh).call(this,n);if(n=ve.makeHexColor(...d),u(this,oe,Kl).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const f=new Array(256);for(let S=0;S<=255;S++){const C=S/255;f[S]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const g=f.join(","),m=`g_${u(this,er)}_hcm_filter`,v=o.filter=k(this,oe,Yl).call(this,m);k(this,oe,vh).call(this,g,g,g,v),k(this,oe,_0).call(this,v);const _=(S,C)=>{const T=c[S]/255,I=d[S]/255,O=new Array(C+1);for(let N=0;N<=C;N++)O[N]=T+N/C*(I-T);return O.join(",")};return k(this,oe,vh).call(this,_(0,5),_(1,5),_(2,5),v),o.url=k(this,oe,Xl).call(this,m),o.url}addAlphaFilter(t){let n=u(this,oe,mn).get(t);if(n)return n;const[i]=k(this,oe,Yp).call(this,[t]),a=`alpha_${i}`;if(n=u(this,oe,mn).get(a),n)return u(this,oe,mn).set(t,n),n;const o=`g_${u(this,er)}_alpha_map_${Cn(this,So)._++}`,c=k(this,oe,Xl).call(this,o);u(this,oe,mn).set(t,c),u(this,oe,mn).set(a,c);const d=k(this,oe,Yl).call(this,o);return k(this,oe,b0).call(this,i,d),c}addLuminosityFilter(t){let n=u(this,oe,mn).get(t||"luminosity");if(n)return n;let i,a;if(t?([i]=k(this,oe,Yp).call(this,[t]),a=`luminosity_${i}`):a="luminosity",n=u(this,oe,mn).get(a),n)return u(this,oe,mn).set(t,n),n;const o=`g_${u(this,er)}_luminosity_map_${Cn(this,So)._++}`,c=k(this,oe,Xl).call(this,o);u(this,oe,mn).set(t,c),u(this,oe,mn).set(a,c);const d=k(this,oe,Yl).call(this,o);return k(this,oe,z1).call(this,d),t&&k(this,oe,b0).call(this,i,d),c}addHighlightHCMFilter(t,n,i,a,o){var I;const c=`${n}-${i}-${a}-${o}`;let d=u(this,oe,mh).get(t);if((d==null?void 0:d.key)===c||(d?((I=d.filter)==null||I.remove(),d.key=c,d.url="none",d.filter=null):(d={key:c,url:"none",filter:null},u(this,oe,mh).set(t,d)),!n||!i))return d.url;const[f,g]=[n,i].map(k(this,oe,wh).bind(this));let m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[_,A]=[a,o].map(k(this,oe,wh).bind(this));v<m&&([m,v,_,A]=[v,m,A,_]),u(this,oe,Kl).style.color="";const S=(O,N,j)=>{const G=new Array(256),V=(v-m)/j,Z=O/255,ie=(N-O)/(255*j);let we=0;for(let ce=0;ce<=j;ce++){const Le=Math.round(m+ce*V),Ie=Z+ce*ie;for(let Ae=we;Ae<=Le;Ae++)G[Ae]=Ie;we=Le+1}for(let ce=we;ce<256;ce++)G[ce]=G[we-1];return G.join(",")},C=`g_${u(this,er)}_hcm_${t}_filter`,T=d.filter=k(this,oe,Yl).call(this,C);return k(this,oe,_0).call(this,T),k(this,oe,vh).call(this,S(_[0],A[0],5),S(_[1],A[1],5),S(_[2],A[2],5),T),d.url=k(this,oe,Xl).call(this,C),d.url}destroy(t=!1){var n,i,a,o;t&&((n=u(this,Ao))!=null&&n.size)||((i=u(this,Zi))==null||i.parentNode.parentNode.remove(),b(this,Zi,null),(a=u(this,Ac))==null||a.clear(),b(this,Ac,null),(o=u(this,Ao))==null||o.clear(),b(this,Ao,null),b(this,So,0))}}bo=new WeakMap,Ac=new WeakMap,Zi=new WeakMap,er=new WeakMap,wn=new WeakMap,Ao=new WeakMap,So=new WeakMap,oe=new WeakSet,mn=function(){return u(this,Ac)||b(this,Ac,new Map)},mh=function(){return u(this,Ao)||b(this,Ao,new Map)},Kl=function(){if(!u(this,Zi)){const t=u(this,wn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=u(this,wn).createElementNS(Ui,"svg");i.setAttribute("width",0),i.setAttribute("height",0),b(this,Zi,u(this,wn).createElementNS(Ui,"defs")),t.append(i),i.append(u(this,Zi)),u(this,wn).body.append(t)}return u(this,Zi)},Yp=function(t){if(t.length===1){const f=t[0],g=new Array(256);for(let v=0;v<256;v++)g[v]=f[v]/255;const m=g.join(",");return[m,m,m]}const[n,i,a]=t,o=new Array(256),c=new Array(256),d=new Array(256);for(let f=0;f<256;f++)o[f]=n[f]/255,c[f]=i[f]/255,d[f]=a[f]/255;return[o.join(","),c.join(","),d.join(",")]},Xl=function(t){if(u(this,bo)===void 0){b(this,bo,"");const n=u(this,wn).URL;n!==u(this,wn).baseURI&&(nm(n)?Fe('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,bo,n.split("#",1)[0]))}return`url(${u(this,bo)}#${t})`},z1=function(t){const n=u(this,wn).createElementNS(Ui,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},_0=function(t){const n=u(this,wn).createElementNS(Ui,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Yl=function(t){const n=u(this,wn).createElementNS(Ui,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,oe,Kl).append(n),n},yh=function(t,n,i){const a=u(this,wn).createElementNS(Ui,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)},vh=function(t,n,i,a){const o=u(this,wn).createElementNS(Ui,"feComponentTransfer");a.append(o),k(this,oe,yh).call(this,o,"feFuncR",t),k(this,oe,yh).call(this,o,"feFuncG",n),k(this,oe,yh).call(this,o,"feFuncB",i)},b0=function(t,n){const i=u(this,wn).createElementNS(Ui,"feComponentTransfer");n.append(i),k(this,oe,yh).call(this,i,"feFuncA",t)},wh=function(t){return u(this,oe,Kl).style.color=t,Rw(getComputedStyle(u(this,oe,Kl)).getPropertyValue("color"))};class H1{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){it("Abstract method `_fetch` called.")}}class G1 extends H1{async _fetch(e){const t=await tm(e,"arraybuffer");return new Uint8Array(t)}}Sn&&Fe("Please use the `legacy` build in Node.js environments.");async function V1(l){const t=await process.getBuiltinModule("fs").promises.readFile(l);return new Uint8Array(t)}class JI extends B1{}class QI extends j1{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class ZI extends $1{async _fetch(e){return V1(e)}}class eN extends H1{async _fetch(e){return V1(e)}}const An={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function A0(l,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),l.clip(i)}class Iw{getPattern(){it("Abstract method `getPattern` called.")}}class tN extends Iw{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let a;if(i===An.STROKE||i===An.FILL){const o=t.current.getClippedPathBoundingBox(i,pt(e))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,f=t.cachedCanvases.getCanvas("pattern",c,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-o[0],-o[1]),n=ve.transform(n,[1,0,0,1,o[0],o[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),A0(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),a=e.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(n);a.setTransform(m)}else A0(e,this._bbox),a=this._createGradient(e);return a}}function Ov(l,e,t,n,i,a,o,c){const d=e.coords,f=e.colors,g=l.data,m=l.width*4;let v;d[t+1]>d[n+1]&&(v=t,t=n,n=v,v=a,a=o,o=v),d[n+1]>d[i+1]&&(v=n,n=i,i=v,v=o,o=c,c=v),d[t+1]>d[n+1]&&(v=t,t=n,n=v,v=a,a=o,o=v);const _=(d[t]+e.offsetX)*e.scaleX,A=(d[t+1]+e.offsetY)*e.scaleY,S=(d[n]+e.offsetX)*e.scaleX,C=(d[n+1]+e.offsetY)*e.scaleY,T=(d[i]+e.offsetX)*e.scaleX,I=(d[i+1]+e.offsetY)*e.scaleY;if(A>=I)return;const O=f[a],N=f[a+1],j=f[a+2],G=f[o],V=f[o+1],Z=f[o+2],ie=f[c],we=f[c+1],ce=f[c+2],Le=Math.round(A),Ie=Math.round(I);let Ae,Ne,Q,te,K,z,F,R;for(let U=Le;U<=Ie;U++){if(U<C){const ae=U<A?0:(A-U)/(A-C);Ae=_-(_-S)*ae,Ne=O-(O-G)*ae,Q=N-(N-V)*ae,te=j-(j-Z)*ae}else{let ae;U>I?ae=1:C===I?ae=0:ae=(C-U)/(C-I),Ae=S-(S-T)*ae,Ne=G-(G-ie)*ae,Q=V-(V-we)*ae,te=Z-(Z-ce)*ae}let W;U<A?W=0:U>I?W=1:W=(A-U)/(A-I),K=_-(_-T)*W,z=O-(O-ie)*W,F=N-(N-we)*W,R=j-(j-ce)*W;const ne=Math.round(Math.min(Ae,K)),_e=Math.round(Math.max(Ae,K));let le=m*U+ne*4;for(let ae=ne;ae<=_e;ae++)W=(Ae-ae)/(Ae-K),W<0?W=0:W>1&&(W=1),g[le++]=Ne-(Ne-z)*W|0,g[le++]=Q-(Q-F)*W|0,g[le++]=te-(te-R)*W|0,g[le++]=255}}function nN(l,e,t){const n=e.coords,i=e.colors;let a,o;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(n.length/c)-1,f=c-1;for(a=0;a<d;a++){let g=a*c;for(let m=0;m<f;m++,g++)Ov(l,t,n[g],n[g+1],n[g+c],i[g],i[g+1],i[g+c]),Ov(l,t,n[g+c+1],n[g+1],n[g+c],i[g+c+1],i[g+1],i[g+c])}break;case"triangles":for(a=0,o=n.length;a<o;a+=3)Ov(l,t,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class sN extends Iw{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-c,g=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),_=f/m,A=g/v,S={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/_,scaleY:1/A},C=m+2*2,T=v+2*2,I=n.getCanvas("mesh",C,T),O=I.context,N=O.createImageData(m,v);if(t){const G=N.data;for(let V=0,Z=G.length;V<Z;V+=4)G[V]=t[0],G[V+1]=t[1],G[V+2]=t[2],G[V+3]=255}for(const G of this._figures)nN(N,G,S);return O.putImageData(N,2,2),{canvas:I.canvas,offsetX:c-2*_,offsetY:d-2*A,scaleX:_,scaleY:A}}getPattern(e,t,n,i){A0(e,this._bbox);let a;if(i===An.SHADING)a=ve.singularValueDecompose2dScale(pt(e));else if(a=ve.singularValueDecompose2dScale(t.baseTransform),this.matrix){const c=ve.singularValueDecompose2dScale(this.matrix);a=[a[0]*c[0],a[1]*c[1]]}const o=this._createMeshCanvas(a,i===An.SHADING?null:this._background,t.cachedCanvases);return i!==An.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class iN extends Iw{getPattern(){return"hotpink"}}function rN(l){switch(l[0]){case"RadialAxial":return new tN(l);case"Mesh":return new sN(l);case"Dummy":return new iN}throw new Error(`Unknown IR type: ${l[0]}`)}const tx={COLORED:1,UNCOLORED:2},Og=class Og{constructor(e,t,n,i,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Zg("TilingType: "+a);const g=t[0],m=t[1],v=t[2],_=t[3],A=v-g,S=_-m,C=ve.singularValueDecompose2dScale(this.matrix),T=ve.singularValueDecompose2dScale(this.baseTransform),I=C[0]*T[0],O=C[1]*T[1];let N=A,j=S,G=!1,V=!1;const Z=Math.ceil(d*I),ie=Math.ceil(f*O),we=Math.ceil(A*I),ce=Math.ceil(S*O);Z>=we?N=d:G=!0,ie>=ce?j=f:V=!0;const Le=this.getSizeAndScale(N,this.ctx.canvas.width,I),Ie=this.getSizeAndScale(j,this.ctx.canvas.height,O),Ae=e.cachedCanvases.getCanvas("pattern",Le.size,Ie.size),Ne=Ae.context,Q=c.createCanvasGraphics(Ne);if(Q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Q,i,o),Ne.translate(-Le.scale*g,-Ie.scale*m),Q.transform(Le.scale,0,0,Ie.scale,0,0),Ne.save(),this.clipBbox(Q,g,m,v,_),Q.baseTransform=pt(Q.ctx),Q.executeOperatorList(n),Q.endDrawing(),Ne.restore(),G||V){const te=Ae.canvas;G&&(N=d),V&&(j=f);const K=this.getSizeAndScale(N,this.ctx.canvas.width,I),z=this.getSizeAndScale(j,this.ctx.canvas.height,O),F=K.size,R=z.size,U=e.cachedCanvases.getCanvas("pattern-workaround",F,R),W=U.context,ne=G?Math.floor(A/d):0,_e=V?Math.floor(S/f):0;for(let le=0;le<=ne;le++)for(let ae=0;ae<=_e;ae++)W.drawImage(te,F*le,R*ae,F,R,0,0,F,R);return{canvas:U.canvas,scaleX:K.scale,scaleY:z.scale,offsetX:g,offsetY:m}}return{canvas:Ae.canvas,scaleX:Le.scale,scaleY:Ie.scale,offsetX:g,offsetY:m}}getSizeAndScale(e,t,n){const i=Math.max(Og.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,i,a){const o=i-t,c=a-n;e.ctx.rect(t,n,o,c),e.current.updateRectMinMax(pt(e.ctx),[t,n,i,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case tx.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,a.fillColor=o.fillStyle,a.strokeColor=o.strokeStyle;break;case tx.UNCOLORED:const c=ve.makeHexColor(n[0],n[1],n[2]);i.fillStyle=c,i.strokeStyle=c,a.fillColor=c,a.strokeColor=c;break;default:throw new LI(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,i){let a=n;i!==An.SHADING&&(a=ve.transform(a,t.baseTransform),this.matrix&&(a=ve.transform(a,this.matrix)));const o=this.createPatternCanvas(t);let c=new DOMMatrix(a);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const d=e.createPattern(o.canvas,"repeat");return d.setTransform(c),d}};ke(Og,"MAX_PATTERN_SIZE",3e3);let S0=Og;function aN({src:l,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const c=Nn.isLittleEndian?4278190080:255,[d,f]=o?[a,c]:[c,a],g=n>>3,m=n&7,v=l.length;t=new Uint32Array(t.buffer);let _=0;for(let A=0;A<i;A++){for(const C=e+g;e<C;e++){const T=e<v?l[e]:255;t[_++]=T&128?f:d,t[_++]=T&64?f:d,t[_++]=T&32?f:d,t[_++]=T&16?f:d,t[_++]=T&8?f:d,t[_++]=T&4?f:d,t[_++]=T&2?f:d,t[_++]=T&1?f:d}if(m===0)continue;const S=e<v?l[e++]:255;for(let C=0;C<m;C++)t[_++]=S&1<<7-C?f:d}return{srcPos:e,destPos:_}}const nx=16,sx=100,oN=15,ix=10,rx=1e3,Xn=16;function lN(l,e){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){e.save(),this.__originalSave()},l.restore=function(){e.restore(),this.__originalRestore()},l.translate=function(n,i){e.translate(n,i),this.__originalTranslate(n,i)},l.scale=function(n,i){e.scale(n,i),this.__originalScale(n,i)},l.transform=function(n,i,a,o,c,d){e.transform(n,i,a,o,c,d),this.__originalTransform(n,i,a,o,c,d)},l.setTransform=function(n,i,a,o,c,d){e.setTransform(n,i,a,o,c,d),this.__originalSetTransform(n,i,a,o,c,d)},l.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},l.rotate=function(n){e.rotate(n),this.__originalRotate(n)},l.clip=function(n){e.clip(n),this.__originalClip(n)},l.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},l.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},l.bezierCurveTo=function(t,n,i,a,o,c){e.bezierCurveTo(t,n,i,a,o,c),this.__originalBezierCurveTo(t,n,i,a,o,c)},l.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},l.closePath=function(){e.closePath(),this.__originalClosePath()},l.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class cN{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Fp(l,e,t,n,i,a,o,c,d,f){const[g,m,v,_,A,S]=pt(l);if(m===0&&v===0){const I=o*g+A,O=Math.round(I),N=c*_+S,j=Math.round(N),G=(o+d)*g+A,V=Math.abs(Math.round(G)-O)||1,Z=(c+f)*_+S,ie=Math.abs(Math.round(Z)-j)||1;return l.setTransform(Math.sign(g),0,0,Math.sign(_),O,j),l.drawImage(e,t,n,i,a,0,0,V,ie),l.setTransform(g,m,v,_,A,S),[V,ie]}if(g===0&&_===0){const I=c*v+A,O=Math.round(I),N=o*m+S,j=Math.round(N),G=(c+f)*v+A,V=Math.abs(Math.round(G)-O)||1,Z=(o+d)*m+S,ie=Math.abs(Math.round(Z)-j)||1;return l.setTransform(0,Math.sign(m),Math.sign(v),0,O,j),l.drawImage(e,t,n,i,a,0,0,ie,V),l.setTransform(g,m,v,_,A,S),[ie,V]}l.drawImage(e,t,n,i,a,o,c,d,f);const C=Math.hypot(g,m),T=Math.hypot(v,_);return[C*d,T*f]}function uN(l){const{width:e,height:t}=l;if(e>rx||t>rx)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e+1;let o=new Uint8Array(a*(t+1)),c,d,f;const g=e+7&-8;let m=new Uint8Array(g*t),v=0;for(const T of l.data){let I=128;for(;I>0;)m[v++]=T&I?0:255,I>>=1}let _=0;for(v=0,m[v]!==0&&(o[0]=1,++_),d=1;d<e;d++)m[v]!==m[v+1]&&(o[d]=m[v]?2:1,++_),v++;for(m[v]!==0&&(o[d]=2,++_),c=1;c<t;c++){v=c*g,f=c*a,m[v-g]!==m[v]&&(o[f]=m[v]?1:8,++_);let T=(m[v]?4:0)+(m[v-g]?8:0);for(d=1;d<e;d++)T=(T>>2)+(m[v+1]?4:0)+(m[v-g+1]?8:0),i[T]&&(o[f+d]=i[T],++_),v++;if(m[v-g]!==m[v]&&(o[f+d]=m[v]?2:4,++_),_>n)return null}for(v=g*(t-1),f=c*a,m[v]!==0&&(o[f]=8,++_),d=1;d<e;d++)m[v]!==m[v+1]&&(o[f+d]=m[v]?4:8,++_),v++;if(m[v]!==0&&(o[f+d]=4,++_),_>n)return null;const A=new Int32Array([0,a,-1,0,-a,0,0,0,1]),S=new Path2D;for(c=0;_&&c<=t;c++){let T=c*a;const I=T+e;for(;T<I&&!o[T];)T++;if(T===I)continue;S.moveTo(T%a,c);const O=T;let N=o[T];do{const j=A[N];do T+=j;while(!o[T]);const G=o[T];G!==5&&G!==10?(N=G,o[T]=0):(N=G&51*N>>4,o[T]&=N>>2|N<<2),S.lineTo(T%a,T/a|0),o[T]||--_}while(O!==T);--c}return m=null,o=null,function(T){T.save(),T.scale(1/e,-1/t),T.translate(0,-t),T.fill(S),T.beginPath(),T.restore()}}class ax{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=t1,this.textMatrixScale=1,this.fontMatrix=Jv,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=gn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=ve.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=ve.applyTransform(t,e),i=ve.applyTransform(t.slice(2),e),a=ve.applyTransform([t[0],t[3]],e),o=ve.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],i[0],a[0],o[0]),this.minY=Math.min(this.minY,n[1],i[1],a[1],o[1]),this.maxX=Math.max(this.maxX,n[0],i[0],a[0],o[0]),this.maxY=Math.max(this.maxY,n[1],i[1],a[1],o[1])}updateScalingPathMinMax(e,t){ve.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,a,o,c,d,f,g){const m=ve.bezierBoundingBox(t,n,i,a,o,c,d,f,g);g||this.updateRectMinMax(e,m)}getPathBoundingBox(e=An.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===An.STROKE){t||it("Stroke bounding box must include transform.");const i=ve.singularValueDecompose2dScale(t),a=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;n[0]-=a,n[1]-=o,n[2]+=a,n[3]+=o}return n}updateClipFromPath(){const e=ve.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=An.FILL,t=null){return ve.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ox(l,e){if(e instanceof ImageData){l.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%Xn,a=(t-i)/Xn,o=i===0?a:a+1,c=l.createImageData(n,Xn);let d=0,f;const g=e.data,m=c.data;let v,_,A,S;if(e.kind===Up.GRAYSCALE_1BPP){const C=g.byteLength,T=new Uint32Array(m.buffer,0,m.byteLength>>2),I=T.length,O=n+7>>3,N=4294967295,j=Nn.isLittleEndian?4278190080:255;for(v=0;v<o;v++){for(A=v<a?Xn:i,f=0,_=0;_<A;_++){const G=C-d;let V=0;const Z=G>O?n:G*8-7,ie=Z&-8;let we=0,ce=0;for(;V<ie;V+=8)ce=g[d++],T[f++]=ce&128?N:j,T[f++]=ce&64?N:j,T[f++]=ce&32?N:j,T[f++]=ce&16?N:j,T[f++]=ce&8?N:j,T[f++]=ce&4?N:j,T[f++]=ce&2?N:j,T[f++]=ce&1?N:j;for(;V<Z;V++)we===0&&(ce=g[d++],we=128),T[f++]=ce&we?N:j,we>>=1}for(;f<I;)T[f++]=0;l.putImageData(c,0,v*Xn)}}else if(e.kind===Up.RGBA_32BPP){for(_=0,S=n*Xn*4,v=0;v<a;v++)m.set(g.subarray(d,d+S)),d+=S,l.putImageData(c,0,_),_+=Xn;v<o&&(S=n*i*4,m.set(g.subarray(d,d+S)),l.putImageData(c,0,_))}else if(e.kind===Up.RGB_24BPP)for(A=Xn,S=n*A,v=0;v<o;v++){for(v>=a&&(A=i,S=n*A),f=0,_=S;_--;)m[f++]=g[d++],m[f++]=g[d++],m[f++]=g[d++],m[f++]=255;l.putImageData(c,0,v*Xn)}else throw new Error(`bad image kind: ${e.kind}`)}function lx(l,e){if(e.bitmap){l.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%Xn,a=(t-i)/Xn,o=i===0?a:a+1,c=l.createImageData(n,Xn);let d=0;const f=e.data,g=c.data;for(let m=0;m<o;m++){const v=m<a?Xn:i;({srcPos:d}=aN({src:f,srcPos:d,dest:g,width:n,height:v,nonBlackColor:0})),l.putImageData(c,0,m*Xn)}}function ah(l,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)l[n]!==void 0&&(e[n]=l[n]);l.setLineDash!==void 0&&(e.setLineDash(l.getLineDash()),e.lineDashOffset=l.lineDashOffset)}function jp(l){if(l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0),!Sn){const{filter:e}=l;e!=="none"&&e!==""&&(l.filter="none")}}function cx(l,e){if(e)return!0;const t=ve.singularValueDecompose2dScale(l);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Ta.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const hN=["butt","round","square"],dN=["miter","round","bevel"],fN={},ux={};var ii,x0,E0,k0;const Fw=class Fw{constructor(e,t,n,i,a,{optionalContentConfig:o,markedContentStack:c=null},d,f){E(this,ii);this.ctx=e,this.current=new ax(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new cN(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=c,n){const d=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...pt(this.compositeCtx))}this.ctx.save(),jp(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=pt(this.ctx)}executeOperatorList(e,t,n,i){const a=e.argsArray,o=e.fnArray;let c=t||0;const d=a.length;if(d===c)return c;const f=d-c>ix&&typeof n=="function",g=f?Date.now()+oN:0;let m=0;const v=this.commonObjs,_=this.objs;let A;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,n),c;if(A=o[c],A!==zs.dependency)this[A].apply(this,a[c]);else for(const S of a[c]){const C=S.startsWith("g_")?v:_;if(!C.has(S))return C.get(S,n),c}if(c++,c===d)return c;if(f&&++m>ix){if(Date.now()>g)return n(),c;m=0}}}endDrawing(){k(this,ii,x0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,ii,E0).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),c=n,d=i,f="prescale1",g,m;for(;a>2&&c>1||o>2&&d>1;){let v=c,_=d;a>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/v),o>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/_),g=this.cachedCanvases.getCanvas(f,v,_),m=g.context,m.clearRect(0,0,v,_),m.drawImage(e,0,0,c,d,0,0,v,_),e=g.canvas,c=v,d=_,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,a=this.current.fillColor,o=this.current.patternFill,c=pt(t);let d,f,g,m;if((e.bitmap||e.data)&&e.count>1){const Z=e.bitmap||e.data.buffer;f=JSON.stringify(o?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get(Z),d||(d=new Map,this._cachedBitmapsMap.set(Z,d));const ie=d.get(f);if(ie&&!o){const we=Math.round(Math.min(c[0],c[2])+c[4]),ce=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:ie,offsetX:we,offsetY:ce}}g=ie}g||(m=this.cachedCanvases.getCanvas("maskCanvas",n,i),lx(m.context,e));let v=ve.transform(c,[1/n,0,0,-1/i,0,0]);v=ve.transform(v,[1,0,0,1,0,-i]);const[_,A,S,C]=ve.getAxialAlignedBoundingBox([0,0,n,i],v),T=Math.round(S-_)||1,I=Math.round(C-A)||1,O=this.cachedCanvases.getCanvas("fillCanvas",T,I),N=O.context,j=_,G=A;N.translate(-j,-G),N.transform(...v),g||(g=this._scaleImage(m.canvas,ui(N)),g=g.img,d&&o&&d.set(f,g)),N.imageSmoothingEnabled=cx(pt(N),e.interpolate),Fp(N,g,0,0,g.width,g.height,0,0,n,i),N.globalCompositeOperation="source-in";const V=ve.transform(ui(N),[1,0,0,1,-j,-G]);return N.fillStyle=o?a.getPattern(t,this,V,An.FILL):a,N.fillRect(0,0,n,i),d&&!o&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,O.canvas)),{canvas:O.canvas,offsetX:Math.round(j),offsetY:Math.round(G)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=hN[e]}setLineJoin(e){this.ctx.lineJoin=dN[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const a=this.ctx;a.setTransform(...pt(this.suspendedCtx)),ah(this.suspendedCtx,a),lN(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ah(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const a=i[0],o=i[1],c=i[2]-a,d=i[3]-o;c===0||d===0||(this.genericComposeSMask(t.context,n,c,d,t.subtype,t.backdrop,t.transferMap,a,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,a,o,c,d,f,g,m){let v=e.canvas,_=d-g,A=f-m;if(o){const C=ve.makeHexColor(...o);if(_<0||A<0||_+n>v.width||A+i>v.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,i),I=T.context;I.drawImage(v,-_,-A),I.globalCompositeOperation="destination-atop",I.fillStyle=C,I.fillRect(0,0,n,i),I.globalCompositeOperation="source-over",v=T.canvas,_=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(_,A,n,i),e.clip(T),e.globalCompositeOperation="destination-atop",e.fillStyle=C,e.fillRect(_,A,n,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const S=new Path2D;S.rect(d,f,n,i),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(v,_,A,n,i,d,f,n,i),t.restore()}save(){this.inSMaskMode?(ah(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ah(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,i,a,o){this.ctx.transform(e,t,n,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const i=this.ctx,a=this.current;let o=a.x,c=a.y,d,f;const g=pt(i),m=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,v=m?n.slice(0):null;for(let _=0,A=0,S=e.length;_<S;_++)switch(e[_]|0){case zs.rectangle:o=t[A++],c=t[A++];const C=t[A++],T=t[A++],I=o+C,O=c+T;i.moveTo(o,c),C===0||T===0?i.lineTo(I,O):(i.lineTo(I,c),i.lineTo(I,O),i.lineTo(o,O)),m||a.updateRectMinMax(g,[o,c,I,O]),i.closePath();break;case zs.moveTo:o=t[A++],c=t[A++],i.moveTo(o,c),m||a.updatePathMinMax(g,o,c);break;case zs.lineTo:o=t[A++],c=t[A++],i.lineTo(o,c),m||a.updatePathMinMax(g,o,c);break;case zs.curveTo:d=o,f=c,o=t[A+4],c=t[A+5],i.bezierCurveTo(t[A],t[A+1],t[A+2],t[A+3],o,c),a.updateCurvePathMinMax(g,d,f,t[A],t[A+1],t[A+2],t[A+3],o,c,v),A+=6;break;case zs.curveTo2:d=o,f=c,i.bezierCurveTo(o,c,t[A],t[A+1],t[A+2],t[A+3]),a.updateCurvePathMinMax(g,d,f,o,c,t[A],t[A+1],t[A+2],t[A+3],v),o=t[A+2],c=t[A+3],A+=4;break;case zs.curveTo3:d=o,f=c,o=t[A+2],c=t[A+3],i.bezierCurveTo(t[A],t[A+1],o,c,o,c),a.updateCurvePathMinMax(g,d,f,t[A],t[A+1],o,c,o,c,v),A+=4;break;case zs.closePath:i.closePath();break}m&&a.updateScalingPathMinMax(g,v),a.setCurrentPoint(o,c)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,ui(t),An.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let a=!1;i&&(t.save(),t.fillStyle=n.getPattern(t,this,ui(t),An.FILL),a=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=fN}eoClip(){this.pendingClip=ux}beginText(){this.current.textMatrix=t1,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,i=t.getTransform().invertSelf();for(const{transform:a,x:o,y:c,fontSize:d,path:f}of e)n.addPath(f,new DOMMatrix(a).preMultiplySelf(i).translate(o,c).scale(d,-d));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var g;const n=this.commonObjs.get(e),i=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=n.fontMatrix||Jv,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Fe("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const a=n.loadedName||"sans-serif",o=((g=n.systemFontInfo)==null?void 0:g.css)||`"${a}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const d=n.italic?"italic":"normal";let f=t;t<nx?f=nx:t>sx&&(f=sx),this.current.fontSizeScale=t/f,this.ctx.font=`${d} ${c} ${f}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,i,a,o){this.current.textMatrix=[e,t,n,i,a,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i,a){const o=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,m=f&gn.FILL_STROKE_MASK,v=!!(f&gn.ADD_TO_PATH_FLAG),_=c.patternFill&&!d.missingFile,A=c.patternStroke&&!d.missingFile;let S;if((d.disableFontFace||v||_||A)&&(S=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||_||A){if(o.save(),o.translate(t,n),o.scale(g,-g),m===gn.FILL||m===gn.FILL_STROKE)if(i){const C=o.getTransform();o.setTransform(...i),o.fill(k(this,ii,k0).call(this,S,C,i))}else o.fill(S);if(m===gn.STROKE||m===gn.FILL_STROKE)if(a){const C=o.getTransform();o.setTransform(...a),o.stroke(k(this,ii,k0).call(this,S,C,a))}else o.lineWidth/=g,o.stroke(S);o.restore()}else(m===gn.FILL||m===gn.FILL_STROKE)&&o.fillText(e,t,n),(m===gn.STROKE||m===gn.FILL_STROKE)&&o.strokeText(e,t,n);v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:pt(o),x:t,y:n,fontSize:g,path:S})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return ze(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const a=this.ctx,o=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,f=t.fontDirection,g=t.textHScale*f,m=e.length,v=n.vertical,_=v?1:-1,A=n.defaultVMetrics,S=i*t.fontMatrix[0],C=t.textRenderingMode===gn.FILL&&!n.disableFontFace&&!t.patternFill;a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),f>0?a.scale(g,-1):a.scale(g,1);let T,I;if(t.patternFill){a.save();const V=t.fillColor.getPattern(a,this,ui(a),An.FILL);T=pt(a),a.restore(),a.fillStyle=V}if(t.patternStroke){a.save();const V=t.strokeColor.getPattern(a,this,ui(a),An.STROKE);I=pt(a),a.restore(),a.strokeStyle=V}let O=t.lineWidth;const N=t.textMatrixScale;if(N===0||O===0){const V=t.textRenderingMode&gn.FILL_STROKE_MASK;(V===gn.STROKE||V===gn.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=N;if(o!==1&&(a.scale(o,o),O/=o),a.lineWidth=O,n.isInvalidPDFjsFont){const V=[];let Z=0;for(const ie of e)V.push(ie.unicode),Z+=ie.width;a.fillText(V.join(""),0,0),t.x+=Z*S*g,a.restore(),this.compose();return}let j=0,G;for(G=0;G<m;++G){const V=e[G];if(typeof V=="number"){j+=_*V*i/1e3;continue}let Z=!1;const ie=(V.isSpace?d:0)+c,we=V.fontChar,ce=V.accent;let Le,Ie,Ae=V.width;if(v){const Q=V.vmetric||A,te=-(V.vmetric?Q[1]:Ae*.5)*S,K=Q[2]*S;Ae=Q?-Q[0]:Ae,Le=te/o,Ie=(j+K)/o}else Le=j/o,Ie=0;if(n.remeasure&&Ae>0){const Q=a.measureText(we).width*1e3/i*o;if(Ae<Q&&this.isFontSubpixelAAEnabled){const te=Ae/Q;Z=!0,a.save(),a.scale(te,1),Le/=te}else Ae!==Q&&(Le+=(Ae-Q)/2e3*i/o)}if(this.contentVisible&&(V.isInFont||n.missingFile)){if(C&&!ce)a.fillText(we,Le,Ie);else if(this.paintChar(we,Le,Ie,T,I),ce){const Q=Le+i*ce.offset.x/o,te=Ie-i*ce.offset.y/o;this.paintChar(ce.fontChar,Q,te,T,I)}}const Ne=v?Ae*S-ie*f:Ae*S+ie*f;j+=Ne,Z&&a.restore()}v?t.y-=j:t.x+=j*g,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,a=n.fontSize,o=n.fontDirection,c=i.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,g=n.textHScale*o,m=n.fontMatrix||Jv,v=e.length,_=n.textRenderingMode===gn.INVISIBLE;let A,S,C,T;if(!(_||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(g,o),A=0;A<v;++A){if(S=e[A],typeof S=="number"){T=c*S*a/1e3,this.ctx.translate(T,0),n.x+=T*g;continue}const I=(S.isSpace?f:0)+d,O=i.charProcOperatorList[S.operatorListId];if(!O){Fe(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),t.scale(a,a),t.transform(...m),this.executeOperatorList(O),this.restore()),C=ve.applyTransform([S.width,0],m)[0]*a+I,t.translate(C,0),n.x+=C*g}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,a,o){this.ctx.rect(n,i,a-n,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],i=this.baseTransform||pt(this.ctx),a={createCanvasGraphics:o=>new Fw(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new S0(e,n,this.ctx,a,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=ve.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=ve.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=rN(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,ui(t),An.SHADING);const i=ui(t);if(i){const{width:a,height:o}=t.canvas,[c,d,f,g]=ve.getAxialAlignedBoundingBox([0,0,a,o],i);this.ctx.fillRect(c,d,f-c,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){it("Should not call beginInlineImage")}beginImageData(){it("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=pt(this.ctx),t)){const n=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],n,i),this.current.updateRectMinMax(pt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Zg("TODO: Support non-isolated groups."),e.knockout&&Fe("Knockout groups not supported.");const n=pt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=ve.getAxialAlignedBoundingBox(e.bbox,pt(t));const a=[0,0,t.canvas.width,t.canvas.height];i=ve.intersect(i,a)||[0,0,0,0];const o=Math.floor(i[0]),c=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-o,1),f=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,f]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(g,d,f),v=m.context;v.translate(-o,-c),v.transform(...n),e.smask?this.smaskStack.push({canvas:m.canvas,context:v,offsetX:o,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,c),t.save()),ah(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=pt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=ve.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,n,i,a){if(k(this,ii,x0).call(this),jp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],c=t[3]-t[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=c;const[d,f]=ve.singularValueDecompose2dScale(pt(this.ctx)),{viewportScale:g}=this,m=Math.ceil(o*this.outputScaleX*g),v=Math.ceil(c*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(m,v);const{canvas:_,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,c*f),jp(this.ctx)}else jp(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new ax(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,ii,E0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=uN(e)),i.compiled)){i.compiled(n);return}const a=this._createMaskCanvas(e),o=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,i=0,a,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const c=this.ctx;c.save();const d=pt(c);c.transform(t,n,i,a,0,0);const f=this._createMaskCanvas(e);c.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let g=0,m=o.length;g<m;g+=2){const v=ve.transform(d,[t,n,i,a,o[g],o[g+1]]),[_,A]=ve.applyTransform([0,0],v);c.drawImage(f.canvas,_,A)}c.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const a of e){const{data:o,width:c,height:d,transform:f}=a,g=this.cachedCanvases.getCanvas("maskCanvas",c,d),m=g.context;m.save();const v=this.getObject(o,a);lx(m,v),m.globalCompositeOperation="source-in",m.fillStyle=i?n.getPattern(m,this,ui(t),An.FILL):n,m.fillRect(0,0,c,d),m.restore(),t.save(),t.transform(...f),t.scale(1,-1),Fp(t,g.canvas,0,0,c,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Fe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Fe("Dependent image isn't ready yet");return}const o=a.width,c=a.height,d=[];for(let f=0,g=i.length;f<g;f+=2)d.push({transform:[t,0,0,n,i[f],i[f+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;if(this.save(),!Sn){const{filter:c}=i;c!=="none"&&c!==""&&(i.filter="none")}i.scale(1/t,-1/n);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ox(d,e),a=this.applyTransferMapsToCanvas(d)}const o=this._scaleImage(a,ui(i));i.imageSmoothingEnabled=cx(pt(i),e.interpolate),Fp(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const a=e.width,o=e.height,d=this.cachedCanvases.getCanvas("inlineImage",a,o).context;ox(d,e),i=this.applyTransferMapsToCanvas(d)}for(const a of t)n.save(),n.transform(...a.transform),n.scale(1,-1),Fp(n,i,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===ux?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=pt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:a}=this.ctx.getTransform();let o,c;if(n===0&&i===0){const d=Math.abs(t),f=Math.abs(a);if(d===f)if(e===0)o=c=1/d;else{const g=d*e;o=c=g<1?1/g:1}else if(e===0)o=1/d,c=1/f;else{const g=d*e,m=f*e;o=g<1?1/g:1,c=m<1?1/m:1}}else{const d=Math.abs(t*a-n*i),f=Math.hypot(t,n),g=Math.hypot(i,a);if(e===0)o=g/d,c=f/d;else{const m=e*d;o=g>m?g/m:1,c=f>m?f/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[i,a]=this.getScaleForStroking();if(t.lineWidth=n||1,i===1&&a===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(i,a),o.length>0){const c=Math.max(i,a);t.setLineDash(o.map(d=>d/c)),t.lineDashOffset/=c}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ii=new WeakSet,x0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},E0=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},k0=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let ic=Fw;for(const l in zs)ic.prototype[l]!==void 0&&(ic.prototype[zs[l]]=ic.prototype[l]);var gd,md;class yr{static get workerPort(){return u(this,gd)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,gd,e)}static get workerSrc(){return u(this,md)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,md,e)}}gd=new WeakMap,md=new WeakMap,E(yr,gd,null),E(yr,md,"");var xo,yd;class pN{constructor({parsedData:e,rawData:t}){E(this,xo);E(this,yd);b(this,xo,e),b(this,yd,t)}getRaw(){return u(this,yd)}get(e){return u(this,xo).get(e)??null}getAll(){return Ew(u(this,xo))}has(e){return u(this,xo).has(e)}}xo=new WeakMap,yd=new WeakMap;const Jl=Symbol("INTERNAL");var vd,wd,_d,Sc;class gN{constructor(e,{name:t,intent:n,usage:i,rbGroups:a}){E(this,vd,!1);E(this,wd,!1);E(this,_d,!1);E(this,Sc,!0);b(this,vd,!!(e&fs.DISPLAY)),b(this,wd,!!(e&fs.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(u(this,_d))return u(this,Sc);if(!u(this,Sc))return!1;const{print:e,view:t}=this.usage;return u(this,vd)?(t==null?void 0:t.viewState)!=="OFF":u(this,wd)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Jl&&it("Internal method `_setVisible` called."),b(this,_d,n),b(this,Sc,t)}}vd=new WeakMap,wd=new WeakMap,_d=new WeakMap,Sc=new WeakMap;var aa,et,xc,Ec,bd,C0;class mN{constructor(e,t=fs.DISPLAY){E(this,bd);E(this,aa,null);E(this,et,new Map);E(this,xc,null);E(this,Ec,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,Ec,e.order);for(const n of e.groups)u(this,et).set(n.id,new gN(t,n));if(e.baseState==="OFF")for(const n of u(this,et).values())n._setVisible(Jl,!1);for(const n of e.on)u(this,et).get(n)._setVisible(Jl,!0);for(const n of e.off)u(this,et).get(n)._setVisible(Jl,!1);b(this,xc,this.getHash())}}isVisible(e){if(u(this,et).size===0)return!0;if(!e)return Zg("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,et).has(e.id)?u(this,et).get(e.id).visible:(Fe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,bd,C0).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,et).has(t))return Fe(`Optional content group not found: ${t}`),!0;if(u(this,et).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,et).has(t))return Fe(`Optional content group not found: ${t}`),!0;if(!u(this,et).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,et).has(t))return Fe(`Optional content group not found: ${t}`),!0;if(!u(this,et).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,et).has(t))return Fe(`Optional content group not found: ${t}`),!0;if(u(this,et).get(t).visible)return!1}return!0}return Fe(`Unknown optional content policy ${e.policy}.`),!0}return Fe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var a;const i=u(this,et).get(e);if(!i){Fe(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const c of o)c!==e&&((a=u(this,et).get(c))==null||a._setVisible(Jl,!1,!0));i._setVisible(Jl,!!t,!0),b(this,aa,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=u(this,et).get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}b(this,aa,null)}get hasInitialVisibility(){return u(this,xc)===null||this.getHash()===u(this,xc)}getOrder(){return u(this,et).size?u(this,Ec)?u(this,Ec).slice():[...u(this,et).keys()]:null}getGroups(){return u(this,et).size>0?Ew(u(this,et)):null}getGroup(e){return u(this,et).get(e)||null}getHash(){if(u(this,aa)!==null)return u(this,aa);const e=new I1;for(const[t,n]of u(this,et))e.update(`${t}:${n.visible}`);return b(this,aa,e.hexdigest())}}aa=new WeakMap,et=new WeakMap,xc=new WeakMap,Ec=new WeakMap,bd=new WeakSet,C0=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const a=e[i];let o;if(Array.isArray(a))o=k(this,bd,C0).call(this,a);else if(u(this,et).has(a))o=u(this,et).get(a).visible;else return Fe(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class yN{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ot(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:o,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,(a==null?void 0:a.length)>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),e.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Ot(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,a;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ot(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new vN(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new wN(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class vN{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=Tw(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class wN{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function _N(l){let e=!0,t=n("filename\\*","i").exec(l);if(t){t=t[1];let g=c(t);return g=unescape(g),g=d(g),g=f(g),a(g)}if(t=o(l),t){const g=f(t);return a(g)}if(t=n("filename","i").exec(l),t){t=t[1];let g=c(t);return g=f(g),a(g)}function n(g,m){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function i(g,m){if(g){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(g,{fatal:!0}),_=em(m);m=v.decode(_),e=!1}catch{}}return m}function a(g){return e&&/[\x80-\xff]/.test(g)&&(g=i("utf-8",g),e&&(g=i("iso-8859-1",g))),g}function o(g){const m=[];let v;const _=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(g))!==null;){let[,S,C,T]=v;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[C,T]}const A=[];for(let S=0;S<m.length&&S in m;++S){let[C,T]=m[S];T=c(T),C&&(T=unescape(T),S===0&&(T=d(T))),A.push(T)}return A.join("")}function c(g){if(g.startsWith('"')){const m=g.slice(1).split('\\"');for(let v=0;v<m.length;++v){const _=m[v].indexOf('"');_!==-1&&(m[v]=m[v].slice(0,_),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}g=m.join('"')}return g}function d(g){const m=g.indexOf("'");if(m===-1)return g;const v=g.slice(0,m),A=g.slice(m+1).replace(/^[^']*'/,"");return i(v,A)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,_,A){if(_==="q"||_==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),i(v,A);try{A=atob(A)}catch{}return i(v,A)})}return""}function W1(l,e){const t=new Headers;if(!l||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function sm(l){try{return new URL(l).origin}catch{}return null}function q1({responseHeaders:l,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(l.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||n||!e||l.get("Accept-Ranges")!=="bytes"||(l.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function K1(l){const e=l.get("Content-Disposition");if(e){let t=_N(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Tw(t))return t}return null}function im(l,e){return l===404||l===0&&e.startsWith("file:")?new jh('Missing PDF "'+e+'".'):new _g(`Unexpected server response (${l}) while retrieving PDF "${e}".`,l)}function X1(l){return l===200||l===206}function Y1(l,e,t){return{method:"GET",headers:l,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function J1(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(Fe(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class hx{constructor(e){ke(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=W1(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ot(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new AN(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class bN{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,Y1(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=sm(a.url),!X1(a.status))throw im(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:c,suggestedLength:d}=q1({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=K1(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ca("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:J1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class AN{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${n-1}`);const o=i.url;fetch(o,Y1(a,this._withCredentials,this._abortController)).then(c=>{const d=sm(c.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!X1(c.status))throw im(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:J1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Dv=200,Fv=206;function SN(l){const e=l.response;return typeof e!="string"?e:em(e).buffer}class xN{constructor({url:e,httpHeaders:t,withCredentials:n}){ke(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=W1(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,o]of this.headers)t.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Fv):i.expectedStatus=Dv,t.responseType="arraybuffer",Ot(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||Dv;if(!(a===Dv&&n.expectedStatus===Fv)&&a!==n.expectedStatus){n.onError(i.status);return}const c=SN(i);if(a===Fv){const d=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:c}):(Fe('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class EN{constructor(e){this._source=e,this._manager=new xN(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ot(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new kN(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new CN(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class kN{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=sm(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...f]=c.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=q1({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=K1(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=im(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class CN{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=sm((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=im(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const TN=/^[a-z][a-z0-9\-+.]+:/i;function PN(l){if(TN.test(l))return new URL(l);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(l))}class RN{constructor(e){this.source=e,this.url=PN(e.url),Ot(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ot(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new LN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new IN(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class LN{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new jh(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ca("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class IN{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const NN=1e5,Hn=30,MN=.8;var gx,oa,qn,Ad,Sd,Eo,tr,xd,Ed,ko,kc,Cc,la,Tc,kd,Pc,Co,Cd,Td,To,Po,Pd,ca,Rc,br,Q1,Z1,T0,ms,Jp,P0,eE,tE;const Ut=class Ut{constructor({textContentSource:e,container:t,viewport:n}){E(this,br);E(this,oa,Promise.withResolvers());E(this,qn,null);E(this,Ad,!1);E(this,Sd,!!((gx=globalThis.FontInspector)!=null&&gx.enabled));E(this,Eo,null);E(this,tr,null);E(this,xd,0);E(this,Ed,0);E(this,ko,null);E(this,kc,null);E(this,Cc,0);E(this,la,0);E(this,Tc,Object.create(null));E(this,kd,[]);E(this,Pc,null);E(this,Co,[]);E(this,Cd,new WeakMap);E(this,Td,null);var d;if(e instanceof ReadableStream)b(this,Pc,e);else if(typeof e=="object")b(this,Pc,new ReadableStream({start(f){f.enqueue(e),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,qn,b(this,kc,t)),b(this,la,n.scale*(globalThis.devicePixelRatio||1)),b(this,Cc,n.rotation),b(this,tr,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:o,pageY:c}=n.rawDims;b(this,Td,[1,0,0,-1,-o,c+a]),b(this,Ed,i),b(this,xd,a),k(d=Ut,ms,eE).call(d),al(t,n),u(this,oa).promise.finally(()=>{u(Ut,Rc).delete(this),b(this,tr,null),b(this,Tc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Nn.platform;return ze(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,ko).read().then(({value:t,done:n})=>{if(n){u(this,oa).resolve();return}u(this,Eo)??b(this,Eo,t.lang),Object.assign(u(this,Tc),t.styles),k(this,br,Q1).call(this,t.items),e()},u(this,oa).reject)};return b(this,ko,u(this,Pc).getReader()),u(Ut,Rc).add(this),e(),u(this,oa).promise}update({viewport:e,onBefore:t=null}){var a;const n=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==u(this,Cc)&&(t==null||t(),b(this,Cc,i),al(u(this,kc),{rotation:i})),n!==u(this,la)){t==null||t(),b(this,la,n);const o={div:null,properties:null,ctx:k(a=Ut,ms,Jp).call(a,u(this,Eo))};for(const c of u(this,Co))o.properties=u(this,Cd).get(c),o.div=c,k(this,br,T0).call(this,o)}}cancel(){var t;const e=new Ca("TextLayer task cancelled.");(t=u(this,ko))==null||t.cancel(e).catch(()=>{}),b(this,ko,null),u(this,oa).reject(e)}get textDivs(){return u(this,Co)}get textContentItemsStr(){return u(this,kd)}static cleanup(){if(!(u(this,Rc).size>0)){u(this,To).clear();for(const{canvas:e}of u(this,Po).values())e.remove();u(this,Po).clear()}}};oa=new WeakMap,qn=new WeakMap,Ad=new WeakMap,Sd=new WeakMap,Eo=new WeakMap,tr=new WeakMap,xd=new WeakMap,Ed=new WeakMap,ko=new WeakMap,kc=new WeakMap,Cc=new WeakMap,la=new WeakMap,Tc=new WeakMap,kd=new WeakMap,Pc=new WeakMap,Co=new WeakMap,Cd=new WeakMap,Td=new WeakMap,To=new WeakMap,Po=new WeakMap,Pd=new WeakMap,ca=new WeakMap,Rc=new WeakMap,br=new WeakSet,Q1=function(e){var i,a;if(u(this,Ad))return;(a=u(this,tr)).ctx??(a.ctx=k(i=Ut,ms,Jp).call(i,u(this,Eo)));const t=u(this,Co),n=u(this,kd);for(const o of e){if(t.length>NN){Fe("Ignoring additional textDivs for performance reasons."),b(this,Ad,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const c=u(this,qn);b(this,qn,document.createElement("span")),u(this,qn).classList.add("markedContent"),o.id!==null&&u(this,qn).setAttribute("id",`${o.id}`),c.append(u(this,qn))}else o.type==="endMarkedContent"&&b(this,qn,u(this,qn).parentNode);continue}n.push(o.str),k(this,br,Z1).call(this,o)}},Z1=function(e){var S;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Co).push(t);const i=ve.transform(u(this,Td),e.transform);let a=Math.atan2(i[1],i[0]);const o=u(this,Tc)[e.fontName];o.vertical&&(a+=Math.PI/2);let c=u(this,Sd)&&o.fontSubstitution||o.fontFamily;c=Ut.fontFamilyMap.get(c)||c;const d=Math.hypot(i[2],i[3]),f=d*k(S=Ut,ms,tE).call(S,c,u(this,Eo));let g,m;a===0?(g=i[4],m=i[5]-f):(g=i[4]+f*Math.sin(a),m=i[5]-f*Math.cos(a));const v="calc(var(--scale-factor)*",_=t.style;u(this,qn)===u(this,kc)?(_.left=`${(100*g/u(this,Ed)).toFixed(2)}%`,_.top=`${(100*m/u(this,xd)).toFixed(2)}%`):(_.left=`${v}${g.toFixed(2)}px)`,_.top=`${v}${m.toFixed(2)}px)`),_.fontSize=`${v}${(u(Ut,ca)*d).toFixed(2)}px)`,_.fontFamily=c,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,Sd)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),T=Math.abs(e.transform[3]);C!==T&&Math.max(C,T)/Math.min(C,T)>1.5&&(A=!0)}if(A&&(n.canvasWidth=o.vertical?e.height:e.width),u(this,Cd).set(t,n),u(this,tr).div=t,u(this,tr).properties=n,k(this,br,T0).call(this,u(this,tr)),n.hasText&&u(this,qn).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),u(this,qn).append(C)}},T0=function(e){var c;const{div:t,properties:n,ctx:i}=e,{style:a}=t;let o="";if(u(Ut,ca)>1&&(o=`scale(${1/u(Ut,ca)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=a,{canvasWidth:f,fontSize:g}=n;k(c=Ut,ms,P0).call(c,i,g*u(this,la),d);const{width:m}=i.measureText(t.textContent);m>0&&(o=`scaleX(${f*u(this,la)/m}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(a.transform=o)},ms=new WeakSet,Jp=function(e=null){let t=u(this,Po).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Po).set(e,t),u(this,Pd).set(t,{size:0,family:""})}return t},P0=function(e,t,n){const i=u(this,Pd).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},eE=function(){if(u(this,ca)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,ca,e.getBoundingClientRect().height),e.remove()},tE=function(e,t){const n=u(this,To).get(e);if(n)return n;const i=k(this,ms,Jp).call(this,t);i.canvas.width=i.canvas.height=Hn,k(this,ms,P0).call(this,i,Hn,e);const a=i.measureText("");let o=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(o){const g=o/(o+c);return u(this,To).set(e,g),i.canvas.width=i.canvas.height=0,g}i.strokeStyle="red",i.clearRect(0,0,Hn,Hn),i.strokeText("g",0,0);let d=i.getImageData(0,0,Hn,Hn).data;c=0;for(let g=d.length-1-3;g>=0;g-=4)if(d[g]>0){c=Math.ceil(g/4/Hn);break}i.clearRect(0,0,Hn,Hn),i.strokeText("A",0,Hn),d=i.getImageData(0,0,Hn,Hn).data,o=0;for(let g=0,m=d.length;g<m;g+=4)if(d[g]>0){o=Hn-Math.floor(g/4/Hn);break}i.canvas.width=i.canvas.height=0;const f=o?o/(o+c):MN;return u(this,To).set(e,f),f},E(Ut,ms),E(Ut,To,new Map),E(Ut,Po,new Map),E(Ut,Pd,new WeakMap),E(Ut,ca,null),E(Ut,Rc,new Set);let $h=Ut;class Uh{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(a){var d;if(!a)return;let o=null;const c=a.name;if(c==="#text")o=a.value;else if(Uh.shouldBuildText(c))(d=a==null?void 0:a.attributes)!=null&&d.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&t.push({str:o}),!!a.children)for(const f of a.children)i(f)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const ON=65536,DN=100,FN=5e3,jN=Sn?QI:XI,$N=Sn?ZI:U1,UN=Sn?JI:YI,BN=Sn?eN:G1;function zN(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const e=new R0,{docId:t}=e,n=l.url?HN(l.url):null,i=l.data?GN(l.data):null,a=l.httpHeaders||null,o=l.withCredentials===!0,c=l.password??null,d=l.range instanceof nE?l.range:null,f=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:ON;let g=l.worker instanceof rc?l.worker:null;const m=l.verbosity,v=typeof l.docBaseUrl=="string"&&!nm(l.docBaseUrl)?l.docBaseUrl:null,_=typeof l.cMapUrl=="string"?l.cMapUrl:null,A=l.cMapPacked!==!1,S=l.CMapReaderFactory||$N,C=typeof l.standardFontDataUrl=="string"?l.standardFontDataUrl:null,T=l.StandardFontDataFactory||BN,I=l.stopAtErrors!==!0,O=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,N=l.isEvalSupported!==!1,j=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!Sn,G=typeof l.isImageDecoderSupported=="boolean"?l.isImageDecoderSupported:!Sn&&(Nn.platform.isFirefox||!globalThis.chrome),V=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,Z=typeof l.disableFontFace=="boolean"?l.disableFontFace:Sn,ie=l.fontExtraProperties===!0,we=l.enableXfa===!0,ce=l.ownerDocument||globalThis.document,Le=l.disableRange===!0,Ie=l.disableStream===!0,Ae=l.disableAutoFetch===!0,Ne=l.pdfBug===!0,Q=l.CanvasFactory||jN,te=l.FilterFactory||UN,K=l.enableHWA===!0,z=d?d.length:l.length??NaN,F=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!Sn&&!Z,R=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:S===U1&&T===G1&&_&&C&&hh(_,document.baseURI)&&hh(C,document.baseURI),U=null;CI(m);const W={canvasFactory:new Q({ownerDocument:ce,enableHWA:K}),filterFactory:new te({docId:t,ownerDocument:ce}),cMapReaderFactory:R?null:new S({baseUrl:_,isCompressed:A}),standardFontDataFactory:R?null:new T({baseUrl:C})};if(!g){const le={verbosity:m,port:yr.workerPort};g=le.port?rc.fromPort(le):new rc(le),e._worker=g}const ne={docId:t,apiVersion:"4.10.38",data:i,password:c,disableAutoFetch:Ae,rangeChunkSize:f,length:z,docBaseUrl:v,enableXfa:we,evaluatorOptions:{maxImageSize:O,disableFontFace:Z,ignoreErrors:I,isEvalSupported:N,isOffscreenCanvasSupported:j,isImageDecoderSupported:G,canvasMaxAreaInBytes:V,fontExtraProperties:ie,useSystemFonts:F,cMapUrl:R?_:null,standardFontDataUrl:R?C:null}},_e={disableFontFace:Z,fontExtraProperties:ie,ownerDocument:ce,pdfBug:Ne,styleElement:U,loadingParams:{disableAutoFetch:Ae,enableXfa:we}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const le=g.messageHandler.sendWithPromise("GetDocRequest",ne,i?[i.buffer]:null);let ae;if(d)ae=new yN(d,{disableRange:Le,disableStream:Ie});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let be;if(Sn)if(hh(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");be=hx}else be=RN;else be=hh(n)?hx:EN;ae=new be({url:n,length:z,httpHeaders:a,withCredentials:o,rangeChunkSize:f,disableRange:Le,disableStream:Ie})}return le.then(be=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const He=new gh(t,be,g.port),lt=new KN(He,e,ae,_e,W);e._transport=lt,He.send("Ready",null)})}).catch(e._capability.reject),e}function HN(l){if(l instanceof URL)return l.href;try{return new URL(l,window.location).href}catch{if(Sn&&typeof l=="string")return l}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function GN(l){if(Sn&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return em(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l==null?void 0:l.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function dx(l){return typeof l=="object"&&Number.isInteger(l==null?void 0:l.num)&&l.num>=0&&Number.isInteger(l==null?void 0:l.gen)&&l.gen>=0}var Dg;const Fg=class Fg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Cn(Fg,Dg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};Dg=new WeakMap,E(Fg,Dg,0);let R0=Fg;class nE{constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){it("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class VN{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ua,nr,Ls,Ql,Qp;class WN{constructor(e,t,n,i=!1){E(this,Ls);E(this,ua,null);E(this,nr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new QS:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new sE,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new vf({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:i=qr.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:m=!1}){var N,j;(N=this._stats)==null||N.time("Overall");const v=this._transport.getRenderingIntent(n,i,g,m),{renderingIntent:_,cacheKey:A}=v;b(this,nr,!1),k(this,Ls,Qp).call(this),c||(c=this._transport.getOptionalContentConfig(_));let S=this._intentStates.get(A);S||(S=Object.create(null),this._intentStates.set(A,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const C=!!(_&fs.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(j=this._stats)==null||j.time("Page Request"),this._pumpOperatorList(v));const T=G=>{var V;S.renderTasks.delete(I),(this._maybeCleanupAfterRender||C)&&b(this,nr,!0),k(this,Ls,Ql).call(this,!C),G?(I.capability.reject(G),this._abortOperatorList({intentState:S,reason:G instanceof Error?G:new Error(G)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new I0({callback:T,params:{canvasContext:e,viewport:t,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:f});(S.renderTasks||(S.renderTasks=new Set)).add(I);const O=I.task;return Promise.all([S.displayReadyCapability.promise,c]).then(([G,V])=>{var Z;if(this.destroyed){T();return}if((Z=this._stats)==null||Z.time("Rendering"),!(V.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:G,optionalContentConfig:V}),I.operatorListChanged()}).catch(T),O}getOperatorList({intent:e="display",annotationMode:t=qr.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var f;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,n,i,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Uh.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function a(){o.read().then(function({value:d,done:f}){if(f){n(c);return}c.lang??(c.lang=d.lang),Object.assign(c.styles,d.styles),c.items.push(...d.items),a()},i)}const o=t.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),b(this,nr,!1),k(this,Ls,Qp).call(this),Promise.all(e)}cleanup(e=!1){b(this,nr,!0);const t=k(this,Ls,Ql).call(this,!1);return e&&t&&this._stats&&(this._stats=new QS),t}_startRenderPage(e,t){var i,a;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&k(this,Ls,Ql).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:o}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},o).getReader(),f=this._intentStates.get(t);f.streamReader=d;const g=()=>{d.read().then(({value:m,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),g())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();k(this,Ls,Ql).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};g()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Cw){let i=DN;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ca(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}ua=new WeakMap,nr=new WeakMap,Ls=new WeakSet,Ql=function(e=!1){if(k(this,Ls,Qp).call(this),!u(this,nr)||this.destroyed)return!1;if(e)return b(this,ua,setTimeout(()=>{b(this,ua,null),k(this,Ls,Ql).call(this,!1)},FN)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,nr,!1),!0},Qp=function(){u(this,ua)&&(clearTimeout(u(this,ua)),b(this,ua,null))};var sr,jg;class qN{constructor(){E(this,sr,new Map);E(this,jg,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,jg).then(()=>{for(const[i]of u(this,sr))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Fe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}u(this,sr).set(t,i)}removeEventListener(e,t){const n=u(this,sr).get(t);n==null||n(),u(this,sr).delete(t)}terminate(){for(const[,e]of u(this,sr))e==null||e();u(this,sr).clear()}}sr=new WeakMap,jg=new WeakMap;var $g,Ro,Lo,Lc,Zp,Ic,eg;const ft=class ft{constructor({name:e=null,port:t=null,verbosity:n=TI()}={}){E(this,Lc);var i;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=u(ft,Lo))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(u(ft,Lo)||b(ft,Lo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new gh("main","worker",e),this._messageHandler.on("ready",function(){}),k(this,Lc,Zp).call(this)}_initialize(){if(u(ft,Ro)||u(ft,Ic,eg)){this._setupFakeWorker();return}let{workerSrc:e}=ft;try{ft._isSameOrigin(window.location.href,e)||(e=ft._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new gh("main","worker",t),i=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){i();return}this._messageHandler=n,this._port=t,this._webWorker=t,k(this,Lc,Zp).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};o();return}catch{Zg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(ft,Ro)||(Fe("Setting up fake worker."),b(ft,Ro,!0)),ft._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new qN;this._port=t;const n=`fake${Cn(ft,$g)._++}`,i=new gh(n+"_worker",n,t);e.setup(i,t),this._messageHandler=new gh(n,n+"_worker",t),k(this,Lc,Zp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=u(ft,Lo))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=u(this,Lo))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ft(e)}static get workerSrc(){if(yr.workerSrc)return yr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ze(this,"_setupFakeWorkerGlobal",(async()=>u(this,Ic,eg)?u(this,Ic,eg):(await import(this.workerSrc)).WorkerMessageHandler)())}};$g=new WeakMap,Ro=new WeakMap,Lo=new WeakMap,Lc=new WeakSet,Zp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ic=new WeakSet,eg=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(ft,Ic),E(ft,$g,0),E(ft,Ro,!1),E(ft,Lo),Sn&&(b(ft,Ro,!0),yr.workerSrc||(yr.workerSrc="./pdf.worker.mjs")),ft._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(t,n);return n.origin===i.origin},ft._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let rc=ft;var ir,Si,Nc,Mc,rr,Io,_h;class KN{constructor(e,t,n,i,a){E(this,Io);E(this,ir,new Map);E(this,Si,new Map);E(this,Nc,new Map);E(this,Mc,new Map);E(this,rr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new sE,this.fontLoader=new qI({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ze(this,"annotationStorage",new Lw)}getRenderingIntent(e,t=qr.ENABLE,n=null,i=!1,a=!1){let o=fs.DISPLAY,c=w0;switch(e){case"any":o=fs.ANY;break;case"display":break;case"print":o=fs.PRINT;break;default:Fe(`getRenderingIntent - invalid intent: ${e}`)}const d=o&fs.PRINT&&n instanceof M1?n:this.annotationStorage;switch(t){case qr.DISABLE:o+=fs.ANNOTATIONS_DISABLE;break;case qr.ENABLE:break;case qr.ENABLE_FORMS:o+=fs.ANNOTATIONS_FORMS;break;case qr.ENABLE_STORAGE:o+=fs.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Fe(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=fs.IS_EDITING),a&&(o+=fs.OPLIST);const{ids:f,hash:g}=d.modifiedIds,m=[o,c.hash,g];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,rr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of u(this,Si).values())e.push(i._destroy());u(this,Si).clear(),u(this,Nc).clear(),u(this,Mc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),u(this,ir).clear(),this.filterFactory.destroy(),$h.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ca("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Ot(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){i.close();return}Ot(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:o}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((c=t.onProgress)==null||c.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var f;(f=t.onProgress)==null||f.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(n,i)=>{Ot(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:o,done:c}){if(c){i.close();return}Ot(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{a.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new VN(n,this))}),e.on("DocException",n=>{t._capability.reject(Gn(n))}),e.on("PasswordRequest",n=>{b(this,rr,Promise.withResolvers());try{if(!t.onPassword)throw Gn(n);const i=a=>{a instanceof Error?u(this,rr).reject(a):u(this,rr).resolve({password:a})};t.onPassword(i,n.code)}catch(i){u(this,rr).reject(i)}return u(this,rr).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,Si).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:c,fontExtraProperties:d,pdfBug:f}=this._params;if("error"in a){const _=a.error;Fe(`Error during font loading: ${_}`),this.commonObjs.resolve(n,_);break}const g=f&&((o=globalThis.FontInspector)!=null&&o.enabled)?(_,A)=>globalThis.FontInspector.fontAdded(_,A):null,m=new KI(a,{disableFontFace:c,fontExtraProperties:d,inspectFont:g});this.fontLoader.bind(m).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&m.data&&(m.data=null),this.commonObjs.resolve(n,m)});break;case"CopyLocalImage":const{imageRef:v}=a;Ot(v,"The imageRef must be defined.");for(const _ of u(this,Si).values())for(const[,A]of _.objs)if((A==null?void 0:A.ref)===v)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,o])=>{var d;if(this.destroyed)return;const c=u(this,Si).get(i);if(!c.objs.has(n)){if(c._intentStates.size===0){(d=o==null?void 0:o.bitmap)==null||d.close();return}switch(a){case"Image":c.objs.resolve(n,o),(o==null?void 0:o.dataLen)>SI&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Fe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,Nc).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&u(this,Mc).set(a.refStr,e);const o=new WN(t,a,this,this._params.pdfBug);return u(this,Si).set(t,o),o});return u(this,Nc).set(t,i),i}getPageIndex(e){return dx(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,Io,_h).call(this,"GetFieldObjects")}hasJSActions(){return k(this,Io,_h).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,Io,_h).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,Io,_h).call(this,"GetOptionalContentConfig").then(t=>new mN(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,ir).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,o;return{info:i[0],metadata:i[1]?new pN(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return u(this,ir).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Si).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,ir).clear(),this.filterFactory.destroy(!0),$h.cleanup()}}cachedPageNumber(e){if(!dx(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Mc).get(t)??null}}ir=new WeakMap,Si=new WeakMap,Nc=new WeakMap,Mc=new WeakMap,rr=new WeakMap,Io=new WeakSet,_h=function(e,t=null){const n=u(this,ir).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return u(this,ir).set(e,i),i};const oh=Symbol("INITIAL_DATA");var is,Rd,L0;class sE{constructor(){E(this,Rd);E(this,is,Object.create(null))}get(e,t=null){if(t){const i=k(this,Rd,L0).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=u(this,is)[e];if(!n||n.data===oh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,is)[e];return!!t&&t.data!==oh}delete(e){const t=u(this,is)[e];return!t||t.data===oh?!1:(delete u(this,is)[e],!0)}resolve(e,t=null){const n=k(this,Rd,L0).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,is)){const{data:n}=u(this,is)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}b(this,is,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,is)){const{data:t}=u(this,is)[e];t!==oh&&(yield[e,t])}}}is=new WeakMap,Rd=new WeakSet,L0=function(e){var t;return(t=u(this,is))[e]||(t[e]={...Promise.withResolvers(),data:oh})};var ha;class XN{constructor(e){E(this,ha,null);b(this,ha,e),this.onContinue=null}get promise(){return u(this,ha).capability.promise}cancel(e=0){u(this,ha).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,ha).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,ha);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ha=new WeakMap;var da,No;const Za=class Za{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:o,pageIndex:c,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:m=!1,pageColors:v=null}){E(this,da,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new XN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,d;if(this.cancelled)return;if(this._canvas){if(u(Za,No).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Za,No).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:a,background:o}=this.params;this.gfx=new ic(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,da)&&(window.cancelAnimationFrame(u(this,da)),b(this,da,null)),u(Za,No).delete(this._canvas),this.callback(e||new Cw(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,da,window.requestAnimationFrame(()=>{b(this,da,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Za,No).delete(this._canvas),this.callback())))}};da=new WeakMap,No=new WeakMap,E(Za,No,new WeakSet);let I0=Za;const YN="4.10.38",JN="f9bea397f";function fx(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function lh(l){return Math.max(0,Math.min(255,255*l))}class px{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=lh(e),[e,e,e]}static G_HTML([e]){const t=fx(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(lh)}static RGB_HTML(e){return`#${e.map(fx).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[lh(1-Math.min(1,e+i)),lh(1-Math.min(1,n+i)),lh(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,a=1-t,o=1-n,c=Math.min(i,a,o);return["CMYK",i,a,o,c]}}class QN{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){it("Abstract method `_createSVG` called.")}}class Nw extends QN{_createSVG(e){return document.createElementNS(Ui,e)}}class iE{static setupStorage(e,t,n,i,a){const o=i.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",c=>{i.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const c of n.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:a}){const{attributes:o}=t,c=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[d,f]of Object.entries(o))if(f!=null)switch(d){case"class":f.length&&e.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,f)}c&&a.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var m,v;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:n});const c=a!=="richText",d=e.div;if(d.append(o),e.viewport){const _=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=_}c&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const _=document.createTextNode(i.value);o.append(_),c&&Uh.shouldBuildText(i.name)&&f.push(_)}return{textDivs:f}}const g=[[i,-1,o]];for(;g.length>0;){const[_,A,S]=g.at(-1);if(A+1===_.children.length){g.pop();continue}const C=_.children[++g.at(-1)[1]];if(C===null)continue;const{name:T}=C;if(T==="#text"){const O=document.createTextNode(C.value);f.push(O),S.append(O);continue}const I=(m=C==null?void 0:C.attributes)!=null&&m.xmlns?document.createElementNS(C.attributes.xmlns,T):document.createElement(T);if(S.append(I),C.attributes&&this.setAttributes({html:I,element:C,storage:t,intent:a,linkService:n}),((v=C.children)==null?void 0:v.length)>0)g.push([C,-1,I]);else if(C.value){const O=document.createTextNode(C.value);c&&Uh.shouldBuildText(T)&&f.push(O),I.append(O)}}for(const _ of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const _f=1e3,ZN=9,ll=new WeakSet;function ka(l){return{width:l[2]-l[0],height:l[3]-l[1]}}class eM{static create(e){switch(e.data.annotationType){case $t.LINK:return new rE(e);case $t.TEXT:return new tM(e);case $t.WIDGET:switch(e.data.fieldType){case"Tx":return new nM(e);case"Btn":return e.data.radioButton?new lE(e):e.data.checkBox?new iM(e):new rM(e);case"Ch":return new aM(e);case"Sig":return new sM(e)}return new dl(e);case $t.POPUP:return new M0(e);case $t.FREETEXT:return new fE(e);case $t.LINE:return new lM(e);case $t.SQUARE:return new cM(e);case $t.CIRCLE:return new uM(e);case $t.POLYLINE:return new pE(e);case $t.CARET:return new dM(e);case $t.INK:return new Mw(e);case $t.POLYGON:return new hM(e);case $t.HIGHLIGHT:return new gE(e);case $t.UNDERLINE:return new fM(e);case $t.SQUIGGLY:return new pM(e);case $t.STRIKEOUT:return new gM(e);case $t.STAMP:return new mE(e);case $t.FILEATTACHMENT:return new mM(e);default:return new Lt(e)}}}var Mo,Oc,Dc,Ld,N0;const jw=class jw{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){E(this,Ld);E(this,Mo,null);E(this,Oc,!1);E(this,Dc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return jw._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;u(this,Mo)||b(this,Mo,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&k(this,Ld,N0).call(this,t),(n=u(this,Dc))==null||n.popup.updateEdited(e)}resetEdited(){var e;u(this,Mo)&&(k(this,Ld,N0).call(this,u(this,Mo).rect),(e=u(this,Dc))==null||e.popup.resetEdited(),b(this,Mo,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof dl||(a.tabIndex=_f);const{style:o}=a;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof M0){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,a),a}const{width:c,height:d}=ka(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,C=t.borderStyle.verticalCornerRadius;if(S>0||C>0){const I=`calc(${S}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;o.borderRadius=I}else if(this instanceof lE){const I=`calc(${c}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;o.borderRadius=I}switch(t.borderStyle.style){case rh.SOLID:o.borderStyle="solid";break;case rh.DASHED:o.borderStyle="dashed";break;case rh.BEVELED:Fe("Unimplemented border style: beveled");break;case rh.INSET:Fe("Unimplemented border style: inset");break;case rh.UNDERLINE:o.borderBottomStyle="solid";break}const T=t.borderColor||null;T?(b(this,Oc,!0),o.borderColor=ve.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):o.borderWidth=0}const f=ve.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:m,pageX:v,pageY:_}=i.rawDims;o.left=`${100*(f[0]-v)/g}%`,o.top=`${100*(f[1]-_)/m}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(o.width=`${100*c/g}%`,o.height=`${100*d/m}%`):this.setRotation(A,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:a,height:o}=ka(this.data.rect);let c,d;e%180===0?(c=100*a/n,d=100*o/i):(c=100*o/n,d=100*a/i),t.style.width=`${c}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const a=i.detail[t],o=a[0],c=a.slice(1);i.target.style[n]=px[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:px[`${o}_rgb`](c)})};return ze(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const a=e[i]||n[i];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,a]of Object.entries(t)){const o=n[i];if(o){const c={detail:{[i]:a},target:e};o(c),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,a]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,C,T,I]=e.subarray(2,6);if(i===S&&a===C&&t===T&&n===I)return}const{style:o}=this.container;let c;if(u(this,Oc)){const{borderColor:S,borderWidth:C}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=i-t,f=a-n,{svgFactory:g}=this,m=g.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const v=g.createElement("defs");m.append(v);const _=g.createElement("clipPath"),A=`clippath_${this.data.id}`;_.setAttribute("id",A),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let S=2,C=e.length;S<C;S+=8){const T=e[S],I=e[S+1],O=e[S+2],N=e[S+3],j=g.createElement("rect"),G=(O-t)/d,V=(a-I)/f,Z=(T-O)/d,ie=(I-N)/f;j.setAttribute("x",G),j.setAttribute("y",V),j.setAttribute("width",Z),j.setAttribute("height",ie),_.append(j),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${G}" y="${V}" width="${Z}" height="${ie}"/>`)}u(this,Oc)&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:e}=this,t=b(this,Dc,new M0({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){it("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:o,exportValues:c}of i){if(a===-1||o===t)continue;const d=typeof c=="string"?c:null,f=document.querySelector(`[data-element-id="${o}"]`);if(f&&!ll.has(f)){Fe(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:d,domElement:f})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,o=i.getAttribute("data-element-id");o!==t&&ll.has(i)&&n.push({id:o,exportValue:a,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Mo=new WeakMap,Oc=new WeakMap,Dc=new WeakMap,Ld=new WeakSet,N0=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:d}}}}=this;n==null||n.splice(0,4,...e);const{width:f,height:g}=ka(e);t.left=`${100*(e[0]-c)/a}%`,t.top=`${100*(o-e[3]+d)/o}%`,i===0?(t.width=`${100*f/a}%`,t.height=`${100*g/o}%`):this.setRotation(i)};let Lt=jw;var ps,Ka,aE,oE;class rE extends Lt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});E(this,ps);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action),a=!0):t.attachment?(k(this,ps,aE).call(this,i,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(k(this,ps,oE).call(this,i,t.setOCGState),a=!0):t.dest?(this._bindLink(i,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&k(this,ps,Ka).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),k(this,ps,Ka).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const o=i.get(a);o&&(t[o]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}t.onclick||(t.onclick=()=>!1),k(this,ps,Ka).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),k(this,ps,Ka).call(this),!this._fieldObjects){Fe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var m;i==null||i();const{fields:a,refs:o,include:c}=n,d=[];if(a.length!==0||o.length!==0){const v=new Set(o);for(const _ of a){const A=this._fieldObjects[_]||[];for(const{id:S}of A)v.add(S)}for(const _ of Object.values(this._fieldObjects))for(const A of _)v.has(A.id)===c&&d.push(A)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const f=this.annotationStorage,g=[];for(const v of d){const{id:_}=v;switch(g.push(_),v.type){case"text":{const S=v.defaultValue||"";f.setValue(_,{value:S});break}case"checkbox":case"radiobutton":{const S=v.defaultValue===v.exportValues;f.setValue(_,{value:S});break}case"combobox":case"listbox":{const S=v.defaultValue||"";f.setValue(_,{value:S});break}default:continue}const A=document.querySelector(`[data-element-id="${_}"]`);if(A){if(!ll.has(A)){Fe(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}ps=new WeakSet,Ka=function(){this.container.setAttribute("data-internal-link","")},aE=function(t,n,i=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,i),!1},k(this,ps,Ka).call(this)},oE=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),k(this,ps,Ka).call(this)};class tM extends Lt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class dl extends Lt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Nn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,a){n.includes("mouse")?e.addEventListener(n,o=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var c;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}a&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o)}}))})}_setEventListeners(e,t,n,i){var a,o,c;for(const[d,f]of n)(f==="Action"||(a=this.data.actions)!=null&&a[f])&&((f==="Focus"||f==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,f,i),f==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):f==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ve.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||ZN,a=e.style;let o;const c=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c),g=Math.round(f/(Lv*i))||1,m=f/g;o=Math.min(i,d(m/Lv))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(i,d(f/Lv))}a.fontSize=`calc(${o}px * var(--scale-factor))`,a.color=ve.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class nM extends dl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),a.setValue(o.id,{[i]:n})}render(){var i,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let c=o.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&c.length>d&&(c=c.slice(0,d));let f=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const g={userValue:c,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??c,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??c),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ll.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=_f,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",v=>{e.setValue(t,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",v=>{const _=this.data.defaultFieldValue??"";n.value=g.userValue=_,g.formattedValue=null});let m=v=>{const{formattedValue:_}=g;_!=null&&(v.target.value=_),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{var S;if(g.focused)return;const{target:A}=_;g.userValue&&(A.value=g.userValue),g.lastCommittedValue=A.value,g.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const A={value(S){g.userValue=S.detail.value??"",e.setValue(t,{value:g.userValue.toString()}),S.target.value=g.userValue},formattedValue(S){const{formattedValue:C}=S.detail;g.formattedValue=C,C!=null&&S.target!==document.activeElement&&(S.target.value=C),e.setValue(t,{formattedValue:C})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var O;const{charLimit:C}=S.detail,{target:T}=S;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let I=g.userValue;!I||I.length<=C||(I=I.slice(0,C),T.value=g.userValue=I,e.setValue(t,{value:I}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(A,_)}),n.addEventListener("keydown",_=>{var C;g.commitKey=1;let A=-1;if(_.key==="Escape"?A=0:_.key==="Enter"&&!this.data.multiLine?A=2:_.key==="Tab"&&(g.commitKey=3),A===-1)return;const{value:S}=_.target;g.lastCommittedValue!==S&&(g.lastCommittedValue=S,g.userValue=S,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:A,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const v=m;m=null,n.addEventListener("blur",_=>{var S,C;if(!g.focused||!_.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(g.focused=!1);const{value:A}=_.target;g.userValue=A,g.lastCommittedValue!==A&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:g.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),v(_)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",_=>{var j;g.lastCommittedValue=null;const{data:A,target:S}=_,{value:C,selectionStart:T,selectionEnd:I}=S;let O=T,N=I;switch(_.inputType){case"deleteWordBackward":{const G=C.substring(0,T).match(/\w*[^\w]*$/);G&&(O-=G[0].length);break}case"deleteWordForward":{const G=C.substring(T).match(/^[^\w]*\w*/);G&&(N+=G[0].length);break}case"deleteContentBackward":T===I&&(O-=1);break;case"deleteContentForward":T===I&&(N+=1);break}_.preventDefault(),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,change:A||"",willCommit:!1,selStart:O,selEnd:N}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class sM extends dl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class iM extends dl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return ll.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=_f,a.addEventListener("change",o=>{const{name:c,checked:d}=o.target;for(const f of this._getElementsByName(c,n)){const g=d&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=g),e.setValue(f.id,{value:g})}e.setValue(n,{value:d})}),a.addEventListener("resetform",o=>{const c=t.defaultFieldValue||"Off";o.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class lE extends dl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const a=document.createElement("input");if(ll.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=_f,a.addEventListener("change",o=>{const{name:c,checked:d}=o.target;for(const f of this._getElementsByName(c,n))e.setValue(f.id,{value:!1});e.setValue(n,{value:d})}),a.addEventListener("resetform",o=>{const c=t.defaultFieldValue;o.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;a.addEventListener("updatefromsandbox",c=>{const d={value:f=>{const g=o===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const v=g&&m.id===n;m.domElement&&(m.domElement.checked=v),e.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class rM extends rE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class aM extends dl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");ll.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=_f;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",g=>{const m=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===m});for(const g of this.data.options){const m=document.createElement("option");m.textContent=g.displayValue,m.value=g.exportValue,n.value.includes(g.exportValue)&&(m.setAttribute("selected",!0),a=!1),i.append(m)}let o=null;if(a){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),i.prepend(g),o=()=>{g.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const c=g=>{const m=g?"value":"textContent",{options:v,multiple:_}=i;return _?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let d=c(!1);const f=g=>{const m=g.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",g=>{const m={value(v){o==null||o();const _=v.detail.value,A=new Set(Array.isArray(_)?_:[_]);for(const S of i.options)S.selected=A.has(S.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(v){i.multiple=!0},remove(v){const _=i.options,A=v.detail.remove;_[A].selected=!1,i.remove(A),_.length>0&&Array.prototype.findIndex.call(_,C=>C.selected)===-1&&(_[0].selected=!0),e.setValue(t,{value:c(!0),items:f(v)}),d=c(!1)},clear(v){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(v){const{index:_,displayValue:A,exportValue:S}=v.detail.insert,C=i.children[_],T=document.createElement("option");T.textContent=A,T.value=S,C?C.before(T):i.append(T),e.setValue(t,{value:c(!0),items:f(v)}),d=c(!1)},items(v){const{items:_}=v.detail;for(;i.length!==0;)i.remove(0);for(const A of _){const{displayValue:S,exportValue:C}=A,T=document.createElement("option");T.textContent=S,T.value=C,i.append(T)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:c(!0),items:f(v)}),d=c(!1)},indices(v){const _=new Set(v.detail.indices);for(const A of v.target.options)A.selected=_.has(A.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,g)}),i.addEventListener("input",g=>{var _;const m=c(!0),v=c(!1);e.setValue(t,{value:m}),g.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):i.addEventListener("input",function(g){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class M0 extends Lt{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Lt._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new oM({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${kw}${n}`).join(",")),this.container}}var Fc,Ug,Bg,jc,Oo,St,ar,$c,Id,Nd,Uc,or,qs,lr,Md,cr,Od,Do,Fo,nt,tg,O0,cE,uE,hE,dE,ng,sg,D0;class oM{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:a,contentsObj:o,richText:c,parent:d,rect:f,parentRect:g,open:m}){E(this,nt);E(this,Fc,k(this,nt,hE).bind(this));E(this,Ug,k(this,nt,D0).bind(this));E(this,Bg,k(this,nt,sg).bind(this));E(this,jc,k(this,nt,ng).bind(this));E(this,Oo,null);E(this,St,null);E(this,ar,null);E(this,$c,null);E(this,Id,null);E(this,Nd,null);E(this,Uc,null);E(this,or,!1);E(this,qs,null);E(this,lr,null);E(this,Md,null);E(this,cr,null);E(this,Od,null);E(this,Do,null);E(this,Fo,!1);var v;b(this,St,e),b(this,Od,i),b(this,ar,o),b(this,cr,c),b(this,Nd,d),b(this,Oo,t),b(this,Md,f),b(this,Uc,g),b(this,Id,n),b(this,$c,Pw.toDateObject(a)),this.trigger=n.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",u(this,jc)),_.addEventListener("mouseenter",u(this,Bg)),_.addEventListener("mouseleave",u(this,Ug)),_.classList.add("popupTriggerArea");for(const _ of n)(v=_.container)==null||v.addEventListener("keydown",u(this,Fc));u(this,St).hidden=!0,m&&k(this,nt,ng).call(this)}render(){if(u(this,qs))return;const e=b(this,qs,document.createElement("div"));if(e.className="popup",u(this,Oo)){const a=e.style.outlineColor=ve.makeHexColor(...u(this,Oo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:e.style.backgroundColor=ve.makeHexColor(...u(this,Oo).map(c=>Math.floor(.7*(255-c)+c)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=u(this,Od),e.append(t),u(this,$c)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,$c).valueOf()})),t.append(a)}const i=u(this,nt,tg);if(i)iE.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(u(this,ar));e.append(a)}u(this,St).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let a=0,o=i.length;a<o;++a){const c=i[a];n.append(document.createTextNode(c)),a<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;u(this,Do)||b(this,Do,{contentsObj:u(this,ar),richText:u(this,cr)}),e&&b(this,lr,null),t&&(b(this,cr,k(this,nt,uE).call(this,t)),b(this,ar,null)),(n=u(this,qs))==null||n.remove(),b(this,qs,null)}resetEdited(){var e;u(this,Do)&&({contentsObj:Cn(this,ar)._,richText:Cn(this,cr)._}=u(this,Do),b(this,Do,null),(e=u(this,qs))==null||e.remove(),b(this,qs,null),b(this,lr,null))}forceHide(){b(this,Fo,this.isVisible),u(this,Fo)&&(u(this,St).hidden=!0)}maybeShow(){u(this,Fo)&&(u(this,qs)||k(this,nt,sg).call(this),b(this,Fo,!1),u(this,St).hidden=!1)}get isVisible(){return u(this,St).hidden===!1}}Fc=new WeakMap,Ug=new WeakMap,Bg=new WeakMap,jc=new WeakMap,Oo=new WeakMap,St=new WeakMap,ar=new WeakMap,$c=new WeakMap,Id=new WeakMap,Nd=new WeakMap,Uc=new WeakMap,or=new WeakMap,qs=new WeakMap,lr=new WeakMap,Md=new WeakMap,cr=new WeakMap,Od=new WeakMap,Do=new WeakMap,Fo=new WeakMap,nt=new WeakSet,tg=function(){const e=u(this,cr),t=u(this,ar);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,cr).html||null},O0=function(){var e,t,n;return((n=(t=(e=u(this,nt,tg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},cE=function(){var e,t,n;return((n=(t=(e=u(this,nt,tg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},uE=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:u(this,nt,cE),fontSize:u(this,nt,O0)?`calc(${u(this,nt,O0)}px * var(--scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return n},hE=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,or))&&k(this,nt,ng).call(this)},dE=function(){if(u(this,lr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=u(this,Nd);let o=!!u(this,Uc),c=o?u(this,Uc):u(this,Md);for(const A of u(this,Id))if(!c||ve.intersect(A.data.rect,c)!==null){c=A.data.rect,o=!0;break}const d=ve.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),g=o?c[2]-c[0]+5:0,m=d[0]+g,v=d[1];b(this,lr,[100*(m-i)/t,100*(v-a)/n]);const{style:_}=u(this,St);_.left=`${u(this,lr)[0]}%`,_.top=`${u(this,lr)[1]}%`},ng=function(){b(this,or,!u(this,or)),u(this,or)?(k(this,nt,sg).call(this),u(this,St).addEventListener("click",u(this,jc)),u(this,St).addEventListener("keydown",u(this,Fc))):(k(this,nt,D0).call(this),u(this,St).removeEventListener("click",u(this,jc)),u(this,St).removeEventListener("keydown",u(this,Fc)))},sg=function(){u(this,qs)||this.render(),this.isVisible?u(this,or)&&u(this,St).classList.add("focused"):(k(this,nt,dE).call(this),u(this,St).hidden=!1,u(this,St).style.zIndex=parseInt(u(this,St).style.zIndex)+1e3)},D0=function(){u(this,St).classList.remove("focused"),!(u(this,or)||!this.isVisible)&&(u(this,St).hidden=!0,u(this,St).style.zIndex=parseInt(u(this,St).style.zIndex)-1e3)};class fE extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=De.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Dd;class lM extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Dd,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:i}=ka(t.rect),a=this.svgFactory.create(n,i,!0),o=b(this,Dd,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Dd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dd=new WeakMap;var Fd;class cM extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Fd,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:i}=ka(t.rect),a=this.svgFactory.create(n,i,!0),o=t.borderStyle.width,c=b(this,Fd,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",n-o),c.setAttribute("height",i-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Fd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fd=new WeakMap;var jd;class uM extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,jd,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:i}=ka(t.rect),a=this.svgFactory.create(n,i,!0),o=t.borderStyle.width,c=b(this,jd,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",n/2),c.setAttribute("cy",i/2),c.setAttribute("rx",n/2-o/2),c.setAttribute("ry",i/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,jd)}addHighlightArea(){this.container.classList.add("highlightArea")}}jd=new WeakMap;var $d;class pE extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,$d,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:a}}=this;if(!n)return this.container;const{width:o,height:c}=ka(t),d=this.svgFactory.create(o,c,!0);let f=[];for(let m=0,v=n.length;m<v;m+=2){const _=n[m]-t[0],A=t[3]-n[m+1];f.push(`${_},${A}`)}f=f.join(" ");const g=b(this,$d,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",f),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,$d)}addHighlightArea(){this.container.classList.add("highlightArea")}}$d=new WeakMap;class hM extends pE{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class dM extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ud,jo,Bd,F0;class Mw extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Bd);E(this,Ud,null);E(this,jo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?De.HIGHLIGHT:De.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:c,width:d,height:f}=k(this,Bd,F0).call(this,n,t),g=this.svgFactory.create(d,f,!0),m=b(this,Ud,this.svgFactory.createElement("svg:g"));g.append(m),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",c);for(let v=0,_=i.length;v<_;v++){const A=this.svgFactory.createElement(this.svgElementName);u(this,jo).push(A),A.setAttribute("points",i[v].join(",")),m.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:a}=t,o=u(this,Ud);if(n>=0&&o.setAttribute("stroke-width",n||1),i)for(let c=0,d=u(this,jo).length;c<d;c++)u(this,jo)[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:d,height:f}=k(this,Bd,F0).call(this,this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return u(this,jo)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ud=new WeakMap,jo=new WeakMap,Bd=new WeakSet,F0=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class gE extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=De.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class fM extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class pM extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class gM extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class mE extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=De.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var zd,Hd,j0;class mM extends Lt{constructor(t){var i;super(t,{isRenderable:!0});E(this,Hd);E(this,zd,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",k(this,Hd,j0).bind(this)),b(this,zd,i);const{isMac:a}=Nn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&k(this,Hd,j0).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return u(this,zd)}addHighlightArea(){this.container.classList.add("highlightArea")}}zd=new WeakMap,Hd=new WeakSet,j0=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Gd,$o,Uo,Vd,cl,yE,$0;class yM{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:o,structTreeLayer:c}){E(this,cl);E(this,Gd,null);E(this,$o,null);E(this,Uo,new Map);E(this,Vd,null);this.div=e,b(this,Gd,t),b(this,$o,n),b(this,Vd,c||null),this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return u(this,Uo).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;al(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Nw,annotationStorage:e.annotationStorage||new Lw,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const d=c.annotationType===$t.POPUP;if(d){const m=i.get(c.id);if(!m)continue;a.elements=m}else{const{width:m,height:v}=ka(c.rect);if(m<=0||v<=0)continue}a.data=c;const f=eM.create(a);if(!f.isRenderable)continue;if(!d&&c.popupRef){const m=i.get(c.popupRef);m?m.push(f):i.set(c.popupRef,[f])}const g=f.render();c.hidden&&(g.style.visibility="hidden"),await k(this,cl,yE).call(this,g,c.id),f._isEditable&&(u(this,Uo).set(f.data.id,f),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(f))}k(this,cl,$0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,al(t,{rotation:e.rotation}),k(this,cl,$0).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Uo).values())}getEditableAnnotation(e){return u(this,Uo).get(e)}}Gd=new WeakMap,$o=new WeakMap,Uo=new WeakMap,Vd=new WeakMap,cl=new WeakSet,yE=async function(e,t){var o,c;const n=e.firstChild||e,i=n.id=`${kw}${t}`,a=await((o=u(this,Vd))==null?void 0:o.getAriaAttributes(i));if(a)for(const[d,f]of a)n.setAttribute(d,f);this.div.append(e),(c=u(this,Gd))==null||c.moveElementInDOM(this.div,e,n,!1)},$0=function(){if(!u(this,$o))return;const e=this.div;for(const[t,n]of u(this,$o)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):i.append(n)}u(this,$o).clear()};const $p=/\r\n?|\n/g;var Ks,rs,Wd,Bo,as,Dt,vE,wE,_E,ig,wr,rg,ag,bE,B0,AE;const ot=class ot extends _t{constructor(t){super({...t,name:"freeTextEditor"});E(this,Dt);E(this,Ks);E(this,rs,"");E(this,Wd,`${this.id}-editor`);E(this,Bo,null);E(this,as);b(this,Ks,t.color||ot._defaultColor||_t._defaultLineColor),b(this,as,t.fontSize||ot._defaultFontSize)}static get _keyboardManager(){const t=ot.prototype,n=o=>o.isEmpty(),i=ol.TRANSLATE_SMALL,a=ol.TRANSLATE_BIG;return ze(this,"_keyboardManager",new wf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(t,n){_t.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ve.FREETEXT_SIZE:ot._defaultFontSize=n;break;case Ve.FREETEXT_COLOR:ot._defaultColor=n;break}}updateParams(t,n){switch(t){case Ve.FREETEXT_SIZE:k(this,Dt,vE).call(this,n);break;case Ve.FREETEXT_COLOR:k(this,Dt,wE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ve.FREETEXT_SIZE,ot._defaultFontSize],[Ve.FREETEXT_COLOR,ot._defaultColor||_t._defaultLineColor]]}get propertiesToUpdate(){return[[Ve.FREETEXT_SIZE,u(this,as)],[Ve.FREETEXT_COLOR,u(this,Ks)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ot._internalPadding*t,-(ot._internalPadding+u(this,as))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(De.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,Bo,new AbortController);const t=this._uiManager.combinedSignal(u(this,Bo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Wd)),this._isDraggable=!0,(t=u(this,Bo))==null||t.abort(),b(this,Bo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,rs),n=b(this,rs,k(this,Dt,_E).call(this).trimEnd());if(t===n)return;const i=a=>{if(b(this,rs,a),!a){this.remove();return}k(this,Dt,ag).call(this),this._uiManager.rebuild(this),k(this,Dt,ig).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),k(this,Dt,ig).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ot._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Wd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${u(this,as)}px * var(--scale-factor))`,i.color=u(this,Ks),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bg(this,this.div,["dblclick","keydown"]),this.width){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[g,m]=this.pageDimensions,[v,_]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=t+(c[0]-v)/g,S=n+this.height-(c[1]-_)/m;break;case 90:A=t+(c[0]-v)/g,S=n-(c[1]-_)/m,[d,f]=[f,-d];break;case 180:A=t-this.width+(c[0]-v)/g,S=n-(c[1]-_)/m,[d,f]=[-d,-f];break;case 270:A=t+(c[0]-v-this.height*m)/g,S=n+(c[1]-_-this.width*g)/m,[d,f]=[-f,d];break}this.setAt(A*a,S*o,d,f)}else this.setAt(t*a,n*o,this.width*a,this.height*o);k(this,Dt,ag).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var A,S,C;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=k(A=ot,wr,B0).call(A,n.getData("text")||"").replaceAll($p,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:d,startOffset:f}=c,g=[],m=[];if(d.nodeType===Node.TEXT_NODE){const T=d.parentElement;if(m.push(d.nodeValue.slice(f).replaceAll($p,"")),T!==this.editorDiv){let I=g;for(const O of this.editorDiv.childNodes){if(O===T){I=m;continue}I.push(k(S=ot,wr,rg).call(S,O))}}g.push(d.nodeValue.slice(0,f).replaceAll($p,""))}else if(d===this.editorDiv){let T=g,I=0;for(const O of this.editorDiv.childNodes)I++===f&&(T=m),T.push(k(C=ot,wr,rg).call(C,O))}b(this,rs,`${g.join(`
`)}${a}${m.join(`
`)}`),k(this,Dt,ag).call(this);const v=new Range;let _=g.reduce((T,I)=>T+I.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const I=T.nodeValue.length;if(_<=I){v.setStart(T,_),v.setEnd(T,_);break}_-=I}o.removeAllRanges(),o.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,i){var c;let a=null;if(t instanceof fE){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:g,rotation:m,id:v,popupRef:_},textContent:A,textPosition:S,parent:{page:{pageNumber:C}}}=t;if(!A||A.length===0)return null;a=t={annotationType:De.FREETEXT,color:Array.from(f),fontSize:d,value:A.join(`
`),position:S,pageIndex:C-1,rect:g.slice(0),rotation:m,id:v,deleted:!1,popupRef:_}}const o=await super.deserialize(t,n,i);return b(o,as,t.fontSize),b(o,Ks,ve.makeHexColor(...t.color)),b(o,rs,k(c=ot,wr,B0).call(c,t.value)),o.annotationElementId=t.id||null,o._initialData=a,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ot._internalPadding*this.parentScale,i=this.getRect(n,n),a=_t._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,Ks)),o={annotationType:De.FREETEXT,color:a,fontSize:u(this,as),value:k(this,Dt,bE).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!k(this,Dt,AE).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${u(this,as)}px * var(--scale-factor))`,i.color=u(this,Ks),n.replaceChildren();for(const o of u(this,rs).split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),n.append(c)}const a=ot._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:u(this,rs)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ks=new WeakMap,rs=new WeakMap,Wd=new WeakMap,Bo=new WeakMap,as=new WeakMap,Dt=new WeakSet,vE=function(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-u(this,as))*this.parentScale),b(this,as,a),k(this,Dt,ig).call(this)},i=u(this,as);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ve.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},wE=function(t){const n=a=>{b(this,Ks,this.editorDiv.style.color=a)},i=u(this,Ks);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ve.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_E=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(k(i=ot,wr,rg).call(i,a)),n=a);return t.join(`
`)},ig=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,c=o.style.display,d=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},wr=new WeakSet,rg=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll($p,"")},ag=function(){if(this.editorDiv.replaceChildren(),!!u(this,rs))for(const t of u(this,rs).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},bE=function(){return u(this,rs).replaceAll(" "," ")},B0=function(t){return t.replaceAll(" "," ")},AE=function(t){const{value:n,fontSize:i,color:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((c,d)=>c!==a[d])||t.pageIndex!==o},E(ot,wr),ke(ot,"_freeTextDefaultContent",""),ke(ot,"_internalPadding",0),ke(ot,"_defaultColor",null),ke(ot,"_defaultFontSize",10),ke(ot,"_type","freetext"),ke(ot,"_editorType",De.FREETEXT);let U0=ot;class he{toSVGPath(){it("Abstract method `toSVGPath` must be implemented.")}get box(){it("Abstract getter `box` must be implemented.")}serialize(e,t){it("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,a,o){o||(o=new Float32Array(e.length));for(let c=0,d=e.length;c<d;c+=2)o[c]=t+e[c]*i,o[c+1]=n+e[c+1]*a;return o}static _rescaleAndSwap(e,t,n,i,a,o){o||(o=new Float32Array(e.length));for(let c=0,d=e.length;c<d;c+=2)o[c]=t+e[c+1]*i,o[c+1]=n+e[c]*a;return o}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)i[a]=t+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,a){switch(a){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,a,o){return[(e+5*n)/6,(t+5*i)/6,(5*n+a)/6,(5*i+o)/6,(n+a)/2,(i+o)/2]}}ke(he,"PRECISION",1e-4);var os,Xs,Bc,zc,xi,Be,zo,Ho,qd,Kd,Hc,Gc,fa,Xd,zg,Hg,Ht,bh,SE,xE,EE,kE,CE,TE;const Vi=class Vi{constructor({x:e,y:t},n,i,a,o,c=0){E(this,Ht);E(this,os);E(this,Xs,[]);E(this,Bc);E(this,zc);E(this,xi,[]);E(this,Be,new Float32Array(18));E(this,zo);E(this,Ho);E(this,qd);E(this,Kd);E(this,Hc);E(this,Gc);E(this,fa,[]);b(this,os,n),b(this,Gc,a*i),b(this,zc,o),u(this,Be).set([NaN,NaN,NaN,NaN,e,t],6),b(this,Bc,c),b(this,Kd,u(Vi,Xd)*i),b(this,qd,u(Vi,Hg)*i),b(this,Hc,i),u(this,fa).push(e,t)}isEmpty(){return isNaN(u(this,Be)[8])}add({x:e,y:t}){var ie;b(this,zo,e),b(this,Ho,t);const[n,i,a,o]=u(this,os);let[c,d,f,g]=u(this,Be).subarray(8,12);const m=e-f,v=t-g,_=Math.hypot(m,v);if(_<u(this,qd))return!1;const A=_-u(this,Kd),S=A/_,C=S*m,T=S*v;let I=c,O=d;c=f,d=g,f+=C,g+=T,(ie=u(this,fa))==null||ie.push(e,t);const N=-T/A,j=C/A,G=N*u(this,Gc),V=j*u(this,Gc);return u(this,Be).set(u(this,Be).subarray(2,8),0),u(this,Be).set([f+G,g+V],4),u(this,Be).set(u(this,Be).subarray(14,18),12),u(this,Be).set([f-G,g-V],16),isNaN(u(this,Be)[6])?(u(this,xi).length===0&&(u(this,Be).set([c+G,d+V],2),u(this,xi).push(NaN,NaN,NaN,NaN,(c+G-n)/a,(d+V-i)/o),u(this,Be).set([c-G,d-V],14),u(this,Xs).push(NaN,NaN,NaN,NaN,(c-G-n)/a,(d-V-i)/o)),u(this,Be).set([I,O,c,d,f,g],6),!this.isEmpty()):(u(this,Be).set([I,O,c,d,f,g],6),Math.abs(Math.atan2(O-d,I-c)-Math.atan2(T,C))<Math.PI/2?([c,d,f,g]=u(this,Be).subarray(2,6),u(this,xi).push(NaN,NaN,NaN,NaN,((c+f)/2-n)/a,((d+g)/2-i)/o),[c,d,I,O]=u(this,Be).subarray(14,18),u(this,Xs).push(NaN,NaN,NaN,NaN,((I+c)/2-n)/a,((O+d)/2-i)/o),!0):([I,O,c,d,f,g]=u(this,Be).subarray(0,6),u(this,xi).push(((I+5*c)/6-n)/a,((O+5*d)/6-i)/o,((5*c+f)/6-n)/a,((5*d+g)/6-i)/o,((c+f)/2-n)/a,((d+g)/2-i)/o),[f,g,c,d,I,O]=u(this,Be).subarray(12,18),u(this,Xs).push(((I+5*c)/6-n)/a,((O+5*d)/6-i)/o,((5*c+f)/6-n)/a,((5*d+g)/6-i)/o,((c+f)/2-n)/a,((d+g)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,xi),t=u(this,Xs);if(isNaN(u(this,Be)[6])&&!this.isEmpty())return k(this,Ht,SE).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);k(this,Ht,EE).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return k(this,Ht,xE).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,a,o){return new PE(e,t,n,i,a,o)}getOutlines(){var m;const e=u(this,xi),t=u(this,Xs),n=u(this,Be),[i,a,o,c]=u(this,os),d=new Float32Array((((m=u(this,fa))==null?void 0:m.length)??0)+2);for(let v=0,_=d.length-2;v<_;v+=2)d[v]=(u(this,fa)[v]-i)/o,d[v+1]=(u(this,fa)[v+1]-a)/c;if(d[d.length-2]=(u(this,zo)-i)/o,d[d.length-1]=(u(this,Ho)-a)/c,isNaN(n[6])&&!this.isEmpty())return k(this,Ht,kE).call(this,d);const f=new Float32Array(u(this,xi).length+24+u(this,Xs).length);let g=e.length;for(let v=0;v<g;v+=2){if(isNaN(e[v])){f[v]=f[v+1]=NaN;continue}f[v]=e[v],f[v+1]=e[v+1]}g=k(this,Ht,TE).call(this,f,g);for(let v=t.length-6;v>=6;v-=6)for(let _=0;_<6;_+=2){if(isNaN(t[v+_])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=t[v+_],f[g+1]=t[v+_+1],g+=2}return k(this,Ht,CE).call(this,f,g),this.newFreeDrawOutline(f,d,u(this,os),u(this,Hc),u(this,Bc),u(this,zc))}};os=new WeakMap,Xs=new WeakMap,Bc=new WeakMap,zc=new WeakMap,xi=new WeakMap,Be=new WeakMap,zo=new WeakMap,Ho=new WeakMap,qd=new WeakMap,Kd=new WeakMap,Hc=new WeakMap,Gc=new WeakMap,fa=new WeakMap,Xd=new WeakMap,zg=new WeakMap,Hg=new WeakMap,Ht=new WeakSet,bh=function(){const e=u(this,Be).subarray(4,6),t=u(this,Be).subarray(16,18),[n,i,a,o]=u(this,os);return[(u(this,zo)+(e[0]-t[0])/2-n)/a,(u(this,Ho)+(e[1]-t[1])/2-i)/o,(u(this,zo)+(t[0]-e[0])/2-n)/a,(u(this,Ho)+(t[1]-e[1])/2-i)/o]},SE=function(){const[e,t,n,i]=u(this,os),[a,o,c,d]=k(this,Ht,bh).call(this);return`M${(u(this,Be)[2]-e)/n} ${(u(this,Be)[3]-t)/i} L${(u(this,Be)[4]-e)/n} ${(u(this,Be)[5]-t)/i} L${a} ${o} L${c} ${d} L${(u(this,Be)[16]-e)/n} ${(u(this,Be)[17]-t)/i} L${(u(this,Be)[14]-e)/n} ${(u(this,Be)[15]-t)/i} Z`},xE=function(e){const t=u(this,Xs);e.push(`L${t[4]} ${t[5]} Z`)},EE=function(e){const[t,n,i,a]=u(this,os),o=u(this,Be).subarray(4,6),c=u(this,Be).subarray(16,18),[d,f,g,m]=k(this,Ht,bh).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-n)/a} L${d} ${f} L${g} ${m} L${(c[0]-t)/i} ${(c[1]-n)/a}`)},kE=function(e){const t=u(this,Be),[n,i,a,o]=u(this,os),[c,d,f,g]=k(this,Ht,bh).call(this),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/o,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/o],0),this.newFreeDrawOutline(m,e,u(this,os),u(this,Hc),u(this,Bc),u(this,zc))},CE=function(e,t){const n=u(this,Xs);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},TE=function(e,t){const n=u(this,Be).subarray(4,6),i=u(this,Be).subarray(16,18),[a,o,c,d]=u(this,os),[f,g,m,v]=k(this,Ht,bh).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-o)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-o)/d],t),t+=24},E(Vi,Xd,8),E(Vi,zg,2),E(Vi,Hg,u(Vi,Xd)+u(Vi,zg));let xg=Vi;var Vc,Go,ur,Yd,ls,Jd,Pt,Gg,RE;class PE extends he{constructor(t,n,i,a,o,c){super();E(this,Gg);E(this,Vc);E(this,Go,new Float32Array(4));E(this,ur);E(this,Yd);E(this,ls);E(this,Jd);E(this,Pt);b(this,Pt,t),b(this,ls,n),b(this,Vc,i),b(this,Jd,a),b(this,ur,o),b(this,Yd,c),this.lastPoint=[NaN,NaN],k(this,Gg,RE).call(this,c);const[d,f,g,m]=u(this,Go);for(let v=0,_=t.length;v<_;v+=2)t[v]=(t[v]-d)/g,t[v+1]=(t[v+1]-f)/m;for(let v=0,_=n.length;v<_;v+=2)n[v]=(n[v]-d)/g,n[v+1]=(n[v+1]-f)/m}toSVGPath(){const t=[`M${u(this,Pt)[4]} ${u(this,Pt)[5]}`];for(let n=6,i=u(this,Pt).length;n<i;n+=6){if(isNaN(u(this,Pt)[n])){t.push(`L${u(this,Pt)[n+4]} ${u(this,Pt)[n+5]}`);continue}t.push(`C${u(this,Pt)[n]} ${u(this,Pt)[n+1]} ${u(this,Pt)[n+2]} ${u(this,Pt)[n+3]} ${u(this,Pt)[n+4]} ${u(this,Pt)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,a],o){const c=i-t,d=a-n;let f,g;switch(o){case 0:f=he._rescale(u(this,Pt),t,a,c,-d),g=he._rescale(u(this,ls),t,a,c,-d);break;case 90:f=he._rescaleAndSwap(u(this,Pt),t,n,c,d),g=he._rescaleAndSwap(u(this,ls),t,n,c,d);break;case 180:f=he._rescale(u(this,Pt),i,n,-c,d),g=he._rescale(u(this,ls),i,n,-c,d);break;case 270:f=he._rescaleAndSwap(u(this,Pt),i,a,-c,-d),g=he._rescaleAndSwap(u(this,ls),i,a,-c,-d);break}return{outline:Array.from(f),points:[Array.from(g)]}}get box(){return u(this,Go)}newOutliner(t,n,i,a,o,c=0){return new xg(t,n,i,a,o,c)}getNewOutline(t,n){const[i,a,o,c]=u(this,Go),[d,f,g,m]=u(this,Vc),v=o*g,_=c*m,A=i*g+d,S=a*m+f,C=this.newOutliner({x:u(this,ls)[0]*v+A,y:u(this,ls)[1]*_+S},u(this,Vc),u(this,Jd),t,u(this,Yd),n??u(this,ur));for(let T=2;T<u(this,ls).length;T+=2)C.add({x:u(this,ls)[T]*v+A,y:u(this,ls)[T+1]*_+S});return C.getOutlines()}}Vc=new WeakMap,Go=new WeakMap,ur=new WeakMap,Yd=new WeakMap,ls=new WeakMap,Jd=new WeakMap,Pt=new WeakMap,Gg=new WeakSet,RE=function(t){const n=u(this,Pt);let i=n[4],a=n[5],o=i,c=a,d=i,f=a,g=i,m=a;const v=t?Math.max:Math.min;for(let A=6,S=n.length;A<S;A+=6){if(isNaN(n[A]))o=Math.min(o,n[A+4]),c=Math.min(c,n[A+5]),d=Math.max(d,n[A+4]),f=Math.max(f,n[A+5]),m<n[A+5]?(g=n[A+4],m=n[A+5]):m===n[A+5]&&(g=v(g,n[A+4]));else{const C=ve.bezierBoundingBox(i,a,...n.slice(A,A+6));o=Math.min(o,C[0]),c=Math.min(c,C[1]),d=Math.max(d,C[2]),f=Math.max(f,C[3]),m<C[3]?(g=C[2],m=C[3]):m===C[3]&&(g=v(g,C[2]))}i=n[A+4],a=n[A+5]}const _=u(this,Go);_[0]=o-u(this,ur),_[1]=c-u(this,ur),_[2]=d-o+2*u(this,ur),_[3]=f-c+2*u(this,ur),this.lastPoint=[g,m]};var Qd,Zd,pa,Ys,On,LE,og,IE,NE,H0;class z0{constructor(e,t=0,n=0,i=!0){E(this,On);E(this,Qd);E(this,Zd);E(this,pa,[]);E(this,Ys,[]);let a=1/0,o=-1/0,c=1/0,d=-1/0;const f=10**-4;for(const{x:C,y:T,width:I,height:O}of e){const N=Math.floor((C-t)/f)*f,j=Math.ceil((C+I+t)/f)*f,G=Math.floor((T-t)/f)*f,V=Math.ceil((T+O+t)/f)*f,Z=[N,G,V,!0],ie=[j,G,V,!1];u(this,pa).push(Z,ie),a=Math.min(a,N),o=Math.max(o,j),c=Math.min(c,G),d=Math.max(d,V)}const g=o-a+2*n,m=d-c+2*n,v=a-n,_=c-n,A=u(this,pa).at(i?-1:-2),S=[A[0],A[2]];for(const C of u(this,pa)){const[T,I,O]=C;C[0]=(T-v)/g,C[1]=(I-_)/m,C[2]=(O-_)/m}b(this,Qd,new Float32Array([v,_,g,m])),b(this,Zd,S)}getOutlines(){u(this,pa).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,pa))t[3]?(e.push(...k(this,On,H0).call(this,t)),k(this,On,IE).call(this,t)):(k(this,On,NE).call(this,t),e.push(...k(this,On,H0).call(this,t)));return k(this,On,LE).call(this,e)}}Qd=new WeakMap,Zd=new WeakMap,pa=new WeakMap,Ys=new WeakMap,On=new WeakSet,LE=function(e){const t=[],n=new Set;for(const o of e){const[c,d,f]=o;t.push([c,d,o],[c,f,o])}t.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=t.length;o<c;o+=2){const d=t[o][2],f=t[o+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const i=[];let a;for(;n.size>0;){const o=n.values().next().value;let[c,d,f,g,m]=o;n.delete(o);let v=c,_=d;for(a=[c,f],i.push(a);;){let A;if(n.has(g))A=g;else if(n.has(m))A=m;else break;n.delete(A),[c,d,f,g,m]=A,v!==c&&(a.push(v,_,c,_===d?d:f),v=c),_=_===d?f:d}a.push(v,_)}return new vM(i,u(this,Qd),u(this,Zd))},og=function(e){const t=u(this,Ys);let n=0,i=t.length-1;for(;n<=i;){const a=n+i>>1,o=t[a][0];if(o===e)return a;o<e?n=a+1:i=a-1}return i+1},IE=function([,e,t]){const n=k(this,On,og).call(this,e);u(this,Ys).splice(n,0,[e,t])},NE=function([,e,t]){const n=k(this,On,og).call(this,e);for(let i=n;i<u(this,Ys).length;i++){const[a,o]=u(this,Ys)[i];if(a!==e)break;if(a===e&&o===t){u(this,Ys).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,o]=u(this,Ys)[i];if(a!==e)break;if(a===e&&o===t){u(this,Ys).splice(i,1);return}}},H0=function(e){const[t,n,i]=e,a=[[t,n,i]],o=k(this,On,og).call(this,i);for(let c=0;c<o;c++){const[d,f]=u(this,Ys)[c];for(let g=0,m=a.length;g<m;g++){const[,v,_]=a[g];if(!(f<=v||_<=d)){if(v>=d){if(_>f)a[g][1]=f;else{if(m===1)return[];a.splice(g,1),g--,m--}continue}a[g][2]=d,_>f&&a.push([t,f,_])}}}return a};var ef,Wc;class vM extends he{constructor(t,n,i){super();E(this,ef);E(this,Wc);b(this,Wc,t),b(this,ef,n),this.lastPoint=i}toSVGPath(){const t=[];for(const n of u(this,Wc)){let[i,a]=n;t.push(`M${i} ${a}`);for(let o=2;o<n.length;o+=2){const c=n[o],d=n[o+1];c===i?(t.push(`V${d}`),a=d):d===a&&(t.push(`H${c}`),i=c)}t.push("Z")}return t.join(" ")}serialize([t,n,i,a],o){const c=[],d=i-t,f=a-n;for(const g of u(this,Wc)){const m=new Array(g.length);for(let v=0;v<g.length;v+=2)m[v]=t+g[v]*d,m[v+1]=a-g[v+1]*f;c.push(m)}return c}get box(){return u(this,ef)}get classNamesForOutlining(){return["highlightOutline"]}}ef=new WeakMap,Wc=new WeakMap;class G0 extends xg{newFreeDrawOutline(e,t,n,i,a,o){return new wM(e,t,n,i,a,o)}}class wM extends PE{newOutliner(e,t,n,i,a,o=0){return new G0(e,t,n,i,a,o)}}var Js,Vo,qc,zt,tf,Kc,nf,sf,ga,Qs,Xc,rf,tt,V0,W0,q0,Xa,ME,Gr;const Vn=class Vn{constructor({editor:e=null,uiManager:t=null}){E(this,tt);E(this,Js,null);E(this,Vo,null);E(this,qc);E(this,zt,null);E(this,tf,!1);E(this,Kc,!1);E(this,nf,null);E(this,sf);E(this,ga,null);E(this,Qs,null);E(this,Xc);var n;e?(b(this,Kc,!1),b(this,Xc,Ve.HIGHLIGHT_COLOR),b(this,nf,e)):(b(this,Kc,!0),b(this,Xc,Ve.HIGHLIGHT_DEFAULT_COLOR)),b(this,Qs,(e==null?void 0:e._uiManager)||t),b(this,sf,u(this,Qs)._eventBus),b(this,qc,(e==null?void 0:e.color)||((n=u(this,Qs))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),u(Vn,rf)||b(Vn,rf,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ze(this,"_keyboardManager",new wf([[["Escape","mac+Escape"],Vn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Vn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Vn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Vn.prototype._moveToPrevious],[["Home","mac+Home"],Vn.prototype._moveToBeginning],[["End","mac+End"],Vn.prototype._moveToEnd]]))}renderButton(){const e=b(this,Js,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,Qs)._signal;e.addEventListener("click",k(this,tt,Xa).bind(this),{signal:t}),e.addEventListener("keydown",k(this,tt,q0).bind(this),{signal:t});const n=b(this,Vo,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=u(this,qc),e.append(n),e}renderMainDropdown(){const e=b(this,zt,k(this,tt,V0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,Js)){k(this,tt,Xa).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,tt,W0).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,tt,Gr)){k(this,tt,Xa).call(this,e);return}if(e.target===u(this,Js)){(t=u(this,zt).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,zt))==null?void 0:t.firstChild)||e.target===u(this,Js)){u(this,tt,Gr)&&this._hideDropdownFromKeyboard();return}u(this,tt,Gr)||k(this,tt,Xa).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,tt,Gr)){k(this,tt,Xa).call(this,e);return}(t=u(this,zt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,tt,Gr)){k(this,tt,Xa).call(this,e);return}(t=u(this,zt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,zt))==null||e.classList.add("hidden"),(t=u(this,ga))==null||t.abort(),b(this,ga,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Kc)){if(!u(this,tt,Gr)){(e=u(this,nf))==null||e.unselect();return}this.hideDropdown(),u(this,Js).focus({preventScroll:!0,focusVisible:u(this,tf)})}}updateColor(e){if(u(this,Vo)&&(u(this,Vo).style.backgroundColor=e),!u(this,zt))return;const t=u(this,Qs).highlightColors.values();for(const n of u(this,zt).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,Js))==null||e.remove(),b(this,Js,null),b(this,Vo,null),(t=u(this,zt))==null||t.remove(),b(this,zt,null)}};Js=new WeakMap,Vo=new WeakMap,qc=new WeakMap,zt=new WeakMap,tf=new WeakMap,Kc=new WeakMap,nf=new WeakMap,sf=new WeakMap,ga=new WeakMap,Qs=new WeakMap,Xc=new WeakMap,rf=new WeakMap,tt=new WeakSet,V0=function(){const e=document.createElement("div"),t=u(this,Qs)._signal;e.addEventListener("contextmenu",si,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of u(this,Qs).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",u(Vn,rf)[n]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=i,a.setAttribute("aria-selected",i===u(this,qc)),a.addEventListener("click",k(this,tt,W0).bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",k(this,tt,q0).bind(this),{signal:t}),e},W0=function(e,t){t.stopPropagation(),u(this,sf).dispatch("switchannotationeditorparams",{source:this,type:u(this,Xc),value:e})},q0=function(e){Vn._keyboardManager.exec(this,e)},Xa=function(e){if(u(this,tt,Gr)){this.hideDropdown();return}if(b(this,tf,e.detail===0),u(this,ga)||(b(this,ga,new AbortController),window.addEventListener("pointerdown",k(this,tt,ME).bind(this),{signal:u(this,Qs).combinedSignal(u(this,ga))})),u(this,zt)){u(this,zt).classList.remove("hidden");return}const t=b(this,zt,k(this,tt,V0).call(this));u(this,Js).append(t)},ME=function(e){var t;(t=u(this,zt))!=null&&t.contains(e.target)||this.hideDropdown()},Gr=function(){return u(this,zt)&&!u(this,zt).classList.contains("hidden")},E(Vn,rf,null);let Eg=Vn;var Yc,af,hr,Wo,Jc,Kn,of,lf,qo,Cs,cs,an,Qc,dr,_n,Zc,Ts,cf,Me,K0,lg,OE,DE,FE,X0,Ya,Is,Zl,jE,cg,Ah,$E,UE,BE,zE,HE;const Je=class Je extends _t{constructor(t){super({...t,name:"highlightEditor"});E(this,Me);E(this,Yc,null);E(this,af,0);E(this,hr);E(this,Wo,null);E(this,Jc,null);E(this,Kn,null);E(this,of,null);E(this,lf,0);E(this,qo,null);E(this,Cs,null);E(this,cs,null);E(this,an,!1);E(this,Qc,null);E(this,dr);E(this,_n,null);E(this,Zc,"");E(this,Ts);E(this,cf,"");this.color=t.color||Je._defaultColor,b(this,Ts,t.thickness||Je._defaultThickness),b(this,dr,t.opacity||Je._defaultOpacity),b(this,hr,t.boxes||null),b(this,cf,t.methodOfCreation||""),b(this,Zc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(b(this,an,!0),k(this,Me,lg).call(this,t),k(this,Me,Ya).call(this)):u(this,hr)&&(b(this,Yc,t.anchorNode),b(this,af,t.anchorOffset),b(this,of,t.focusNode),b(this,lf,t.focusOffset),k(this,Me,K0).call(this),k(this,Me,Ya).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Je.prototype;return ze(this,"_keyboardManager",new wf([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,an)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,Ts),methodOfCreation:u(this,cf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;_t.initialize(t,n),Je._defaultColor||(Je._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Ve.HIGHLIGHT_DEFAULT_COLOR:Je._defaultColor=n;break;case Ve.HIGHLIGHT_THICKNESS:Je._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,Qc)}updateParams(t,n){switch(t){case Ve.HIGHLIGHT_COLOR:k(this,Me,OE).call(this,n);break;case Ve.HIGHLIGHT_THICKNESS:k(this,Me,DE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ve.HIGHLIGHT_DEFAULT_COLOR,Je._defaultColor],[Ve.HIGHLIGHT_THICKNESS,Je._defaultThickness]]}get propertiesToUpdate(){return[[Ve.HIGHLIGHT_COLOR,this.color||Je._defaultColor],[Ve.HIGHLIGHT_THICKNESS,u(this,Ts)||Je._defaultThickness],[Ve.HIGHLIGHT_FREE,u(this,an)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(b(this,Jc,new Eg({editor:this})),t.addColorPicker(u(this,Jc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,Me,Ah).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,k(this,Me,Ah).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,Me,X0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Me,Ya).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?k(this,Me,X0).call(this):t&&(k(this,Me,Ya).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var a,o,c;const{drawLayer:n}=this.parent;let i;u(this,an)?(t=(t-this.rotation+360)%360,i=k(a=Je,Is,Zl).call(a,u(this,Cs).box,t)):i=k(o=Je,Is,Zl).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(u(this,cs),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(u(this,_n),{bbox:k(c=Je,Is,Zl).call(c,u(this,Kn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,Zc)&&(t.setAttribute("aria-label",u(this,Zc)),t.setAttribute("role","mark")),u(this,an)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,Me,jE).bind(this),{signal:this._uiManager._signal});const n=b(this,qo,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Wo);const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),bg(this,u(this,qo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,_n),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,_n),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,Me,cg).call(this,!0);break;case 1:case 3:k(this,Me,cg).call(this,!1);break}}select(){var t;super.select(),u(this,_n)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,_n),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,_n)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,_n),{rootClass:{selected:!1}}),u(this,an)||k(this,Me,cg).call(this,!1))}get _mustFixPosition(){return!u(this,an)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,cs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,_n),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:a,y:o}){const{x:c,y:d,width:f,height:g}=i.getBoundingClientRect(),m=new AbortController,v=t.combinedSignal(m),_=A=>{m.abort(),k(this,Is,zE).call(this,t,A)};window.addEventListener("blur",_,{signal:v}),window.addEventListener("pointerup",_,{signal:v}),window.addEventListener("pointerdown",gs,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",si,{signal:v}),i.addEventListener("pointermove",k(this,Is,BE).bind(this,t),{signal:v}),this._freeHighlight=new G0({x:a,y:o},[c,d,f,g],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var S,C,T,I;let a=null;if(t instanceof gE){const{data:{quadPoints:O,rect:N,rotation:j,id:G,color:V,opacity:Z,popupRef:ie},parent:{page:{pageNumber:we}}}=t;a=t={annotationType:De.HIGHLIGHT,color:Array.from(V),opacity:Z,quadPoints:O,boxes:null,pageIndex:we-1,rect:N.slice(0),rotation:j,id:G,deleted:!1,popupRef:ie}}else if(t instanceof Mw){const{data:{inkLists:O,rect:N,rotation:j,id:G,color:V,borderStyle:{rawWidth:Z},popupRef:ie},parent:{page:{pageNumber:we}}}=t;a=t={annotationType:De.HIGHLIGHT,color:Array.from(V),thickness:Z,inkLists:O,boxes:null,pageIndex:we-1,rect:N.slice(0),rotation:j,id:G,deleted:!1,popupRef:ie}}const{color:o,quadPoints:c,inkLists:d,opacity:f}=t,g=await super.deserialize(t,n,i);g.color=ve.makeHexColor(...o),b(g,dr,f||1),d&&b(g,Ts,t.thickness),g.annotationElementId=t.id||null,g._initialData=a;const[m,v]=g.pageDimensions,[_,A]=g.pageTranslation;if(c){const O=b(g,hr,[]);for(let N=0;N<c.length;N+=8)O.push({x:(c[N]-_)/m,y:1-(c[N+1]-A)/v,width:(c[N+2]-c[N])/m,height:(c[N+1]-c[N+5])/v});k(S=g,Me,K0).call(S),k(C=g,Me,Ya).call(C),g.rotate(g.rotation)}else if(d){b(g,an,!0);const O=d[0],N={x:O[0]-_,y:v-(O[1]-A)},j=new G0(N,[0,0,m,v],1,u(g,Ts)/2,!0,.001);for(let Z=0,ie=O.length;Z<ie;Z+=2)N.x=O[Z]-_,N.y=v-(O[Z+1]-A),j.add(N);const{id:G,clipPathId:V}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:j.toSVGPath()}},!0,!0);k(T=g,Me,lg).call(T,{highlightOutlines:j.getOutlines(),highlightId:G,clipPathId:V}),k(I=g,Me,Ya).call(I)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=_t._colorManager.convert(this.color),a={annotationType:De.HIGHLIGHT,color:i,opacity:u(this,dr),thickness:u(this,Ts),quadPoints:k(this,Me,$E).call(this),outlines:k(this,Me,UE).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:k(this,Me,Ah).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!k(this,Me,HE).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Yc=new WeakMap,af=new WeakMap,hr=new WeakMap,Wo=new WeakMap,Jc=new WeakMap,Kn=new WeakMap,of=new WeakMap,lf=new WeakMap,qo=new WeakMap,Cs=new WeakMap,cs=new WeakMap,an=new WeakMap,Qc=new WeakMap,dr=new WeakMap,_n=new WeakMap,Zc=new WeakMap,Ts=new WeakMap,cf=new WeakMap,Me=new WeakSet,K0=function(){const t=new z0(u(this,hr),.001);b(this,Cs,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Cs).box;const n=new z0(u(this,hr),.0025,.001,this._uiManager.direction==="ltr");b(this,Kn,n.getOutlines());const{lastPoint:i}=u(this,Kn);b(this,Qc,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},lg=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var m,v;if(b(this,Cs,t),b(this,Kn,t.getNewOutline(u(this,Ts)/2+1.5,.0025)),n>=0)b(this,cs,n),b(this,Wo,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),b(this,_n,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Kn).box,path:{d:u(this,Kn).toSVGPath()}},!0));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,cs),{bbox:k(m=Je,Is,Zl).call(m,u(this,Cs).box,(_-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,_n),{bbox:k(v=Je,Is,Zl).call(v,u(this,Kn).box,_),path:{d:u(this,Kn).toSVGPath()}})}const[o,c,d,f]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=d,this.height=f;break;case 90:{const[_,A]=this.parentDimensions;this.x=c,this.y=1-o,this.width=d*A/_,this.height=f*_/A;break}case 180:this.x=1-o,this.y=1-c,this.width=d,this.height=f;break;case 270:{const[_,A]=this.parentDimensions;this.x=1-c,this.y=o,this.width=d*A/_,this.height=f*_/A;break}}const{lastPoint:g}=u(this,Kn);b(this,Qc,[(g[0]-o)/d,(g[1]-c)/f])},OE=function(t){const n=(o,c)=>{var d,f;this.color=o,b(this,dr,c),(d=this.parent)==null||d.drawLayer.updateProperties(u(this,cs),{root:{fill:o,"fill-opacity":c}}),(f=u(this,Jc))==null||f.updateColor(o)},i=this.color,a=u(this,dr);this.addCommands({cmd:n.bind(this,t,Je._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ve.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},DE=function(t){const n=u(this,Ts),i=a=>{b(this,Ts,a),k(this,Me,FE).call(this,a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ve.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},FE=function(t){if(!u(this,an))return;k(this,Me,lg).call(this,{highlightOutlines:u(this,Cs).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},X0=function(){u(this,cs)===null||!this.parent||(this.parent.drawLayer.remove(u(this,cs)),b(this,cs,null),this.parent.drawLayer.remove(u(this,_n)),b(this,_n,null))},Ya=function(t=this.parent){u(this,cs)===null&&({id:Cn(this,cs)._,clipPathId:Cn(this,Wo)._}=t.drawLayer.draw({bbox:u(this,Cs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,dr)},rootClass:{highlight:!0,free:u(this,an)},path:{d:u(this,Cs).toSVGPath()}},!1,!0),b(this,_n,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,an)},bbox:u(this,Kn).box,path:{d:u(this,Kn).toSVGPath()}},u(this,an))),u(this,qo)&&(u(this,qo).style.clipPath=u(this,Wo)))},Is=new WeakSet,Zl=function([t,n,i,a],o){switch(o){case 90:return[1-n-a,t,a,i];case 180:return[1-t-i,1-n-a,i,a];case 270:return[n,1-t-i,a,i]}return[t,n,i,a]},jE=function(t){Je._keyboardManager.exec(this,t)},cg=function(t){if(!u(this,Yc))return;const n=window.getSelection();t?n.setPosition(u(this,Yc),u(this,af)):n.setPosition(u(this,of),u(this,lf))},Ah=function(){return u(this,an)?this.rotation:0},$E=function(){if(u(this,an))return null;const[t,n]=this.pageDimensions,[i,a]=this.pageTranslation,o=u(this,hr),c=new Float32Array(o.length*8);let d=0;for(const{x:f,y:g,width:m,height:v}of o){const _=f*t+i,A=(1-g)*n+a;c[d]=c[d+4]=_,c[d+1]=c[d+3]=A,c[d+2]=c[d+6]=_+m*t,c[d+5]=c[d+7]=A-v*n,d+=8}return c},UE=function(t){return u(this,Cs).serialize(t,k(this,Me,Ah).call(this))},BE=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},zE=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},HE=function(t){const{color:n}=this._initialData;return t.color.some((i,a)=>i!==n[a])},E(Je,Is),ke(Je,"_defaultColor",null),ke(Je,"_defaultOpacity",1),ke(Je,"_defaultThickness",12),ke(Je,"_type","highlight"),ke(Je,"_editorType",De.HIGHLIGHT),ke(Je,"_freeHighlightId",-1),ke(Je,"_freeHighlight",null),ke(Je,"_freeHighlightClipId","");let kg=Je;var Ko;class _M{constructor(){E(this,Ko,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){u(this,Ko)[e]=t}toSVGProperties(){const e=u(this,Ko);return b(this,Ko,Object.create(null)),{root:e}}reset(){b(this,Ko,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){it("Not implemented")}}Ko=new WeakMap;var us,eu,Jt,Xo,Yo,ma,ya,va,Jo,Ke,J0,Q0,Z0,Sh,GE,ug,xh,ec;const de=class de extends _t{constructor(t){super(t);E(this,Ke);E(this,us,null);E(this,eu);ke(this,"_drawId",null);b(this,eu,t.mustBeCommitted||!1),t.drawOutlines&&(k(this,Ke,J0).call(this,t),k(this,Ke,Sh).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[a,o]of Object.entries(n))i.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){it("Not implemented")}static get typesMap(){it("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(u(de,Jt).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,n[a]]);return t}_updateProperty(t,n,i){const a=this._drawingOptions,o=a[n],c=d=>{var g;a.updateProperty(n,d);const f=u(this,us).updateProperty(n,d);f&&k(this,Ke,xh).call(this,f),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,de._mergeSVGProperties(u(this,us).getPathResizingSVGProperties(k(this,Ke,ug).call(this)),{bbox:k(this,Ke,ec).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,de._mergeSVGProperties(u(this,us).getPathResizedSVGProperties(k(this,Ke,ug).call(this)),{bbox:k(this,Ke,ec).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:k(this,Ke,ec).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,de._mergeSVGProperties(u(this,us).getPathTranslatedSVGProperties(k(this,Ke,ug).call(this),this.parentDimensions),{bbox:k(this,Ke,ec).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,eu)&&(b(this,eu,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,Ke,Z0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Ke,Sh).call(this),k(this,Ke,xh).call(this,u(this,us).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,Ke,Z0).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,Ke,Sh).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,de._mergeSVGProperties({bbox:k(this,Ke,ec).call(this)},u(this,us).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,Ke,xh).call(this,u(this,us).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,i,a,o){it("Not implemented")}static startDrawing(t,n,i,a){var C;const{target:o,offsetX:c,offsetY:d,pointerId:f,pointerType:g}=a;if(u(de,ya)&&u(de,ya)!==g)return;const{viewport:{rotation:m}}=t,{width:v,height:_}=o.getBoundingClientRect(),A=b(de,Xo,new AbortController),S=t.combinedSignal(A);if(u(de,ma)||b(de,ma,f),u(de,ya)??b(de,ya,g),window.addEventListener("pointerup",T=>{var I;u(de,ma)===T.pointerId?this._endDraw(T):(I=u(de,va))==null||I.delete(T.pointerId)},{signal:S}),window.addEventListener("pointercancel",T=>{var I;u(de,ma)===T.pointerId?this._currentParent.endDrawingSession():(I=u(de,va))==null||I.delete(T.pointerId)},{signal:S}),window.addEventListener("pointerdown",T=>{u(de,ya)===T.pointerType&&((u(de,va)||b(de,va,new Set)).add(T.pointerId),u(de,Jt).isCancellable()&&(u(de,Jt).removeLastElement(),u(de,Jt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",si,{signal:S}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),o.addEventListener("touchmove",T=>{T.timeStamp===u(de,Jo)&&gs(T)},{signal:S}),t.toggleDrawing(),(C=n._editorUndoBar)==null||C.hide(),u(de,Jt)){t.drawLayer.updateProperties(this._currentDrawId,u(de,Jt).startNew(c,d,v,_,m));return}n.updateUIForDefaultProperties(this),b(de,Jt,this.createDrawerInstance(c,d,v,_,m)),b(de,Yo,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(de,Yo).toSVGProperties(),u(de,Jt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(b(de,Jo,-1),!u(de,Jt))return;const{offsetX:n,offsetY:i,pointerId:a}=t;if(u(de,ma)===a){if(((o=u(de,va))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(de,Jt).add(n,i)),b(de,Jo,t.timeStamp),gs(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,b(de,Jt,null),b(de,Yo,null),b(de,ya,null),b(de,Jo,NaN)),u(de,Xo)&&(u(de,Xo).abort(),b(de,Xo,null),b(de,ma,NaN),b(de,va,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,u(de,Jt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=u(de,Jt),a=this._currentDrawId,o=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Ve.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ve.DRAW_STEP),!u(de,Jt).isEmpty()){const{pageDimensions:[i,a],scale:o}=n,c=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(de,Jt).getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:u(de,Yo),mustBeCommitted:!t});return this._cleanup(!0),c}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,a,o,c){it("Not implemented")}static async deserialize(t,n,i){var m,v;const{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:d}}=n.viewport,f=this.deserializeDraw(c,d,a,o,this._INNER_MARGIN,t),g=await super.deserialize(t,n,i);return g.createDrawingOptions(t),k(m=g,Ke,J0).call(m,{drawOutlines:f}),k(v=g,Ke,Sh).call(v),g.onScaleChanging(),g.rotate(),g}serializeDraw(t){const[n,i]=this.pageTranslation,[a,o]=this.pageDimensions;return u(this,us).serialize([n,i,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};us=new WeakMap,eu=new WeakMap,Jt=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,ma=new WeakMap,ya=new WeakMap,va=new WeakMap,Jo=new WeakMap,Ke=new WeakSet,J0=function({drawOutlines:t,drawId:n,drawingOptions:i}){b(this,us,t),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=k(this,Ke,Q0).call(this,t,this.parent),k(this,Ke,xh).call(this,t.box)},Q0=function(t,n){const{id:i}=n.drawLayer.draw(de._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},Z0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Sh=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,Ke,Q0).call(this,u(this,us),t)}},GE=function([t,n,i,a]){const{parentDimensions:[o,c],rotation:d}=this;switch(d){case 90:return[n,1-t,i*(c/o),a*(o/c)];case 180:return[1-t,1-n,i,a];case 270:return[1-n,t,i*(c/o),a*(o/c)];default:return[t,n,i,a]}},ug=function(){const{x:t,y:n,width:i,height:a,parentDimensions:[o,c],rotation:d}=this;switch(d){case 90:return[1-n,t,i*(o/c),a*(c/o)];case 180:return[1-t,1-n,i,a];case 270:return[n,1-t,i*(o/c),a*(c/o)];default:return[t,n,i,a]}},xh=function(t){if([this.x,this.y,this.width,this.height]=k(this,Ke,GE).call(this,t),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},ec=function(){const{x:t,y:n,width:i,height:a,rotation:o,parentRotation:c,parentDimensions:[d,f]}=this;switch((o*4+c)/90){case 1:return[1-n-a,t,a,i];case 2:return[1-t-i,1-n-a,i,a];case 3:return[n,1-t-i,a,i];case 4:return[t,n-i*(d/f),a*(f/d),i*(d/f)];case 5:return[1-n,t,i*(d/f),a*(f/d)];case 6:return[1-t-a*(f/d),1-n,a*(f/d),i*(d/f)];case 7:return[n-i*(d/f),1-t-a*(f/d),i*(d/f),a*(f/d)];case 8:return[t-i,n-a,i,a];case 9:return[1-n,t-i,a,i];case 10:return[1-t,1-n,i,a];case 11:return[n-a,1-t,a,i];case 12:return[t-a*(f/d),n,a*(f/d),i*(d/f)];case 13:return[1-n-i*(d/f),t-a*(f/d),i*(d/f),a*(f/d)];case 14:return[1-t,1-n-i*(d/f),a*(f/d),i*(d/f)];case 15:return[n,1-t,i*(d/f),a*(f/d)];default:return[t,n,i,a]}},ke(de,"_currentDrawId",-1),ke(de,"_currentParent",null),E(de,Jt,null),E(de,Xo,null),E(de,Yo,null),E(de,ma,NaN),E(de,ya,null),E(de,va,null),E(de,Jo,NaN),ke(de,"_INNER_MARGIN",3);let Y0=de;var Ei,Qt,Zt,Qo,tu,Rn,on,Ps,Zo,el,tl,nu,hg;class bM{constructor(e,t,n,i,a,o){E(this,nu);E(this,Ei,new Float64Array(6));E(this,Qt);E(this,Zt);E(this,Qo);E(this,tu);E(this,Rn);E(this,on,"");E(this,Ps,0);E(this,Zo,new Cg);E(this,el);E(this,tl);b(this,el,n),b(this,tl,i),b(this,Qo,a),b(this,tu,o),[e,t]=k(this,nu,hg).call(this,e,t);const c=b(this,Qt,[NaN,NaN,NaN,NaN,e,t]);b(this,Rn,[e,t]),b(this,Zt,[{line:c,points:u(this,Rn)}]),u(this,Ei).set(c,0)}updateProperty(e,t){e==="stroke-width"&&b(this,tu,t)}isEmpty(){return!u(this,Zt)||u(this,Zt).length===0}isCancellable(){return u(this,Rn).length<=10}add(e,t){[e,t]=k(this,nu,hg).call(this,e,t);const[n,i,a,o]=u(this,Ei).subarray(2,6),c=e-a,d=t-o;return Math.hypot(u(this,el)*c,u(this,tl)*d)<=2?null:(u(this,Rn).push(e,t),isNaN(n)?(u(this,Ei).set([a,o,e,t],2),u(this,Qt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Ei)[0])&&u(this,Qt).splice(6,6),u(this,Ei).set([n,i,a,o,e,t],0),u(this,Qt).push(...he.createBezierPoints(n,i,a,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(u(this,Rn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,a){b(this,el,n),b(this,tl,i),b(this,Qo,a),[e,t]=k(this,nu,hg).call(this,e,t);const o=b(this,Qt,[NaN,NaN,NaN,NaN,e,t]);b(this,Rn,[e,t]);const c=u(this,Zt).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),u(this,Zt).push({line:o,points:u(this,Rn)}),u(this,Ei).set(o,0),b(this,Ps,0),this.toSVGPath(),null}getLastElement(){return u(this,Zt).at(-1)}setLastElement(e){return u(this,Zt)?(u(this,Zt).push(e),b(this,Qt,e.line),b(this,Rn,e.points),b(this,Ps,0),{path:{d:this.toSVGPath()}}):u(this,Zo).setLastElement(e)}removeLastElement(){if(!u(this,Zt))return u(this,Zo).removeLastElement();u(this,Zt).pop(),b(this,on,"");for(let e=0,t=u(this,Zt).length;e<t;e++){const{line:n,points:i}=u(this,Zt)[e];b(this,Qt,n),b(this,Rn,i),b(this,Ps,0),this.toSVGPath()}return{path:{d:u(this,on)}}}toSVGPath(){const e=he.svgRound(u(this,Qt)[4]),t=he.svgRound(u(this,Qt)[5]);if(u(this,Rn).length===2)return b(this,on,`${u(this,on)} M ${e} ${t} Z`),u(this,on);if(u(this,Rn).length<=6){const i=u(this,on).lastIndexOf("M");b(this,on,`${u(this,on).slice(0,i)} M ${e} ${t}`),b(this,Ps,6)}if(u(this,Rn).length===4){const i=he.svgRound(u(this,Qt)[10]),a=he.svgRound(u(this,Qt)[11]);return b(this,on,`${u(this,on)} L ${i} ${a}`),b(this,Ps,12),u(this,on)}const n=[];u(this,Ps)===0&&(n.push(`M ${e} ${t}`),b(this,Ps,6));for(let i=u(this,Ps),a=u(this,Qt).length;i<a;i+=6){const[o,c,d,f,g,m]=u(this,Qt).slice(i,i+6).map(he.svgRound);n.push(`C${o} ${c} ${d} ${f} ${g} ${m}`)}return b(this,on,u(this,on)+n.join(" ")),b(this,Ps,u(this,Qt).length),u(this,on)}getOutlines(e,t,n,i){const a=u(this,Zt).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),u(this,Zo).build(u(this,Zt),e,t,n,u(this,Qo),u(this,tu),i),b(this,Ei,null),b(this,Qt,null),b(this,Zt,null),b(this,on,null),u(this,Zo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ei=new WeakMap,Qt=new WeakMap,Zt=new WeakMap,Qo=new WeakMap,tu=new WeakMap,Rn=new WeakMap,on=new WeakMap,Ps=new WeakMap,Zo=new WeakMap,el=new WeakMap,tl=new WeakMap,nu=new WeakSet,hg=function(e,t){return he._normalizePoint(e,t,u(this,el),u(this,tl),u(this,Qo))};var Ln,uf,hf,hs,ki,Ci,su,iu,ru,cn,zi,VE,WE,qE;const $w=class $w extends he{constructor(){super(...arguments);E(this,cn);E(this,Ln);E(this,uf,0);E(this,hf);E(this,hs);E(this,ki);E(this,Ci);E(this,su);E(this,iu);E(this,ru)}build(t,n,i,a,o,c,d){b(this,ki,n),b(this,Ci,i),b(this,su,a),b(this,iu,o),b(this,ru,c),b(this,hf,d??0),b(this,hs,t),k(this,cn,WE).call(this)}setLastElement(t){return u(this,hs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,hs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of u(this,hs)){if(t.push(`M${he.svgRound(n[4])} ${he.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${he.svgRound(n[10])} ${he.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[o,c,d,f,g,m]=n.subarray(i,i+6).map(he.svgRound);t.push(`C${o} ${c} ${d} ${f} ${g} ${m}`)}}return t.join("")}serialize([t,n,i,a],o){const c=[],d=[],[f,g,m,v]=k(this,cn,VE).call(this);let _,A,S,C,T,I,O,N,j;switch(u(this,iu)){case 0:j=he._rescale,_=t,A=n+a,S=i,C=-a,T=t+f*i,I=n+(1-g-v)*a,O=t+(f+m)*i,N=n+(1-g)*a;break;case 90:j=he._rescaleAndSwap,_=t,A=n,S=i,C=a,T=t+g*i,I=n+f*a,O=t+(g+v)*i,N=n+(f+m)*a;break;case 180:j=he._rescale,_=t+i,A=n,S=-i,C=a,T=t+(1-f-m)*i,I=n+g*a,O=t+(1-f)*i,N=n+(g+v)*a;break;case 270:j=he._rescaleAndSwap,_=t+i,A=n+a,S=-i,C=-a,T=t+(1-g-v)*i,I=n+(1-f-m)*a,O=t+(1-g)*i,N=n+(1-f)*a;break}for(const{line:G,points:V}of u(this,hs))c.push(j(G,_,A,S,C,o?new Array(G.length):null)),d.push(j(V,_,A,S,C,o?new Array(V.length):null));return{lines:c,points:d,rect:[T,I,O,N]}}static deserialize(t,n,i,a,o,{paths:{lines:c,points:d},rotation:f,thickness:g}){const m=[];let v,_,A,S,C;switch(f){case 0:C=he._rescale,v=-t/i,_=n/a+1,A=1/i,S=-1/a;break;case 90:C=he._rescaleAndSwap,v=-n/a,_=-t/i,A=1/a,S=1/i;break;case 180:C=he._rescale,v=t/i+1,_=-n/a,A=-1/i,S=1/a;break;case 270:C=he._rescaleAndSwap,v=n/a+1,_=t/i+1,A=-1/a,S=-1/i;break}if(!c){c=[];for(const I of d){const O=I.length;if(O===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,I[0],I[1]]));continue}if(O===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,I[0],I[1],NaN,NaN,NaN,NaN,I[2],I[3]]));continue}const N=new Float32Array(3*(O-2));c.push(N);let[j,G,V,Z]=I.subarray(0,4);N.set([NaN,NaN,NaN,NaN,j,G],0);for(let ie=4;ie<O;ie+=2){const we=I[ie],ce=I[ie+1];N.set(he.createBezierPoints(j,G,V,Z,we,ce),(ie-2)*3),[j,G,V,Z]=[V,Z,we,ce]}}}for(let I=0,O=c.length;I<O;I++)m.push({line:C(c[I].map(N=>N??NaN),v,_,A,S),points:C(d[I].map(N=>N??NaN),v,_,A,S)});const T=new $w;return T.build(m,i,a,1,f,g,o),T}get box(){return u(this,Ln)}updateProperty(t,n){return t==="stroke-width"?k(this,cn,qE).call(this,n):null}updateParentDimensions([t,n],i){const[a,o]=k(this,cn,zi).call(this);b(this,ki,t),b(this,Ci,n),b(this,su,i);const[c,d]=k(this,cn,zi).call(this),f=c-a,g=d-o,m=u(this,Ln);return m[0]-=f,m[1]-=g,m[2]+=2*f,m[3]+=2*g,m}updateRotation(t){return b(this,uf,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Ln).map(he.svgRound).join(" ")}get defaultProperties(){const[t,n]=u(this,Ln);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(t)} ${he.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=u(this,Ln);let i=0,a=0,o=0,c=0,d=0,f=0;switch(u(this,uf)){case 90:a=n/t,o=-t/n,d=t;break;case 180:i=-1,c=-1,d=t,f=n;break;case 270:a=-n/t,o=t/n,f=n;break;default:return""}return`matrix(${i} ${a} ${o} ${c} ${he.svgRound(d)} ${he.svgRound(f)})`}getPathResizingSVGProperties([t,n,i,a]){const[o,c]=k(this,cn,zi).call(this),[d,f,g,m]=u(this,Ln);if(Math.abs(g-o)<=he.PRECISION||Math.abs(m-c)<=he.PRECISION){const C=t+i/2-(d+g/2),T=n+a/2-(f+m/2);return{path:{"transform-origin":`${he.svgRound(t)} ${he.svgRound(n)}`,transform:`${this.rotationTransform} translate(${C} ${T})`}}}const v=(i-2*o)/(g-2*o),_=(a-2*c)/(m-2*c),A=g/i,S=m/a;return{path:{"transform-origin":`${he.svgRound(d)} ${he.svgRound(f)}`,transform:`${this.rotationTransform} scale(${A} ${S}) translate(${he.svgRound(o)} ${he.svgRound(c)}) scale(${v} ${_}) translate(${he.svgRound(-o)} ${he.svgRound(-c)})`}}}getPathResizedSVGProperties([t,n,i,a]){const[o,c]=k(this,cn,zi).call(this),d=u(this,Ln),[f,g,m,v]=d;if(d[0]=t,d[1]=n,d[2]=i,d[3]=a,Math.abs(m-o)<=he.PRECISION||Math.abs(v-c)<=he.PRECISION){const T=t+i/2-(f+m/2),I=n+a/2-(g+v/2);for(const{line:O,points:N}of u(this,hs))he._translate(O,T,I,O),he._translate(N,T,I,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(t)} ${he.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const _=(i-2*o)/(m-2*o),A=(a-2*c)/(v-2*c),S=-_*(f+o)+t+o,C=-A*(g+c)+n+c;if(_!==1||A!==1||S!==0||C!==0)for(const{line:T,points:I}of u(this,hs))he._rescale(T,S,C,_,A,T),he._rescale(I,S,C,_,A,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(t)} ${he.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[a,o]=i,c=u(this,Ln),d=t-c[0],f=n-c[1];if(u(this,ki)===a&&u(this,Ci)===o)for(const{line:g,points:m}of u(this,hs))he._translate(g,d,f,g),he._translate(m,d,f,m);else{const g=u(this,ki)/a,m=u(this,Ci)/o;b(this,ki,a),b(this,Ci,o);for(const{line:v,points:_}of u(this,hs))he._rescale(v,d,f,g,m,v),he._rescale(_,d,f,g,m,_);c[2]*=g,c[3]*=m}return c[0]=t,c[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(t)} ${he.svgRound(n)}`}}}get defaultSVGProperties(){const t=u(this,Ln);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(t[0])} ${he.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Ln=new WeakMap,uf=new WeakMap,hf=new WeakMap,hs=new WeakMap,ki=new WeakMap,Ci=new WeakMap,su=new WeakMap,iu=new WeakMap,ru=new WeakMap,cn=new WeakSet,zi=function(t=u(this,ru)){const n=u(this,hf)+t/2*u(this,su);return u(this,iu)%180===0?[n/u(this,ki),n/u(this,Ci)]:[n/u(this,Ci),n/u(this,ki)]},VE=function(){const[t,n,i,a]=u(this,Ln),[o,c]=k(this,cn,zi).call(this,0);return[t+o,n+c,i-2*o,a-2*c]},WE=function(){const t=b(this,Ln,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of u(this,hs)){if(a.length<=12){for(let d=4,f=a.length;d<f;d+=6){const[g,m]=a.subarray(d,d+2);t[0]=Math.min(t[0],g),t[1]=Math.min(t[1],m),t[2]=Math.max(t[2],g),t[3]=Math.max(t[3],m)}continue}let o=a[4],c=a[5];for(let d=6,f=a.length;d<f;d+=6){const[g,m,v,_,A,S]=a.subarray(d,d+6);ve.bezierBoundingBox(o,c,g,m,v,_,A,S,t),o=A,c=S}}const[n,i]=k(this,cn,zi).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]},qE=function(t){const[n,i]=k(this,cn,zi).call(this);b(this,ru,t);const[a,o]=k(this,cn,zi).call(this),[c,d]=[a-n,o-i],f=u(this,Ln);return f[0]-=c,f[1]-=d,f[2]+=2*c,f[3]+=2*d,f};let Cg=$w;var au;const Uw=class Uw extends _M{constructor(t){super();E(this,au);b(this,au,t),super.updateProperties({fill:"none",stroke:_t._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=u(this,au).realScale),super.updateSVGProperty(t,n)}clone(){const t=new Uw(u(this,au));return t.updateAll(this),t}};au=new WeakMap;let ew=Uw;var Vg,KE;const nc=class nc extends Y0{constructor(t){super({...t,name:"inkEditor"});E(this,Vg);this._willKeepAspectRatio=!0}static initialize(t,n){_t.initialize(t,n),this._defaultDrawingOptions=new ew(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return ze(this,"typesMap",new Map([[Ve.INK_THICKNESS,"stroke-width"],[Ve.INK_COLOR,"stroke"],[Ve.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,a,o){return new bM(t,n,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,a,o,c){return Cg.deserialize(t,n,i,a,o,c)}static async deserialize(t,n,i){let a=null;if(t instanceof Mw){const{data:{inkLists:c,rect:d,rotation:f,id:g,color:m,opacity:v,borderStyle:{rawWidth:_},popupRef:A},parent:{page:{pageNumber:S}}}=t;a=t={annotationType:De.INK,color:Array.from(m),thickness:_,opacity:v,paths:{points:c},boxes:null,pageIndex:S-1,rect:d.slice(0),rotation:f,id:g,deleted:!1,popupRef:A}}const o=await super.deserialize(t,n,i);return o.annotationElementId=t.id||null,o._initialData=a,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=nc.getDefaultDrawingOptions({stroke:ve.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":c,"stroke-width":d}}=this,f={annotationType:De.INK,color:_t._colorManager.convert(o),opacity:c,thickness:d,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?f:this.annotationElementId&&!k(this,Vg,KE).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(t){const{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Vg=new WeakSet,KE=function(t){const{color:n,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((c,d)=>c!==n[d])||t.thickness!==i||t.opacity!==a||t.pageIndex!==o},ke(nc,"_type","ink"),ke(nc,"_editorType",De.INK),ke(nc,"_defaultDrawingOptions",null);let tw=nc;var wt,ln,wa,fr,_a,ou,Ti,Pi,ds,lu,Ye,Eh,kh,dg,sw,fg,iw,pg,XE;const Lh=class Lh extends _t{constructor(t){super({...t,name:"stampEditor"});E(this,Ye);E(this,wt,null);E(this,ln,null);E(this,wa,null);E(this,fr,null);E(this,_a,null);E(this,ou,"");E(this,Ti,null);E(this,Pi,null);E(this,ds,!1);E(this,lu,!1);b(this,fr,t.bitmapUrl),b(this,_a,t.bitmapFile)}static initialize(t,n){_t.initialize(t,n)}static get supportedTypes(){return ze(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ze(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(De.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,d=await i.guess({name:"altText",request:{data:a,width:o,height:c,channels:a.length/(o*c)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var t;u(this,ln)&&(b(this,wt,null),this._uiManager.imageManager.deleteId(u(this,ln)),(t=u(this,Ti))==null||t.remove(),b(this,Ti,null),u(this,Pi)&&(clearTimeout(u(this,Pi)),b(this,Pi,null))),super.remove()}rebuild(){if(!this.parent){u(this,ln)&&k(this,Ye,dg).call(this);return}super.rebuild(),this.div!==null&&(u(this,ln)&&u(this,Ti)===null&&k(this,Ye,dg).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,wa)||u(this,wt)||u(this,fr)||u(this,_a)||u(this,ln))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),u(this,wt)?k(this,Ye,sw).call(this):k(this,Ye,dg).call(this),this.width&&!this.annotationElementId){const[i,a]=this.parentDimensions;this.setAt(t*i,n*a,this.width*i,this.height*a)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Pi)!==null&&clearTimeout(u(this,Pi)),b(this,Pi,setTimeout(()=>{b(this,Pi,null),k(this,Ye,iw).call(this)},200))}copyCanvas(t,n,i=!1){var _;t||(t=224);const{width:a,height:o}=u(this,wt),c=new e0;let d=u(this,wt),f=a,g=o,m=null;if(n){if(a>n||o>n){const Z=Math.min(n/a,n/o);f=Math.floor(a*Z),g=Math.floor(o*Z)}m=document.createElement("canvas");const A=m.width=Math.ceil(f*c.sx),S=m.height=Math.ceil(g*c.sy);u(this,ds)||(d=k(this,Ye,fg).call(this,A,S));const C=m.getContext("2d");C.filter=this._uiManager.hcmFilter;let T="white",I="#cfcfd8";this._uiManager.hcmFilter!=="none"?I="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",I="#42414d");const O=15,N=O*c.sx,j=O*c.sy,G=new OffscreenCanvas(N*2,j*2),V=G.getContext("2d");V.fillStyle=T,V.fillRect(0,0,N*2,j*2),V.fillStyle=I,V.fillRect(0,0,N,j),V.fillRect(N,j,N,j),C.fillStyle=C.createPattern(G,"repeat"),C.fillRect(0,0,A,S),C.drawImage(d,0,0,d.width,d.height,0,0,A,S)}let v=null;if(i){let A,S;if(c.symmetric&&d.width<t&&d.height<t)A=d.width,S=d.height;else if(d=u(this,wt),a>t||o>t){const I=Math.min(t/a,t/o);A=Math.floor(a*I),S=Math.floor(o*I),u(this,ds)||(d=k(this,Ye,fg).call(this,A,S))}const T=new OffscreenCanvas(A,S).getContext("2d",{willReadFrequently:!0});T.drawImage(d,0,0,d.width,d.height,0,0,A,S),v={width:A,height:S,data:T.getImageData(0,0,A,S).data}}return{canvas:m,width:f,height:g,imageData:v}}getImageForAltText(){return u(this,Ti)}static async deserialize(t,n,i){var S;let a=null;if(t instanceof mE){const{data:{rect:C,rotation:T,id:I,structParent:O,popupRef:N},container:j,parent:{page:{pageNumber:G}}}=t,V=j.querySelector("canvas"),Z=i.imageManager.getFromCanvas(j.id,V);V.remove();const ie=((S=await n._structTree.getAriaAttributes(`${kw}${I}`))==null?void 0:S.get("aria-label"))||"";a=t={annotationType:De.STAMP,bitmapId:Z.id,bitmap:Z.bitmap,pageIndex:G-1,rect:C.slice(0),rotation:T,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:ie},isSvg:!1,structParent:O,popupRef:N}}const o=await super.deserialize(t,n,i),{rect:c,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:m,accessibilityData:v}=t;g&&i.imageManager.isValidId(g)?(b(o,ln,g),d&&b(o,wt,d)):b(o,fr,f),b(o,ds,m);const[_,A]=o.pageDimensions;return o.width=(c[2]-c[0])/_,o.height=(c[3]-c[1])/A,o.annotationElementId=t.id||null,v&&(o.altTextData=v),o._initialData=a,b(o,lu,!!a),o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:De.STAMP,bitmapId:u(this,ln),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,ds),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=k(this,Ye,pg).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const d=k(this,Ye,XE).call(this,i);if(d.isSame)return null;d.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const c=u(this,ds)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(u(this,ln)))n.stamps.set(u(this,ln),{area:c,serialized:i}),i.bitmap=k(this,Ye,pg).call(this,!1);else if(u(this,ds)){const d=n.stamps.get(u(this,ln));c>d.area&&(d.area=c,d.serialized.bitmap.close(),d.serialized.bitmap=k(this,Ye,pg).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};wt=new WeakMap,ln=new WeakMap,wa=new WeakMap,fr=new WeakMap,_a=new WeakMap,ou=new WeakMap,Ti=new WeakMap,Pi=new WeakMap,ds=new WeakMap,lu=new WeakMap,Ye=new WeakSet,Eh=function(t,n=!1){if(!t){this.remove();return}b(this,wt,t.bitmap),n||(b(this,ln,t.id),b(this,ds,t.isSvg)),t.file&&b(this,ou,t.file.name),k(this,Ye,sw).call(this)},kh=function(){if(b(this,wa,null),this._uiManager.enableWaiting(!1),!!u(this,Ti)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,wt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,wt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},dg=function(){if(u(this,ln)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,ln)).then(i=>k(this,Ye,Eh).call(this,i,!0)).finally(()=>k(this,Ye,kh).call(this));return}if(u(this,fr)){const i=u(this,fr);b(this,fr,null),this._uiManager.enableWaiting(!0),b(this,wa,this._uiManager.imageManager.getFromUrl(i).then(a=>k(this,Ye,Eh).call(this,a)).finally(()=>k(this,Ye,kh).call(this)));return}if(u(this,_a)){const i=u(this,_a);b(this,_a,null),this._uiManager.enableWaiting(!0),b(this,wa,this._uiManager.imageManager.getFromFile(i).then(a=>k(this,Ye,Eh).call(this,a)).finally(()=>k(this,Ye,kh).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Lh.supportedTypesStr;const n=this._uiManager._signal;b(this,wa,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,Ye,Eh).call(this,a)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>k(this,Ye,kh).call(this))),t.click()},sw=function(){var m;const{div:t}=this;let{width:n,height:i}=u(this,wt);const[a,o]=this.pageDimensions,c=.75;if(this.width)n=this.width*a,i=this.height*o;else if(n>c*a||i>c*o){const v=Math.min(c*a/n,c*o/i);n*=v,i*=v}const[d,f]=this.parentDimensions;this.setDims(n*d/a,i*f/o),this._uiManager.enableWaiting(!1);const g=b(this,Ti,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=n/a,this.height=i/o,(m=this._initialOptions)!=null&&m.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,Ye,iw).call(this),u(this,lu)||(this.parent.addUndoableEditor(this),b(this,lu,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,ou)&&g.setAttribute("aria-label",u(this,ou))},fg=function(t,n){const{width:i,height:a}=u(this,wt);let o=i,c=a,d=u(this,wt);for(;o>2*t||c>2*n;){const f=o,g=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const m=new OffscreenCanvas(o,c);m.getContext("2d").drawImage(d,0,0,f,g,0,0,o,c),d=m.transferToImageBitmap()}return d},iw=function(){const[t,n]=this.parentDimensions,{width:i,height:a}=this,o=new e0,c=Math.ceil(i*t*o.sx),d=Math.ceil(a*n*o.sy),f=u(this,Ti);if(!f||f.width===c&&f.height===d)return;f.width=c,f.height=d;const g=u(this,ds)?u(this,wt):k(this,Ye,fg).call(this,c,d),m=f.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(g,0,0,g.width,g.height,0,0,c,d)},pg=function(t){if(t){if(u(this,ds)){const a=this._uiManager.imageManager.getSvgUrl(u(this,ln));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,wt),n.getContext("2d").drawImage(u(this,wt),0,0),n.toDataURL()}if(u(this,ds)){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*Ta.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Ta.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,o);return c.getContext("2d").drawImage(u(this,wt),0,0,u(this,wt).width,u(this,wt).height,0,0,a,o),c.transferToImageBitmap()}return structuredClone(u(this,wt))},XE=function(t){var c;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===n,o=(((c=t.accessibilityData)==null?void 0:c.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}},ke(Lh,"_type","stamp"),ke(Lh,"_editorType",De.STAMP);let nw=Lh;var nl,cu,Ri,ba,pr,Rs,Aa,uu,sl,Zs,gr,bn,mr,ye,Sa,gt,YE,fi,aw,ow,gg;const Bs=class Bs{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:d,viewport:f,l10n:g}){E(this,gt);E(this,nl);E(this,cu,!1);E(this,Ri,null);E(this,ba,null);E(this,pr,null);E(this,Rs,new Map);E(this,Aa,!1);E(this,uu,!1);E(this,sl,!1);E(this,Zs,null);E(this,gr,null);E(this,bn,null);E(this,mr,null);E(this,ye);const m=[...u(Bs,Sa).values()];if(!Bs._initialized){Bs._initialized=!0;for(const v of m)v.initialize(g,e)}e.registerEditorTypes(m),b(this,ye,e),this.pageIndex=t,this.div=n,b(this,nl,a),b(this,Ri,o),this.viewport=f,b(this,bn,d),this.drawLayer=c,this._structTree=i,u(this,ye).addLayer(this)}get isEmpty(){return u(this,Rs).size===0}get isInvisible(){return this.isEmpty&&u(this,ye).getMode()===De.NONE}updateToolbar(e){u(this,ye).updateToolbar(e)}updateMode(e=u(this,ye).getMode()){switch(k(this,gt,gg).call(this),e){case De.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case De.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case De.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of u(Bs,Sa).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,bn))==null?void 0:t.div)}setEditingState(e){u(this,ye).setEditingState(e)}addCommands(e){u(this,ye).addCommands(e)}cleanUndoStack(e){u(this,ye).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Ri))==null||t.div.classList.toggle("disabled",!e)}async enable(){b(this,sl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of u(this,Rs).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(u(this,ye).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!u(this,Ri)){b(this,sl,!1);return}const t=u(this,Ri).getEditableAnnotations();for(const n of t){if(n.hide(),u(this,ye).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}b(this,sl,!1)}disable(){var i;b(this,uu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const a of u(this,Rs).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}if(u(this,Ri)){const a=u(this,Ri).getEditableAnnotations();for(const o of a){const{id:c}=o.data;if(u(this,ye).isDeletedAnnotationElement(c))continue;let d=t.get(c);if(d){d.resetAnnotationElement(o),d.show(!1),o.show();continue}d=e.get(c),d&&(u(this,ye).addChangedExistingAnnotation(d),d.renderAnnotationElement(o)&&d.show(!1)),o.show()}}k(this,gt,gg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of u(Bs,Sa).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,uu,!1)}getEditableAnnotation(e){var t;return((t=u(this,Ri))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,ye).getActive()!==e&&u(this,ye).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,bn))!=null&&e.div&&!u(this,mr)){b(this,mr,new AbortController);const t=u(this,ye).combinedSignal(u(this,mr));u(this,bn).div.addEventListener("pointerdown",k(this,gt,YE).bind(this),{signal:t}),u(this,bn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,bn))!=null&&e.div&&u(this,mr)&&(u(this,mr).abort(),b(this,mr,null),u(this,bn).div.classList.remove("highlighting"))}enableClick(){if(u(this,ba))return;b(this,ba,new AbortController);const e=u(this,ye).combinedSignal(u(this,ba));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,ba))==null||e.abort(),b(this,ba,null)}attach(e){u(this,Rs).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,ye).isDeletedAnnotationElement(t)&&u(this,ye).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Rs).delete(e.id),(t=u(this,nl))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,uu)&&e.annotationElementId&&u(this,ye).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,ye).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,ye).addDeletedAnnotationElement(e.annotationElementId),_t.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,ye).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,sl)),u(this,ye).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,pr)&&(e._focusEventsAllowed=!1,b(this,pr,setTimeout(()=>{b(this,pr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,ye)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,nl))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return u(this,ye).getId()}combinedSignal(e){return u(this,ye).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,gt,fi))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){u(this,ye).updateToolbar(e),u(this,ye).updateMode(e);const{offsetX:n,offsetY:i}=k(this,gt,ow).call(this),a=this.getNextId(),o=k(this,gt,aw).call(this,{parent:this,id:a,x:n,y:i,uiManager:u(this,ye),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=u(Bs,Sa).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,ye)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),a=k(this,gt,aw).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:u(this,ye),isCentered:t,...n});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(k(this,gt,ow).call(this),!0)}setSelected(e){u(this,ye).setSelected(e)}toggleSelected(e){u(this,ye).toggleSelected(e)}unselect(e){u(this,ye).unselect(e)}pointerup(e){var n;const{isMac:t}=Nn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&u(this,Aa)&&(b(this,Aa,!1),!((n=u(this,gt,fi))!=null&&n.isDrawer&&u(this,gt,fi).supportMultipleDrawings))){if(!u(this,cu)){b(this,cu,!0);return}if(u(this,ye).getMode()===De.STAMP){u(this,ye).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(u(this,ye).getMode()===De.HIGHLIGHT&&this.enableTextSelection(),u(this,Aa)){b(this,Aa,!1);return}const{isMac:t}=Nn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(b(this,Aa,!0),(i=u(this,gt,fi))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=u(this,ye).getActive();b(this,cu,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),u(this,Zs)){u(this,gt,fi).startDrawing(this,u(this,ye),!1,e);return}u(this,ye).setCurrentDrawingSession(this),b(this,Zs,new AbortController);const t=u(this,ye).combinedSignal(u(this,Zs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(b(this,gr,null),this.commitOrRemove())},{signal:t}),u(this,gt,fi).startDrawing(this,u(this,ye),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&b(this,gr,t);return}u(this,gr)&&setTimeout(()=>{var t;(t=u(this,gr))==null||t.focus(),b(this,gr,null)},0)}endDrawingSession(e=!1){return u(this,Zs)?(u(this,ye).setCurrentDrawingSession(null),u(this,Zs).abort(),b(this,Zs,null),b(this,gr,null),u(this,gt,fi).endDrawing(e)):null}findNewParent(e,t,n){const i=u(this,ye).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return u(this,Zs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Zs)&&u(this,gt,fi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,ye).getActive())==null?void 0:e.parent)===this&&(u(this,ye).commitOrRemove(),u(this,ye).setActiveEditor(null)),u(this,pr)&&(clearTimeout(u(this,pr)),b(this,pr,null));for(const n of u(this,Rs).values())(t=u(this,nl))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Rs).clear(),u(this,ye).removeLayer(this)}render({viewport:e}){this.viewport=e,al(this.div,e);for(const t of u(this,ye).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,ye).commitOrRemove(),k(this,gt,gg).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,al(this.div,{rotation:n}),t!==n)for(const i of u(this,Rs).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,ye).viewParameters.realScale}};nl=new WeakMap,cu=new WeakMap,Ri=new WeakMap,ba=new WeakMap,pr=new WeakMap,Rs=new WeakMap,Aa=new WeakMap,uu=new WeakMap,sl=new WeakMap,Zs=new WeakMap,gr=new WeakMap,bn=new WeakMap,mr=new WeakMap,ye=new WeakMap,Sa=new WeakMap,gt=new WeakSet,YE=function(e){u(this,ye).unselectAll();const{target:t}=e;if(t===u(this,bn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,bn).div.contains(t)){const{isMac:n}=Nn.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,ye).showAllEditors("highlight",!0,!0),u(this,bn).div.classList.add("free"),this.toggleDrawing(),kg.startHighlighting(this,u(this,ye).direction==="ltr",{target:u(this,bn).div,x:e.x,y:e.y}),u(this,bn).div.addEventListener("pointerup",()=>{u(this,bn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,ye)._signal}),e.preventDefault()}},fi=function(){return u(Bs,Sa).get(u(this,ye).getMode())},aw=function(e){const t=u(this,gt,fi);return t?new t.prototype.constructor(e):null},ow=function(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),o=Math.max(0,t),c=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+i),f=(a+c)/2-e,g=(o+d)/2-t,[m,v]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:m,offsetY:v}},gg=function(){for(const e of u(this,Rs).values())e.isEmpty()&&e.remove()},ke(Bs,"_initialized",!1),E(Bs,Sa,new Map([U0,tw,nw,kg].map(e=>[e._editorType,e])));let rw=Bs;var ei,df,In,il,Wg,JE,Li,cw,QE,uw;const yn=class yn{constructor({pageIndex:e}){E(this,Li);E(this,ei,null);E(this,df,0);E(this,In,new Map);E(this,il,new Map);this.pageIndex=e}setParent(e){if(!u(this,ei)){b(this,ei,e);return}if(u(this,ei)!==e){if(u(this,In).size>0)for(const t of u(this,In).values())t.remove(),e.append(t);b(this,ei,e)}}static get _svgFactory(){return ze(this,"_svgFactory",new Nw)}draw(e,t=!1,n=!1){const i=Cn(this,df)._++,a=k(this,Li,cw).call(this),o=yn._svgFactory.createElement("defs");a.append(o);const c=yn._svgFactory.createElement("path");o.append(c);const d=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,il).set(i,c);const f=n?k(this,Li,QE).call(this,o,d):null,g=yn._svgFactory.createElement("use");return a.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(a,e),u(this,In).set(i,a),{id:i,clipPathId:`url(#${f})`}}drawOutline(e,t){const n=Cn(this,df)._++,i=k(this,Li,cw).call(this),a=yn._svgFactory.createElement("defs");i.append(a);const o=yn._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const m=yn._svgFactory.createElement("mask");a.append(m),d=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const v=yn._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const _=yn._svgFactory.createElement("use");m.append(_),_.setAttribute("href",`#${c}`),_.setAttribute("stroke","none"),_.setAttribute("fill","black"),_.setAttribute("fill-rule","nonzero"),_.classList.add("mask")}const f=yn._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return i.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(i,e),u(this,In).set(n,i),n}finalizeDraw(e,t){u(this,il).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:i,rootClass:a,path:o}=t,c=typeof e=="number"?u(this,In).get(e):e;if(c){if(n&&k(this,Li,uw).call(this,c,n),i&&k(d=yn,Wg,JE).call(d,c,i),a){const{classList:f}=c;for(const[g,m]of Object.entries(a))f.toggle(g,m)}if(o){const g=c.firstChild.firstChild;k(this,Li,uw).call(this,g,o)}}}updateParent(e,t){if(t===this)return;const n=u(this,In).get(e);n&&(u(t,ei).append(n),u(this,In).delete(e),u(t,In).set(e,n))}remove(e){u(this,il).delete(e),u(this,ei)!==null&&(u(this,In).get(e).remove(),u(this,In).delete(e))}destroy(){b(this,ei,null);for(const e of u(this,In).values())e.remove();u(this,In).clear(),u(this,il).clear()}};ei=new WeakMap,df=new WeakMap,In=new WeakMap,il=new WeakMap,Wg=new WeakSet,JE=function(e,[t,n,i,a]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*a}%`},Li=new WeakSet,cw=function(){const e=yn._svgFactory.create(1,1,!0);return u(this,ei).append(e),e.setAttribute("aria-hidden",!0),e},QE=function(e,t){const n=yn._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=yn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i},uw=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},E(yn,Wg);let lw=yn;globalThis.pdfjsTestingUtils={HighlightOutliner:z0};Re.AbortException;Re.AnnotationEditorLayer;Re.AnnotationEditorParamsType;Re.AnnotationEditorType;Re.AnnotationEditorUIManager;Re.AnnotationLayer;Re.AnnotationMode;Re.ColorPicker;Re.DOMSVGFactory;Re.DrawLayer;Re.FeatureTest;var AM=Re.GlobalWorkerOptions;Re.ImageKind;Re.InvalidPDFException;Re.MissingPDFException;Re.OPS;Re.OutputScale;Re.PDFDataRangeTransport;Re.PDFDateString;Re.PDFWorker;Re.PasswordResponses;Re.PermissionFlag;Re.PixelsPerInch;Re.RenderingCancelledException;Re.TextLayer;Re.TouchManager;Re.UnexpectedResponseException;Re.Util;Re.VerbosityLevel;Re.XfaLayer;Re.build;Re.createValidAbsoluteUrl;Re.fetchData;var SM=Re.getDocument;Re.getFilenameFromUrl;Re.getPdfFilenameFromUrl;Re.getXfaPageViewport;Re.isDataScheme;Re.isPdfFile;Re.noContextMenu;Re.normalizeUnicode;Re.setLayerDimensions;Re.shadow;Re.stopEvent;var xM=Re.version;const EM=()=>P.jsxs("div",{className:"text-center mb-8",children:[P.jsx("div",{className:"bg-blue-500/10 rounded-full w-16 h-16 md:w-20 md:h-20 mx-auto mb-4 flex items-center justify-center",children:P.jsx(Yg,{className:"h-8 w-8 md:h-12 md:w-12 text-blue-400"})}),P.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PrepAI Tool"}),P.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"AI That Turns Your Study Material into Practice Questions!"})]}),kM=({onReset:l,onOpenAiStudio:e})=>P.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3 mb-4",children:P.jsxs("button",{onClick:l,className:"flex items-center gap-1 md:gap-2 bg-red-500 hover:bg-red-600 text-white px-3 md:px-4 py-2 rounded-lg transition-all shadow-lg hover:shadow-red-500/20 text-sm md:text-base",children:[P.jsx(AL,{className:"h-4 w-4"}),"Reset"]})}),CM=({apiKey:l,onChange:e})=>P.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700/50",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[P.jsx(yL,{className:"h-4 w-4 text-purple-400"}),P.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Custom API Key (Optional)"})]}),P.jsx("input",{type:"text",value:l,onChange:t=>e(t.target.value),placeholder:"Enter your Gemini API key...",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-purple-500 focus:border-purple-500"})]});AM.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${xM}/pdf.worker.min.js`;const TM=l=>{if(l.includes("```json")){const e=l.match(/```json\n?([\s\S]*?)\n?```/);if(e&&e[1])return e[1].trim()}return l.startsWith("```")&&l.endsWith("```")?l.slice(3,-3).trim():l.trim()},PM=()=>{const[l,e]=q.useState([]),[t,n]=q.useState(null),[i,a]=q.useState("00:00"),[o,c]=q.useState({}),[d,f]=q.useState(""),[g,m]=q.useState(10),[v,_]=q.useState("Mixed"),[A,S]=q.useState(!1),[C,T]=q.useState("idle"),[I,O]=q.useState(""),[N,j]=q.useState("file"),[G,V]=q.useState(null),[Z,ie]=q.useState(!1),[we,ce]=q.useState(""),[Le,Ie]=q.useState("");q.useRef(null);const Ae=q.useRef(null),Ne=q.useRef(0),Q=q.useRef(null),te=()=>{Ae.current&&window.clearInterval(Ae.current),Ne.current=0,Ae.current=window.setInterval(()=>{Ne.current+=1;const pe=Math.floor(Ne.current/60),Oe=Ne.current%60;a(`${String(pe).padStart(2,"0")}:${String(Oe).padStart(2,"0")}`)},1e3)};q.useEffect(()=>()=>{Ae.current&&window.clearInterval(Ae.current)},[]);const K=pe=>{try{const Oe=JSON.parse(pe);e(Oe.questions),n(null),c({}),te(),T("idle")}catch{alert("Invalid JSON format. Please check your input."),T("idle")}},z=(pe,Oe)=>{c(We=>({...We,[`question${pe}`]:Oe}))},F=()=>{Ae.current&&window.clearInterval(Ae.current);let pe=0;l.forEach((Oe,We)=>{o[`question${We}`]===l[We].correct_answer&&pe++}),n(pe)},R=async()=>{try{const pe=await navigator.clipboard.readText();N==="json"?Ie(pe):f(pe)}catch{alert("Failed to read clipboard. Please paste manually.")}},U=()=>{e([]),n(null),c({}),f(""),Ie(""),O(""),V(null),T("idle"),Q.current&&(Q.current.value=""),Ae.current&&window.clearInterval(Ae.current),a("00:00")},W=()=>{window.open("https://aistudio.google.com/app","_blank")},ne=async pe=>{O("Processing image...");const Oe=await AI.createWorker();try{const We=URL.createObjectURL(pe);await Oe.loadLanguage("eng"),await Oe.initialize("eng");const{data:{text:xt}}=await Oe.recognize(We);return await Oe.terminate(),URL.revokeObjectURL(We),xt}catch(We){throw console.error("Error extracting text from image:",We),new Error("Failed to extract text from image")}},_e=async pe=>{O("Processing PDF...");try{const Oe=await pe.arrayBuffer(),We=await SM({data:Oe}).promise;let xt="";for(let xn=1;xn<=We.numPages;xn++){const bt=(await(await We.getPage(xn)).getTextContent()).items.map(It=>It.str).join(" ");xt+=bt+`
`}return xt}catch(Oe){throw console.error("Error extracting text from PDF:",Oe),new Error("Failed to extract text from PDF")}},le=async pe=>{var We;const Oe=(We=pe.target.files)==null?void 0:We[0];if(Oe)try{let xt="";if(Oe.type==="text/plain")xt=await Oe.text();else if(Oe.type.startsWith("image/"))xt=await ne(Oe);else if(Oe.type==="application/pdf")xt=await _e(Oe);else{alert("Unsupported file type. Please upload a text file, image, or PDF.");return}f(xt),O("Text extracted successfully!")}catch(xt){console.error("Error processing file:",xt),O("Error processing file. Please try again.")}},ae=()=>{if(!Le){alert("Please paste JSON content first!");return}T("analyzing"),setTimeout(()=>{K(Le)},1e3)},be=async()=>{if(!d){alert("Please paste or upload content first!");return}S(!0),T("analyzing");try{const Oe=new eI(we||"AIzaSyB5f7IXBzgiNXdocPDw9mF3RsMx7g6Y_NU").getGenerativeModel({model:"gemini-1.5-flash"});setTimeout(()=>{T("generating")},2e3);const We=`generate ${g} multiple choice questions from the following content.

difficulty level - ${v}

requirements:
- generate exactly ${g} questions
- don't generate duplicate questions
- only use information from the provided content
- each question must have exactly 4 answer options
- ensure one and only one correct answer per question
- output must be valid JSON format

question types to include:
- "what", "how", "why" questions
- fill in the blank questions
- which statement is correct/incorrect
- definition based questions

output format:
{
  "questions": [
    {
      "question": "What is photosynthesis?",
      "answers": [
        "Process of breathing",
        "Process of making food in plants",
        "Process of digestion",
        "Process of excretion"
      ],
      "correct_answer": "Process of making food in plants"
    }
  ]
}


content:
${d}`;console.log("Sending request to Gemini API...");const xn=(await Oe.generateContent(We)).response.text();console.log("Received raw response:",xn);const Se=TM(xn);console.log("Cleaned response:",Se);try{JSON.parse(Se)}catch{throw console.error("Invalid JSON response:",Se),new Error("Invalid JSON response from AI")}V({prompt:We,response:Se,timestamp:new Date().toLocaleString()}),K(Se)}catch(pe){const Oe=pe instanceof Error?pe.message:"Unknown error";console.error("Detailed error:",pe),alert(`Failed to generate questions: ${Oe}`),T("idle")}finally{S(!1)}},He=({type:pe,label:Oe,icon:We})=>P.jsxs("button",{onClick:()=>j(pe),className:`flex-1 flex items-center justify-center gap-1 text-xs sm:text-sm py-2 px-2 sm:px-4 transition-all border-b-2 ${N===pe?"text-blue-400 border-blue-400":"text-gray-400 border-transparent hover:text-gray-300 hover:border-gray-600"}`,children:[P.jsx(We,{className:"h-3 w-3 sm:h-4 sm:w-4"}),Oe]}),lt=()=>C==="idle"?null:P.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:P.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl shadow-xl flex flex-col items-center gap-4",children:[C==="analyzing"&&P.jsxs(P.Fragment,{children:[P.jsx(SL,{className:"h-12 w-12 text-blue-400 animate-pulse"}),P.jsx("p",{className:"text-lg text-gray-200",children:"Analyzing content..."})]}),C==="generating"&&P.jsxs(P.Fragment,{children:[P.jsx(xL,{className:"h-12 w-12 text-purple-400 animate-pulse"}),P.jsx("p",{className:"text-lg text-gray-200",children:"Generating questions..."})]})]})});return P.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-gray-100 p-4 md:p-8",children:[P.jsxs("div",{className:"max-w-4xl mx-auto",children:[P.jsx(EM,{}),P.jsxs("div",{className:"space-y-6",children:[P.jsx(kM,{onReset:U,onOpenAiStudio:W}),P.jsx(CM,{apiKey:we,onChange:ce}),P.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700",children:[P.jsxs("div",{className:"flex border-b border-gray-700",children:[P.jsx(He,{type:"file",label:"Upload File",icon:vS}),P.jsx(He,{type:"text",label:"Paste Text",icon:EL}),P.jsx(He,{type:"json",label:"Paste JSON",icon:mS})]}),P.jsxs("div",{className:"p-4 md:p-6 space-y-4",children:[N==="file"&&P.jsx("div",{className:"flex items-center gap-4",children:P.jsxs("label",{className:"flex-1",children:[P.jsxs("div",{className:"flex items-center gap-2 bg-gray-700/50 p-3 rounded-lg cursor-pointer hover:bg-gray-700/70 transition-all",children:[P.jsx(vS,{className:"h-5 w-5 text-blue-400"}),P.jsx("span",{className:"text-sm text-gray-300",children:"Upload File (Text, Image, or PDF)"})]}),P.jsx("input",{type:"file",ref:Q,onChange:le,accept:".txt,.pdf,image/*",className:"hidden"})]})}),N==="text"&&P.jsxs("div",{className:"space-y-2",children:[P.jsx("div",{className:"flex items-center gap-2",children:P.jsxs("button",{onClick:R,className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg transition-all text-sm",children:[P.jsx(gS,{className:"h-4 w-4"}),"Paste from Clipboard"]})}),P.jsx("textarea",{value:d,onChange:pe=>f(pe.target.value),placeholder:"Enter or paste your text here...",className:"w-full h-32 bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500"})]}),N==="json"&&P.jsxs("div",{className:"space-y-2",children:[P.jsx("div",{className:"flex items-center gap-2",children:P.jsxs("button",{onClick:R,className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg transition-all text-sm",children:[P.jsx(gS,{className:"h-4 w-4"}),"Paste from Clipboard"]})}),P.jsx("textarea",{value:Le,onChange:pe=>Ie(pe.target.value),placeholder:'Paste JSON in format: {"questions": }',className:"w-full h-32 bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500 font-mono"})]}),I&&P.jsxs("div",{className:"text-sm text-blue-400 flex items-center gap-2",children:[P.jsx(Oh,{className:"h-4 w-4 animate-spin"}),I]}),N!=="json"&&P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Questions"}),P.jsx("select",{value:g,onChange:pe=>m(Number(pe.target.value)),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500",children:[5,10,20,30].map(pe=>P.jsxs("option",{value:pe,children:[pe," Questions"]},pe))})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty Level"}),P.jsx("select",{value:v,onChange:pe=>_(pe.target.value),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500",children:["Mixed","Easy","Medium","Hard"].map(pe=>P.jsx("option",{value:pe,children:pe},pe))})]}),P.jsx("div",{className:"flex items-end",children:P.jsxs("button",{onClick:be,disabled:A||!d,className:"w-full flex items-center justify-center gap-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all",children:[A?P.jsx(Oh,{className:"h-4 w-4 animate-spin"}):P.jsx(Yg,{className:"h-4 w-4"}),"Generate Questions"]})})]}),N==="json"&&P.jsxs("button",{onClick:ae,disabled:!Le,className:"w-full flex items-center justify-center gap-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all",children:[P.jsx(mS,{className:"h-4 w-4"}),"Generate Quiz from JSON"]})]})]}),l.length>0&&P.jsxs("div",{className:"space-y-8",children:[P.jsx("div",{className:"space-y-6",children:l.map((pe,Oe)=>P.jsxs("div",{className:"bg-gray-800/50 p-4 md:p-6 rounded-lg shadow-lg hover:shadow-xl transition-all border border-gray-700/50",children:[P.jsxs("p",{className:"text-base md:text-lg font-semibold mb-4 text-gray-100",children:[Oe+1,". ",pe.question]}),P.jsx("div",{className:"space-y-2 md:space-y-3",children:pe.answers.map((We,xt)=>{const xn=o[`question${Oe}`]===We,Se=t!==null&&We===pe.correct_answer,Te=t!==null&&xn&&!Se;return P.jsxs("label",{className:`flex items-center space-x-3 p-2 md:p-3 rounded-lg cursor-pointer transition-all text-sm md:text-base
                              ${xn?"bg-blue-500/10 border border-blue-500/50":"hover:bg-gray-700/30"}
                              ${Se?"bg-green-500/10 border-green-500/50":""}
                              ${Te?"bg-red-500/10 border-red-500/50":""}`,children:[P.jsx("input",{type:"radio",name:`question${Oe}`,value:We,checked:xn,onChange:()=>z(Oe,We),className:"form-radio h-4 w-4 text-blue-500",disabled:t!==null}),P.jsx("span",{className:`flex-1 ${Se?"text-green-400":Te?"text-red-400":"text-gray-300"}`,children:We}),t!==null&&(Se?P.jsx(dL,{className:"h-4 w-4 text-green-400 flex-shrink-0"}):Te?P.jsx(CL,{className:"h-4 w-4 text-red-400 flex-shrink-0"}):null)]},xt)})}),t!==null&&P.jsx("div",{className:"mt-3 text-sm md:text-base",children:P.jsxs("p",{className:"text-green-400",children:["Ans:- ",pe.correct_answer]})})]},Oe))}),P.jsxs("div",{className:"flex justify-between items-center",children:[P.jsxs("button",{onClick:F,className:"flex items-center gap-1 md:gap-2 bg-green-500 hover:bg-green-600 text-white px-4 md:px-6 py-2 md:py-3 rounded-lg transition-all shadow-lg hover:shadow-green-500/20 text-sm md:text-base",disabled:t!==null,children:[P.jsx(fL,{className:"h-4 w-4 md:h-5 md:w-5"}),"Submit Answers"]}),P.jsx("div",{className:"fixed bottom-4 md:bottom-6 right-4 md:right-6 bg-gray-800/90 backdrop-blur-sm text-white px-4 md:px-6 py-2 md:py-3 rounded-lg shadow-lg border border-gray-700/50",children:P.jsx("p",{className:"text-base md:text-xl font-mono text-blue-400",children:i})})]}),t!==null&&P.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 p-6 md:p-8 rounded-lg text-center border border-blue-500/20 shadow-lg",children:[P.jsxs("p",{className:"text-xl md:text-2xl font-semibold",children:["Your Score:"," ",P.jsx("span",{className:"text-green-400 font-bold",children:t}),P.jsx("span",{className:"text-gray-400",children:" / "}),P.jsx("span",{className:"text-blue-400 font-bold",children:l.length})]}),P.jsxs("p",{className:"text-sm md:text-base text-gray-400 mt-2",children:["Time taken: ",i]})]})]}),G&&P.jsxs("div",{className:"mt-8",children:[P.jsxs("button",{onClick:()=>ie(!Z),className:"flex items-center gap-2 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all w-full",children:[P.jsx(hL,{className:"h-4 w-4"}),"Debug Info",Z?P.jsx(gL,{className:"h-4 w-4 ml-auto"}):P.jsx(pL,{className:"h-4 w-4 ml-auto"})]}),Z&&P.jsxs("div",{className:"mt-4 space-y-4",children:[P.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[P.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Timestamp"}),P.jsx("p",{className:"text-sm text-blue-400",children:G.timestamp})]}),P.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[P.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Prompt Sent to API"}),P.jsx("pre",{className:"text-sm text-gray-400 whitespace-pre-wrap bg-gray-900/50 p-3 rounded",children:G.prompt})]}),P.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[P.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"API Response"}),P.jsx("pre",{className:"text-sm text-gray-400 whitespace-pre-wrap bg-gray-900/50 p-3 rounded",children:G.response})]})]})]})]})]}),P.jsx(lt,{})]})},RM=({onToggleForm:l})=>{const[e,t]=q.useState(""),[n,i]=q.useState(""),[a,o]=q.useState(!1),[c,d]=q.useState(null),{signIn:f}=gf(),g=async m=>{m.preventDefault(),o(!0),d(null);try{const{error:v}=await f(e,n);if(v)throw v}catch(v){d(v.message||"Failed to sign in")}finally{o(!1)}};return P.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full",children:[P.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-white",children:"Log In"}),c&&P.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-400 p-3 rounded-lg mb-4 text-sm",children:c}),P.jsxs("form",{onSubmit:g,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),P.jsx("input",{id:"email",type:"email",value:e,onChange:m=>t(m.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"your@email.com"})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),P.jsx("input",{id:"password",type:"password",value:n,onChange:m=>i(m.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"})]}),P.jsxs("button",{type:"submit",disabled:a,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[a?P.jsx(Oh,{className:"h-4 w-4 animate-spin"}):P.jsx(Xv,{className:"h-4 w-4"}),"Log In"]})]}),P.jsxs("div",{className:"mt-4 text-center text-sm text-gray-400",children:["Don't have an account?"," ",P.jsx("button",{onClick:l,className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Sign Up"})]})]})},LM=({onToggleForm:l})=>{const[e,t]=q.useState(""),[n,i]=q.useState(""),[a,o]=q.useState(""),[c,d]=q.useState(!1),[f,g]=q.useState(null),[m,v]=q.useState(null),{signUp:_}=gf(),A=async S=>{if(S.preventDefault(),d(!0),g(null),v(null),n!==a){g("Passwords do not match"),d(!1);return}try{const{error:C}=await _(e,n);if(C)throw C;v("Registration successful! Please check your email for verification.")}catch(C){g(C.message||"Failed to sign up")}finally{d(!1)}};return P.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full",children:[P.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-white",children:"Sign Up"}),f&&P.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-400 p-3 rounded-lg mb-4 text-sm",children:f}),m&&P.jsx("div",{className:"bg-green-500/10 border border-green-500/50 text-green-400 p-3 rounded-lg mb-4 text-sm",children:m}),P.jsxs("form",{onSubmit:A,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),P.jsx("input",{id:"email",type:"email",value:e,onChange:S=>t(S.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"your@email.com"})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),P.jsx("input",{id:"password",type:"password",value:n,onChange:S=>i(S.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm Password"}),P.jsx("input",{id:"confirmPassword",type:"password",value:a,onChange:S=>o(S.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"})]}),P.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[c?P.jsx(Oh,{className:"h-4 w-4 animate-spin"}):P.jsx(kL,{className:"h-4 w-4"}),"Sign Up"]})]}),P.jsxs("div",{className:"mt-4 text-center text-sm text-gray-400",children:["Already have an account?"," ",P.jsx("button",{onClick:l,className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Log In"})]})]})},IM=()=>{const[l,e]=q.useState(!0);return P.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 flex flex-col items-center justify-center p-4",children:[P.jsxs("div",{className:"mb-8 text-center",children:[P.jsx("div",{className:"bg-blue-500/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:P.jsx(Yg,{className:"h-8 w-8 text-blue-400"})}),P.jsx("h1",{className:"text-2xl font-bold mb-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PrepAI Tool"}),P.jsx("p",{className:"text-sm text-gray-400",children:"Sign in to access AI-powered practice questions"})]}),l?P.jsx(RM,{onToggleForm:()=>e(!1)}):P.jsx(LM,{onToggleForm:()=>e(!0)})]})};function NM(){const[l,e]=q.useState(!1);return P.jsx(oL,{children:P.jsx(aP,{basename:"/prepai",children:P.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[P.jsx(PL,{}),P.jsxs(ZT,{children:[P.jsx(ch,{path:"/",element:P.jsx(NL,{})}),P.jsx(ch,{path:"/auth",element:P.jsx(IM,{})}),P.jsx(ch,{path:"/tool",element:P.jsx(TL,{children:P.jsx(PM,{})})}),P.jsx(ch,{path:"*",element:P.jsx(Tx,{to:"/",replace:!0})})]})]})})})}lT.createRoot(document.getElementById("root")).render(P.jsx(mx.StrictMode,{children:P.jsx(NM,{})}));export{hw as g};
